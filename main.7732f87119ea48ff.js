"use strict";(self.webpackChunkcoop_app=self.webpackChunkcoop_app||[]).push([[792],{681:(ln,it,Z)=>{Z.d(it,{kR:()=>qo});var N=Z(9126),Te=(Z(6276),Z(8934),Z(7037),Z(467)),re=Z(1631),K=Z(8779),mt=Z(1401),Ze=Z(5398);const ue=new Map,ce={activated:!1,tokenObservers:[]},Se={initialized:!1,enabled:!1};function tt(ge){return ue.get(ge)||Object.assign({},ce)}function Mt(){return Se}const Tn="https://content-firebaseappcheck.googleapis.com/v1",Hn="exchangeDebugToken",pn={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class vt{constructor(ye,Oe,rt,Ct,dn){if(this.operation=ye,this.retryPolicy=Oe,this.getWaitDuration=rt,this.lowerBound=Ct,this.upperBound=dn,this.pending=null,this.nextErrorWaitInterval=Ct,Ct>dn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ye){var Oe=this;return(0,Te.A)(function*(){Oe.stop();try{Oe.pending=new mt.cY,yield function ht(ge){return new Promise(ye=>{setTimeout(ye,ge)})}(Oe.getNextRun(ye)),Oe.pending.resolve(),yield Oe.pending.promise,Oe.pending=new mt.cY,yield Oe.operation(),Oe.pending.resolve(),yield Oe.pending.promise,Oe.process(!0).catch(()=>{})}catch(rt){Oe.retryPolicy(rt)?Oe.process(!1).catch(()=>{}):Oe.stop()}})()}getNextRun(ye){if(ye)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Oe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Oe}}}const kt=new mt.FA("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ft(ge){if(!tt(ge).activated)throw kt.create("use-before-activation",{appName:ge.name})}function Xn(ge,ye){return ze.apply(this,arguments)}function ze(){return(ze=(0,Te.A)(function*({url:ge,body:ye},Oe){const rt={"Content-Type":"application/json"},Ct=Oe.getImmediate({optional:!0});if(Ct){const Ii=yield Ct.getHeartbeatsHeader();Ii&&(rt["X-Firebase-Client"]=Ii)}const dn={method:"POST",body:JSON.stringify(ye),headers:rt};let qn,Ln;try{qn=yield fetch(ge,dn)}catch(Ii){throw kt.create("fetch-network-error",{originalErrorMessage:Ii?.message})}if(200!==qn.status)throw kt.create("fetch-status-error",{httpStatus:qn.status});try{Ln=yield qn.json()}catch(Ii){throw kt.create("fetch-parse-error",{originalErrorMessage:Ii?.message})}const mr=Ln.ttl.match(/^([\d.]+)(s)$/);if(!mr||!mr[2]||isNaN(Number(mr[1])))throw kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ln.ttl}`});const Nr=1e3*Number(mr[1]),vi=Date.now();return{token:Ln.token,expireTimeMillis:vi+Nr,issuedAtTimeMillis:vi}})).apply(this,arguments)}function an(ge,ye){const{projectId:Oe,appId:rt,apiKey:Ct}=ge.options;return{url:`${Tn}/projects/${Oe}/apps/${rt}:${Hn}?key=${Ct}`,body:{debug_token:ye}}}const Cr="firebase-app-check-database",wr=1,Dr="firebase-app-check-store";let Re=null;function Bn(){return(Bn=(0,Te.A)(function*(ge,ye){const rt=(yield function Be(){return Re||(Re=new Promise((ge,ye)=>{try{const Oe=indexedDB.open(Cr,wr);Oe.onsuccess=rt=>{ge(rt.target.result)},Oe.onerror=rt=>{var Ct;ye(kt.create("storage-open",{originalErrorMessage:null===(Ct=rt.target.error)||void 0===Ct?void 0:Ct.message}))},Oe.onupgradeneeded=rt=>{0===rt.oldVersion&&rt.target.result.createObjectStore(Dr,{keyPath:"compositeKey"})}}catch(Oe){ye(kt.create("storage-open",{originalErrorMessage:Oe?.message}))}}),Re)}()).transaction(Dr,"readwrite"),dn=rt.objectStore(Dr).put({compositeKey:ge,value:ye});return new Promise((qn,Ln)=>{dn.onsuccess=mr=>{qn()},rt.onerror=mr=>{var Nr;Ln(kt.create("storage-set",{originalErrorMessage:null===(Nr=mr.target.error)||void 0===Nr?void 0:Nr.message}))}})})).apply(this,arguments)}const fr=new Ze.Vy("@firebase/app-check");function Ur(ge,ye){return(0,mt.zW)()?function pt(ge,ye){return function $t(ge,ye){return Bn.apply(this,arguments)}(function Jn(ge){return`${ge.options.appId}-${ge.name}`}(ge),ye)}(ge,ye).catch(Oe=>{fr.warn(`Failed to write token to IndexedDB. Error: ${Oe}`)}):Promise.resolve()}function gn(){return Mt().enabled}function ni(){return Br.apply(this,arguments)}function Br(){return(Br=(0,Te.A)(function*(){const ge=Mt();if(ge.enabled&&ge.token)return ge.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const In={error:"UNKNOWN_ERROR"};function Vn(ge){return mt.K3.encodeString(JSON.stringify(ge),!1)}function gr(ge){return ri.apply(this,arguments)}function ri(){return(ri=(0,Te.A)(function*(ge,ye=!1){const Oe=ge.app;ft(Oe);const rt=tt(Oe);let dn,Ct=rt.token;if(Ct&&!Qi(Ct)&&(rt.token=void 0,Ct=void 0),!Ct){const mr=yield rt.cachedTokenPromise;mr&&(Qi(mr)?Ct=mr:yield Ur(Oe,void 0))}if(!ye&&Ct&&Qi(Ct))return{token:Ct.token};let Ln,qn=!1;if(gn()){rt.exchangeTokenPromise||(rt.exchangeTokenPromise=Xn(an(Oe,yield ni()),ge.heartbeatServiceProvider).finally(()=>{rt.exchangeTokenPromise=void 0}),qn=!0);const mr=yield rt.exchangeTokenPromise;return yield Ur(Oe,mr),rt.token=mr,{token:mr.token}}try{rt.exchangeTokenPromise||(rt.exchangeTokenPromise=rt.provider.getToken().finally(()=>{rt.exchangeTokenPromise=void 0}),qn=!0),Ct=yield tt(Oe).exchangeTokenPromise}catch(mr){"appCheck/throttled"===mr.code?fr.warn(mr.message):fr.error(mr),dn=mr}return Ct?dn?Ln=Qi(Ct)?{token:Ct.token,internalError:dn}:ss(dn):(Ln={token:Ct.token},rt.token=Ct,yield Ur(Oe,Ct)):Ln=ss(dn),qn&&function An(ge,ye){const Oe=tt(ge).tokenObservers;for(const rt of Oe)try{"EXTERNAL"===rt.type&&null!=ye.error?rt.error(ye.error):rt.next(ye)}catch{}}(Oe,Ln),Ln})).apply(this,arguments)}function Mr(ge){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,Te.A)(function*(ge){const ye=ge.app;ft(ye);const{provider:Oe}=tt(ye);if(gn()){const rt=yield ni(),{token:Ct}=yield Xn(an(ye,rt),ge.heartbeatServiceProvider);return{token:Ct}}{const{token:rt}=yield Oe.getToken();return{token:rt}}})).apply(this,arguments)}function cn(ge,ye){const Oe=tt(ge),rt=Oe.tokenObservers.filter(Ct=>Ct.next!==ye);0===rt.length&&Oe.tokenRefresher&&Oe.tokenRefresher.isRunning()&&Oe.tokenRefresher.stop(),Oe.tokenObservers=rt}function or(ge){const{app:ye}=ge,Oe=tt(ye);let rt=Oe.tokenRefresher;rt||(rt=function ms(ge){const{app:ye}=ge;return new vt((0,Te.A)(function*(){let rt;if(rt=tt(ye).token?yield gr(ge,!0):yield gr(ge),rt.error)throw rt.error;if(rt.internalError)throw rt.internalError}),()=>!0,()=>{const Oe=tt(ye);if(Oe.token){let rt=Oe.token.issuedAtTimeMillis+.5*(Oe.token.expireTimeMillis-Oe.token.issuedAtTimeMillis)+3e5;return rt=Math.min(rt,Oe.token.expireTimeMillis-3e5),Math.max(0,rt-Date.now())}return 0},pn.RETRIAL_MIN_WAIT,pn.RETRIAL_MAX_WAIT)}(ge),Oe.tokenRefresher=rt),!rt.isRunning()&&Oe.isTokenAutoRefreshEnabled&&rt.start()}function Qi(ge){return ge.expireTimeMillis-Date.now()>0}function ss(ge){return{token:Vn(In),error:ge}}class vr{constructor(ye,Oe){this.app=ye,this.heartbeatServiceProvider=Oe}_delete(){const{tokenObservers:ye}=tt(this.app);for(const Oe of ye)cn(this.app,Oe.next);return Promise.resolve()}}const da="app-check-internal";!function Go(){(0,re.om)(new K.uA("app-check",ge=>function _i(ge,ye){return new vr(ge,ye)}(ge.getProvider("app").getImmediate(),ge.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ge,ye,Oe)=>{ge.getProvider(da).initialize()})),(0,re.om)(new K.uA(da,ge=>function zi(ge){return{getToken:ye=>gr(ge,ye),getLimitedUseToken:()=>Mr(ge),addTokenListener:ye=>function Kr(ge,ye,Oe,rt){const{app:Ct}=ge,dn=tt(Ct);if(dn.tokenObservers=[...dn.tokenObservers,{next:Oe,error:rt,type:ye}],dn.token&&Qi(dn.token)){const Ln=dn.token;Promise.resolve().then(()=>{Oe({token:Ln.token}),or(ge)}).catch(()=>{})}dn.cachedTokenPromise.then(()=>or(ge))}(ge,"INTERNAL",ye),removeTokenListener:ye=>cn(ge.app,ye)}}(ge.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,re.KO)("@firebase/app-check","0.8.0")}();class qo{constructor(){return(0,N.CA)("app-check")}}typeof window<"u"&&window},8934:(ln,it,Z)=>{Z.d(it,{MW:()=>tt,Wp:()=>fn,XU:()=>Me,gL:()=>Te});var N=Z(7037),he=Z(6276),Ie=Z(9126);class Me{constructor(vt){return vt}}class Te{constructor(){return(0,N.Dk)()}}const mt=new he.nKC("angularfire2._apps"),Ze={provide:Me,useFactory:function K(bt){return bt&&1===bt.length?bt[0]:new Me((0,N.Sx)())},deps:[[new he.Xx1,mt]]},ue={provide:Te,deps:[[new he.Xx1,mt]]};function ce(bt){return(vt,ht)=>{const Xe=vt.runOutsideAngular(()=>bt(ht));return new Me(Xe)}}let Se=(()=>{class bt{constructor(ht){(0,N.KO)("angularfire",Ie.xv.full,"core"),(0,N.KO)("angularfire",Ie.xv.full,"app"),(0,N.KO)("angular",he.xvI.full,ht.toString())}}return bt.\u0275fac=function(ht){return new(ht||bt)(he.KVO(he.Agw))},bt.\u0275mod=he.$C({type:bt}),bt.\u0275inj=he.G2t({providers:[Ze,ue]}),bt})();function tt(bt,...vt){return{ngModule:Se,providers:[{provide:mt,useFactory:ce(bt),multi:!0,deps:[he.SKi,he.zZn,Ie.u0,...vt]}]}}const fn=(0,Ie.S3)(N.Wp,!0)},9676:(ln,it,Z)=>{Z.d(it,{Nj:()=>Fl,DF:()=>tl,xI:()=>Ny,_q:()=>Rd,x9:()=>nc,CI:()=>rc});var N=Z(9126),he=Z(6276),Ie=Z(8934),Me=Z(7037),Te=Z(681),re=Z(467),K=Z(1401),mt=Z(1631),Ze=Z(1635),ue=Z(5398),ce=Z(8779);const pn=function Dt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new K.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new ue.Vy("@firebase/auth");function kt(T,...p){ht.logLevel<=ue.$b.ERROR&&ht.error(`Auth (${mt.MF}): ${T}`,...p)}function Ne(T,...p){throw Xn(T,...p)}function ft(T,...p){return Xn(T,...p)}function Xn(T,...p){if("string"!=typeof T){const y=p[0],S=[...p.slice(1)];return S[0]&&(S[0].appName=T.name),T._errorFactory.create(y,...S)}return bt.create(T,...p)}function ze(T,p,...y){if(!T)throw Xn(p,...y)}function Ut(T){const p="INTERNAL ASSERTION FAILED: "+T;throw kt(p),new Error(p)}function hr(T,p){T||Ut(p)}function an(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function wr(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Re{constructor(p,y){this.shortDelay=p,this.longDelay=y,hr(y>p,"Short delay should be less than long delay!"),this.isMobile=(0,K.jZ)()||(0,K.lV)()}get(){return function Dr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Cr(){return"http:"===wr()||"https:"===wr()}()||(0,K.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Be(T,p){hr(T.emulator,"Emulator should always be set here");const{url:y}=T.emulator;return p?`${y}${p.startsWith("/")?p.slice(1):p}`:y}class je{static initialize(p,y,S){this.fetchImpl=p,y&&(this.headersImpl=y),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gt=new Re(3e4,6e4);function Nt(T,p){return T.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:T.tenantId}):p}function $t(T,p,y,S){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,re.A)(function*(T,p,y,S,$={}){return Xt(T,$,(0,re.A)(function*(){let J={},ve={};S&&("GET"===p?ve=S:J={body:JSON.stringify(S)});const Le=(0,K.Am)(Object.assign({key:T.config.apiKey},ve)).slice(1),St=yield T._getAdditionalHeaders();return St["Content-Type"]="application/json",T.languageCode&&(St["X-Firebase-Locale"]=T.languageCode),je.fetch()(Tt(T,T.config.apiHost,y,Le),Object.assign({method:p,headers:St,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function Xt(T,p,y){return sr.apply(this,arguments)}function sr(){return(sr=(0,re.A)(function*(T,p,y){T._canInitEmulator=!1;const S=Object.assign(Object.assign({},pt),p);try{const $=new $r(T),J=yield Promise.race([y(),$.promise]);$.clearNetworkTimeout();const ve=yield J.json();if("needConfirmation"in ve)throw Ur(T,"account-exists-with-different-credential",ve);if(J.ok&&!("errorMessage"in ve))return ve;{const Le=J.ok?ve.errorMessage:ve.error.message,[St,Kt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw Ur(T,"credential-already-in-use",ve);if("EMAIL_EXISTS"===St)throw Ur(T,"email-already-in-use",ve);if("USER_DISABLED"===St)throw Ur(T,"user-disabled",ve);const wn=S[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(Kt)throw function jt(T,p,y){const S=Object.assign(Object.assign({},pn()),{[p]:y});return new K.FA("auth","Firebase",S).create(p,{appName:T.name})}(T,wn,Kt);Ne(T,wn)}}catch($){if($ instanceof K.g)throw $;Ne(T,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function Jn(T,p,y,S){return fr.apply(this,arguments)}function fr(){return(fr=(0,re.A)(function*(T,p,y,S,$={}){const J=yield $t(T,p,y,S,$);return"mfaPendingCredential"in J&&Ne(T,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function Tt(T,p,y,S){const $=`${p}${y}?${S}`;return T.config.emulator?Be(T.config,$):`${T.config.apiScheme}://${$}`}class $r{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((y,S)=>{this.timer=setTimeout(()=>S(ft(this.auth,"network-request-failed")),gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ur(T,p,y){const S={appName:T.name};y.email&&(S.email=y.email),y.phoneNumber&&(S.phoneNumber=y.phoneNumber);const $=ft(T,p,S);return $.customData._tokenResponse=y,$}function Cn(){return(Cn=(0,re.A)(function*(T,p){return $t(T,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Pr(){return(Pr=(0,re.A)(function*(T,p){return $t(T,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function In(T){if(T)try{const p=new Date(Number(T));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ri(){return(ri=(0,re.A)(function*(T,p=!1){const y=(0,K.Ku)(T),S=yield y.getIdToken(p),$=Wr(S);ze($&&$.exp&&$.auth_time&&$.iat,y.auth,"internal-error");const J="object"==typeof $.firebase?$.firebase:void 0,ve=J?.sign_in_provider;return{claims:$,token:S,authTime:In(Mr($.auth_time)),issuedAtTime:In(Mr($.iat)),expirationTime:In(Mr($.exp)),signInProvider:ve||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function Mr(T){return 1e3*Number(T)}function Wr(T){const[p,y,S]=T.split(".");if(void 0===p||void 0===y||void 0===S)return kt("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,K.u)(y);return $?JSON.parse($):(kt("Failed to decode base64 JWT payload"),null)}catch($){return kt("Caught error parsing JWT payload as JSON",$?.toString()),null}}function cn(T,p){return or.apply(this,arguments)}function or(){return(or=(0,re.A)(function*(T,p,y=!1){if(y)return p;try{return yield p}catch(S){throw S instanceof K.g&&function ms({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}(S)&&T.auth.currentUser===T&&(yield T.auth.signOut()),S}})).apply(this,arguments)}class An{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var y;if(p){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const $=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(p=!1){var y=this;if(!this.isRunning)return;const S=this.getInterval(p);this.timerId=setTimeout((0,re.A)(function*(){yield y.iteration()}),S)}iteration(){var p=this;return(0,re.A)(function*(){try{yield p.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&p.schedule(!0))}p.schedule()})()}}class Qi{constructor(p,y){this.createdAt=p,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=In(this.lastLoginAt),this.creationTime=In(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ss(T){return vr.apply(this,arguments)}function vr(){return vr=(0,re.A)(function*(T){var p;const y=T.auth,S=yield T.getIdToken(),$=yield cn(T,function Br(T,p){return Pr.apply(this,arguments)}(y,{idToken:S}));ze($?.users.length,y,"internal-error");const J=$.users[0];T._notifyReloadListener(J);const ve=null!==(p=J.providerUserInfo)&&void 0!==p&&p.length?function nt(T){return T.map(p=>{var{providerId:y}=p,S=(0,Ze.Tt)(p,["providerId"]);return{providerId:y,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}(J.providerUserInfo):[],Le=function Qe(T,p){return[...T.filter(S=>!p.some($=>$.providerId===S.providerId)),...p]}(T.providerData,ve),wn=!!T.isAnonymous&&!(T.email&&J.passwordHash||Le?.length),tn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:Le,metadata:new Qi(J.createdAt,J.lastLoginAt),isAnonymous:wn};Object.assign(T,tn)}),vr.apply(this,arguments)}function zi(){return(zi=(0,re.A)(function*(T){const p=(0,K.Ku)(T);yield ss(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function sn(){return(sn=(0,re.A)(function*(T,p){const y=yield Xt(T,{},(0,re.A)(function*(){const S=(0,K.Am)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:$,apiKey:J}=T.config,ve=Tt(T,$,"/v1/token",`key=${J}`),Le=yield T._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",je.fetch()(ve,{method:"POST",headers:Le,body:S})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ze(p.idToken,"internal-error"),ze(typeof p.idToken<"u","internal-error"),ze(typeof p.refreshToken<"u","internal-error");const y="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Kr(T){const p=Wr(T);return ze(p,"internal-error"),ze(typeof p.exp<"u","internal-error"),ze(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,y)}getToken(p){var y=this;return(0,re.A)(function*(S,$=!1){return ze(!y.accessToken||y.refreshToken,S,"user-token-expired"),$||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(S,y.refreshToken),y.accessToken):null:y.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(p,y){var S=this;return(0,re.A)(function*(){const{accessToken:$,refreshToken:J,expiresIn:ve}=yield function zt(T,p){return sn.apply(this,arguments)}(p,y);S.updateTokensAndExpiration($,J,Number(ve))})()}updateTokensAndExpiration(p,y,S){this.refreshToken=y||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(p,y){const{refreshToken:S,accessToken:$,expirationTime:J}=y,ve=new kn;return S&&(ze("string"==typeof S,"internal-error",{appName:p}),ve.refreshToken=S),$&&(ze("string"==typeof $,"internal-error",{appName:p}),ve.accessToken=$),J&&(ze("number"==typeof J,"internal-error",{appName:p}),ve.expirationTime=J),ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new kn,this.toJSON())}_performRefresh(){return Ut("not implemented")}}function Sn(T,p){ze("string"==typeof T||typeof T>"u","internal-error",{appName:p})}class Ir{constructor(p){var{uid:y,auth:S,stsTokenManager:$}=p,J=(0,Ze.Tt)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new An(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=S,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new Qi(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(p){var y=this;return(0,re.A)(function*(){const S=yield cn(y,y.stsTokenManager.getToken(y.auth,p));return ze(S,y.auth,"internal-error"),y.accessToken!==S&&(y.accessToken=S,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),S})()}getIdTokenResult(p){return function gr(T){return ri.apply(this,arguments)}(this,p)}reload(){return function _i(T){return zi.apply(this,arguments)}(this)}_assign(p){this!==p&&(ze(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(y=>Object.assign({},y)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const y=new Ir(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(p){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p){var y=this;return(0,re.A)(function*(S,$=!1){let J=!1;S.idToken&&S.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(S),J=!0),$&&(yield ss(y)),yield y.auth._persistUserIfCurrent(y),J&&y.auth._notifyListenersIfCurrent(y)}).apply(this,arguments)}delete(){var p=this;return(0,re.A)(function*(){const y=yield p.getIdToken();return yield cn(p,function Si(T,p){return Cn.apply(this,arguments)}(p.auth,{idToken:y})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,y){var S,$,J,ve,Le,St,Kt,wn;const tn=null!==(S=y.displayName)&&void 0!==S?S:void 0,Gr=null!==($=y.email)&&void 0!==$?$:void 0,Zr=null!==(J=y.phoneNumber)&&void 0!==J?J:void 0,lr=null!==(ve=y.photoURL)&&void 0!==ve?ve:void 0,Ll=null!==(Le=y.tenantId)&&void 0!==Le?Le:void 0,wh=null!==(St=y._redirectEventId)&&void 0!==St?St:void 0,Th=null!==(Kt=y.createdAt)&&void 0!==Kt?Kt:void 0,Tg=null!==(wn=y.lastLoginAt)&&void 0!==wn?wn:void 0,{uid:Bf,emailVerified:jf,isAnonymous:$f,providerData:Vl,stsTokenManager:sl}=y;ze(Bf&&sl,p,"internal-error");const Ul=kn.fromJSON(this.name,sl);ze("string"==typeof Bf,p,"internal-error"),Sn(tn,p.name),Sn(Gr,p.name),ze("boolean"==typeof jf,p,"internal-error"),ze("boolean"==typeof $f,p,"internal-error"),Sn(Zr,p.name),Sn(lr,p.name),Sn(Ll,p.name),Sn(wh,p.name),Sn(Th,p.name),Sn(Tg,p.name);const Nd=new Ir({uid:Bf,auth:p,email:Gr,emailVerified:jf,displayName:tn,isAnonymous:$f,photoURL:lr,phoneNumber:Zr,tenantId:Ll,stsTokenManager:Ul,createdAt:Th,lastLoginAt:Tg});return Vl&&Array.isArray(Vl)&&(Nd.providerData=Vl.map(Od=>Object.assign({},Od))),wh&&(Nd._redirectEventId=wh),Nd}static _fromIdTokenResponse(p,y){return(0,re.A)(function*(S,$,J=!1){const ve=new kn;ve.updateFromServerResponse($);const Le=new Ir({uid:$.localId,auth:S,stsTokenManager:ve,isAnonymous:J});return yield ss(Le),Le}).apply(this,arguments)}}const ae=new Map;function q(T){hr(T instanceof Function,"Expected a class definition");let p=ae.get(T);return p?(hr(p instanceof T,"Instance stored in cache mismatched with class"),p):(p=new T,ae.set(T,p),p)}const W=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,re.A)(function*(){return!0})()}_set(y,S){var $=this;return(0,re.A)(function*(){$.storage[y]=S})()}_get(y){var S=this;return(0,re.A)(function*(){const $=S.storage[y];return void 0===$?null:$})()}_remove(y){var S=this;return(0,re.A)(function*(){delete S.storage[y]})()}_addListener(y,S){}_removeListener(y,S){}}return T.type="NONE",T})();function X(T,p,y){return`firebase:${T}:${p}:${y}`}class we{constructor(p,y,S){this.persistence=p,this.auth=y,this.userKey=S;const{config:$,name:J}=this.auth;this.fullUserKey=X(this.userKey,$.apiKey,J),this.fullPersistenceKey=X("persistence",$.apiKey,J),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,re.A)(function*(){const y=yield p.persistence._get(p.fullUserKey);return y?Ir._fromJSON(p.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var y=this;return(0,re.A)(function*(){if(y.persistence===p)return;const S=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=p,S?y.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,y){return(0,re.A)(function*(S,$,J="authUser"){if(!$.length)return new we(q(W),S,J);const ve=(yield Promise.all($.map(function(){var tn=(0,re.A)(function*(Gr){if(yield Gr._isAvailable())return Gr});return function(Gr){return tn.apply(this,arguments)}}()))).filter(tn=>tn);let Le=ve[0]||q(W);const St=X(J,S.config.apiKey,S.name);let Kt=null;for(const tn of $)try{const Gr=yield tn._get(St);if(Gr){const Zr=Ir._fromJSON(S,Gr);tn!==Le&&(Kt=Zr),Le=tn;break}}catch{}const wn=ve.filter(tn=>tn._shouldAllowMigration);return Le._shouldAllowMigration&&wn.length?(Le=wn[0],Kt&&(yield Le._set(St,Kt.toJSON())),yield Promise.all($.map(function(){var tn=(0,re.A)(function*(Gr){if(Gr!==Le)try{yield Gr._remove(St)}catch{}});return function(Gr){return tn.apply(this,arguments)}}())),new we(Le,S,J)):new we(Le,S,J)}).apply(this,arguments)}}function at(T){const p=T.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Er(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ft(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(br(p))return"Blackberry";if(Gs(p))return"Webos";if(Rn(p))return"Safari";if((p.includes("chrome/")||En(p))&&!p.includes("edge/"))return"Chrome";if(Fn(p))return"Android";{const S=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===S?.length)return S[1]}return"Other"}function Ft(T=(0,K.ZQ)()){return/firefox\//i.test(T)}function Rn(T=(0,K.ZQ)()){const p=T.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function En(T=(0,K.ZQ)()){return/crios\//i.test(T)}function Er(T=(0,K.ZQ)()){return/iemobile/i.test(T)}function Fn(T=(0,K.ZQ)()){return/android/i.test(T)}function br(T=(0,K.ZQ)()){return/blackberry/i.test(T)}function Gs(T=(0,K.ZQ)()){return/webos/i.test(T)}function Yi(T=(0,K.ZQ)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Gn(T=(0,K.ZQ)()){return Yi(T)||Fn(T)||Gs(T)||br(T)||/windows phone/i.test(T)||Er(T)}function Go(T,p=[]){let y;switch(T){case"Browser":y=at((0,K.ZQ)());break;case"Worker":y=`${at((0,K.ZQ)())}-${T}`;break;default:y=T}const S=p.length?p.join(","):"FirebaseCore-web";return`${y}/JsCore/${mt.MF}/${S}`}function qo(T,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,re.A)(function*(T,p){return $t(T,"GET","/v2/recaptchaConfig",Nt(T,p))})).apply(this,arguments)}function ha(T){return void 0!==T&&void 0!==T.enterprise}class Hi{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function Nn(T){return new Promise((p,y)=>{const S=document.createElement("script");S.setAttribute("src",T),S.onload=p,S.onerror=$=>{const J=ft("internal-error");J.customData=$,y(J)},S.type="text/javascript",S.charset="UTF-8",function Xi(){var T,p;return null!==(p=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==p?p:document}().appendChild(S)})}function Wo(T){return`__${T}${Math.floor(1e6*Math.random())}`}class Ji{constructor(p){this.type="recaptcha-enterprise",this.auth=ge(p)}verify(){var p=this;return(0,re.A)(function*(y="verify",S=!1){function J(){return J=(0,re.A)(function*(Le){if(!S){if(null==Le.tenantId&&null!=Le._agentRecaptchaConfig)return Le._agentRecaptchaConfig.siteKey;if(null!=Le.tenantId&&void 0!==Le._tenantRecaptchaConfigs[Le.tenantId])return Le._tenantRecaptchaConfigs[Le.tenantId].siteKey}return new Promise(function(){var St=(0,re.A)(function*(Kt,wn){qo(Le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const Gr=new Hi(tn);return null==Le.tenantId?Le._agentRecaptchaConfig=Gr:Le._tenantRecaptchaConfigs[Le.tenantId]=Gr,Kt(Gr.siteKey)}wn(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{wn(tn)})});return function(Kt,wn){return St.apply(this,arguments)}}())}),J.apply(this,arguments)}function ve(Le,St,Kt){const wn=window.grecaptcha;ha(wn)?wn.enterprise.ready(()=>{wn.enterprise.execute(Le,{action:y}).then(tn=>{St(tn)}).catch(()=>{St("NO_RECAPTCHA")})}):Kt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Le,St)=>{(function $(Le){return J.apply(this,arguments)})(p.auth).then(Kt=>{if(!S&&ha(window.grecaptcha))ve(Kt,Le,St);else{if(typeof window>"u")return void St(new Error("RecaptchaVerifier is only supported in browser"));Nn("https://www.google.com/recaptcha/enterprise.js?render="+Kt).then(()=>{ve(Kt,Le,St)}).catch(wn=>{St(wn)})}}).catch(Kt=>{St(Kt)})})}).apply(this,arguments)}}function as(T,p,y){return uo.apply(this,arguments)}function uo(){return(uo=(0,re.A)(function*(T,p,y,S=!1){const $=new Ji(T);let J;try{J=yield $.verify(y)}catch{J=yield $.verify(y,!0)}const ve=Object.assign({},p);return Object.assign(ve,S?{captchaResp:J}:{captchaResponse:J}),Object.assign(ve,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ve,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ve})).apply(this,arguments)}class co{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,y){const S=J=>new Promise((ve,Le)=>{try{ve(p(J))}catch(St){Le(St)}});S.onAbort=y,this.queue.push(S);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(p){var y=this;return(0,re.A)(function*(){if(y.auth.currentUser===p)return;const S=[];try{for(const $ of y.queue)yield $(p),$.onAbort&&S.push($.onAbort)}catch($){S.reverse();for(const J of S)try{J()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class lu{constructor(p,y,S,$){this.app=p,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=S,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ye(this),this.idTokenSubscription=new ye(this),this.beforeStateQueue=new co(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(p,y){var S=this;return y&&(this._popupRedirectResolver=q(y)),this._initializationPromise=this.queue((0,re.A)(function*(){var $,J;if(!S._deleted&&(S.persistenceManager=yield we.create(S,p),!S._deleted)){if(null!==($=S._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch{}yield S.initializeCurrentUser(y),S.lastNotifiedUid=(null===(J=S.currentUser)||void 0===J?void 0:J.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,re.A)(function*(){if(p._deleted)return;const y=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||y){if(p.currentUser&&y&&p.currentUser.uid===y.uid)return p._currentUser._assign(y),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(y,!0)}})()}initializeCurrentUser(p){var y=this;return(0,re.A)(function*(){var S;const $=yield y.assertedPersistence.getCurrentUser();let J=$,ve=!1;if(p&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Le=null===(S=y.redirectUser)||void 0===S?void 0:S._redirectEventId,St=J?._redirectEventId,Kt=yield y.tryRedirectSignIn(p);(!Le||Le===St)&&Kt?.user&&(J=Kt.user,ve=!0)}if(!J)return y.directlySetCurrentUser(null);if(!J._redirectEventId){if(ve)try{yield y.beforeStateQueue.runMiddleware(J)}catch(Le){J=$,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Le))}return J?y.reloadAndSetCurrentUserOrClear(J):y.directlySetCurrentUser(null)}return ze(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===J._redirectEventId?y.directlySetCurrentUser(J):y.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(p){var y=this;return(0,re.A)(function*(){let S=null;try{S=yield y._popupRedirectResolver._completeRedirectFn(y,p,!0)}catch{yield y._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(p){var y=this;return(0,re.A)(function*(){try{yield ss(p)}catch(S){if("auth/network-request-failed"!==S?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function xe(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var p=this;return(0,re.A)(function*(){p._deleted=!0})()}updateCurrentUser(p){var y=this;return(0,re.A)(function*(){const S=p?(0,K.Ku)(p):null;return S&&ze(S.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(S&&S._clone(y))})()}_updateCurrentUser(p){var y=this;return(0,re.A)(function*(S,$=!1){if(!y._deleted)return S&&ze(y.tenantId===S.tenantId,y,"tenant-id-mismatch"),$||(yield y.beforeStateQueue.runMiddleware(S)),y.queue((0,re.A)(function*(){yield y.directlySetCurrentUser(S),y.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var p=this;return(0,re.A)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var y=this;return this.queue((0,re.A)(function*(){yield y.assertedPersistence.setPersistence(q(p))}))}initializeRecaptchaConfig(){var p=this;return(0,re.A)(function*(){const y=yield qo(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),S=new Hi(y);null==p.tenantId?p._agentRecaptchaConfig=S:p._tenantRecaptchaConfigs[p.tenantId]=S,S.emailPasswordEnabled&&new Ji(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new K.FA("auth","Firebase",p())}onAuthStateChanged(p,y,S){return this.registerStateListener(this.authStateSubscription,p,y,S)}beforeAuthStateChanged(p,y){return this.beforeStateQueue.pushCallback(p,y)}onIdTokenChanged(p,y,S){return this.registerStateListener(this.idTokenSubscription,p,y,S)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,y){var S=this;return(0,re.A)(function*(){const $=yield S.getOrInitRedirectPersistenceManager(y);return null===p?$.removeCurrentUser():$.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var y=this;return(0,re.A)(function*(){if(!y.redirectPersistenceManager){const S=p&&q(p)||y._popupRedirectResolver;ze(S,y,"argument-error"),y.redirectPersistenceManager=yield we.create(y,[q(S._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(p){var y=this;return(0,re.A)(function*(){var S,$;return y._isInitialized&&(yield y.queue((0,re.A)(function*(){}))),(null===(S=y._currentUser)||void 0===S?void 0:S._redirectEventId)===p?y._currentUser:(null===($=y.redirectUser)||void 0===$?void 0:$._redirectEventId)===p?y.redirectUser:null})()}_persistUserIfCurrent(p){var y=this;return(0,re.A)(function*(){if(p===y.currentUser)return y.queue((0,re.A)(function*(){return y.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(y=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,y,S,$){if(this._deleted)return()=>{};const J="function"==typeof y?y:y.next.bind(y),ve=this._isInitialized?Promise.resolve():this._initializationPromise;return ze(ve,this,"internal-error"),ve.then(()=>J(this.currentUser)),"function"==typeof y?p.addObserver(y,S,$):p.addObserver(y)}directlySetCurrentUser(p){var y=this;return(0,re.A)(function*(){y.currentUser&&y.currentUser!==p&&y._currentUser._stopProactiveRefresh(),p&&y.isProactiveRefreshEnabled&&p._startProactiveRefresh(),y.currentUser=p,p?yield y.assertedPersistence.setCurrentUser(p):yield y.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Go(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,re.A)(function*(){var y;const S={"X-Client-Version":p.clientVersion};p.app.options.appId&&(S["X-Firebase-gmpid"]=p.app.options.appId);const $=yield null===(y=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();$&&(S["X-Firebase-Client"]=$);const J=yield p._getAppCheckToken();return J&&(S["X-Firebase-AppCheck"]=J),S})()}_getAppCheckToken(){var p=this;return(0,re.A)(function*(){var y;const S=yield null===(y=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return S?.error&&function Xe(T,...p){ht.logLevel<=ue.$b.WARN&&ht.warn(`Auth (${mt.MF}): ${T}`,...p)}(`Error while retrieving App Check token: ${S.error}`),S?.token})()}}function ge(T){return(0,K.Ku)(T)}class ye{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,K.tD)(y=>this.observer=y)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dn(T){const p=T.indexOf(":");return p<0?"":T.substr(0,p+1)}function Ln(T){if(!T)return null;const p=Number(T);return isNaN(p)?null:p}class Nr{constructor(p,y){this.providerId=p,this.signInMethod=y}toJSON(){return Ut("not implemented")}_getIdTokenResponse(p){return Ut("not implemented")}_linkToIdToken(p,y){return Ut("not implemented")}_getReauthenticationResolver(p){return Ut("not implemented")}}function Ni(T,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,re.A)(function*(T,p){return $t(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function du(T,p){return lc.apply(this,arguments)}function lc(){return(lc=(0,re.A)(function*(T,p){return Jn(T,"POST","/v1/accounts:signInWithPassword",Nt(T,p))})).apply(this,arguments)}function Dn(){return(Dn=(0,re.A)(function*(T,p){return Jn(T,"POST","/v1/accounts:signInWithEmailLink",Nt(T,p))})).apply(this,arguments)}function Ei(){return(Ei=(0,re.A)(function*(T,p){return Jn(T,"POST","/v1/accounts:signInWithEmailLink",Nt(T,p))})).apply(this,arguments)}class Ws extends Nr{constructor(p,y,S,$=null){super("password",S),this._email=p,this._password=y,this._tenantId=$}static _fromEmailAndPassword(p,y){return new Ws(p,y,"password")}static _fromEmailAndCode(p,y,S=null){return new Ws(p,y,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(p){var y=this;return(0,re.A)(function*(){var S;switch(y.signInMethod){case"password":const $={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(S=p._getRecaptchaConfig())&&void 0!==S&&S.emailPasswordEnabled){const J=yield as(p,$,"signInWithPassword");return du(p,J)}return du(p,$).catch(function(){var J=(0,re.A)(function*(ve){if("auth/missing-recaptcha-token"===ve.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Le=yield as(p,$,"signInWithPassword");return du(p,Le)}return Promise.reject(ve)});return function(ve){return J.apply(this,arguments)}}());case"emailLink":return function ga(T,p){return Dn.apply(this,arguments)}(p,{email:y._email,oobCode:y._password});default:Ne(p,"internal-error")}})()}_linkToIdToken(p,y){var S=this;return(0,re.A)(function*(){switch(S.signInMethod){case"password":return Ni(p,{idToken:y,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function ai(T,p){return Ei.apply(this,arguments)}(p,{idToken:y,email:S._email,oobCode:S._password});default:Ne(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function yr(T,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,re.A)(function*(T,p){return Jn(T,"POST","/v1/accounts:signInWithIdp",Nt(T,p))})).apply(this,arguments)}class xs{constructor(p){var y,S,$,J,ve,Le;const St=(0,K.I9)((0,K.hp)(p)),Kt=null!==(y=St.apiKey)&&void 0!==y?y:null,wn=null!==(S=St.oobCode)&&void 0!==S?S:null,tn=function hi(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=St.mode)&&void 0!==$?$:null);ze(Kt&&wn&&tn,"argument-error"),this.apiKey=Kt,this.operation=tn,this.code=wn,this.continueUrl=null!==(J=St.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(ve=St.languageCode)&&void 0!==ve?ve:null,this.tenantId=null!==(Le=St.tenantId)&&void 0!==Le?Le:null}static parseLink(p){const y=function ya(T){const p=(0,K.I9)((0,K.hp)(T)).link,y=p?(0,K.I9)((0,K.hp)(p)).deep_link_id:null,S=(0,K.I9)((0,K.hp)(T)).deep_link_id;return(S?(0,K.I9)((0,K.hp)(S)).link:null)||S||y||p||T}(p);try{return new xs(y)}catch{return null}}}let ho=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(y,S){return Ws._fromEmailAndPassword(y,S)}static credentialWithLink(y,S){const $=xs.parseLink(S);return ze($,"argument-error"),Ws._fromEmailAndCode(y,$.code,$.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Zi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Vu extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Qs{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,y,S){return(0,re.A)(function*($,J,ve,Le=!1){const St=yield Ir._fromIdTokenResponse($,ve,Le),Kt=Uu(ve);return new Qs({user:St,providerId:Kt,_tokenResponse:ve,operationType:J})}).apply(this,arguments)}static _forOperation(p,y,S){return(0,re.A)(function*(){yield p._updateTokensIfNecessary(S,!0);const $=Uu(S);return new Qs({user:p,providerId:$,_tokenResponse:S,operationType:y})})()}}function Uu(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}class us extends K.g{constructor(p,y,S,$){var J;super(y.code,y.message),this.operationType=S,this.user=$,Object.setPrototypeOf(this,us.prototype),this.customData={appName:p.name,tenantId:null!==(J=p.tenantId)&&void 0!==J?J:void 0,_serverResponse:y.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(p,y,S,$){return new us(p,y,S,$)}}function Ys(T,p,y,S){return("reauthenticate"===p?y._getReauthenticationResolver(T):y._getIdTokenResponse(T)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?us._fromErrorAndOperation(T,J,p,S):J})}function zr(){return(zr=(0,re.A)(function*(T,p,y=!1){const S=yield cn(T,p._linkToIdToken(T.auth,yield T.getIdToken()),y);return Qs._forOperation(T,"link",S)})).apply(this,arguments)}function cs(){return(cs=(0,re.A)(function*(T,p,y=!1){const{auth:S}=T,$="reauthenticate";try{const J=yield cn(T,Ys(S,$,p,T),y);ze(J.idToken,S,"internal-error");const ve=Wr(J.idToken);ze(ve,S,"internal-error");const{sub:Le}=ve;return ze(T.uid===Le,S,"user-mismatch"),Qs._forOperation(T,$,J)}catch(J){throw"auth/user-not-found"===J?.code&&Ne(S,"user-mismatch"),J}})).apply(this,arguments)}function fc(T,p){return ur.apply(this,arguments)}function ur(){return(ur=(0,re.A)(function*(T,p,y=!1){const S="signIn",$=yield Ys(T,S,p),J=yield Qs._fromIdTokenResponse(T,S,$);return y||(yield T._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Bu(){return(Bu=(0,re.A)(function*(T,p){return fc(ge(T),p)})).apply(this,arguments)}function xi(T,p,y){return function Ea(T,p){return Bu.apply(this,arguments)}((0,K.Ku)(T),ho.credential(p,y))}function ii(T){return(0,K.Ku)(T).signOut()}const Ya="__sak";class Da{constructor(p,y){this.storageRetriever=p,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ya,"1"),this.storage.removeItem(Ya),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,y){return this.storage.setItem(p,JSON.stringify(y)),Promise.resolve()}_get(p){const y=this.storage.getItem(p);return Promise.resolve(y?JSON.parse(y):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tl=(()=>{class T extends Da{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,S)=>this.onStorageEvent(y,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Lr(){const T=(0,K.ZQ)();return Rn(T)||Yi(T)}()&&function da(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Gn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const S of Object.keys(this.listeners)){const $=this.storage.getItem(S),J=this.localCache[S];$!==J&&y(S,J,$)}}onStorageEvent(y,S=!1){if(!y.key)return void this.forAllChangedKeys((Le,St,Kt)=>{this.notifyListeners(Le,Kt)});const $=y.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem($);if(y.newValue!==Le)null!==y.newValue?this.storage.setItem($,y.newValue):this.storage.removeItem($);else if(this.localCache[$]===y.newValue&&!S)return}const J=()=>{const Le=this.storage.getItem($);!S&&this.localCache[$]===Le||this.notifyListeners($,Le)},ve=this.storage.getItem($);!function qs(){return(0,K.lT)()&&10===document.documentMode}()||ve===y.newValue||y.newValue===y.oldValue?J():setTimeout(J,10)}notifyListeners(y,S){this.localCache[y]=S;const $=this.listeners[y];if($)for(const J of Array.from($))J(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,S,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:S,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(S)}_removeListener(y,S){this.listeners[y]&&(this.listeners[y].delete(S),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,S){var $=()=>super._set,J=this;return(0,re.A)(function*(){yield $().call(J,y,S),J.localCache[y]=JSON.stringify(S)})()}_get(y){var S=()=>super._get,$=this;return(0,re.A)(function*(){const J=yield S().call($,y);return $.localCache[y]=JSON.stringify(J),J})()}_remove(y){var S=()=>super._remove,$=this;return(0,re.A)(function*(){yield S().call($,y),delete $.localCache[y]})()}}return T.type="LOCAL",T})(),ds=(()=>{class T extends Da{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,S){}_removeListener(y,S){}}return T.type="SESSION",T})();let vc=(()=>{class T{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const S=this.receivers.find(J=>J.isListeningto(y));if(S)return S;const $=new T(y);return this.receivers.push($),$}isListeningto(y){return this.eventTarget===y}handleEvent(y){var S=this;return(0,re.A)(function*(){const $=y,{eventId:J,eventType:ve,data:Le}=$.data,St=S.handlersMap[ve];if(!St?.size)return;$.ports[0].postMessage({status:"ack",eventId:J,eventType:ve});const Kt=Array.from(St).map(function(){var tn=(0,re.A)(function*(Gr){return Gr($.origin,Le)});return function(Gr){return tn.apply(this,arguments)}}()),wn=yield function ki(T){return Promise.all(T.map(function(){var p=(0,re.A)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(S){return{fulfilled:!1,reason:S}}});return function(y){return p.apply(this,arguments)}}()))}(Kt);$.ports[0].postMessage({status:"done",eventId:J,eventType:ve,response:wn})})()}_subscribe(y,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(S)}_unsubscribe(y,S){this.handlersMap[y]&&S&&this.handlersMap[y].delete(S),(!S||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function Ic(T="",p=10){let y="";for(let S=0;S<p;S++)y+=Math.floor(10*Math.random());return T+y}class Al{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,y){var S=this;return(0,re.A)(function*($,J,ve=50){const Le=typeof MessageChannel<"u"?new MessageChannel:null;if(!Le)throw new Error("connection_unavailable");let St,Kt;return new Promise((wn,tn)=>{const Gr=Ic("",20);Le.port1.start();const Zr=setTimeout(()=>{tn(new Error("unsupported_event"))},ve);Kt={messageChannel:Le,onMessage(lr){const Ll=lr;if(Ll.data.eventId===Gr)switch(Ll.data.status){case"ack":clearTimeout(Zr),St=setTimeout(()=>{tn(new Error("timeout"))},3e3);break;case"done":clearTimeout(St),wn(Ll.data.response);break;default:clearTimeout(Zr),clearTimeout(St),tn(new Error("invalid_response"))}}},S.handlers.add(Kt),Le.port1.addEventListener("message",Kt.onMessage),S.target.postMessage({eventType:$,eventId:Gr,data:J},[Le.port2])}).finally(()=>{Kt&&S.removeMessageHandler(Kt)})}).apply(this,arguments)}}function $n(){return window}function gi(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function mi(){return(mi=(0,re.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mn="firebaseLocalStorageDb",vo="firebaseLocalStorage",md="fbase_key";class ks{constructor(p){this.request=p}toPromise(){return new Promise((p,y)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function qu(T,p){return T.transaction([vo],p?"readwrite":"readonly").objectStore(vo)}function Ca(){const T=indexedDB.open(mn,1);return new Promise((p,y)=>{T.addEventListener("error",()=>{y(T.error)}),T.addEventListener("upgradeneeded",()=>{const S=T.result;try{S.createObjectStore(vo,{keyPath:md})}catch($){y($)}}),T.addEventListener("success",(0,re.A)(function*(){const S=T.result;S.objectStoreNames.contains(vo)?p(S):(S.close(),yield function ba(){const T=indexedDB.deleteDatabase(mn);return new ks(T).toPromise()}(),p(yield Ca()))}))})}function yd(T,p,y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,re.A)(function*(T,p,y){const S=qu(T,!0).put({[md]:p,value:y});return new ks(S).toPromise()})).apply(this,arguments)}function Dl(){return(Dl=(0,re.A)(function*(T,p){const y=qu(T,!1).get(p),S=yield new ks(y).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function Xc(T,p){const y=qu(T,!0).delete(p);return new ks(y).toPromise()}const Eu=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,re.A)(function*(){return y.db||(y.db=yield Ca()),y.db})()}_withRetries(y){var S=this;return(0,re.A)(function*(){let $=0;for(;;)try{const J=yield S._openDb();return yield y(J)}catch(J){if($++>3)throw J;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,re.A)(function*(){return gi()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,re.A)(function*(){y.receiver=vc._getInstance(function Es(){return gi()?self:null}()),y.receiver._subscribe("keyChanged",function(){var S=(0,re.A)(function*($,J){return{keyProcessed:(yield y._poll()).includes(J.key)}});return function($,J){return S.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var S=(0,re.A)(function*($,J){return["keyChanged"]});return function($,J){return S.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,re.A)(function*(){var S,$;if(y.activeServiceWorker=yield function _o(){return mi.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Al(y.activeServiceWorker);const J=yield y.sender._send("ping",{},800);J&&null!==(S=J[0])&&void 0!==S&&S.fulfilled&&null!==($=J[0])&&void 0!==$&&$.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var S=this;return(0,re.A)(function*(){if(S.sender&&S.activeServiceWorker&&function vu(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:y},S.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,re.A)(function*(){try{if(!indexedDB)return!1;const y=yield Ca();return yield yd(y,Ya,"1"),yield Xc(y,Ya),!0}catch{}return!1})()}_withPendingWrite(y){var S=this;return(0,re.A)(function*(){S.pendingWrites++;try{yield y()}finally{S.pendingWrites--}})()}_set(y,S){var $=this;return(0,re.A)(function*(){return $._withPendingWrite((0,re.A)(function*(){return yield $._withRetries(J=>yd(J,y,S)),$.localCache[y]=S,$.notifyServiceWorker(y)}))})()}_get(y){var S=this;return(0,re.A)(function*(){const $=yield S._withRetries(J=>function Ec(T,p){return Dl.apply(this,arguments)}(J,y));return S.localCache[y]=$,$})()}_remove(y){var S=this;return(0,re.A)(function*(){return S._withPendingWrite((0,re.A)(function*(){return yield S._withRetries($=>Xc($,y)),delete S.localCache[y],S.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,re.A)(function*(){const S=yield y._withRetries(ve=>{const Le=qu(ve,!1).getAll();return new ks(Le).toPromise()});if(!S)return[];if(0!==y.pendingWrites)return[];const $=[],J=new Set;for(const{fbase_key:ve,value:Le}of S)J.add(ve),JSON.stringify(y.localCache[ve])!==JSON.stringify(Le)&&(y.notifyListeners(ve,Le),$.push(ve));for(const ve of Object.keys(y.localCache))y.localCache[ve]&&!J.has(ve)&&(y.notifyListeners(ve,null),$.push(ve));return $})()}notifyListeners(y,S){this.localCache[y]=S;const $=this.listeners[y];if($)for(const J of Array.from($))J(S)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,re.A)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(S)}_removeListener(y,S){this.listeners[y]&&(this.listeners[y].delete(S),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();Wo("rcb"),new Re(3e4,6e4);class li extends Nr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return yr(p,this._buildIdpRequest())}_linkToIdToken(p,y){return yr(p,this._buildIdpRequest(y))}_getReauthenticationResolver(p){return yr(p,this._buildIdpRequest())}_buildIdpRequest(p){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(y.idToken=p),y}}function ta(T){return fc(T.auth,new li(T),T.bypassAuthState)}function tr(T){const{auth:p,user:y}=T;return ze(y,p,"internal-error"),function Gi(T,p){return cs.apply(this,arguments)}(y,new li(T),T.bypassAuthState)}function xl(T){return vd.apply(this,arguments)}function vd(){return(vd=(0,re.A)(function*(T){const{auth:p,user:y}=T;return ze(y,p,"internal-error"),function es(T,p){return zr.apply(this,arguments)}(y,new li(T),T.bypassAuthState)})).apply(this,arguments)}class vg{constructor(p,y,S,$,J=!1){this.auth=p,this.resolver=S,this.user=$,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var p=this;return new Promise(function(){var y=(0,re.A)(function*(S,$){p.pendingPromise={resolve:S,reject:$};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(J){p.reject(J)}});return function(S,$){return y.apply(this,arguments)}}())}onAuthEvent(p){var y=this;return(0,re.A)(function*(){const{urlResponse:S,sessionId:$,postBody:J,tenantId:ve,error:Le,type:St}=p;if(Le)return void y.reject(Le);const Kt={auth:y.auth,requestUri:S,sessionId:$,tenantId:ve||void 0,postBody:J||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(St)(Kt))}catch(wn){y.reject(wn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ta;case"linkViaPopup":case"linkViaRedirect":return xl;case"reauthViaPopup":case"reauthViaRedirect":return tr;default:Ne(this.auth,"internal-error")}}resolve(p){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Re(2e3,1e4);const ji="pendingRedirect",Tc=new Map;class Ku extends vg{constructor(p,y,S=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,S),this.eventId=null}execute(){var p=()=>super.execute,y=this;return(0,re.A)(function*(){let S=Tc.get(y.auth._key());if(!S){try{const J=(yield function Tf(T,p){return Ed.apply(this,arguments)}(y.resolver,y.auth))?yield p().call(y):null;S=()=>Promise.resolve(J)}catch($){S=()=>Promise.reject($)}Tc.set(y.auth._key(),S)}return y.bypassAuthState||Tc.set(y.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(p){var y=()=>super.onAuthEvent,S=this;return(0,re.A)(function*(){if("signInViaRedirect"===p.type)return y().call(S,p);if("unknown"!==p.type){if(p.eventId){const $=yield S.auth._redirectUserForId(p.eventId);if($)return S.user=$,y().call(S,p);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,re.A)(function*(){})()}cleanUp(){}}function Ed(){return(Ed=(0,re.A)(function*(T,p){const y=function Zc(T){return X(ji,T.config.apiKey,T.name)}(p),S=function Nl(T){return q(T._redirectPersistence)}(T);if(!(yield S._isAvailable()))return!1;const $="true"===(yield S._get(y));return yield S._remove(y),$})).apply(this,arguments)}function Jr(T,p){Tc.set(T._key(),p)}function ph(T,p){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,re.A)(function*(T,p,y=!1){const S=ge(T),$=function Fs(T,p){return p?q(p):(ze(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}(S,p),ve=yield new Ku(S,$,y).execute();return ve&&!y&&(delete ve.user._redirectEventId,yield S._persistUserIfCurrent(ve.user),yield S._setRedirectUser(null,p)),ve})).apply(this,arguments)}class Yu{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let y=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(p,S)&&(y=!0,this.sendToConsumer(p,S),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Dc(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ac(T);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=p,y=!0)),y}sendToConsumer(p,y){var S;if(p.error&&!Ac(p)){const $=(null===(S=p.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";y.onError(ft(this.auth,$))}else y.onAuthEvent(p)}isEventForConsumer(p,y){const S=null===y.eventId||!!p.eventId&&p.eventId===y.eventId;return y.filter.includes(p.type)&&S}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(na(p))}saveEventToCache(p){this.cachedEventUids.add(na(p)),this.lastProcessedEventTime=Date.now()}}function na(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(p=>p).join("-")}function Ac({type:T,error:p}){return"unknown"===T&&"auth/no-auth-event"===p?.code}function bc(){return(bc=(0,re.A)(function*(T,p={}){return $t(T,"GET","/v1/projects",p)})).apply(this,arguments)}const Tu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cc=/^https?/;function ia(){return ia=(0,re.A)(function*(T){if(T.config.emulator)return;const{authorizedDomains:p}=yield function ra(T){return bc.apply(this,arguments)}(T);for(const y of p)try{if(Td(y))return}catch{}Ne(T,"unauthorized-domain")}),ia.apply(this,arguments)}function Td(T){const p=an(),{protocol:y,hostname:S}=new URL(p);if(T.startsWith("chrome-extension://")){const ve=new URL(T);return""===ve.hostname&&""===S?"chrome-extension:"===y&&T.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===y&&ve.hostname===S}if(!Cc.test(y))return!1;if(Tu.test(T))return S===T;const $=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(S)}const xa=new Re(3e4,6e4);function Au(){const T=$n().___jsl;if(T?.H)for(const p of Object.keys(T.H))if(T.H[p].r=T.H[p].r||[],T.H[p].L=T.H[p].L||[],T.H[p].r=[...T.H[p].L],T.CP)for(let y=0;y<T.CP.length;y++)T.CP[y]=null}let Pa=null;const Ju=new Re(5e3,15e3),No="__/auth/iframe",As="emulator/auth/iframe",Ma={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gh(T){const p=T.config;ze(p.authDomain,T,"auth-domain-config-required");const y=p.emulator?Be(p,As):`https://${T.config.authDomain}/${No}`,S={apiKey:p.apiKey,appName:T.name,v:mt.MF},$=Cf.get(T.config.apiHost);$&&(S.eid=$);const J=T._getFrameworks();return J.length&&(S.fw=J.join(",")),`${y}?${(0,K.Am)(S).slice(1)}`}function Rc(){return Rc=(0,re.A)(function*(T){const p=yield function Ad(T){return Pa=Pa||function Sc(T){return new Promise((p,y)=>{var S,$,J;function ve(){Au(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Au(),y(ft(T,"network-request-failed"))},timeout:xa.get()})}if(null!==($=null===(S=$n().gapi)||void 0===S?void 0:S.iframes)&&void 0!==$&&$.Iframe)p(gapi.iframes.getContext());else{if(null===(J=$n().gapi)||void 0===J||!J.load){const Le=Wo("iframefcb");return $n()[Le]=()=>{gapi.load?ve():y(ft(T,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${Le}`).catch(St=>y(St))}ve()}}).catch(p=>{throw Pa=null,p})}(T),Pa}(T),y=$n().gapi;return ze(y,T,"internal-error"),p.open({where:document.body,url:gh(T),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ma,dontclear:!0},S=>new Promise(function(){var $=(0,re.A)(function*(J,ve){yield S.restyle({setHideOnLeave:!1});const Le=ft(T,"network-request-failed"),St=$n().setTimeout(()=>{ve(Le)},Ju.get());function Kt(){$n().clearTimeout(St),J(S)}S.ping(Kt).then(Kt,()=>{ve(Le)})});return function(J,ve){return $.apply(this,arguments)}}()))}),Rc.apply(this,arguments)}const xc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ee{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ke="__/auth/handler",_t="emulator/auth/handler",Pt=encodeURIComponent("fac");function en(T,p,y,S,$,J){return xn.apply(this,arguments)}function xn(){return(xn=(0,re.A)(function*(T,p,y,S,$,J){ze(T.config.authDomain,T,"auth-domain-config-required"),ze(T.config.apiKey,T,"invalid-api-key");const ve={apiKey:T.config.apiKey,appName:T.name,authType:y,redirectUrl:S,v:mt.MF,eventId:$};if(p instanceof Zi){p.setDefaultLanguage(T.languageCode),ve.providerId=p.providerId||"",(0,K.Im)(p.getCustomParameters())||(ve.customParameters=JSON.stringify(p.getCustomParameters()));for(const[wn,tn]of Object.entries(J||{}))ve[wn]=tn}if(p instanceof Vu){const wn=p.getScopes().filter(tn=>""!==tn);wn.length>0&&(ve.scopes=wn.join(","))}T.tenantId&&(ve.tid=T.tenantId);const Le=ve;for(const wn of Object.keys(Le))void 0===Le[wn]&&delete Le[wn];const St=yield T._getAppCheckToken(),Kt=St?`#${Pt}=${encodeURIComponent(St)}`:"";return`${function Pn({config:T}){return T.emulator?Be(T,_t):`https://${T.authDomain}/${Ke}`}(T)}?${(0,K.Am)(Le).slice(1)}${Kt}`})).apply(this,arguments)}const Oo="webStorageSupport",ir=class Mi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=ph,this._overrideRedirectResult=Jr}_openPopup(p,y,S,$){var J=this;return(0,re.A)(function*(){var ve;hr(null===(ve=J.eventManagers[p._key()])||void 0===ve?void 0:ve.manager,"_initialize() not called before _openPopup()");const Le=yield en(p,y,S,an(),$);return function de(T,p,y,S=500,$=600){const J=Math.max((window.screen.availHeight-$)/2,0).toString(),ve=Math.max((window.screen.availWidth-S)/2,0).toString();let Le="";const St=Object.assign(Object.assign({},xc),{width:S.toString(),height:$.toString(),top:J,left:ve}),Kt=(0,K.ZQ)().toLowerCase();y&&(Le=En(Kt)?"_blank":y),Ft(Kt)&&(p=p||"http://localhost",St.scrollbars="yes");const wn=Object.entries(St).reduce((Gr,[Zr,lr])=>`${Gr}${Zr}=${lr},`,"");if(function jr(T=(0,K.ZQ)()){var p;return Yi(T)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Kt)&&"_self"!==Le)return function _e(T,p){const y=document.createElement("a");y.href=T,y.target=p;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(S)}(p||"",Le),new ee(null);const tn=window.open(p||"",Le,wn);ze(tn,T,"popup-blocked");try{tn.focus()}catch{}return new ee(tn)}(p,Le,Ic())})()}_openRedirect(p,y,S,$){var J=this;return(0,re.A)(function*(){return yield J._originValidation(p),function Yc(T){$n().location.href=T}(yield en(p,y,S,an(),$)),new Promise(()=>{})})()}_initialize(p){const y=p._key();if(this.eventManagers[y]){const{manager:$,promise:J}=this.eventManagers[y];return $?Promise.resolve($):(hr(J,"If manager is not set, promise should be"),J)}const S=this.initAndGetManager(p);return this.eventManagers[y]={promise:S},S.catch(()=>{delete this.eventManagers[y]}),S}initAndGetManager(p){var y=this;return(0,re.A)(function*(){const S=yield function Dd(T){return Rc.apply(this,arguments)}(p),$=new Yu(p);return S.register("authEvent",J=>(ze(J?.authEvent,p,"invalid-auth-event"),{status:$.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[p._key()]={manager:$},y.iframes[p._key()]=S,$})()}_isIframeWebStorageSupported(p,y){this.iframes[p._key()].send(Oo,{type:Oo},$=>{var J;const ve=null===(J=$?.[0])||void 0===J?void 0:J[Oo];void 0!==ve&&y(!!ve),Ne(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Xu(T){return ia.apply(this,arguments)}(p)),this.originValidationPromises[y]}get _shouldInitProactively(){return Gn()||Rn()||Yi()}};var Sf="@firebase/auth";class mh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var y=this;return(0,re.A)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const y=this.auth.onIdTokenChanged(S=>{p(S?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,y),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const y=this.internalListeners.get(p);y&&(this.internalListeners.delete(p),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ET=(0,K.XA)("authIdTokenMaxAge")||300;let Lo=null;const Eg=T=>function(){var p=(0,re.A)(function*(y){const S=y&&(yield y.getIdTokenResult()),$=S&&((new Date).getTime()-Date.parse(S.issuedAtTime))/1e3;if($&&$>ET)return;const J=S?.token;Lo!==J&&(Lo=J,yield fetch(T,{method:J?"POST":"DELETE",headers:J?{Authorization:`Bearer ${J}`}:{}}))});return function(y){return p.apply(this,arguments)}}();function Cd(T=(0,mt.Sx)()){const p=(0,mt.j6)(T,"auth");if(p.isInitialized())return p.getImmediate();const y=function Oe(T,p){const y=(0,mt.j6)(T,"auth");if(y.isInitialized()){const $=y.getImmediate(),J=y.getOptions();if((0,K.bD)(J,p??{}))return $;Ne($,"already-initialized")}return y.initialize({options:p})}(T,{popupRedirectResolver:ir,persistence:[Eu,Tl,ds]}),S=(0,K.XA)("authTokenSyncURL");if(S){const J=Eg(S);(function Un(T,p,y){(0,K.Ku)(T).beforeAuthStateChanged(p,y)})(y,J,()=>J(y.currentUser)),function Kn(T,p,y,S){(0,K.Ku)(T).onIdTokenChanged(p,y,S)}(y,ve=>J(ve))}const $=(0,K.Tj)("auth");return $&&function Ct(T,p,y){const S=ge(T);ze(S._canInitEmulator,S,"emulator-config-failed"),ze(/^https?:\/\//.test(p),S,"invalid-emulator-scheme");const $=!!y?.disableWarnings,J=dn(p),{host:ve,port:Le}=function qn(T){const p=dn(T),y=/(\/\/)?([^?#/]+)/.exec(T.substr(p.length));if(!y)return{host:"",port:null};const S=y[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(S);if($){const J=$[1];return{host:J,port:Ln(S.substr(J.length+1))}}{const[J,ve]=S.split(":");return{host:J,port:Ln(ve)}}}(p);S.config.emulator={url:`${J}//${ve}${null===Le?"":`:${Le}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:ve,port:Le,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function mr(){function T(){const p=document.createElement("p"),y=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}(y,`http://${$}`),y}!function IT(T){(0,mt.om)(new ce.uA("auth",(p,{options:y})=>{const S=p.getProvider("app").getImmediate(),$=p.getProvider("heartbeat"),J=p.getProvider("app-check-internal"),{apiKey:ve,authDomain:Le}=S.options;ze(ve&&!ve.includes(":"),"invalid-api-key",{appName:S.name});const St={apiKey:ve,authDomain:Le,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Go(T)},Kt=new lu(S,$,J,St);return function rt(T,p){const y=p?.persistence||[],S=(Array.isArray(y)?y:[y]).map(q);p?.errorMap&&T._updateErrorMap(p.errorMap),T._initializeWithPersistence(S,p?.popupRedirectResolver)}(Kt,y),Kt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,y,S)=>{p.getProvider("auth-internal").initialize()})),(0,mt.om)(new ce.uA("auth-internal",p=>{const y=ge(p.getProvider("auth").getImmediate());return new mh(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,mt.KO)(Sf,"0.23.2",function yI(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,mt.KO)(Sf,"0.23.2","esm2017")}("Browser");class Fl{constructor(p){return p}}class tl{constructor(){return(0,N.CA)("auth")}}const Sd=new he.nKC("angularfire2.auth-instances");function Ry(T){return(p,y)=>{const S=p.runOutsideAngular(()=>T(y));return new Fl(S)}}const xy={provide:tl,deps:[[new he.Xx1,Sd]]},Du={provide:Fl,useFactory:function xf(T,p){const y=(0,N.lR)("auth",T,p);return y&&new Fl(y)},deps:[[new he.Xx1,Sd],Ie.XU]};let yh=(()=>{class T{constructor(){(0,Me.KO)("angularfire",N.xv.full,"auth")}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=he.$C({type:T}),T.\u0275inj=he.G2t({providers:[Du,xy]}),T})();function Rd(T,...p){return{ngModule:yh,providers:[{provide:Sd,useFactory:Ry(T),multi:!0,deps:[he.SKi,he.zZn,N.u0,Ie.gL,[new he.Xx1,Te.kR],...p]}]}}const Ny=(0,N.S3)(Cd,!0),nc=(0,N.S3)(xi,!0),rc=(0,N.S3)(ii,!0)},2595:(ln,it,Z)=>{Z.d(it,{_7:()=>QC,gS:()=>O2,rJ:()=>k2,xs:()=>N2,kd:()=>F2,H9:()=>L2,GG:()=>V2,aU:()=>U2,hV:()=>M2,P:()=>B2,mZ:()=>j2,_M:()=>$2});var N=Z(9126),he=Z(6276),Ie=Z(9676),Me=Z(8934),Te=Z(7037),re=Z(681),K=Z(467);const Se=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&n.charCodeAt(++r)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},st={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,h=c?n[s+1]:0,g=s+2<n.length,v=g?n[s+2]:0;let z=(15&h)<<2|v>>6,ne=63&v;g||(ne=64,c||(z=64)),r.push(t[a>>2],t[(3&a)<<4|h>>4],t[z],t[ne])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Se(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const g=((7&s)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(1023&g))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&c)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const v=s<n.length?t[n.charAt(s)]:64;++s;const O=s<n.length?t[n.charAt(s)]:64;if(++s,null==a||null==h||null==v||null==O)throw new Mt;r.push(a<<2|h>>4),64!==v&&(r.push(h<<4&240|v>>2),64!==O&&r.push(v<<6&192|O))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Mt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fn=function(n){return function(n){const e=Se(n);return st.encodeByteArray(e,!0)}(n).replace(/\./g,"")};const Ne=()=>{try{return function vt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&function(n){try{return st.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}};function Ut(n){return n.endsWith(".cloudworkstations.dev")}const wr={};let Re=!1;function Be(n,e){if(typeof window>"u"||typeof document>"u"||!Ut(window.location.host)||wr[n]===e||wr[n]||Re)return;function t(z){return`__firebase__banner__${z}`}wr[n]=e;const r="__firebase__banner",a=function Dr(){const n={prod:[],emulator:[]};for(const e of Object.keys(wr))wr[e]?n.emulator.push(e):n.prod.push(e);return n}().prod.length>0;function O(){const z=function xe(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}(r),ne=t("text"),le=document.getElementById(ne)||document.createElement("span"),Pe=t("learnmore"),be=document.getElementById(Pe)||document.createElement("a"),Et=t("preprendIcon"),xt=document.getElementById(Et)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(z.created){const wt=z.element;(function h(z){z.style.display="flex",z.style.background="#7faaf0",z.style.position="fixed",z.style.bottom="5px",z.style.left="5px",z.style.padding=".5em",z.style.borderRadius="5px",z.style.alignItems="center"})(wt),function b(z,ne){z.setAttribute("id",ne),z.innerText="Learn more",z.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",z.setAttribute("target","__blank"),z.style.paddingLeft="5px",z.style.textDecoration="underline"}(be,Pe);const rn=function v(){const z=document.createElement("span");return z.style.cursor="pointer",z.style.marginLeft="16px",z.style.fontSize="24px",z.innerHTML=" &times;",z.onclick=()=>{Re=!0,function c(){const z=document.getElementById(r);z&&z.remove()}()},z}();(function g(z,ne){z.setAttribute("width","24"),z.setAttribute("id",ne),z.setAttribute("height","24"),z.setAttribute("viewBox","0 0 24 24"),z.setAttribute("fill","none"),z.style.marginLeft="-6px"})(xt,Et),wt.append(xt,le,be,rn),document.body.appendChild(wt)}a?(le.innerText="Preview backend disconnected.",xt.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(xt.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',le.innerText="Preview backend running in this workspace."),le.setAttribute("id",ne)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",O):O()}class Br extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pr.prototype.create)}}class Pr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?function In(n,e){return n.replace(Vn,(t,r)=>{const s=e[r];return null!=s?String(s):`<${r}?>`})}(a,r):"Error";return new Br(s,`${this.serviceName}: ${c} (${s}).`,r)}}const Vn=/\{\$([^}]+)}/g;class qs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qo=[];var Mn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Mn||{});const os={debug:Mn.DEBUG,verbose:Mn.VERBOSE,info:Mn.INFO,warn:Mn.WARN,error:Mn.ERROR,silent:Mn.SILENT},ha=Mn.INFO,Hi={[Mn.DEBUG]:"log",[Mn.VERBOSE]:"log",[Mn.INFO]:"info",[Mn.WARN]:"warn",[Mn.ERROR]:"error"},Xi=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),s=Hi[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${n.name}:`,...t)};class Nn{constructor(e){this.name=e,this._logLevel=ha,this._logHandler=Xi,this._userLogHandler=null,qo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?os[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mn.DEBUG,...e),this._logHandler(this,Mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mn.VERBOSE,...e),this._logHandler(this,Mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mn.INFO,...e),this._logHandler(this,Mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mn.WARN,...e),this._logHandler(this,Mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mn.ERROR,...e),this._logHandler(this,Mn.ERROR,...e)}}var cu=Z(6749);class pa{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Ji(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const as="@firebase/app",co=new Nn("@firebase/app"),qc={[as]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ga=new Map,Dn=new Map,ai=new Map;function Ei(n,e){try{n.container.addComponent(e)}catch(t){co.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yr(n){const e=n.name;if(ai.has(e))return co.debug(`There were multiple attempts to register component ${e}.`),!1;ai.set(e,n);for(const t of ga.values())Ei(t,n);for(const t of Dn.values())Ei(t,n);return!0}const Ot=new Pr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});function ho(n,e,t){var r;let s=null!==(r=qc[n])&&void 0!==r?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${s}" with version "${e}":`];return a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void co.warn(h.join(" "))}yr(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Or="firebase-heartbeat-database",Ga=1,fo="firebase-heartbeat-store";let Ps=null;function _a(){return Ps||(Ps=(0,cu.P2)(Or,Ga,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(fo)}catch(t){console.warn(t)}}}).catch(n=>{throw Ot.create("idb-open",{originalErrorMessage:n.message})})),Ps}function Ns(){return(Ns=(0,K.A)(function*(n){try{const t=(yield _a()).transaction(fo),r=yield t.objectStore(fo).get(Yo(n));return yield t.done,r}catch(e){if(e instanceof Br)co.warn(e.message);else{const t=Ot.create("idb-get",{originalErrorMessage:e?.message});co.warn(t.message)}}})).apply(this,arguments)}function ys(n,e){return va.apply(this,arguments)}function va(){return(va=(0,K.A)(function*(n,e){try{const r=(yield _a()).transaction(fo,"readwrite");yield r.objectStore(fo).put(e,Yo(n)),yield r.done}catch(t){if(t instanceof Br)co.warn(t.message);else{const r=Ot.create("idb-set",{originalErrorMessage:t?.message});co.warn(r.message)}}})).apply(this,arguments)}function Yo(n){return`${n.name}!${n.options.appId}`}class Uu{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new us(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,K.A)(function*(){var t,r;try{const a=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=El();if(null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===c||e._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(e._heartbeatsCache.heartbeats.push({date:c,agent:a}),e._heartbeatsCache.heartbeats.length>30){const h=function Ui(n){if(0===n.length)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(h,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(s){co.warn(s)}})()}getHeartbeatsHeader(){var e=this;return(0,K.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=El(),{heartbeatsToSend:s,unsentEntries:a}=function Os(n,e=1024){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),Ys(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ys(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),c=fn(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(e._heartbeatsCache.heartbeats=a,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),c}catch(r){return co.warn(r),""}})()}}function El(){return(new Date).toISOString().substring(0,10)}class us{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,K.A)(function*(){return!!function Si(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Cn(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e((null===(a=s.error)||void 0===a?void 0:a.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,K.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Ms(n){return Ns.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,K.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return ys(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,K.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return ys(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function Ys(n){return fn(JSON.stringify({version:2,heartbeats:n})).length}!function Oi(n){yr(new qs("platform-logger",e=>new pa(e),"PRIVATE")),yr(new qs("heartbeat",e=>new Uu(e),"PRIVATE")),ho(as,"0.12.3",n),ho(as,"0.12.3","esm2017"),ho("fire-js","")}("");var zr,Xo,Ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},es={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(Ee,oe,me){me||(me=0);var Ce=Array(16);if("string"==typeof oe)for(var ke=0;16>ke;++ke)Ce[ke]=oe.charCodeAt(me++)|oe.charCodeAt(me++)<<8|oe.charCodeAt(me++)<<16|oe.charCodeAt(me++)<<24;else for(ke=0;16>ke;++ke)Ce[ke]=oe[me++]|oe[me++]<<8|oe[me++]<<16|oe[me++]<<24;var qe=Ee.g[3],pe=(oe=Ee.g[0])+(qe^(me=Ee.g[1])&((ke=Ee.g[2])^qe))+Ce[0]+3614090360&4294967295;pe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=(me=(ke=(qe=(oe=me+(pe<<7&4294967295|pe>>>25))+((pe=qe+(ke^oe&(me^ke))+Ce[1]+3905402710&4294967295)<<12&4294967295|pe>>>20))+((pe=ke+(me^qe&(oe^me))+Ce[2]+606105819&4294967295)<<17&4294967295|pe>>>15))+((pe=me+(oe^ke&(qe^oe))+Ce[3]+3250441966&4294967295)<<22&4294967295|pe>>>10))+((pe=oe+(qe^me&(ke^qe))+Ce[4]+4118548399&4294967295)<<7&4294967295|pe>>>25))+((pe=qe+(ke^oe&(me^ke))+Ce[5]+1200080426&4294967295)<<12&4294967295|pe>>>20))+((pe=ke+(me^qe&(oe^me))+Ce[6]+2821735955&4294967295)<<17&4294967295|pe>>>15))+((pe=me+(oe^ke&(qe^oe))+Ce[7]+4249261313&4294967295)<<22&4294967295|pe>>>10))+((pe=oe+(qe^me&(ke^qe))+Ce[8]+1770035416&4294967295)<<7&4294967295|pe>>>25))+((pe=qe+(ke^oe&(me^ke))+Ce[9]+2336552879&4294967295)<<12&4294967295|pe>>>20))+((pe=ke+(me^qe&(oe^me))+Ce[10]+4294925233&4294967295)<<17&4294967295|pe>>>15))+((pe=me+(oe^ke&(qe^oe))+Ce[11]+2304563134&4294967295)<<22&4294967295|pe>>>10))+((pe=oe+(qe^me&(ke^qe))+Ce[12]+1804603682&4294967295)<<7&4294967295|pe>>>25))+((pe=qe+(ke^oe&(me^ke))+Ce[13]+4254626195&4294967295)<<12&4294967295|pe>>>20))+((pe=ke+(me^qe&(oe^me))+Ce[14]+2792965006&4294967295)<<17&4294967295|pe>>>15))+((pe=me+(oe^ke&(qe^oe))+Ce[15]+1236535329&4294967295)<<22&4294967295|pe>>>10))+((pe=oe+(ke^qe&(me^ke))+Ce[1]+4129170786&4294967295)<<5&4294967295|pe>>>27))+((pe=qe+(me^ke&(oe^me))+Ce[6]+3225465664&4294967295)<<9&4294967295|pe>>>23))+((pe=ke+(oe^me&(qe^oe))+Ce[11]+643717713&4294967295)<<14&4294967295|pe>>>18))+((pe=me+(qe^oe&(ke^qe))+Ce[0]+3921069994&4294967295)<<20&4294967295|pe>>>12))+((pe=oe+(ke^qe&(me^ke))+Ce[5]+3593408605&4294967295)<<5&4294967295|pe>>>27))+((pe=qe+(me^ke&(oe^me))+Ce[10]+38016083&4294967295)<<9&4294967295|pe>>>23))+((pe=ke+(oe^me&(qe^oe))+Ce[15]+3634488961&4294967295)<<14&4294967295|pe>>>18))+((pe=me+(qe^oe&(ke^qe))+Ce[4]+3889429448&4294967295)<<20&4294967295|pe>>>12))+((pe=oe+(ke^qe&(me^ke))+Ce[9]+568446438&4294967295)<<5&4294967295|pe>>>27))+((pe=qe+(me^ke&(oe^me))+Ce[14]+3275163606&4294967295)<<9&4294967295|pe>>>23))+((pe=ke+(oe^me&(qe^oe))+Ce[3]+4107603335&4294967295)<<14&4294967295|pe>>>18))+((pe=me+(qe^oe&(ke^qe))+Ce[8]+1163531501&4294967295)<<20&4294967295|pe>>>12))+((pe=oe+(ke^qe&(me^ke))+Ce[13]+2850285829&4294967295)<<5&4294967295|pe>>>27))+((pe=qe+(me^ke&(oe^me))+Ce[2]+4243563512&4294967295)<<9&4294967295|pe>>>23))+((pe=ke+(oe^me&(qe^oe))+Ce[7]+1735328473&4294967295)<<14&4294967295|pe>>>18))+((pe=me+(qe^oe&(ke^qe))+Ce[12]+2368359562&4294967295)<<20&4294967295|pe>>>12))+((pe=oe+(me^ke^qe)+Ce[5]+4294588738&4294967295)<<4&4294967295|pe>>>28))+((pe=qe+(oe^me^ke)+Ce[8]+2272392833&4294967295)<<11&4294967295|pe>>>21))+((pe=ke+(qe^oe^me)+Ce[11]+1839030562&4294967295)<<16&4294967295|pe>>>16))+((pe=me+(ke^qe^oe)+Ce[14]+4259657740&4294967295)<<23&4294967295|pe>>>9))+((pe=oe+(me^ke^qe)+Ce[1]+2763975236&4294967295)<<4&4294967295|pe>>>28))+((pe=qe+(oe^me^ke)+Ce[4]+1272893353&4294967295)<<11&4294967295|pe>>>21))+((pe=ke+(qe^oe^me)+Ce[7]+4139469664&4294967295)<<16&4294967295|pe>>>16))+((pe=me+(ke^qe^oe)+Ce[10]+3200236656&4294967295)<<23&4294967295|pe>>>9))+((pe=oe+(me^ke^qe)+Ce[13]+681279174&4294967295)<<4&4294967295|pe>>>28))+((pe=qe+(oe^me^ke)+Ce[0]+3936430074&4294967295)<<11&4294967295|pe>>>21))+((pe=ke+(qe^oe^me)+Ce[3]+3572445317&4294967295)<<16&4294967295|pe>>>16))+((pe=me+(ke^qe^oe)+Ce[6]+76029189&4294967295)<<23&4294967295|pe>>>9))+((pe=oe+(me^ke^qe)+Ce[9]+3654602809&4294967295)<<4&4294967295|pe>>>28))+((pe=qe+(oe^me^ke)+Ce[12]+3873151461&4294967295)<<11&4294967295|pe>>>21))+((pe=ke+(qe^oe^me)+Ce[15]+530742520&4294967295)<<16&4294967295|pe>>>16))+((pe=me+(ke^qe^oe)+Ce[2]+3299628645&4294967295)<<23&4294967295|pe>>>9))+((pe=oe+(ke^(me|~qe))+Ce[0]+4096336452&4294967295)<<6&4294967295|pe>>>26))+((pe=qe+(me^(oe|~ke))+Ce[7]+1126891415&4294967295)<<10&4294967295|pe>>>22))+((pe=ke+(oe^(qe|~me))+Ce[14]+2878612391&4294967295)<<15&4294967295|pe>>>17))+((pe=me+(qe^(ke|~oe))+Ce[5]+4237533241&4294967295)<<21&4294967295|pe>>>11))+((pe=oe+(ke^(me|~qe))+Ce[12]+1700485571&4294967295)<<6&4294967295|pe>>>26))+((pe=qe+(me^(oe|~ke))+Ce[3]+2399980690&4294967295)<<10&4294967295|pe>>>22))+((pe=ke+(oe^(qe|~me))+Ce[10]+4293915773&4294967295)<<15&4294967295|pe>>>17))+((pe=me+(qe^(ke|~oe))+Ce[1]+2240044497&4294967295)<<21&4294967295|pe>>>11))+((pe=oe+(ke^(me|~qe))+Ce[8]+1873313359&4294967295)<<6&4294967295|pe>>>26))+((pe=qe+(me^(oe|~ke))+Ce[15]+4264355552&4294967295)<<10&4294967295|pe>>>22))+((pe=ke+(oe^(qe|~me))+Ce[6]+2734768916&4294967295)<<15&4294967295|pe>>>17))+((pe=me+(qe^(ke|~oe))+Ce[13]+1309151649&4294967295)<<21&4294967295|pe>>>11))+((qe=(oe=me+((pe=oe+(ke^(me|~qe))+Ce[4]+4149444226&4294967295)<<6&4294967295|pe>>>26))+((pe=qe+(me^(oe|~ke))+Ce[11]+3174756917&4294967295)<<10&4294967295|pe>>>22))^((ke=qe+((pe=ke+(oe^(qe|~me))+Ce[2]+718787259&4294967295)<<15&4294967295|pe>>>17))|~oe))+Ce[9]+3951481745&4294967295,Ee.g[0]=Ee.g[0]+oe&4294967295,Ee.g[1]=Ee.g[1]+(ke+(pe<<21&4294967295|pe>>>11))&4294967295,Ee.g[2]=Ee.g[2]+ke&4294967295,Ee.g[3]=Ee.g[3]+qe&4294967295}function c(Ee,oe){this.h=oe;for(var me=[],Ce=!0,ke=Ee.length-1;0<=ke;ke--){var qe=0|Ee[ke];Ce&&qe==oe||(me[ke]=qe,Ce=!1)}this.g=me}(function e(Ee,oe){function me(){}me.prototype=oe.prototype,Ee.D=oe.prototype,Ee.prototype=new me,Ee.prototype.constructor=Ee,Ee.C=function(Ce,ke,qe){for(var pe=Array(arguments.length-2),If=2;If<arguments.length;If++)pe[If-2]=arguments[If];return oe.prototype[ke].apply(Ce,pe)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(Ee,oe){void 0===oe&&(oe=Ee.length);for(var me=oe-this.blockSize,Ce=this.B,ke=this.h,qe=0;qe<oe;){if(0==ke)for(;qe<=me;)s(this,Ee,qe),qe+=this.blockSize;if("string"==typeof Ee){for(;qe<oe;)if(Ce[ke++]=Ee.charCodeAt(qe++),ke==this.blockSize){s(this,Ce),ke=0;break}}else for(;qe<oe;)if(Ce[ke++]=Ee[qe++],ke==this.blockSize){s(this,Ce),ke=0;break}}this.h=ke,this.o+=oe},r.prototype.v=function(){var Ee=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Ee[0]=128;for(var oe=1;oe<Ee.length-8;++oe)Ee[oe]=0;var me=8*this.o;for(oe=Ee.length-8;oe<Ee.length;++oe)Ee[oe]=255&me,me/=256;for(this.u(Ee),Ee=Array(16),oe=me=0;4>oe;++oe)for(var Ce=0;32>Ce;Ce+=8)Ee[me++]=this.g[oe]>>>Ce&255;return Ee};var h={};function g(Ee){return-128<=Ee&&128>Ee?function a(Ee,oe){var me=h;return Object.prototype.hasOwnProperty.call(me,Ee)?me[Ee]:me[Ee]=oe(Ee)}(Ee,function(oe){return new c([0|oe],0>oe?-1:0)}):new c([0|Ee],0>Ee?-1:0)}function v(Ee){if(isNaN(Ee)||!isFinite(Ee))return O;if(0>Ee)return be(v(-Ee));for(var oe=[],me=1,Ce=0;Ee>=me;Ce++)oe[Ce]=Ee/me|0,me*=4294967296;return new c(oe,0)}var O=g(0),z=g(1),ne=g(16777216);function le(Ee){if(0!=Ee.h)return!1;for(var oe=0;oe<Ee.g.length;oe++)if(0!=Ee.g[oe])return!1;return!0}function Pe(Ee){return-1==Ee.h}function be(Ee){for(var oe=Ee.g.length,me=[],Ce=0;Ce<oe;Ce++)me[Ce]=~Ee.g[Ce];return new c(me,~Ee.h).add(z)}function Et(Ee,oe){return Ee.add(be(oe))}function xt(Ee,oe){for(;(65535&Ee[oe])!=Ee[oe];)Ee[oe+1]+=Ee[oe]>>>16,Ee[oe]&=65535,oe++}function wt(Ee,oe){this.g=Ee,this.h=oe}function rn(Ee,oe){if(le(oe))throw Error("division by zero");if(le(Ee))return new wt(O,O);if(Pe(Ee))return oe=rn(be(Ee),oe),new wt(be(oe.g),be(oe.h));if(Pe(oe))return oe=rn(Ee,be(oe)),new wt(be(oe.g),oe.h);if(30<Ee.g.length){if(Pe(Ee)||Pe(oe))throw Error("slowDivide_ only works with positive integers.");for(var me=z,Ce=oe;0>=Ce.l(Ee);)me=On(me),Ce=On(Ce);var ke=on(me,1),qe=on(Ce,1);for(Ce=on(Ce,2),me=on(me,2);!le(Ce);){var pe=qe.add(Ce);0>=pe.l(Ee)&&(ke=ke.add(me),qe=pe),Ce=on(Ce,1),me=on(me,1)}return oe=Et(Ee,ke.j(oe)),new wt(ke,oe)}for(ke=O;0<=Ee.l(oe);){for(me=Math.max(1,Math.floor(Ee.m()/oe.m())),Ce=48>=(Ce=Math.ceil(Math.log(me)/Math.LN2))?1:Math.pow(2,Ce-48),pe=(qe=v(me)).j(oe);Pe(pe)||0<pe.l(Ee);)pe=(qe=v(me-=Ce)).j(oe);le(qe)&&(qe=z),ke=ke.add(qe),Ee=Et(Ee,pe)}return new wt(ke,Ee)}function On(Ee){for(var oe=Ee.g.length+1,me=[],Ce=0;Ce<oe;Ce++)me[Ce]=Ee.i(Ce)<<1|Ee.i(Ce-1)>>>31;return new c(me,Ee.h)}function on(Ee,oe){var me=oe>>5;oe%=32;for(var Ce=Ee.g.length-me,ke=[],qe=0;qe<Ce;qe++)ke[qe]=0<oe?Ee.i(qe+me)>>>oe|Ee.i(qe+me+1)<<32-oe:Ee.i(qe+me);return new c(ke,Ee.h)}(n=c.prototype).m=function(){if(Pe(this))return-be(this).m();for(var Ee=0,oe=1,me=0;me<this.g.length;me++){var Ce=this.i(me);Ee+=(0<=Ce?Ce:4294967296+Ce)*oe,oe*=4294967296}return Ee},n.toString=function(Ee){if(2>(Ee=Ee||10)||36<Ee)throw Error("radix out of range: "+Ee);if(le(this))return"0";if(Pe(this))return"-"+be(this).toString(Ee);for(var oe=v(Math.pow(Ee,6)),me=this,Ce="";;){var ke=rn(me,oe).g,qe=((0<(me=Et(me,ke.j(oe))).g.length?me.g[0]:me.h)>>>0).toString(Ee);if(le(me=ke))return qe+Ce;for(;6>qe.length;)qe="0"+qe;Ce=qe+Ce}},n.i=function(Ee){return 0>Ee?0:Ee<this.g.length?this.g[Ee]:this.h},n.l=function(Ee){return Pe(Ee=Et(this,Ee))?-1:le(Ee)?0:1},n.abs=function(){return Pe(this)?be(this):this},n.add=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),me=[],Ce=0,ke=0;ke<=oe;ke++){var qe=Ce+(65535&this.i(ke))+(65535&Ee.i(ke)),pe=(qe>>>16)+(this.i(ke)>>>16)+(Ee.i(ke)>>>16);Ce=pe>>>16,me[ke]=(pe&=65535)<<16|(qe&=65535)}return new c(me,-2147483648&me[me.length-1]?-1:0)},n.j=function(Ee){if(le(this)||le(Ee))return O;if(Pe(this))return Pe(Ee)?be(this).j(be(Ee)):be(be(this).j(Ee));if(Pe(Ee))return be(this.j(be(Ee)));if(0>this.l(ne)&&0>Ee.l(ne))return v(this.m()*Ee.m());for(var oe=this.g.length+Ee.g.length,me=[],Ce=0;Ce<2*oe;Ce++)me[Ce]=0;for(Ce=0;Ce<this.g.length;Ce++)for(var ke=0;ke<Ee.g.length;ke++){var qe=this.i(Ce)>>>16,pe=65535&this.i(Ce),If=Ee.i(ke)>>>16,tT=65535&Ee.i(ke);me[2*Ce+2*ke]+=pe*tT,xt(me,2*Ce+2*ke),me[2*Ce+2*ke+1]+=qe*tT,xt(me,2*Ce+2*ke+1),me[2*Ce+2*ke+1]+=pe*If,xt(me,2*Ce+2*ke+1),me[2*Ce+2*ke+2]+=qe*If,xt(me,2*Ce+2*ke+2)}for(Ce=0;Ce<oe;Ce++)me[Ce]=me[2*Ce+1]<<16|me[2*Ce];for(Ce=oe;Ce<2*oe;Ce++)me[Ce]=0;return new c(me,0)},n.A=function(Ee){return rn(this,Ee).h},n.and=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),me=[],Ce=0;Ce<oe;Ce++)me[Ce]=this.i(Ce)&Ee.i(Ce);return new c(me,this.h&Ee.h)},n.or=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),me=[],Ce=0;Ce<oe;Ce++)me[Ce]=this.i(Ce)|Ee.i(Ce);return new c(me,this.h|Ee.h)},n.xor=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),me=[],Ce=0;Ce<oe;Ce++)me[Ce]=this.i(Ce)^Ee.i(Ce);return new c(me,this.h^Ee.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xo=es.Md5=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=function b(Ee,oe){if(0==Ee.length)throw Error("number format error: empty string");if(2>(oe=oe||10)||36<oe)throw Error("radix out of range: "+oe);if("-"==Ee.charAt(0))return be(b(Ee.substring(1),oe));if(0<=Ee.indexOf("-"))throw Error('number format error: interior "-" character');for(var me=v(Math.pow(oe,8)),Ce=O,ke=0;ke<Ee.length;ke+=8){var qe=Math.min(8,Ee.length-ke),pe=parseInt(Ee.substring(ke,ke+qe),oe);8>qe?(qe=v(Math.pow(oe,qe)),Ce=Ce.j(qe).add(v(pe))):Ce=(Ce=Ce.j(me)).add(v(pe))}return Ce},zr=es.Integer=c}).apply(typeof Ia<"u"?Ia:typeof self<"u"?self:typeof window<"u"?window:{});var cs,ur,Ea,Bu,Wc,wa,Ta,po,_s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gi={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(m,M,B){return m==Array.prototype||m==Object.prototype||(m[M]=B.value),m},r=function t(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof _s&&_s];for(var M=0;M<m.length;++M){var B=m[M];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}(this);!function s(m,M){if(M)e:{var B=r;m=m.split(".");for(var te=0;te<m.length-1;te++){var Ve=m[te];if(!(Ve in B))break e;B=B[Ve]}(M=M(te=B[m=m[m.length-1]]))!=te&&null!=M&&e(B,m,{configurable:!0,writable:!0,value:M})}}("Array.prototype.values",function(m){return m||function(){return function a(m,M){m instanceof String&&(m+="");var B=0,te=!1,Ve={next:function(){if(!te&&B<m.length){var Ye=B++;return{value:M(Ye,m[Ye]),done:!1}}return te=!0,{done:!0,value:void 0}}};return Ve[Symbol.iterator]=function(){return Ve},Ve}(this,function(M,B){return B})}});var c=c||{},h=this||self;function g(m){var M=typeof m;return"array"==(M="object"!=M?M:m?Array.isArray(m)?"array":M:"null")||"object"==M&&"number"==typeof m.length}function v(m){var M=typeof m;return"object"==M&&null!=m||"function"==M}function b(m,M,B){return m.call.apply(m.bind,arguments)}function O(m,M,B){if(!m)throw Error();if(2<arguments.length){var te=Array.prototype.slice.call(arguments,2);return function(){var Ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ve,te),m.apply(M,Ve)}}return function(){return m.apply(M,arguments)}}function z(m,M,B){return(z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:O).apply(null,arguments)}function ne(m,M){var B=Array.prototype.slice.call(arguments,1);return function(){var te=B.slice();return te.push.apply(te,arguments),m.apply(this,te)}}function le(m,M){function B(){}B.prototype=M.prototype,m.aa=M.prototype,m.prototype=new B,m.prototype.constructor=m,m.Qb=function(te,Ve,Ye){for(var Ht=Array(arguments.length-2),$i=2;$i<arguments.length;$i++)Ht[$i-2]=arguments[$i];return M.prototype[Ve].apply(te,Ht)}}function Pe(m){const M=m.length;if(0<M){const B=Array(M);for(let te=0;te<M;te++)B[te]=m[te];return B}return[]}function be(m,M){for(let B=1;B<arguments.length;B++){const te=arguments[B];if(g(te)){const Ve=m.length||0,Ye=te.length||0;m.length=Ve+Ye;for(let Ht=0;Ht<Ye;Ht++)m[Ve+Ht]=te[Ht]}else m.push(te)}}function xt(m){return/^[\s\xa0]*$/.test(m)}function wt(){var m=h.navigator;return m&&(m=m.userAgent)?m:""}function rn(m){return rn[" "](m),m}rn[" "]=function(){};var On=!(-1==wt().indexOf("Gecko")||-1!=wt().toLowerCase().indexOf("webkit")&&-1==wt().indexOf("Edge")||-1!=wt().indexOf("Trident")||-1!=wt().indexOf("MSIE")||-1!=wt().indexOf("Edge"));function on(m,M,B){for(const te in m)M.call(B,m[te],te,m)}function oe(m){const M={};for(const B in m)M[B]=m[B];return M}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(m,M){let B,te;for(let Ve=1;Ve<arguments.length;Ve++){for(B in te=arguments[Ve],te)m[B]=te[B];for(let Ye=0;Ye<me.length;Ye++)B=me[Ye],Object.prototype.hasOwnProperty.call(te,B)&&(m[B]=te[B])}}function ke(m){var M=1;m=m.split(":");const B=[];for(;0<M&&m.length;)B.push(m.shift()),M--;return m.length&&B.push(m.join(":")),B}function qe(m){h.setTimeout(()=>{throw m},0)}function pe(){var m=cM;let M=null;return m.g&&(M=m.g,m.g=m.g.next,m.g||(m.h=null),M.next=null),M}var tT=new class Et{constructor(M,B){this.i=M,this.j=B,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}(()=>new z2,m=>m.reset());class z2{constructor(){this.next=this.g=this.h=null}set(M,B){this.h=M,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let nT,rT=!1,cM=new class If{constructor(){this.h=this.g=null}add(M,B){const te=tT.get();te.set(M,B),this.h?this.h.next=te:this.g=te,this.h=te}},Gk=()=>{const m=h.Promise.resolve(void 0);nT=()=>{m.then(H2)}};var H2=()=>{for(var m;m=pe();){try{m.h.call(m.g)}catch(B){qe(B)}var M=tT;M.j(m),100>M.h&&(M.h++,m.next=M.g,M.g=m)}rT=!1};function gg(){this.s=this.s,this.C=this.C}function su(m,M){this.type=m,this.g=this.target=M,this.defaultPrevented=!1}gg.prototype.s=!1,gg.prototype.ma=function(){this.s||(this.s=!0,this.N())},gg.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},su.prototype.h=function(){this.defaultPrevented=!0};var G2=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var m=!1,M=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const B=()=>{};h.addEventListener("test",B,M),h.removeEventListener("test",B,M)}catch{}return m}();function iT(m,M){if(su.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var B=this.type=m.type,te=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=M,M=m.relatedTarget){if(On){e:{try{rn(M.nodeName);var Ve=!0;break e}catch{}Ve=!1}Ve||(M=null)}}else"mouseover"==B?M=m.fromElement:"mouseout"==B&&(M=m.toElement);this.relatedTarget=M,te?(this.clientX=void 0!==te.clientX?te.clientX:te.pageX,this.clientY=void 0!==te.clientY?te.clientY:te.pageY,this.screenX=te.screenX||0,this.screenY=te.screenY||0):(this.clientX=void 0!==m.clientX?m.clientX:m.pageX,this.clientY=void 0!==m.clientY?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType="string"==typeof m.pointerType?m.pointerType:q2[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&iT.aa.h.call(this)}}le(iT,su);var q2={2:"touch",3:"pen",4:"mouse"};iT.prototype.h=function(){iT.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var sT="closure_listenable_"+(1e6*Math.random()|0),W2=0;function K2(m,M,B,te,Ve){this.listener=m,this.proxy=null,this.src=M,this.type=B,this.capture=!!te,this.ha=Ve,this.key=++W2,this.da=this.fa=!1}function YC(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function XC(m){this.src=m,this.g={},this.h=0}function lM(m,M){var B=M.type;if(B in m.g){var Ye,te=m.g[B],Ve=Array.prototype.indexOf.call(te,M,void 0);(Ye=0<=Ve)&&Array.prototype.splice.call(te,Ve,1),Ye&&(YC(M),0==m.g[B].length&&(delete m.g[B],m.h--))}}function dM(m,M,B,te){for(var Ve=0;Ve<m.length;++Ve){var Ye=m[Ve];if(!Ye.da&&Ye.listener==M&&Ye.capture==!!B&&Ye.ha==te)return Ve}return-1}XC.prototype.add=function(m,M,B,te,Ve){var Ye=m.toString();(m=this.g[Ye])||(m=this.g[Ye]=[],this.h++);var Ht=dM(m,M,te,Ve);return-1<Ht?(M=m[Ht],B||(M.fa=!1)):((M=new K2(M,this.src,Ye,!!te,Ve)).fa=B,m.push(M)),M};var hM="closure_lm_"+(1e6*Math.random()|0),fM={};function qk(m,M,B,te,Ve){if(te&&te.once)return Kk(m,M,B,te,Ve);if(Array.isArray(M)){for(var Ye=0;Ye<M.length;Ye++)qk(m,M[Ye],B,te,Ve);return null}return B=yM(B),m&&m[sT]?m.K(M,B,v(te)?!!te.capture:!!te,Ve):Wk(m,M,B,!1,te,Ve)}function Wk(m,M,B,te,Ve,Ye){if(!M)throw Error("Invalid event type");var Ht=v(Ve)?!!Ve.capture:!!Ve,$i=gM(m);if($i||(m[hM]=$i=new XC(m)),(B=$i.add(M,B,te,Ht,Ye)).proxy)return B;if(te=function Q2(){const M=Y2;return function m(B){return M.call(m.src,m.listener,B)}}(),B.proxy=te,te.src=m,te.listener=B,m.addEventListener)G2||(Ve=Ht),void 0===Ve&&(Ve=!1),m.addEventListener(M.toString(),te,Ve);else if(m.attachEvent)m.attachEvent(Yk(M.toString()),te);else{if(!m.addListener||!m.removeListener)throw Error("addEventListener and attachEvent are unavailable.");m.addListener(te)}return B}function Kk(m,M,B,te,Ve){if(Array.isArray(M)){for(var Ye=0;Ye<M.length;Ye++)Kk(m,M[Ye],B,te,Ve);return null}return B=yM(B),m&&m[sT]?m.L(M,B,v(te)?!!te.capture:!!te,Ve):Wk(m,M,B,!0,te,Ve)}function Qk(m,M,B,te,Ve){if(Array.isArray(M))for(var Ye=0;Ye<M.length;Ye++)Qk(m,M[Ye],B,te,Ve);else te=v(te)?!!te.capture:!!te,B=yM(B),m&&m[sT]?(m=m.i,(M=String(M).toString())in m.g&&-1<(B=dM(Ye=m.g[M],B,te,Ve))&&(YC(Ye[B]),Array.prototype.splice.call(Ye,B,1),0==Ye.length&&(delete m.g[M],m.h--))):m&&(m=gM(m))&&(M=m.g[M.toString()],m=-1,M&&(m=dM(M,B,te,Ve)),(B=-1<m?M[m]:null)&&pM(B))}function pM(m){if("number"!=typeof m&&m&&!m.da){var M=m.src;if(M&&M[sT])lM(M.i,m);else{var B=m.type,te=m.proxy;M.removeEventListener?M.removeEventListener(B,te,m.capture):M.detachEvent?M.detachEvent(Yk(B),te):M.addListener&&M.removeListener&&M.removeListener(te),(B=gM(M))?(lM(B,m),0==B.h&&(B.src=null,M[hM]=null)):YC(m)}}}function Yk(m){return m in fM?fM[m]:fM[m]="on"+m}function Y2(m,M){if(m.da)m=!0;else{M=new iT(M,this);var B=m.listener,te=m.ha||m.src;m.fa&&pM(m),m=B.call(te,M)}return m}function gM(m){return(m=m[hM])instanceof XC?m:null}var mM="__closure_events_fn_"+(1e9*Math.random()>>>0);function yM(m){return"function"==typeof m?m:(m[mM]||(m[mM]=function(M){return m.handleEvent(M)}),m[mM])}function ou(){gg.call(this),this.i=new XC(this),this.M=this,this.F=null}function Nu(m,M){var B,te=m.F;if(te)for(B=[];te;te=te.F)B.push(te);if(m=m.M,te=M.type||M,"string"==typeof M)M=new su(M,m);else if(M instanceof su)M.target=M.target||m;else{var Ve=M;Ce(M=new su(te,m),Ve)}if(Ve=!0,B)for(var Ye=B.length-1;0<=Ye;Ye--){var Ht=M.g=B[Ye];Ve=JC(Ht,te,!0,M)&&Ve}if(Ve=JC(Ht=M.g=m,te,!0,M)&&Ve,Ve=JC(Ht,te,!1,M)&&Ve,B)for(Ye=0;Ye<B.length;Ye++)Ve=JC(Ht=M.g=B[Ye],te,!1,M)&&Ve}function JC(m,M,B,te){if(!(M=m.i.g[String(M)]))return!0;M=M.concat();for(var Ve=!0,Ye=0;Ye<M.length;++Ye){var Ht=M[Ye];if(Ht&&!Ht.da&&Ht.capture==B){var $i=Ht.listener,Ba=Ht.ha||Ht.src;Ht.fa&&lM(m.i,Ht),Ve=!1!==$i.call(Ba,te)&&Ve}}return Ve&&!te.defaultPrevented}function Xk(m,M,B){if("function"==typeof m)B&&(m=z(m,B));else{if(!m||"function"!=typeof m.handleEvent)throw Error("Invalid listener argument");m=z(m.handleEvent,m)}return 2147483647<Number(M)?-1:h.setTimeout(m,M||0)}function Jk(m){m.g=Xk(()=>{m.g=null,m.i&&(m.i=!1,Jk(m))},m.l);const M=m.h;m.h=null,m.m.apply(null,M)}le(ou,gg),ou.prototype[sT]=!0,ou.prototype.removeEventListener=function(m,M,B,te){Qk(this,m,M,B,te)},ou.prototype.N=function(){if(ou.aa.N.call(this),this.i){var M,m=this.i;for(M in m.g){for(var B=m.g[M],te=0;te<B.length;te++)YC(B[te]);delete m.g[M],m.h--}}this.F=null},ou.prototype.K=function(m,M,B,te){return this.i.add(String(m),M,!1,B,te)},ou.prototype.L=function(m,M,B,te){return this.i.add(String(m),M,!0,B,te)};class X2 extends gg{constructor(M,B){super(),this.m=M,this.l=B,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:Jk(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oT(m){gg.call(this),this.h=m,this.g={}}le(oT,gg);var Zk=[];function eF(m){on(m.g,function(M,B){this.g.hasOwnProperty(B)&&pM(M)},m),m.g={}}oT.prototype.N=function(){oT.aa.N.call(this),eF(this)},oT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _M=h.JSON.stringify,J2=h.JSON.parse,Z2=class{stringify(m){return h.JSON.stringify(m,void 0)}parse(m){return h.JSON.parse(m,void 0)}};function vM(){}function nF(){}vM.prototype.h=null;var aT={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function IM(){su.call(this,"d")}function EM(){su.call(this,"c")}le(IM,su),le(EM,su);var Ty={},rF=null;function ZC(){return rF=rF||new ou}function iF(m){su.call(this,Ty.La,m)}function uT(m){const M=ZC();Nu(M,new iF(M))}function sF(m,M){su.call(this,Ty.STAT_EVENT,m),this.stat=M}function Ou(m){const M=ZC();Nu(M,new sF(M,m))}function oF(m,M){su.call(this,Ty.Ma,m),this.size=M}function cT(m,M){if("function"!=typeof m)throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){m()},M)}function lT(){this.g=!0}function hI(m,M,B,te){m.info(function(){return"XMLHTTP TEXT ("+M+"): "+function rU(m,M){if(!m.g)return M;if(!M)return null;try{var B=JSON.parse(M);if(B)for(m=0;m<B.length;m++)if(Array.isArray(B[m])){var te=B[m];if(!(2>te.length)){var Ve=te[1];if(Array.isArray(Ve)&&!(1>Ve.length)){var Ye=Ve[0];if("noop"!=Ye&&"stop"!=Ye&&"close"!=Ye)for(var Ht=1;Ht<Ve.length;Ht++)Ve[Ht]=""}}}return _M(B)}catch{return M}}(m,B)+(te?" "+te:"")})}Ty.La="serverreachability",le(iF,su),Ty.STAT_EVENT="statevent",le(sF,su),Ty.Ma="timingevent",le(oF,su),lT.prototype.xa=function(){this.g=!1},lT.prototype.info=function(){};var wM,eS={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aF={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function tS(){}function mg(m,M,B,te){this.j=m,this.i=M,this.l=B,this.R=te||1,this.U=new oT(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uF}function uF(){this.i=null,this.g="",this.h=!1}le(tS,vM),tS.prototype.g=function(){return new XMLHttpRequest},tS.prototype.i=function(){return{}},wM=new tS;var cF={},TM={};function AM(m,M,B){m.L=1,m.v=sS(Ef(M)),m.m=B,m.P=!0,lF(m,null)}function lF(m,M){m.F=Date.now(),nS(m),m.A=Ef(m.v);var B=m.A,te=m.R;Array.isArray(te)||(te=[String(te)]),AF(B.i,"t",te),m.C=0,B=m.j.J,m.h=new uF,m.g=$F(m.j,B?M:null,!m.m),0<m.O&&(m.M=new X2(z(m.Y,m,m.g),m.O)),M=m.U,B=m.g,te=m.ca;var Ve="readystatechange";Array.isArray(Ve)||(Ve&&(Zk[0]=Ve.toString()),Ve=Zk);for(var Ye=0;Ye<Ve.length;Ye++){var Ht=qk(B,Ve[Ye],te||M.handleEvent,!1,M.h||M);if(!Ht)break;M.g[Ht.key]=Ht}M=m.H?oe(m.H):{},m.m?(m.u||(m.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,M)):(m.u="GET",m.g.ea(m.A,m.u,null,M)),uT(),function eU(m,M,B,te,Ve,Ye){m.info(function(){if(m.g)if(Ye)for(var Ht="",$i=Ye.split("&"),Ba=0;Ba<$i.length;Ba++){var di=$i[Ba].split("=");if(1<di.length){var au=di[0];di=di[1];var uu=au.split("_");Ht=2<=uu.length&&"type"==uu[1]?Ht+(au+"=")+di+"&":Ht+(au+"=redacted&")}}else Ht=null;else Ht=Ye;return"XMLHTTP REQ ("+te+") [attempt "+Ve+"]: "+M+"\n"+B+"\n"+Ht})}(m.i,m.u,m.A,m.l,m.R,m.m)}function dF(m){return!!m.g&&"GET"==m.u&&2!=m.L&&m.j.Ca}function iU(m,M){var B=m.C,te=M.indexOf("\n",B);return-1==te?TM:(B=Number(M.substring(B,te)),isNaN(B)?cF:(te+=1)+B>M.length?TM:(M=M.slice(te,te+B),m.C=te+B,M))}function nS(m){m.S=Date.now()+m.I,hF(m,m.I)}function hF(m,M){if(null!=m.B)throw Error("WatchDog timer not null");m.B=cT(z(m.ba,m),M)}function DM(m){m.B&&(h.clearTimeout(m.B),m.B=null)}function dT(m){0==m.j.G||m.J||VF(m.j,m)}function Ay(m){DM(m);var M=m.M;M&&"function"==typeof M.ma&&M.ma(),m.M=null,eF(m.U),m.g&&(M=m.g,m.g=null,M.abort(),M.ma())}function bM(m,M){try{var B=m.j;if(0!=B.G&&(B.g==m||CM(B.h,m)))if(!m.K&&CM(B.h,m)&&3==B.G){try{var te=B.Da.g.parse(M)}catch{te=null}if(Array.isArray(te)&&3==te.length){var Ve=te;if(0==Ve[0]){e:if(!B.u){if(B.g){if(!(B.g.F+3e3<m.F))break e;lS(B),uS(B)}PM(B),Ou(18)}}else B.za=Ve[1],0<B.za-B.T&&37500>Ve[2]&&B.F&&0==B.v&&!B.C&&(B.C=cT(z(B.Za,B),6e3));if(1>=gF(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else by(B,11)}else if((m.K||B.g==m)&&lS(B),!xt(M))for(Ve=B.Da.g.parse(M),M=0;M<Ve.length;M++){let di=Ve[M];if(B.T=di[0],di=di[1],2==B.G)if("c"==di[0]){B.K=di[1],B.ia=di[2];const au=di[3];null!=au&&(B.la=au,B.j.info("VER="+B.la));const uu=di[4];null!=uu&&(B.Aa=uu,B.j.info("SVER="+B.Aa));const gI=di[5];null!=gI&&"number"==typeof gI&&0<gI&&(B.L=te=1.5*gI,B.j.info("backChannelRequestTimeoutMs_="+te)),te=B;const dd=m.g;if(dd){const hS=dd.g?dd.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hS){var Ye=te.h;Ye.g||-1==hS.indexOf("spdy")&&-1==hS.indexOf("quic")&&-1==hS.indexOf("h2")||(Ye.j=Ye.l,Ye.g=new Set,Ye.h&&(SM(Ye,Ye.h),Ye.h=null))}if(te.D){const NM=dd.g?dd.g.getResponseHeader("X-HTTP-Session-Id"):null;NM&&(te.ya=NM,is(te.I,te.D,NM))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-m.F,B.j.info("Handshake RTT: "+B.R+"ms"));var Ht=m;if((te=B).qa=jF(te,te.J?te.ia:null,te.W),Ht.K){mF(te.h,Ht);var $i=Ht,Ba=te.L;Ba&&($i.I=Ba),$i.B&&(DM($i),nS($i)),te.g=Ht}else FF(te);0<B.i.length&&cS(B)}else"stop"!=di[0]&&"close"!=di[0]||by(B,7);else 3==B.G&&("stop"==di[0]||"close"==di[0]?"stop"==di[0]?by(B,7):xM(B):"noop"!=di[0]&&B.l&&B.l.ta(di),B.v=0)}uT()}catch{}}function fF(m){this.l=m||10,m=h.PerformanceNavigationTiming?0<(m=h.performance.getEntriesByType("navigation")).length&&("hq"==m[0].nextHopProtocol||"h2"==m[0].nextHopProtocol):!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pF(m){return!!m.h||!!m.g&&m.g.size>=m.j}function gF(m){return m.h?1:m.g?m.g.size:0}function CM(m,M){return m.h?m.h==M:!!m.g&&m.g.has(M)}function SM(m,M){m.g?m.g.add(M):m.h=M}function mF(m,M){m.h&&m.h==M?m.h=null:m.g&&m.g.has(M)&&m.g.delete(M)}function yF(m){if(null!=m.h)return m.i.concat(m.h.D);if(null!=m.g&&0!==m.g.size){let M=m.i;for(const B of m.g.values())M=M.concat(B.D);return M}return Pe(m.i)}function _F(m,M){if(m.forEach&&"function"==typeof m.forEach)m.forEach(M,void 0);else if(g(m)||"string"==typeof m)Array.prototype.forEach.call(m,M,void 0);else for(var B=function aU(m){if(m.na&&"function"==typeof m.na)return m.na();if(!m.V||"function"!=typeof m.V){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(g(m)||"string"==typeof m){var M=[];m=m.length;for(var B=0;B<m;B++)M.push(B);return M}M=[],B=0;for(const te in m)M[B++]=te;return M}}}(m),te=function oU(m){if(m.V&&"function"==typeof m.V)return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if("string"==typeof m)return m.split("");if(g(m)){for(var M=[],B=m.length,te=0;te<B;te++)M.push(m[te]);return M}for(te in M=[],B=0,m)M[B++]=m[te];return M}(m),Ve=te.length,Ye=0;Ye<Ve;Ye++)M.call(void 0,te[Ye],B&&B[Ye],m)}mg.prototype.ca=function(m){m=m.target;const M=this.M;M&&3==wf(m)?M.j():this.Y(m)},mg.prototype.Y=function(m){try{if(m==this.g)e:{const uu=wf(this.g);var M=this.g.Ba();if(this.g.Z(),!(3>uu)&&(3!=uu||this.g&&(this.h.h||this.g.oa()||PF(this.g)))){this.J||4!=uu||7==M||uT(),DM(this);var B=this.g.Z();this.X=B;t:if(dF(this)){var te=PF(this.g);m="";var Ve=te.length,Ye=4==wf(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ay(this),dT(this);var Ht="";break t}this.h.i=new h.TextDecoder}for(M=0;M<Ve;M++)this.h.h=!0,m+=this.h.i.decode(te[M],{stream:!(Ye&&M==Ve-1)});te.length=0,this.h.g+=m,this.C=0,Ht=this.h.g}else Ht=this.g.oa();if(this.o=200==B,function tU(m,M,B,te,Ve,Ye,Ht){m.info(function(){return"XMLHTTP RESP ("+te+") [ attempt "+Ve+"]: "+M+"\n"+B+"\n"+Ye+" "+Ht})}(this.i,this.u,this.A,this.l,this.R,uu,B),this.o){if(this.T&&!this.K){t:{if(this.g){var $i,Ba=this.g;if(($i=Ba.g?Ba.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xt($i)){var di=$i;break t}}di=null}if(!(B=di)){this.o=!1,this.s=3,Ou(12),Ay(this),dT(this);break e}hI(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bM(this,B)}if(this.P){let dd;for(B=!0;!this.J&&this.C<Ht.length;){if(dd=iU(this,Ht),dd==TM){4==uu&&(this.s=4,Ou(14),B=!1),hI(this.i,this.l,null,"[Incomplete Response]");break}if(dd==cF){this.s=4,Ou(15),hI(this.i,this.l,Ht,"[Invalid Chunk]"),B=!1;break}hI(this.i,this.l,dd,null),bM(this,dd)}if(dF(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=uu||0!=Ht.length||this.h.h||(this.s=1,Ou(16),B=!1),this.o=this.o&&B,B){if(0<Ht.length&&!this.W){this.W=!0;var au=this.j;au.g==this&&au.ba&&!au.M&&(au.j.info("Great, no buffering proxy detected. Bytes received: "+Ht.length),MM(au),au.M=!0,Ou(11))}}else hI(this.i,this.l,Ht,"[Invalid Chunked Response]"),Ay(this),dT(this)}else hI(this.i,this.l,Ht,null),bM(this,Ht);4==uu&&Ay(this),this.o&&!this.J&&(4==uu?VF(this.j,this):(this.o=!1,nS(this)))}else(function EU(m){const M={};m=(m.g&&2<=wf(m)&&m.g.getAllResponseHeaders()||"").split("\r\n");for(let te=0;te<m.length;te++){if(xt(m[te]))continue;var B=ke(m[te]);const Ve=B[0];if("string"!=typeof(B=B[1]))continue;B=B.trim();const Ye=M[Ve]||[];M[Ve]=Ye,Ye.push(B)}!function Ee(m,M){for(const B in m)M.call(void 0,m[B],B,m)}(M,function(te){return te.join(", ")})})(this.g),400==B&&0<Ht.indexOf("Unknown SID")?(this.s=3,Ou(12)):(this.s=0,Ou(13)),Ay(this),dT(this)}}}catch{}},mg.prototype.cancel=function(){this.J=!0,Ay(this)},mg.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(function nU(m,M){m.info(function(){return"TIMEOUT: "+M})}(this.i,this.A),2!=this.L&&(uT(),Ou(17)),Ay(this),this.s=2,dT(this)):hF(this,this.S-m)},fF.prototype.cancel=function(){if(this.i=yF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const m of this.g.values())m.cancel();this.g.clear()}};var vF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dy(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Dy){this.h=m.h,rS(this,m.j),this.o=m.o,this.g=m.g,iS(this,m.s),this.l=m.l;var M=m.i,B=new pT;B.i=M.i,M.g&&(B.g=new Map(M.g),B.h=M.h),IF(this,B),this.m=m.m}else m&&(M=String(m).match(vF))?(this.h=!1,rS(this,M[1]||"",!0),this.o=hT(M[2]||""),this.g=hT(M[3]||"",!0),iS(this,M[4]),this.l=hT(M[5]||"",!0),IF(this,M[6]||"",!0),this.m=hT(M[7]||"")):(this.h=!1,this.i=new pT(null,this.h))}function Ef(m){return new Dy(m)}function rS(m,M,B){m.j=B?hT(M,!0):M,m.j&&(m.j=m.j.replace(/:$/,""))}function iS(m,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);m.s=M}else m.s=null}function IF(m,M,B){M instanceof pT?(m.i=M,function pU(m,M){M&&!m.j&&(yg(m),m.i=null,m.g.forEach(function(B,te){var Ve=te.toLowerCase();te!=Ve&&(wF(this,te),AF(this,Ve,B))},m)),m.j=M}(m.i,m.h)):(B||(M=fT(M,hU)),m.i=new pT(M,m.h))}function is(m,M,B){m.i.set(M,B)}function sS(m){return is(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function hT(m,M){return m?M?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function fT(m,M,B){return"string"==typeof m?(m=encodeURI(m).replace(M,cU),B&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function cU(m){return"%"+((m=m.charCodeAt(0))>>4&15).toString(16)+(15&m).toString(16)}Dy.prototype.toString=function(){var m=[],M=this.j;M&&m.push(fT(M,EF,!0),":");var B=this.g;return(B||"file"==M)&&(m.push("//"),(M=this.o)&&m.push(fT(M,EF,!0),"@"),m.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(B=this.s)&&m.push(":",String(B))),(B=this.l)&&(this.g&&"/"!=B.charAt(0)&&m.push("/"),m.push(fT(B,"/"==B.charAt(0)?dU:lU,!0))),(B=this.i.toString())&&m.push("?",B),(B=this.m)&&m.push("#",fT(B,fU)),m.join("")};var m,EF=/[#\/\?@]/g,lU=/[#\?:]/g,dU=/[#\?]/g,hU=/[#\?@]/g,fU=/#/g;function pT(m,M){this.h=this.g=null,this.i=m||null,this.j=!!M}function yg(m){m.g||(m.g=new Map,m.h=0,m.i&&function uU(m,M){if(m){m=m.split("&");for(var B=0;B<m.length;B++){var te=m[B].indexOf("="),Ve=null;if(0<=te){var Ye=m[B].substring(0,te);Ve=m[B].substring(te+1)}else Ye=m[B];M(Ye,Ve?decodeURIComponent(Ve.replace(/\+/g," ")):"")}}}(m.i,function(M,B){m.add(decodeURIComponent(M.replace(/\+/g," ")),B)}))}function wF(m,M){yg(m),M=fI(m,M),m.g.has(M)&&(m.i=null,m.h-=m.g.get(M).length,m.g.delete(M))}function TF(m,M){return yg(m),M=fI(m,M),m.g.has(M)}function AF(m,M,B){wF(m,M),0<B.length&&(m.i=null,m.g.set(fI(m,M),Pe(B)),m.h+=B.length)}function fI(m,M){return M=String(M),m.j&&(M=M.toLowerCase()),M}function _g(m,M,B,te,Ve){try{Ve&&(Ve.onload=null,Ve.onerror=null,Ve.onabort=null,Ve.ontimeout=null),te(B)}catch{}}function yU(){this.g=new Z2}function _U(m,M,B){const te=B||"";try{_F(m,function(Ve,Ye){let Ht=Ve;v(Ve)&&(Ht=_M(Ve)),M.push(te+Ye+"="+encodeURIComponent(Ht))})}catch(Ve){throw M.push(te+"type="+encodeURIComponent("_badmap")),Ve}}function gT(m){this.l=m.Ub||null,this.j=m.eb||!1}function oS(m,M){ou.call(this),this.D=m,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function DF(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}function mT(m){m.readyState=4,m.l=null,m.j=null,m.v=null,yT(m)}function yT(m){m.onreadystatechange&&m.onreadystatechange.call(m)}function bF(m){let M="";return on(m,function(B,te){M+=te,M+=":",M+=B,M+="\r\n"}),M}function RM(m,M,B){e:{for(te in B){var te=!1;break e}te=!0}te||(B=bF(B),"string"==typeof m?null!=B&&encodeURIComponent(String(B)):is(m,M,B))}function Hs(m){ou.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=pT.prototype).add=function(m,M){yg(this),this.i=null,m=fI(this,m);var B=this.g.get(m);return B||this.g.set(m,B=[]),B.push(M),this.h+=1,this},n.forEach=function(m,M){yg(this),this.g.forEach(function(B,te){B.forEach(function(Ve){m.call(M,Ve,te,this)},this)},this)},n.na=function(){yg(this);const m=Array.from(this.g.values()),M=Array.from(this.g.keys()),B=[];for(let te=0;te<M.length;te++){const Ve=m[te];for(let Ye=0;Ye<Ve.length;Ye++)B.push(M[te])}return B},n.V=function(m){yg(this);let M=[];if("string"==typeof m)TF(this,m)&&(M=M.concat(this.g.get(fI(this,m))));else{m=Array.from(this.g.values());for(let B=0;B<m.length;B++)M=M.concat(m[B])}return M},n.set=function(m,M){return yg(this),this.i=null,TF(this,m=fI(this,m))&&(this.h-=this.g.get(m).length),this.g.set(m,[M]),this.h+=1,this},n.get=function(m,M){return m&&0<(m=this.V(m)).length?String(m[0]):M},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],M=Array.from(this.g.keys());for(var B=0;B<M.length;B++){var te=M[B];const Ye=encodeURIComponent(String(te)),Ht=this.V(te);for(te=0;te<Ht.length;te++){var Ve=Ye;""!==Ht[te]&&(Ve+="="+encodeURIComponent(String(Ht[te]))),m.push(Ve)}}return this.i=m.join("&")},le(gT,vM),gT.prototype.g=function(){return new oS(this.l,this.j)},gT.prototype.i=(m={},function(){return m}),le(oS,ou),(n=oS.prototype).open=function(m,M){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=M,this.readyState=1,yT(this)},n.send=function(m){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(M.body=m),(this.D||h).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mT(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,yT(this)),this.g&&(this.readyState=3,yT(this),this.g)))if("arraybuffer"===this.responseType)m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DF(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var M=m.value?m.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!m.done}))&&(this.response=this.responseText+=M)}m.done?mT(this):yT(this),3==this.readyState&&DF(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,mT(this))},n.Qa=function(m){this.g&&(this.response=m,mT(this))},n.ga=function(){this.g&&mT(this)},n.setRequestHeader=function(m,M){this.u.append(m,M)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],M=this.h.entries();for(var B=M.next();!B.done;)m.push((B=B.value)[0]+": "+B[1]),B=M.next();return m.join("\r\n")},Object.defineProperty(oS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(m){this.m=m?"include":"same-origin"}}),le(Hs,ou);var vU=/^https?$/i,IU=["POST","PUT"];function CF(m,M){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=M,m.m=5,SF(m),aS(m)}function SF(m){m.A||(m.A=!0,Nu(m,"complete"),Nu(m,"error"))}function RF(m){if(m.h&&typeof c<"u"&&(!m.v[1]||4!=wf(m)||2!=m.Z()))if(m.u&&4==wf(m))Xk(m.Ea,0,m);else if(Nu(m,"readystatechange"),4==wf(m)){m.h=!1;try{const Ht=m.Z();e:switch(Ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var B;if(!(B=M)){var te;if(te=0===Ht){var Ve=String(m.D).match(vF)[1]||null;!Ve&&h.self&&h.self.location&&(Ve=h.self.location.protocol.slice(0,-1)),te=!vU.test(Ve?Ve.toLowerCase():"")}B=te}if(B)Nu(m,"complete"),Nu(m,"success");else{m.m=6;try{var Ye=2<wf(m)?m.g.statusText:""}catch{Ye=""}m.l=Ye+" ["+m.Z()+"]",SF(m)}}finally{aS(m)}}}function aS(m,M){if(m.g){xF(m);const B=m.g,te=m.v[0]?()=>{}:null;m.g=null,m.v=null,M||Nu(m,"ready");try{B.onreadystatechange=te}catch{}}}function xF(m){m.I&&(h.clearTimeout(m.I),m.I=null)}function wf(m){return m.g?m.g.readyState:0}function PF(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function _T(m,M,B){return B&&B.internalChannelParams&&B.internalChannelParams[m]||M}function MF(m){this.Aa=0,this.i=[],this.j=new lT,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_T("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_T("baseRetryDelayMs",5e3,m),this.cb=_T("retryDelaySeedMs",1e4,m),this.Wa=_T("forwardChannelMaxRetries",2,m),this.wa=_T("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new fF(m&&m.concurrentRequestLimit),this.Da=new yU,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function xM(m){if(NF(m),3==m.G){var M=m.U++,B=Ef(m.I);if(is(B,"SID",m.K),is(B,"RID",M),is(B,"TYPE","terminate"),vT(m,B),(M=new mg(m,m.j,M)).L=2,M.v=sS(Ef(B)),B=!1,h.navigator&&h.navigator.sendBeacon)try{B=h.navigator.sendBeacon(M.v.toString(),"")}catch{}!B&&h.Image&&((new Image).src=M.v,B=!0),B||(M.g=$F(M.j,null),M.g.ea(M.v)),M.F=Date.now(),nS(M)}BF(m)}function uS(m){m.g&&(MM(m),m.g.cancel(),m.g=null)}function NF(m){uS(m),m.u&&(h.clearTimeout(m.u),m.u=null),lS(m),m.h.cancel(),m.s&&("number"==typeof m.s&&h.clearTimeout(m.s),m.s=null)}function cS(m){if(!pF(m.h)&&!m.s){m.s=!0;var M=m.Ga;nT||Gk(),rT||(nT(),rT=!0),cM.add(M,m),m.B=0}}function OF(m,M){var B;B=M?M.l:m.U++;const te=Ef(m.I);is(te,"SID",m.K),is(te,"RID",B),is(te,"AID",m.T),vT(m,te),m.m&&m.o&&RM(te,m.m,m.o),B=new mg(m,m.j,B,m.B+1),null===m.m&&(B.H=m.o),M&&(m.i=M.D.concat(m.i)),M=kF(m,B,1e3),B.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),SM(m.h,B),AM(B,te,M)}function vT(m,M){m.H&&on(m.H,function(B,te){is(M,te,B)}),m.l&&_F({},function(B,te){is(M,te,B)})}function kF(m,M,B){B=Math.min(m.i.length,B);var te=m.l?z(m.l.Na,m.l,m):null;e:{var Ve=m.i;let Ye=-1;for(;;){const Ht=["count="+B];-1==Ye?0<B?(Ye=Ve[0].g,Ht.push("ofs="+Ye)):Ye=0:Ht.push("ofs="+Ye);let $i=!0;for(let Ba=0;Ba<B;Ba++){let di=Ve[Ba].g;const au=Ve[Ba].map;if(di-=Ye,0>di)Ye=Math.max(0,Ve[Ba].g-100),$i=!1;else try{_U(au,Ht,"req"+di+"_")}catch{te&&te(au)}}if($i){te=Ht.join("&");break e}}}return m=m.i.splice(0,B),M.D=m,te}function FF(m){if(!m.g&&!m.u){m.Y=1;var M=m.Fa;nT||Gk(),rT||(nT(),rT=!0),cM.add(M,m),m.v=0}}function PM(m){return!(m.g||m.u||3<=m.v||(m.Y++,m.u=cT(z(m.Fa,m),UF(m,m.v)),m.v++,0))}function MM(m){null!=m.A&&(h.clearTimeout(m.A),m.A=null)}function LF(m){m.g=new mg(m,m.j,"rpc",m.Y),null===m.m&&(m.g.H=m.o),m.g.O=0;var M=Ef(m.qa);is(M,"RID","rpc"),is(M,"SID",m.K),is(M,"AID",m.T),is(M,"CI",m.F?"0":"1"),!m.F&&m.ja&&is(M,"TO",m.ja),is(M,"TYPE","xmlhttp"),vT(m,M),m.m&&m.o&&RM(M,m.m,m.o),m.L&&(m.g.I=m.L);var B=m.g;m=m.ia,B.L=1,B.v=sS(Ef(M)),B.m=null,B.P=!0,lF(B,m)}function lS(m){null!=m.C&&(h.clearTimeout(m.C),m.C=null)}function VF(m,M){var B=null;if(m.g==M){lS(m),MM(m),m.g=null;var te=2}else{if(!CM(m.h,M))return;B=M.D,mF(m.h,M),te=1}if(0!=m.G)if(M.o)if(1==te){B=M.m?M.m.length:0,M=Date.now()-M.F;var Ve=m.B;Nu(te=ZC(),new oF(te,B)),cS(m)}else FF(m);else if(3==(Ve=M.s)||0==Ve&&0<M.X||!(1==te&&function wU(m,M){return!(gF(m.h)>=m.h.j-(m.s?1:0)||(m.s?(m.i=M.D.concat(m.i),0):1==m.G||2==m.G||m.B>=(m.Va?0:m.Wa)||(m.s=cT(z(m.Ga,m,M),UF(m,m.B)),m.B++,0)))}(m,M)||2==te&&PM(m)))switch(B&&0<B.length&&(M=m.h,M.i=M.i.concat(B)),Ve){case 1:by(m,5);break;case 4:by(m,10);break;case 3:by(m,6);break;default:by(m,2)}}function UF(m,M){let B=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(B*=2),B*M}function by(m,M){if(m.j.info("Error code "+M),2==M){var B=z(m.fb,m),te=m.Xa;const Ve=!te;te=new Dy(te||"//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||rS(te,"https"),sS(te),Ve?function gU(m,M){const B=new lT;if(h.Image){const te=new Image;te.onload=ne(_g,B,"TestLoadImage: loaded",!0,M,te),te.onerror=ne(_g,B,"TestLoadImage: error",!1,M,te),te.onabort=ne(_g,B,"TestLoadImage: abort",!1,M,te),te.ontimeout=ne(_g,B,"TestLoadImage: timeout",!1,M,te),h.setTimeout(function(){te.ontimeout&&te.ontimeout()},1e4),te.src=m}else M(!1)}(te.toString(),B):function mU(m,M){new lT;const te=new AbortController,Ve=setTimeout(()=>{te.abort(),_g(0,0,!1,M)},1e4);fetch(m,{signal:te.signal}).then(Ye=>{clearTimeout(Ve),_g(0,0,!!Ye.ok,M)}).catch(()=>{clearTimeout(Ve),_g(0,0,!1,M)})}(te.toString(),B)}else Ou(2);m.G=0,m.l&&m.l.sa(M),BF(m),NF(m)}function BF(m){if(m.G=0,m.ka=[],m.l){const M=yF(m.h);(0!=M.length||0!=m.i.length)&&(be(m.ka,M),be(m.ka,m.i),m.h.i.length=0,Pe(m.i),m.i.length=0),m.l.ra()}}function jF(m,M,B){var te=B instanceof Dy?Ef(B):new Dy(B);if(""!=te.g)M&&(te.g=M+"."+te.g),iS(te,te.s);else{var Ve=h.location;te=Ve.protocol,M=M?M+"."+Ve.hostname:Ve.hostname,Ve=+Ve.port;var Ye=new Dy(null);te&&rS(Ye,te),M&&(Ye.g=M),Ve&&iS(Ye,Ve),B&&(Ye.l=B),te=Ye}return M=m.ya,(B=m.D)&&M&&is(te,B,M),is(te,"VER",m.la),vT(m,te),te}function $F(m,M,B){if(M&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return(M=new Hs(m.Ca&&!m.pa?new gT({eb:B}):m.pa)).Ha(m.J),M}function zF(){}function dS(){}function zc(m,M){ou.call(this),this.g=new MF(M),this.l=m,this.h=M&&M.messageUrlParams||null,m=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(m?m["X-WebChannel-Content-Type"]=M.messageContentType:m={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(m?m["X-WebChannel-Client-Profile"]=M.va:m={"X-WebChannel-Client-Profile":M.va}),this.g.S=m,(m=M&&M.Sb)&&!xt(m)&&(this.g.m=m),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!xt(M)&&(this.g.D=M,null!==(m=this.h)&&M in m&&M in(m=this.h)&&delete m[M]),this.j=new pI(this)}function HF(m){IM.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var M=m.__sm__;if(M){e:{for(const B in M){m=B;break e}m=void 0}(this.i=m)&&(m=this.i,M=null!==M&&m in M?M[m]:void 0),this.data=M}else this.data=m}function GF(){EM.call(this),this.status=1}function pI(m){this.g=m}(n=Hs.prototype).Ha=function(m){this.J=m},n.ea=function(m,M,B,te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);M=M?M.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wM.g(),this.v=function tF(m){return m.h||(m.h=m.i())}(this.o?this.o:wM),this.g.onreadystatechange=z(this.Ea,this);try{this.B=!0,this.g.open(M,String(m),!0),this.B=!1}catch(Ye){return void CF(this,Ye)}if(m=B||"",B=new Map(this.headers),te)if(Object.getPrototypeOf(te)===Object.prototype)for(var Ve in te)B.set(Ve,te[Ve]);else{if("function"!=typeof te.keys||"function"!=typeof te.get)throw Error("Unknown input type for opt_headers: "+String(te));for(const Ye of te.keys())B.set(Ye,te.get(Ye))}te=Array.from(B.keys()).find(Ye=>"content-type"==Ye.toLowerCase()),Ve=h.FormData&&m instanceof h.FormData,!(0<=Array.prototype.indexOf.call(IU,M,void 0))||te||Ve||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ye,Ht]of B)this.g.setRequestHeader(Ye,Ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xF(this),this.u=!0,this.g.send(m),this.u=!1}catch(Ye){CF(this,Ye)}},n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Nu(this,"complete"),Nu(this,"abort"),aS(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),aS(this,!0)),Hs.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?RF(this):this.bb())},n.bb=function(){RF(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<wf(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var M=this.g.responseText;return m&&0==M.indexOf(m)&&(M=M.substring(m.length)),J2(M)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=MF.prototype).la=8,n.G=1,n.connect=function(m,M,B,te){Ou(0),this.W=m,this.H=M||{},B&&void 0!==te&&(this.H.OSID=B,this.H.OAID=te),this.F=this.X,this.I=jF(this,null,this.W),cS(this)},n.Ga=function(m){if(this.s)if(this.s=null,1==this.G){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Ve=new mg(this,this.j,m);let Ye=this.o;if(this.S&&(Ye?(Ye=oe(Ye),Ce(Ye,this.S)):Ye=this.S),null!==this.m||this.O||(Ve.H=Ye,Ye=null),this.P)e:{for(var M=0,B=0;B<this.i.length;B++){var te=this.i[B];if(void 0===(te="__data__"in te.map&&"string"==typeof(te=te.map.__data__)?te.length:void 0))break;if(4096<(M+=te)){M=B;break e}if(4096===M||B===this.i.length-1){M=B+1;break e}}M=1e3}else M=1e3;M=kF(this,Ve,M),is(B=Ef(this.I),"RID",m),is(B,"CVER",22),this.D&&is(B,"X-HTTP-Session-Id",this.D),vT(this,B),Ye&&(this.O?M="headers="+encodeURIComponent(String(bF(Ye)))+"&"+M:this.m&&RM(B,this.m,Ye)),SM(this.h,Ve),this.Ua&&is(B,"TYPE","init"),this.P?(is(B,"$req",M),is(B,"SID","null"),Ve.T=!0,AM(Ve,B,null)):AM(Ve,B,M),this.G=2}}else 3==this.G&&(m?OF(this,m):0==this.i.length||pF(this.h)||OF(this))},n.Fa=function(){if(this.u=null,LF(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=cT(z(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ou(10),uS(this),LF(this))},n.Za=function(){null!=this.C&&(this.C=null,uS(this),PM(this),Ou(19))},n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ou(2)):(this.j.info("Failed to ping google.com"),Ou(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=zF.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},dS.prototype.g=function(m,M){return new zc(m,M)},le(zc,ou),zc.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zc.prototype.close=function(){xM(this.g)},zc.prototype.o=function(m){var M=this.g;if("string"==typeof m){var B={};B.__data__=m,m=B}else this.u&&((B={}).__data__=_M(m),m=B);M.i.push(new class{constructor(m,M){this.g=m,this.map=M}}(M.Ya++,m)),3==M.G&&cS(M)},zc.prototype.N=function(){this.g.l=null,delete this.j,xM(this.g),delete this.g,zc.aa.N.call(this)},le(HF,IM),le(GF,EM),le(pI,zF),pI.prototype.ua=function(){Nu(this.g,"a")},pI.prototype.ta=function(m){Nu(this.g,new HF(m))},pI.prototype.sa=function(m){Nu(this.g,new GF)},pI.prototype.ra=function(){Nu(this.g,"b")},dS.prototype.createWebChannel=dS.prototype.g,zc.prototype.send=zc.prototype.o,zc.prototype.open=zc.prototype.m,zc.prototype.close=zc.prototype.close,po=Gi.createWebChannelTransport=function(){return new dS},Ta=Gi.getStatEventTarget=function(){return ZC()},wa=Gi.Event=Ty,Wc=Gi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eS.NO_ERROR=0,eS.TIMEOUT=8,eS.HTTP_ERROR=6,Bu=Gi.ErrorCode=eS,aF.COMPLETE="complete",Ea=Gi.EventType=aF,nF.EventType=aT,aT.OPEN="a",aT.CLOSE="b",aT.ERROR="c",aT.MESSAGE="d",ou.prototype.listen=ou.prototype.K,ur=Gi.WebChannel=nF,Gi.FetchXmlHttpFactory=gT,Hs.prototype.listenOnce=Hs.prototype.L,Hs.prototype.getLastError=Hs.prototype.Ka,Hs.prototype.getLastErrorCode=Hs.prototype.Ba,Hs.prototype.getStatus=Hs.prototype.Z,Hs.prototype.getResponseJson=Hs.prototype.Oa,Hs.prototype.getResponseText=Hs.prototype.oa,Hs.prototype.send=Hs.prototype.ea,Hs.prototype.setWithCredentials=Hs.prototype.Ha,cs=Gi.XhrIo=Hs}).apply(typeof _s<"u"?_s:typeof self<"u"?self:typeof window<"u"?window:{});const fd="@firebase/firestore";class ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let Aa="11.7.3";const go=new Nn("@firebase/firestore");function xo(){return go.logLevel}function ut(n,...e){if(go.logLevel<=Mn.DEBUG){const t=e.map(ju);go.debug(`Firestore (${Aa}): ${n}`,...t)}}function Yr(n,...e){if(go.logLevel<=Mn.ERROR){const t=e.map(ju);go.error(`Firestore (${Aa}): ${n}`,...t)}}function Sr(n,...e){if(go.logLevel<=Mn.WARN){const t=e.map(ju);go.warn(`Firestore (${Aa}): ${n}`,...t)}}function ju(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Bt(n,e,t){let r="Unexpected state";"string"==typeof e?r=e:t=e,Kc(n,r,t)}function Kc(n,e,t){let r=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(void 0!==t)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Yr(r),new Error(r)}function Wt(n,e,t,r){let s="Unexpected state";"string"==typeof t?s=t:r=t,n||Kc(e,s,r)}function Rt(n,e){return n}const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ts.UNAUTHENTICATED))}shutdown(){}}class qa{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Wt(void 0===this.o,42304);let s=this.i;const a=v=>this.i!==s?(s=this.i,t(v)):Promise.resolve();let c=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bi,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=c;e.enqueueRetryable((0,K.A)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt("string"==typeof r.accessToken,31837,{l:r}),new wi(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(null===e||"string"==typeof e,2055,{h:e}),new ts(e)}}class pu{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pc{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pu(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gu{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,function hd(n){return null!=n&&void 0!==n.settings}(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Wt(void 0===this.o,3512);const r=a=>{null!=a.error&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ut("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wa(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Wt("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new Wa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ka(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Po(){return new TextEncoder}class zu{static newId(){const t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Ka(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[a]%62))}return r}}function un(n,e){return n<e?-1:n>e?1:0}function Qc(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return un(r,s);{const a=Po(),c=mu(a.encode(Jo(n,t)),a.encode(Jo(e,t)));return 0!==c?c:un(r,s)}}t+=r>65535?2:1}return un(n.length,e.length)}function Jo(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mu(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return un(n[t],e[t]);return un(n.length,e.length)}function ls(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}const Gu=-62135596800;class ui{static now(){return ui.fromMillis(Date.now())}static fromDate(e){return ui.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ui(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ct($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ct($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Gu)throw new ct($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-Gu).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new ui(0,0))}static max(){return new Yt(new ui(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qa="__name__";class D{constructor(e,t,r){void 0===t?t=0:t>e.length&&Bt(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&Bt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===D.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof D?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=D.compareSegments(e.get(s),t.get(s));if(0!==a)return a}return un(e.length,t.length)}static compareSegments(e,t){const r=D.isNumericId(e),s=D.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?D.extractNumericId(e).compare(D.extractNumericId(t)):Qc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zr.fromString(e.substring(4,e.length-2))}}class j extends D{construct(e,t,r){return new j(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ct($e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new j(t)}static emptyPath(){return new j([])}}const k=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class U extends D{construct(e,t,r){return new U(e,t,r)}static isValidIdentifier(e){return k.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),U.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Qa}static keyField(){return new U([Qa])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(0===r.length)throw new ct($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if("\\"===h){if(s+1===e.length)throw new ct($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ct($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,s+=2}else"`"===h?(c=!c,s++):"."!==h||c?(r+=h,s++):(a(),s++)}if(a(),c)throw new ct($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new U(t)}static emptyPath(){return new U([])}}class Y{constructor(e){this.path=e}static fromPath(e){return new Y(j.fromString(e))}static fromName(e){return new Y(j.fromString(e).popFirst(5))}static empty(){return new Y(j.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===j.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return j.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new j(e.slice()))}}function Ti(n){return new ii(n.readTime,n.key,-1)}class ii{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ii(Yt.min(),Y.empty(),-1)}static max(){return new ii(Yt.max(),Y.empty(),-1)}}function Xs(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Y.comparator(n.documentKey,e.documentKey),0!==t?t:un(n.largestBatchId,e.largestBatchId))}const Js="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pi(n){return mo.apply(this,arguments)}function mo(){return(mo=(0,K.A)(function*(n){if(n.code!==$e.FAILED_PRECONDITION||n.message!==Js)throw n;ut("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,r)=>{t(e)})}static reject(e){return new De((t,r)=>{r(e)})}static waitFor(e){return new De((t,r)=>{let s=0,a=0,c=!1;e.forEach(h=>{++s,h.next(()=>{++a,c&&a===s&&t()},g=>r(g))}),c=!0,a===s&&t()})}static or(e){let t=De.resolve(!1);for(const r of e)t=t.next(s=>s?De.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new De((r,s)=>{const a=e.length,c=new Array(a);let h=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(b=>{c[v]=b,++h,h===a&&r(c)},b=>s(b))}})}static doWhile(e,t){return new De((r,s)=>{const a=()=>{!0===e()?t().next(()=>{a()},s):r()};a()})}}function Pi(n){return"IndexedDbTransactionError"===n.name}let Zs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>r.writeSequenceNumber(s))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}return n.le=-1,n})();function ki(n){return null==n}function vc(n){return 0===n&&1/n==-1/0}const Al="\x01";function Yc(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="\x01\x10";break;case Al:t+="\x01\x11";break;default:t+=a}}return t}function gi(n){return n+Al+"\x01"}const mn="mutationQueues",vo="mutations",Iu="documentMutations",Eu="remoteDocumentGlobal",Sa="targets",Xa="targetDocuments",Xr="targetGlobal",eo="collectionParents",Zo="clientMetadata",Sl="bundles",Rl="namedQueries";function Tc(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ku(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class Rr{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ra(this.root,e,this.comparator,!0)}}class Ra{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??ws.RED,this.left=s??ws.EMPTY,this.right=a??ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new ws(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===a?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ws.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Bt(27949);return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1,ws.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt(57766)}get value(){throw Bt(16141)}get color(){throw Bt(16727)}get left(){throw Bt(29726)}get right(){throw Bt(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new ws(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jr{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nl(this.data.getIterator())}getIteratorFrom(e){return new Nl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(s,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jr(this.comparator);return t.data=e,t}}class Nl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ls{constructor(e){this.fields=e,e.sort(U.comparator)}static empty(){return new Ls([])}unionWith(e){let t=new Jr(U.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Af extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Af("Invalid base64 string: "+a):a}}(e);return new qi(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new qi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const wd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(n){if(Wt(!!n,39018),"string"==typeof n){let e=0;const t=wd.exec(n);if(Wt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ai(n.seconds),nanos:Ai(n.nanos)}}function Ai(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mo(n){return"string"==typeof n?qi.fromBase64String(n):qi.fromUint8Array(n)}const el="server_timestamp",hh="__type__",fh="__previous_value__",ph="__local_write_time__";function Qu(n){var e,t;return(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{})[hh])||void 0===t?void 0:t.stringValue)===el}function Ol(n){const e=n.mapValue.fields[fh];return Qu(e)?Ol(e):e}function Ts(n){const e=ns(n.mapValue.fields[ph].timestampValue);return new ui(e.seconds,e.nanos)}class bf{constructor(e,t,r,s,a,c,h,g,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=b}}const Yu="(default)";class na{constructor(e,t){this.projectId=e,this.database=t||Yu}static empty(){return new na("","")}get isDefaultDatabase(){return this.database===Yu}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}const Ac="__type__",Dc="__max__",ra={mapValue:{fields:{__type__:{stringValue:Dc}}}},bc="__vector__",Tu="value";function Xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qu(n)?4:Pc(n)?9007199254740991:Rc(n)?10:11:Bt(28295,{value:n})}function ia(n,e){if(n===e)return!0;const t=Xu(n);if(t!==Xu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ts(n).isEqual(Ts(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=ns(s.timestampValue),h=ns(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Mo(n.bytesValue).isEqual(Mo(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Ai(s.geoPointValue.latitude)===Ai(a.geoPointValue.latitude)&&Ai(s.geoPointValue.longitude)===Ai(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ai(s.integerValue)===Ai(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Ai(s.doubleValue),h=Ai(a.doubleValue);return c===h?vc(c)===vc(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ls(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Tc(c)!==Tc(h))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===h[g]||!ia(c[g],h[g])))return!1;return!0}(n,e);default:return Bt(52216,{left:n})}var a}function Td(n,e){return void 0!==(n.values||[]).find(t=>ia(t,e))}function xa(n,e){if(n===e)return 0;const t=Xu(n),r=Xu(e);if(t!==r)return un(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return un(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=Ai(a.integerValue||a.doubleValue),g=Ai(c.integerValue||c.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return Au(n.timestampValue,e.timestampValue);case 4:return Au(Ts(n),Ts(e));case 5:return Qc(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Mo(a),g=Mo(c);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),g=c.split("/");for(let v=0;v<h.length&&v<g.length;v++){const b=un(h[v],g[v]);if(0!==b)return b}return un(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=un(Ai(a.latitude),Ai(c.latitude));return 0!==h?h:un(Ai(a.longitude),Ai(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Sc(n.arrayValue,e.arrayValue);case 10:return function(a,c){var h,g,v,b;const ne=null===(h=(a.fields||{})[Tu])||void 0===h?void 0:h.arrayValue,le=null===(g=(c.fields||{})[Tu])||void 0===g?void 0:g.arrayValue,Pe=un((null===(v=ne?.values)||void 0===v?void 0:v.length)||0,(null===(b=le?.values)||void 0===b?void 0:b.length)||0);return 0!==Pe?Pe:Sc(ne,le)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===ra.mapValue&&c===ra.mapValue)return 0;if(a===ra.mapValue)return 1;if(c===ra.mapValue)return-1;const h=a.fields||{},g=Object.keys(h),v=c.fields||{},b=Object.keys(v);g.sort(),b.sort();for(let O=0;O<g.length&&O<b.length;++O){const z=Qc(g[O],b[O]);if(0!==z)return z;const ne=xa(h[g[O]],v[b[O]]);if(0!==ne)return ne}return un(g.length,b.length)}(n.mapValue,e.mapValue);default:throw Bt(23264,{Pe:t})}}function Au(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return un(n,e);const t=ns(n),r=ns(e),s=un(t.seconds,r.seconds);return 0!==s?s:un(t.nanos,r.nanos)}function Sc(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=xa(t[s],r[s]);if(a)return a}return un(t.length,r.length)}function Pa(n){return Ad(n)}function Ad(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ns(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mo(n.bytesValue).toBase64():"referenceValue"in n?Y.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Ad(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Ad(t.fields[c])}`;return s+"}"}(n.mapValue):Bt(61005,{value:n})}function Ju(n){switch(Xu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ol(n);return e?16+Ju(e):16;case 5:return 2*n.stringValue.length;case 6:return Mo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(n.arrayValue.values||[]).reduce((s,a)=>s+Ju(a),0);case 10:case 11:return function(r){let s=0;return Ku(r.fields,(a,c)=>{s+=a.length+Ju(c)}),s}(n.mapValue);default:throw Bt(13486,{value:n})}}function As(n){return!!n&&"integerValue"in n}function Ma(n){return!!n&&"arrayValue"in n}function Cf(n){return!!n&&"nullValue"in n}function gh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dd(n){return!!n&&"mapValue"in n}function Rc(n){var e,t;return(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{})[Ac])||void 0===t?void 0:t.stringValue)===bc}function xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ku(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Pc(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Dc}class _e{constructor(e){this.value=e}static empty(){return new _e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(t)}setAll(e){let t=U.emptyPath(),r={},s=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=xc(c):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Dd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ku(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new _e(xc(this.value))}}class _t{constructor(e,t,r,s,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new _t(e,0,Yt.min(),Yt.min(),Yt.min(),_e.empty(),0)}static newFoundDocument(e,t,r,s){return new _t(e,1,t,Yt.min(),r,s,0)}static newNoDocument(e,t){return new _t(e,2,t,Yt.min(),Yt.min(),_e.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,Yt.min(),Yt.min(),_e.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_e.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_e.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pt{constructor(e,t){this.position=e,this.inclusive=t}}function en(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(r=a.field.isKeyField()?Y.comparator(Y.fromName(c.referenceValue),t.key):xa(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function xn(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}class Pn{constructor(e,t="asc"){this.field=e,this.dir=t}}function Oo(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Mi{}class ir extends Mi{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new mh(e,t,r):"array-contains"===t?new ET(e,r):"in"===t?new Lo(e,r):"not-in"===t?new Eg(e,r):"array-contains-any"===t?new Cd(e,r):new ir(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new yI(e,r):new IT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(xa(t,this.value)):null!==t&&Xu(this.value)===Xu(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Mi{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new xr(e,t)}matches(e){return Hr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Hr(n){return"and"===n.op}function ko(n){return function kl(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}(n)&&Hr(n)}function Fo(n){if(n instanceof ir)return n.field.canonicalString()+n.op.toString()+Pa(n.value);if(ko(n))return n.filters.map(e=>Fo(e)).join(",");{const e=n.filters.map(t=>Fo(t)).join(",");return`${n.op}(${e})`}}function Zu(n,e){return n instanceof ir?(r=n,(s=e)instanceof ir&&r.op===s.op&&r.field.isEqual(s.field)&&ia(r.value,s.value)):n instanceof xr?function(r,s){return s instanceof xr&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((a,c,h)=>a&&Zu(c,s.filters[h]),!0)}(n,e):void Bt(19439);var r,s}function bd(n){return n instanceof ir?`${(t=n).field.canonicalString()} ${t.op} ${Pa(t.value)}`:n instanceof xr?function(t){return t.op.toString()+" {"+t.getFilters().map(bd).join(" ,")+"}"}(n):"Filter";var t}class mh extends ir{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){const t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}}class yI extends ir{constructor(e,t){super(e,"in",t),this.keys=Sy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class IT extends ir{constructor(e,t){super(e,"not-in",t),this.keys=Sy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}class ET extends ir{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ma(t)&&Td(t.arrayValue,this.value)}}class Lo extends ir{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Td(this.value.arrayValue,t)}}class Eg extends ir{constructor(e,t){super(e,"not-in",t)}matches(e){if(Td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Td(this.value.arrayValue,t)}}class Cd extends ir{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ma(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Td(this.value.arrayValue,r))}}class _I{constructor(e,t=null,r=[],s=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=h,this.Ie=null}}function Fl(n,e=null,t=[],r=[],s=null,a=null,c=null){return new _I(n,e,t,r,s,a,c)}function tl(n){const e=Rt(n);if(null===e.Ie){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Fo(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),ki(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pa(r)).join(",")),e.Ie=t}return e.Ie}function Rf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Oo(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Zu(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xn(n.startAt,e.startAt)&&xn(n.endAt,e.endAt)}function Sd(n){return Y.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Du{constructor(e,t=null,r=[],s=[],a=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null}}function Rd(n){return new Du(n)}function Pf(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function nl(n){const e=Rt(n);if(null===e.Ee){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Jr(U.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(h=h.add(v.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Pn(a,r))}),t.has(U.keyField().canonicalString())||e.Ee.push(new Pn(U.keyField(),r))}return e.Ee}function Vo(n){const e=Rt(n);return e.de||(e.de=function wg(n,e){if("F"===n.limitType)return Fl(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new Pn(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new Pt(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pt(n.startAt.position,n.startAt.inclusive):null;return Fl(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,nl(n))),e.de}function Mf(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nf(n,e){return Rf(Vo(n),Vo(e))&&n.limitType===e.limitType}function vI(n){return`${tl(Vo(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>bd(s)).join(", ")}]`),ki(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Pa(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Pa(s)).join(",")),`Target(${r})`}(Vo(n))}; limitType=${n.limitType})`}function rl(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Y.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of nl(r))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(c,h,g){const v=en(c,h,g);return c.inclusive?v<=0:v<0}(r.startAt,nl(r),s)||r.endAt&&!function(c,h,g){const v=en(c,h,g);return c.inclusive?v>=0:v>0}(r.endAt,nl(r),s)));var r,s}function wT(n){return(e,t)=>{let r=!1;for(const s of nl(n)){const a=II(s,e,t);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function II(n,e,t){const r=n.field.isKeyField()?Y.comparator(e.key,t.key):function(a,c,h){const g=c.data.field(a),v=h.data.field(a);return null!==g&&null!==v?xa(g,v):Bt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Bt(19790,{direction:n.dir})}}class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,a]of r)if(this.equalsFn(s,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ku(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return function Ed(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const fS=new Rr(Y.comparator);function Na(){return fS}const EI=new Rr(Y.comparator);function Of(...n){let e=EI;for(const t of n)e=e.insert(t.key,t);return e}function kf(n){let e=EI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function tc(){return vh()}function wI(){return vh()}function vh(){return new il(n=>n.toString(),(n,e)=>n.isEqual(e))}new Rr(Y.comparator);const TI=new Jr(Y.comparator);function cr(...n){let e=TI;for(const t of n)e=e.add(t);return e}const TT=new Jr(un);class Ih{constructor(){this._=void 0}}function gS(n,e,t){return n instanceof Lf?function(s,a){const c={fields:{[hh]:{stringValue:el},[ph]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Qu(a)&&(a=Ol(a)),a&&(c.fields[fh]=a),{mapValue:c}}(t,e):n instanceof Eh?AI(n,e):n instanceof nc?Vf(n,e):function(s,a){const c=function bT(n,e){return n instanceof xd?As(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var r,a}(s,a),h=ky(c)+ky(s.Re);return As(c)&&As(s.Re)?function AT(n){return{integerValue:""+n}}(h):function Ff(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}(s.serializer,h)}(n,e)}function mS(n,e,t){return n instanceof Eh?AI(n,e):n instanceof nc?Vf(n,e):t}class Lf extends Ih{}class Eh extends Ih{constructor(e){super(),this.elements=e}}function AI(n,e){const t=Fy(e);for(const r of n.elements)t.some(s=>ia(s,r))||t.push(r);return{arrayValue:{values:t}}}class nc extends Ih{constructor(e){super(),this.elements=e}}function Vf(n,e){let t=Fy(e);for(const r of n.elements)t=t.filter(s=>!ia(s,r));return{arrayValue:{values:t}}}class xd extends Ih{constructor(e,t){super(),this.serializer=e,this.Re=t}}function ky(n){return Ai(n.integerValue||n.doubleValue)}function Fy(n){return Ma(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Di{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Di}static exists(e){return new Di(void 0,e)}static updateTime(e){return new Di(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Md{}function CI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ve(n.key,Di.none()):new p(n.key,n.data,Di.none());{const t=n.data,r=_e.empty();let s=new Jr(U.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),s=s.add(a)}return new y(n.key,r,new Ls(s.toArray()),Di.none())}}function CT(n,e,t){n instanceof p?function(s,a,c){const h=s.value.clone(),g=$(s.fieldTransforms,a,c.transformResults);h.setAll(g),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof y?function(s,a,c){if(!Pd(s.precondition,a))return void a.convertToUnknownDocument(c.version);const h=$(s.fieldTransforms,a,c.transformResults),g=a.data;g.setAll(S(s)),g.setAll(h),a.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Uf(n,e,t,r){return n instanceof p?function(a,c,h,g){if(!Pd(a.precondition,c))return h;const v=a.value.clone(),b=J(a.fieldTransforms,g,c);return v.setAll(b),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof y?function(a,c,h,g){if(!Pd(a.precondition,c))return h;const v=J(a.fieldTransforms,g,c),b=c.data;return b.setAll(S(a)),b.setAll(v),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(O=>O.field))}(n,e,t,r):(h=t,Pd(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function T(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&ls(r,s,(a,c)=>function DI(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof Eh&&s instanceof Eh||r instanceof nc&&s instanceof nc?ls(r.elements,s.elements,ia):r instanceof xd&&s instanceof xd?ia(r.Re,s.Re):r instanceof Lf&&s instanceof Lf);var r,s}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class p extends Md{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class y extends Md{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function S(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $(n,e,t){const r=new Map;Wt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,h=e.data.field(a.field);r.set(a.field,mS(c,h,t[s]))}return r}function J(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,gS(a,c,e))}return r}class ve extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class St{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&CT(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Uf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Uf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wI();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(s.key)?null:h;const g=CI(c,h);null!==g&&r.set(s.key,g),c.isValidDocument()||c.convertToNoDocument(Yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,(t,r)=>T(t,r))&&ls(this.baseMutations,e.baseMutations,(t,r)=>T(t,r))}}class wn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zr,lr;function wh(n){if(void 0===n)return Yr("GRPC error has no .code"),$e.UNKNOWN;switch(n){case Zr.OK:return $e.OK;case Zr.CANCELLED:return $e.CANCELLED;case Zr.UNKNOWN:return $e.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return $e.INTERNAL;case Zr.UNAVAILABLE:return $e.UNAVAILABLE;case Zr.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Zr.NOT_FOUND:return $e.NOT_FOUND;case Zr.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Zr.ABORTED:return $e.ABORTED;case Zr.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Zr.DATA_LOSS:return $e.DATA_LOSS;default:return Bt(39323,{code:n})}}(lr=Zr||(Zr={}))[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";const Tg=new zr([4294967295,4294967295],0);function Bf(n){const e=Po().encode(n),t=new Xo;return t.update(e),new Uint8Array(t.digest())}function jf(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zr([t,r],0),new zr([s,a],0)]}class $f{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vl(`Invalid padding: ${t}`);if(r<0)throw new Vl(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Vl(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Vl(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=zr.fromNumber(this.pe)}we(e,t,r){let s=e.add(t.multiply(zr.fromNumber(r)));return 1===s.compare(Tg)&&(s=new zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Bf(e),[r,s]=jf(t);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);if(!this.be(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new $f(a,s,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.pe)return;const t=Bf(e),[r,s]=jf(t);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);this.Se(c)}}Se(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sl{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sl(Yt.min(),s,new Rr(un),Na(),cr())}}class Ul{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ul(r,t,cr(),cr(),cr())}}class Nd{constructor(e,t,r,s){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=s}}class Od{constructor(e,t){this.targetId=e,this.Ce=t}}class ST{constructor(e,t,r=qi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class RT{constructor(){this.Fe=0,this.Me=RI(),this.xe=qi.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=cr(),t=cr(),r=cr();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Bt(38017,{changeType:a})}}),new Ul(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=RI()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class xT{constructor(e){this.ze=e,this.je=new Map,this.He=Na(),this.Je=Ag(),this.Ye=Ag(),this.Ze=new Rr(un)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Bt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,r=e.Ce.count,s=this._t(t);if(s){const a=s.target;if(Sd(a))if(0===r){const c=new Y(a.path);this.tt(t,c,_t.newNoDocument(c,Yt.min()))}else Wt(1===r,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const h=this.ct(e),g=h?this.lt(h,e,c):1;0!==g&&(this.st(t),this.Ze=this.Ze.insert(t,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,h;try{c=Mo(r).toUint8Array()}catch(g){if(g instanceof Af)return Sr("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new $f(c,s,a)}catch(g){return Sr(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return 0===h.pe?null:h}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const c=this.ze.Pt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.tt(t,a,null),s++)}),s}It(e){const t=new Map;this.je.forEach((a,c)=>{const h=this._t(c);if(h){if(a.current&&Sd(h.target)){const g=new Y(h.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,_t.newNoDocument(g,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let r=cr();this.Ye.forEach((a,c)=>{let h=!0;c.forEachWhile(g=>{const v=this._t(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new sl(e,t,this.Ze,this.He,r);return this.He=Na(),this.Je=Ag(),this.Ye=Ag(),this.Ze=new Rr(un),s}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new RT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Jr(un),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Jr(un),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||ut("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new RT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ag(){return new Rr(Y.comparator)}function RI(){return new Rr(Y.comparator)}const zf={asc:"ASCENDING",desc:"DESCENDING"},Ly={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PT={and:"AND",or:"OR"};class xI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hf(n,e){return n.useProto3Json||ki(e)?e:{value:e}}function Ds(n){return Wt(!!n,49232),Yt.fromTimestamp(function(t){const r=ns(t);return new ui(r.seconds,r.nanos)}(n))}function MI(n,e){const t=(s=n,new j(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?t:t.child(e)}function NI(n){const e=j.fromString(n);return Wt(qf(e),10190,{key:e.toString()}),e}function ic(n,e){const t=NI(e);if(t.get(1)!==n.databaseId.projectId)throw new ct($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ct($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(Uy(t))}function Vy(n,e){return function PI(n,e){return MI(n,e).canonicalString()}(n.databaseId,e)}function OI(n){return new j(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Uy(n){return Wt(n.length>4&&"documents"===n.get(4),29091,{key:n.toString()}),n.popFirst(5)}function LT(n,e){return{documents:[Vy(n,e.path)]}}function bg(n,e){const t={structuredQuery:{}},r=e.path;let s;null!==e.collectionGroup?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Vy(n,s);const a=function(v){if(0!==v.length)return BI(xr.create(v,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(v){if(0!==v.length)return v.map(b=>{return{field:ol((z=b).field),direction:jy(z.dir)};var z})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Hf(n,e.limit);return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(v=e.startAt).inclusive,values:v.position}),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:s};var v}function LI(n){let e=function NT(n){const e=NI(n);return 4===e.length?j.emptyPath():Uy(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Wt(1===r,65062);const b=t.from[0];b.allDescendants?s=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(O){const z=UI(O);return z instanceof xr&&ko(z)?z.getFilters():[z]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(z=>{return new Pn(Bl((le=z).field),function(be){switch(be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(le.direction));var le}));let h=null;t.limit&&(h=function(O){let z;return z="object"==typeof O?O.value:O,ki(z)?null:z}(t.limit));let g=null;var O;t.startAt&&(g=new Pt((O=t.startAt).values||[],!!O.before));let v=null;return t.endAt&&(v=function(O){return new Pt(O.values||[],!O.before)}(t.endAt)),function yh(n,e,t,r,s,a,c,h){return new Du(n,e,t,r,s,a,c,h)}(e,s,c,a,h,"F",g,v)}function UI(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bl(t.unaryFilter.field);return ir.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bl(t.unaryFilter.field);return ir.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bl(t.unaryFilter.field);return ir.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Bl(t.unaryFilter.field);return ir.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Bt(61313);default:return Bt(60726)}}(n):void 0!==n.fieldFilter?ir.create(Bl((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Bt(58110);default:return Bt(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return xr.create(t.compositeFilter.filters.map(r=>UI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Bt(1026)}}(t.compositeFilter.op))}(n):Bt(30097,{filter:n});var t}function jy(n){return zf[n]}function Cg(n){return Ly[n]}function VT(n){return PT[n]}function ol(n){return{fieldPath:n.canonicalString()}}function Bl(n){return U.fromServerFormat(n.fieldPath)}function BI(n){return n instanceof ir?function(t){if("=="===t.op){if(gh(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NAN"}};if(Cf(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gh(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NAN"}};if(Cf(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(t.field),op:Cg(t.op),value:t.value}}}(n):n instanceof xr?function(t){const r=t.getFilters().map(s=>BI(s));return 1===r.length?r[0]:{compositeFilter:{op:VT(t.op),filters:r}}}(n):Bt(54877,{filter:n})}function qf(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class jl{constructor(e,t,r,s,a=Yt.min(),c=Yt.min(),h=qi.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $I{constructor(e){this.wt=e}}function zI(n){const e=LI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Mf(e,e.limit,"L"):e}class Ud{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Ai(e.integerValue));else if("doubleValue"in e){const r=Ai(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),vc(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),"string"==typeof r&&(r=ns(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Mo(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?Pc(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Rc(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Bt(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const s of Object.keys(r))this.Nt(s,t),this.Ct(r[s],t)}qt(e,t){var r,s;const a=e.fields||{};this.Mt(t,53);const c=Tu,h=(null===(s=null===(r=a[c].arrayValue)||void 0===r?void 0:r.values)||void 0===s?void 0:s.length)||0;this.Mt(t,15),t.xt(Ai(h)),this.Nt(c,t),this.Ct(a[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const s of r)this.Ct(s,t)}kt(e,t){this.Mt(t,37),Y.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Ud.Wt=new Ud;class QI{constructor(){this.yn=new Mc}addToCollectionParentIndex(e,t){return this.yn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(ii.min())}updateCollectionGroup(e,t,r){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class Mc{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Jr(j.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Jr(j.comparator)).toArray()}}new Uint8Array(0);const qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oa{static withCacheSize(e){return new Oa(e,Oa.DEFAULT_COLLECTION_PERCENTILE,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Oa.DEFAULT_COLLECTION_PERCENTILE=10,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oa.DEFAULT=new Oa(41943040,Oa.DEFAULT_COLLECTION_PERCENTILE,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oa.DISABLED=new Oa(-1,0,0);class Ph{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ph(0)}static ir(){return new Ph(-1)}}const XT="LruGarbageCollector";function eE([n,e],[t,r]){const s=un(n,t);return 0===s?un(e,r):s}class bS{constructor(e){this.cr=e,this.buffer=new Jr(eE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){var t=this;ut(XT,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,K.A)(function*(){t.Tr=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Pi(r)?ut(XT,"Ignoring IndexedDB error during garbage collection: ",r):yield pi(r)}yield t.Ir(3e5)}))}}class CS{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return De.resolve(Zs.le);const r=new bS(t);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(qy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qy):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,s,a,c,h,g,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),s=this.params.maximumSequenceNumbersToCollect):s=O,c=Date.now(),this.nthSequenceNumber(e,s))).next(O=>(r=O,h=Date.now(),this.removeTargets(e,r,t))).next(O=>(a=O,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(v=Date.now(),xo()<=Mn.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${s} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${O} documents in `+(v-g)+`ms\nTotal Duration: ${v-b}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:O})))}}class SS{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?De.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Og{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Uf(r.mutation,s,Ls.empty(),ui.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,cr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=cr()){const s=tc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let c=Of();return a.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=tc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,cr()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,s){let a=Na();const c=vh(),h=vh();return t.forEach((g,v)=>{const b=r.get(v.key);s.has(v.key)&&(void 0===b||b.mutation instanceof y)?a=a.insert(v.key,v):void 0!==b?(c.set(v.key,b.mutation.getFieldMask()),Uf(b.mutation,v,b.mutation.getFieldMask(),ui.now())):c.set(v.key,Ls.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,b)=>c.set(v,b)),t.forEach((v,b)=>{var O;return h.set(v,new rA(b,null!==(O=c.get(v))&&void 0!==O?O:null))}),h))}recalculateAndSaveOverlays(e,t){const r=vh();let s=new Rr((c,h)=>c-h),a=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let b=r.get(g)||Ls.empty();b=h.applyToLocalView(v,b),r.set(g,b);const O=(s.get(h.batchId)||cr()).add(g);s=s.insert(h.batchId,O)})}).next(()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),v=g.key,b=g.value,O=wI();b.forEach(z=>{if(!a.has(z)){const ne=CI(t.get(z),r.get(z));null!==ne&&O.set(z,ne),a=a.add(z)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,O))}return De.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return Y.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function Py(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var c}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):De.resolve(tc());let h=-1,g=a;return c.next(v=>De.forEach(v,(b,O)=>(h<O.largestBatchId&&(h=O.largestBatchId),a.get(b)?De.resolve():this.remoteDocumentCache.getEntry(e,b).next(z=>{g=g.insert(b,z)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,cr())).next(b=>({batchId:h,changes:kf(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let s=Of();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=Of();return this.indexManager.getCollectionParents(e,a).next(h=>De.forEach(h,g=>{const v=(O=t,z=g.child(a),new Du(z,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt));var O,z;return this.getDocumentsMatchingCollectionQuery(e,v,r,s).next(b=>{b.forEach((O,z)=>{c=c.insert(O,z)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(c=>{a.forEach((g,v)=>{const b=v.getKey();null===c.get(b)&&(c=c.insert(b,_t.newInvalidDocument(b)))});let h=Of();return c.forEach((g,v)=>{const b=a.get(g);void 0!==b&&Uf(b.mutation,v,Ls.empty(),ui.now()),rl(t,v)&&(h=h.insert(g,v))}),h})}}class kM{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return De.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,{id:(s=t).id,version:s.version,createTime:Ds(s.createTime)}),De.resolve();var s}getNamedQuery(e,t){return De.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,{name:(s=t).name,query:zI(s.bundledQuery),readTime:Ds(s.readTime)}),De.resolve();var s}}class iE{constructor(){this.overlays=new Rr(Y.comparator),this.Or=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const r=tc();return De.forEach(t,s=>this.getOverlay(e,s).next(a=>{null!==a&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.St(e,t,a)}),De.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Or.get(r);return void 0!==s&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Or.delete(r)),De.resolve()}getOverlaysForCollection(e,t,r){const s=tc(),a=t.length+1,c=new Y(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&s.set(g.getKey(),g)}return De.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Rr((v,b)=>v-b);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=tc(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const h=tc(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,b)=>h.set(v,b)),!(h.size()>=s)););return De.resolve(h)}St(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wn(t,r));let a=this.Or.get(t);void 0===a&&(a=cr(),this.Or.set(t,a)),this.Or.set(t,a.add(r.key))}}class RS{constructor(){this.sessionToken=qi.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}class kg{constructor(){this.Nr=new Jr(to.Br),this.Lr=new Jr(to.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new to(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new to(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Y(new j([])),r=new to(t,e),s=new to(t,e+1),a=[];return this.Lr.forEachInRange([r,s],c=>{this.Qr(c),a.push(c.key)}),a}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Y(new j([])),r=new to(t,e),s=new to(t,e+1);let a=cr();return this.Lr.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new to(e,0),r=this.Nr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class to{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Y.comparator(e.key,t.key)||un(e.Gr,t.Gr)}static kr(e,t){return un(e.Gr,t.Gr)||Y.comparator(e.key,t.key)}}class iA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Jr(to.Br)}checkEmpty(e){return De.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const a=this.Jn;this.Jn++;const c=new St(a,t,r,s);this.mutationQueue.push(c);for(const h of s)this.zr=this.zr.add(new to(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return De.resolve(c)}lookupMutationBatch(e,t){return De.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Hr(t+1),a=s<0?0:s;return De.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(0===this.mutationQueue.length?-1:this.Jn-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new to(t,0),s=new to(t,Number.POSITIVE_INFINITY),a=[];return this.zr.forEachInRange([r,s],c=>{const h=this.jr(c.Gr);a.push(h)}),De.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jr(un);return t.forEach(s=>{const a=new to(s,0),c=new to(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([a,c],h=>{r=r.add(h.Gr)})}),De.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Y.isDocumentKey(a)||(a=a.child(""));const c=new to(new Y(a),0);let h=new Jr(un);return this.zr.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===s&&(h=h.add(g.Gr)),!0)},c),De.resolve(this.Jr(h))}Jr(e){const t=[];return e.forEach(r=>{const s=this.jr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Wt(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.zr;return De.forEach(t.mutations,s=>{const a=new to(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new to(t,0),s=this.zr.firstAfterOrEqual(r);return De.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return De.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nh{constructor(e){this.Zr=e,this.docs=new Rr(Y.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return De.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=Na();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():_t.newInvalidDocument(s))}),De.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Na();const c=t.path,h=new Y(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:v,value:{document:b}}=g.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Xs(Ti(b),r)<=0||(s.has(b.key)||rl(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return De.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Bt(9500)}Xr(e,t){return De.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xS(this)}getSize(e){return De.resolve(this.size)}}class xS extends SS{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),De.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class sE{constructor(e){this.persistence=e,this.ei=new il(t=>tl(t),Rf),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.ti=0,this.ni=new kg,this.targetCount=0,this.ri=Ph.rr()}forEachTarget(e,t){return this.ei.forEach((r,s)=>t(s)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),De.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ph(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.ar(t),De.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ei.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.ei.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),De.waitFor(a).next(()=>s)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return De.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),De.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),De.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),De.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return De.resolve(r)}containsKey(e,t){return De.resolve(this.ni.containsKey(t))}}class Xf{constructor(e,t){this.ii={},this.overlays={},this.si=new Zs(0),this.oi=!1,this.oi=!0,this._i=new RS,this.referenceDelegate=e(this),this.ai=new sE(this),this.indexManager=new QI,this.remoteDocumentCache=new Nh(r=>this.referenceDelegate.ui(r)),this.serializer=new $I(t),this.ci=new kM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new iA(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){ut("MemoryPersistence","Starting transaction:",e);const s=new PS(this.si.next());return this.referenceDelegate.li(),r(s).next(a=>this.referenceDelegate.hi(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Pi(e,t){return De.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class PS extends fi{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.Ti=new kg,this.Ii=null}static Ei(e){return new Jf(e)}get di(){if(this.Ii)return this.Ii;throw Bt(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),De.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.di.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.di,r=>{const s=Y.fromPath(r);return this.Ai(e,s).next(a=>{a||t.removeEntry(s,Yt.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return De.or([()=>De.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Oh{constructor(e,t){this.persistence=e,this.Ri=new il(r=>function $n(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gi(e)),e=Yc(n.get(t),e);return gi(e)}(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=function ZT(n,e){return new CS(n,e)}(this,t)}static Ei(e,t){return new Oh(e,t)}li(){}hi(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return De.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(a=>a?De.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Xr(e,c=>this.gr(e,c,t).next(h=>{h||(r++,a.removeEntry(c,Yt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),De.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),De.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ju(e.data.value)),t}gr(e,t,r){return De.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.Ri.get(t);return De.resolve(void 0!==s&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=s}static Ps(e,t){let r=cr(),s=cr();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Xy(e,t.fromCache,r,s)}}class MS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cE{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function Ur(){return!function gt(){var n;const e=null===(n=Ne())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function mc(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Rs(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Vs(e,t,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new MS;return this.fs(e,t,c).next(h=>{if(a.result=h,this.Is)return this.gs(e,t,c,h.size)})}).next(()=>a.result)}gs(e,t,r,s){return r.documentReadCount<this.Es?(xo()<=Mn.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),De.resolve()):(xo()<=Mn.DEBUG&&ut("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(xo()<=Mn.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(t))):De.resolve())}Rs(e,t){if(Pf(t))return De.resolve(null);let r=Vo(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Mf(t,null,"F"),r=Vo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=cr(...a);return this.As.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ps(t,h);return this.ys(t,v,c,g.readTime)?this.Rs(e,Mf(t,null,"F")):this.ws(e,v,t,g)}))})))}Vs(e,t,r,s){return Pf(t)||s.isEqual(Yt.min())?De.resolve(null):this.As.getDocuments(e,r).next(a=>{const c=this.ps(t,a);return this.ys(t,c,r,s)?De.resolve(null):(xo()<=Mn.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ec(t)),this.ws(e,c,t,function pr(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Yt.fromTimestamp(1e9===r?new ui(t+1,0):new ui(t,r));return new ii(s,Y.empty(),e)}(s,-1)).next(h=>h))})}ps(e,t){let r=new Jr(wT(e));return t.forEach((s,a)=>{rl(e,a)&&(r=r.add(a))}),r}ys(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}fs(e,t,r){return xo()<=Mn.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",ec(t)),this.As.getDocumentsMatchingQuery(e,t,ii.min(),r)}ws(e,t,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}const Vg="LocalStore",FM=3e8;class LM{constructor(e,t,r,s){this.persistence=e,this.bs=t,this.serializer=s,this.Ss=new Rr(un),this.Ds=new il(a=>tl(a),Rf),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Og(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function oA(n,e){return aA.apply(this,arguments)}function aA(){return(aA=(0,K.A)(function*(n,e){const t=Rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let g=cr();for(const v of s){c.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}for(const v of a){h.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next(v=>({Ms:v,removedBatchIds:c,addedBatchIds:h}))})})})).apply(this,arguments)}function Ug(n){const e=Rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function $d(n,e,t){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,K.A)(function*(n,e,t){const r=Rt(n),s=r.Ss.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Pi(c))throw c;ut(Vg,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)})).apply(this,arguments)}function zd(n,e,t){const r=Rt(n);let s=Yt.min(),a=cr();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,v,b){const O=Rt(g),z=O.Ds.get(b);return void 0!==z?De.resolve(O.Ss.get(z)):O.ai.getTargetData(v,b)}(r,c,Vo(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(c,h.targetId).next(g=>{a=g})}).next(()=>r.bs.getDocumentsMatchingQuery(c,e,t?s:Yt.min(),t?a:cr())).next(h=>(function Zy(n,e,t){let r=n.vs.get(e)||Yt.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.vs.set(e,r)}(r,function Ny(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,Ns:a})))}class tp{constructor(){this.activeTargetIds=function Oy(){return TT}()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dA{constructor(){this.So=new tp,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new tp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hA{vo(e){}shutdown(){}}const t_="ConnectivityMonitor";class qg{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ut(t_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ut(t_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let n_=null;function r_(){return null===n_?n_=268435456+Math.round(2147483648*Math.random()):n_++,"0x"+n_.toString(16)}const gE="RestConnection",fA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BM{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Yu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,t,r,s,a){const c=r_(),h=this.$o(e,t.toUriEncodedString());ut(gE,`Sending RPC '${e}' ${c}:`,h,r);const g={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(g,s,a);const{host:v}=new URL(h),b=Ut(v);return this.Ko(e,h,g,r,b).then(O=>(ut(gE,`Received RPC '${e}' ${c}: `,O),O),O=>{throw Sr(gE,`RPC '${e}' ${c} failed with error: `,O,"url: ",h,"request:",r),O})}Wo(e,t,r,s,a,c){return this.Qo(e,t,r,s,a)}Uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Aa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}$o(e,t){return`${this.Lo}/v1/${t}:${fA[e]}`}terminate(){}}class OS{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const no="WebChannelConnection";class kS extends BM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,s,a){const c=r_();return new Promise((h,g)=>{const v=new cs;v.setWithCredentials(!0),v.listenOnce(Ea.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Bu.NO_ERROR:const O=v.getResponseJson();ut(no,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(O)),h(O);break;case Bu.TIMEOUT:ut(no,`RPC '${e}' ${c} timed out`),g(new ct($e.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:const z=v.getStatus();if(ut(no,`RPC '${e}' ${c} failed with status:`,z,"response text:",v.getResponseText()),z>0){let ne=v.getResponseJson();Array.isArray(ne)&&(ne=ne[0]);const le=ne?.error;if(le&&le.status&&le.message){const Pe=function(Et){const xt=Et.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(xt)>=0?xt:$e.UNKNOWN}(le.status);g(new ct(Pe,le.message))}else g(new ct($e.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ct($e.UNAVAILABLE,"Connection failed."));break;default:Bt(9055,{s_:e,streamId:c,o_:v.getLastErrorCode(),__:v.getLastError()})}}finally{ut(no,`RPC '${e}' ${c} completed.`)}});const b=JSON.stringify(s);ut(no,`RPC '${e}' ${c} sending request:`,s),v.send(t,"POST",b,r,15)})}a_(e,t,r){const s=r_(),a=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=po(),h=Ta(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Uo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=a.join("");ut(no,`Creating RPC '${e}' stream ${s}: ${b}`,g);const O=c.createWebChannel(b,g);let z=!1,ne=!1;const le=new OS({Go:be=>{ne?ut(no,`Not sending because RPC '${e}' stream ${s} is closed:`,be):(z||(ut(no,`Opening RPC '${e}' stream ${s} transport.`),O.open(),z=!0),ut(no,`RPC '${e}' stream ${s} sending:`,be),O.send(be))},zo:()=>O.close()}),Pe=(be,Et,xt)=>{be.listen(Et,wt=>{try{xt(wt)}catch(rn){setTimeout(()=>{throw rn},0)}})};return Pe(O,ur.EventType.OPEN,()=>{ne||(ut(no,`RPC '${e}' stream ${s} transport opened.`),le.t_())}),Pe(O,ur.EventType.CLOSE,()=>{ne||(ne=!0,ut(no,`RPC '${e}' stream ${s} transport closed`),le.r_())}),Pe(O,ur.EventType.ERROR,be=>{ne||(ne=!0,Sr(no,`RPC '${e}' stream ${s} transport errored. Name:`,be.name,"Message:",be.message),le.r_(new ct($e.UNAVAILABLE,"The operation could not be completed")))}),Pe(O,ur.EventType.MESSAGE,be=>{var Et;if(!ne){const xt=be.data[0];Wt(!!xt,16349);const wt=xt,rn=wt?.error||(null===(Et=wt[0])||void 0===Et?void 0:Et.error);if(rn){ut(no,`RPC '${e}' stream ${s} received error:`,rn);const On=rn.status;let on=function(me){const Ce=Zr[me];if(void 0!==Ce)return wh(Ce)}(On),Ee=rn.message;void 0===on&&(on=$e.INTERNAL,Ee="Unknown error status: "+On+" with message "+rn.message),ne=!0,le.r_(new ct(on,Ee)),O.close()}else ut(no,`RPC '${e}' stream ${s} received:`,xt),le.i_(xt)}}),Pe(h,wa.STAT_EVENT,be=>{be.stat===Wc.PROXY?ut(no,`RPC '${e}' stream ${s} detected buffering proxy`):be.stat===Wc.NOPROXY&&ut(no,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{le.n_()},0),le}}function Hd(){return typeof document<"u"?document:null}function Wg(n){return new xI(n,!0)}class i_{constructor(e,t,r=1e3,s=1.5,a=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=s,this.l_=a,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,t-r);s>0&&ut("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const pA="PersistentStream";class gA{constructor(e,t,r,s,a,c,h,g){this.bi=e,this.R_=r,this.V_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new i_(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}stop(){var e=this;return(0,K.A)(function*(){e.w_()&&(yield e.close(0))})()}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){var e=this;return(0,K.A)(function*(){if(e.b_())return e.close(0)})()}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){var r=this;return(0,K.A)(function*(){r.M_(),r.x_(),r.y_.cancel(),r.m_++,4!==e?r.y_.reset():t&&t.code===$e.RESOURCE_EXHAUSTED?(Yr(t.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),r.y_.I_()):t&&t.code===$e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.O_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zo(t)})()}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===t&&this.B_(r,s)},r=>{e(()=>{const s=new ct($e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>1==++this.p_?this.q_(s):this.onNext(s))})}S_(){var e=this;this.state=5,this.y_.E_((0,K.A)(function*(){e.state=0,e.start()}))}L_(e){return ut(pA,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(ut(pA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FS extends gA{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function kT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Bt(39313,{state:v}),s=e.targetChange.targetIds||[],a=function(v,b){return v.useProto3Json?(Wt(void 0===b||"string"==typeof b,58123),qi.fromBase64String(b||"")):(Wt(void 0===b||b instanceof Buffer||b instanceof Uint8Array,16193),qi.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(v){const b=void 0===v.code?$e.UNKNOWN:wh(v.code);return new ct(b,v.message||"")}(c);t=new ST(r,s,a,h||null)}else if("documentChange"in e){const r=e.documentChange,s=ic(n,r.document.name),a=Ds(r.document.updateTime),c=r.document.createTime?Ds(r.document.createTime):Yt.min(),h=new _e({mapValue:{fields:r.document.fields}}),g=_t.newFoundDocument(s,a,c,h);t=new Nd(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=ic(n,r.document),a=r.readTime?Ds(r.readTime):Yt.min(),c=_t.newNoDocument(s,a);t=new Nd([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=ic(n,r.document);t=new Nd([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Bt(11601,{Vt:e});{const r=e.filter,{count:s=0,unchangedNames:a}=r,c=new Gr(s,a);t=new Od(r.targetId,c)}}var v;return t}(this.serializer,e),r=function(a){if(!("targetChange"in a))return Yt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Yt.min():c.readTime?Ds(c.readTime):Yt.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=OI(this.serializer),t.addTarget=function(a,c){let h;const g=c.target;if(h=Sd(g)?{documents:LT(a,g)}:{query:bg(a,g).gt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=function MT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(a,c.resumeToken);const v=Hf(a,c.expectedCount);null!==v&&(h.expectedCount=v)}else if(c.snapshotVersion.compareTo(Yt.min())>0){h.readTime=function Gf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(a,c.snapshotVersion.toTimestamp());const v=Hf(a,c.expectedCount);null!==v&&(h.expectedCount=v)}return h}(this.serializer,e);const r=function VI(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt(28987,{purpose:s})}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=OI(this.serializer),t.removeTarget=e,this.F_(t)}}class yA{}class mE extends yA{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new ct($e.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Qo(e,MI(t,r),s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ct($e.UNKNOWN,a.toString())})}Wo(e,t,r,s,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Wo(e,MI(t,r),s,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct($e.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class jM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Yr(t),this.ea=!1):ut("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const zl="RemoteStore";class _A{constructor(e,t,r,s,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=a,this.ca.vo(h=>{r.enqueueAndForget((0,K.A)(function*(){var g;To(c)&&(ut(zl,"Restarting streams for network reachability change."),yield(g=(0,K.A)(function*(b){const O=Rt(b);O.aa.add(4),yield Uh(O),O.la.set("Unknown"),O.aa.delete(4),yield Kg(O)}),function v(b){return g.apply(this,arguments)})(c))}))}),this.la=new jM(r,s)}}function Kg(n){return yE.apply(this,arguments)}function yE(){return(yE=(0,K.A)(function*(n){if(To(n))for(const e of n.ua)yield e(!0)})).apply(this,arguments)}function Uh(n){return _E.apply(this,arguments)}function _E(){return(_E=(0,K.A)(function*(n){for(const e of n.ua)yield e(!1)})).apply(this,arguments)}function Qg(n,e){const t=Rt(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),o_(t)?s_(t):Fc(t).b_()&&vE(t,e))}function np(n,e){const t=Rt(n),r=Fc(t);t._a.delete(e),r.b_()&&LS(t,e),0===t._a.size&&(r.b_()?r.v_():To(t)&&t.la.set("Unknown"))}function vE(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).U_(e)}function LS(n,e){n.ha.Ke(e),Fc(n).K_(e)}function s_(n){n.ha=new xT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.la.ta()}function o_(n){return To(n)&&!Fc(n).w_()&&n._a.size>0}function To(n){return 0===Rt(n).aa.size}function IE(n){n.ha=void 0}function $M(n){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,K.A)(function*(n){n.la.set("Online")})).apply(this,arguments)}function Gd(n){return rp.apply(this,arguments)}function rp(){return(rp=(0,K.A)(function*(n){n._a.forEach((e,t)=>{vE(n,e)})})).apply(this,arguments)}function VS(n,e){return EE.apply(this,arguments)}function EE(){return(EE=(0,K.A)(function*(n,e){IE(n),o_(n)?(n.la.ia(e),s_(n)):n.la.set("Unknown")})).apply(this,arguments)}function US(n,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,K.A)(function*(n,e,t){if(n.la.set("Online"),e instanceof ST&&2===e.state&&e.cause)try{yield(r=(0,K.A)(function*(a,c){const h=c.cause;for(const g of c.targetIds)a._a.has(g)&&(yield a.remoteSyncer.rejectListen(g,h),a._a.delete(g),a.ha.removeTarget(g))}),function s(a,c){return r.apply(this,arguments)})(n,e)}catch(r){ut(zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bu(n,r)}else if(e instanceof Nd?n.ha.Xe(e):e instanceof Od?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Yt.min()))try{const r=yield Ug(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.ha.It(c);return h.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const b=a._a.get(v);b&&a._a.set(v,b.withResumeToken(g.resumeToken,c))}}),h.targetMismatches.forEach((g,v)=>{const b=a._a.get(g);if(!b)return;a._a.set(g,b.withResumeToken(qi.EMPTY_BYTE_STRING,b.snapshotVersion)),LS(a,g);const O=new jl(b.target,g,v,b.sequenceNumber);vE(a,O)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ut(zl,"Failed to raise snapshot:",r),yield bu(n,r)}var r}),Xg.apply(this,arguments)}function bu(n,e,t){return a_.apply(this,arguments)}function a_(){return(a_=(0,K.A)(function*(n,e,t){if(!Pi(e))throw e;n.aa.add(1),yield Uh(n),n.la.set("Offline"),t||(t=()=>Ug(n.localStore)),n.asyncQueue.enqueueRetryable((0,K.A)(function*(){ut(zl,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield Kg(n)}))})).apply(this,arguments)}function AA(n,e){return l_.apply(this,arguments)}function l_(){return(l_=(0,K.A)(function*(n,e){const t=Rt(n);t.asyncQueue.verifyOperationInProgress(),ut(zl,"RemoteStore received new credentials");const r=To(t);t.aa.add(3),yield Uh(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield Kg(t)})).apply(this,arguments)}function qd(n,e){return kc.apply(this,arguments)}function kc(){return(kc=(0,K.A)(function*(n,e){const t=Rt(n);e?(t.aa.delete(2),yield Kg(t)):e||(t.aa.add(2),yield Uh(t),t.la.set("Unknown"))})).apply(this,arguments)}function Fc(n){return n.Pa||(n.Pa=function(t,r,s){const a=Rt(t);return a.Y_(),new FS(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{jo:$M.bind(null,n),Jo:Gd.bind(null,n),Zo:VS.bind(null,n),Q_:US.bind(null,n)}),n.ua.push(function(){var e=(0,K.A)(function*(t){t?(n.Pa.D_(),o_(n)?s_(n):n.la.set("Unknown")):(yield n.Pa.stop(),IE(n))});return function(t){return e.apply(this,arguments)}}())),n.Pa}class bE{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,h=new bE(e,t,c,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ct($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bh(n,e){if(Yr("AsyncQueue",`${e}: ${n}`),Pi(n))return new ct($e.UNAVAILABLE,`${e}: ${n}`);throw n}class jh{static emptySet(e){return new jh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=Of(),this.sortedSet=new Rr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class d_{constructor(){this.Ia=new Rr(Y.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?0!==e.type&&3===r.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==r.type?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Ia=this.Ia.remove(t):1===e.type&&2===r.type?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Bt(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class ll{constructor(e,t,r,s,a,c,h,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new ll(e,t,jh.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class h_{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class DA{constructor(){this.queries=CE(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(t,r){const s=Rt(t),a=s.queries;s.queries=CE(),a.forEach((c,h)=>{for(const g of h.Ra)g.onError(r)})}(this,new ct($e.ABORTED,"Firestore shutting down"))}}function CE(){return new il(n=>vI(n),Nf)}function RE(){return(RE=(0,K.A)(function*(n,e){const t=Rt(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Va()&&e.ma()&&(r=2):(a=new h_,r=e.ma()?0:1);try{switch(r){case 0:a.Aa=yield t.onListen(s,!0);break;case 1:a.Aa=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(c){const h=Bh(c,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.Ra.push(e),e.ga(t.onlineState),a.Aa&&e.pa(a.Aa)&&ME(t)})).apply(this,arguments)}function PE(){return(PE=(0,K.A)(function*(n,e){const t=Rt(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.Ra.indexOf(e);c>=0&&(a.Ra.splice(c,1),0===a.Ra.length?s=e.ma()?0:1:!a.Va()&&e.ma()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function bA(n,e){const t=Rt(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const h of c.Ra)h.pa(s)&&(r=!0);c.Aa=s}}r&&ME(t)}function zM(n,e,t){const r=Rt(n),s=r.queries.get(e);if(s)for(const a of s.Ra)a.onError(t);r.queries.delete(e)}function ME(n){n.fa.forEach(e=>{e.next()})}var CA,$S;($S=CA||(CA={})).ya="default",$S.Cache="cache";class f_{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){return!e.fromCache||!this.ma()||(!this.options.Fa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Ca(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==CA.Cache}}class OE{constructor(e){this.key=e}}class RA{constructor(e){this.key=e}}class kE{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=cr(),this.mutatedKeys=cr(),this.Ua=wT(e),this.Ka=new jh(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new d_,s=t?t.Ka:this.Ka;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const g="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,v="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((b,O)=>{const z=s.get(b),ne=rl(this.query,O)?O:null,le=!!z&&this.mutatedKeys.has(z.key),Pe=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let be=!1;z&&ne?z.data.isEqual(ne.data)?le!==Pe&&(r.track({type:3,doc:ne}),be=!0):this.ja(z,ne)||(r.track({type:2,doc:ne}),be=!0,(g&&this.Ua(ne,g)>0||v&&this.Ua(ne,v)<0)&&(h=!0)):!z&&ne?(r.track({type:0,doc:ne}),be=!0):z&&!ne&&(r.track({type:1,doc:z}),be=!0,(g||v)&&(h=!0)),be&&(ne?(c=c.add(ne),a=Pe?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Ka:c,za:r,ys:h,mutatedKeys:a}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((b,O)=>function(ne,le){const Pe=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt(20277,{Vt:be})}};return Pe(ne)-Pe(le)}(b.type,O.type)||this.Ua(b.doc,O.doc)),this.Ha(r),s=null!=s&&s;const h=t&&!s?this.Ja():[],g=0===this.$a.size&&this.current&&!s?1:0,v=g!==this.Qa;return this.Qa=g,0!==c.length||v?{snapshot:new ll(this.query,e.Ka,a,c,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:h}:{Ya:h}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new d_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=cr(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new RA(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new OE(r))}),t}Xa(e){this.qa=e.Ns,this.$a=cr();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return ll.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const Hl="SyncEngine";class nr{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xA{constructor(e){this.key=e,this.tu=!1}}class PA{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new il(h=>vI(h),Nf),this.iu=new Map,this.su=new Set,this.ou=new Rr(Y.comparator),this._u=new Map,this.au=new kg,this.uu={},this.cu=new Map,this.lu=Ph.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}function ip(n,e){return g_.apply(this,arguments)}function g_(){return(g_=(0,K.A)(function*(n,e,t=!0){const r=rm(n);let s;const a=r.ru.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.eu()):s=yield $h(r,e,t,!0),s})).apply(this,arguments)}function HS(n,e){return sp.apply(this,arguments)}function sp(){return(sp=(0,K.A)(function*(n,e){const t=rm(n);yield $h(t,e,!0,!1)})).apply(this,arguments)}function $h(n,e,t,r){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,K.A)(function*(n,e,t,r){const s=yield function Nc(n,e){const t=Rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.ai.getTargetData(r,e).next(a=>a?(s=a,De.resolve(s)):t.ai.allocateTargetId(r).next(c=>(s=new jl(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ss.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}(n.localStore,Vo(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=yield function zh(n,e,t,r,s){return m_.apply(this,arguments)}(n,e,a,"current"===c,s.resumeToken)),n.isPrimaryClient&&t&&Qg(n.remoteStore,s),h})).apply(this,arguments)}function m_(){return m_=(0,K.A)(function*(n,e,t,r,s){n.Pu=(O,z,ne)=>{return(le=(0,K.A)(function*(be,Et,xt,wt){let rn=Et.view.Ga(xt);rn.ys&&(rn=yield zd(be.localStore,Et.query,!1).then(({documents:oe})=>Et.view.Ga(oe,rn)));const On=wt&&wt.targetChanges.get(Et.targetId),on=wt&&null!=wt.targetMismatches.get(Et.targetId),Ee=Et.view.applyChanges(rn,be.isPrimaryClient,On,on);return tm(be,Et.targetId,Ee.Ya),Ee.snapshot}),function Pe(be,Et,xt,wt){return le.apply(this,arguments)})(n,O,z,ne);var le};const a=yield zd(n.localStore,e,!0),c=new kE(e,a.Ns),h=c.Ga(a.documents),g=Ul.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),v=c.applyChanges(h,n.isPrimaryClient,g);tm(n,t,v.Ya);const b=new nr(e,t,c);return n.ru.set(e,b),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),v.snapshot}),m_.apply(this,arguments)}function FE(n,e,t){return em.apply(this,arguments)}function em(){return(em=(0,K.A)(function*(n,e,t){const r=Rt(n),s=r.ru.get(e),a=r.iu.get(s.targetId);if(a.length>1)return r.iu.set(s.targetId,a.filter(c=>!Nf(c,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield $d(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&np(r.remoteStore,s.targetId),op(r,s.targetId)}).catch(pi))):(op(r,s.targetId),yield $d(r.localStore,s.targetId,!0))})).apply(this,arguments)}function LE(n,e){return y_.apply(this,arguments)}function y_(){return(y_=(0,K.A)(function*(n,e){const t=Rt(n),r=t.ru.get(e),s=t.iu.get(r.targetId);t.isPrimaryClient&&1===s.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),np(t.remoteStore,r.targetId))})).apply(this,arguments)}function MA(n,e){return BE.apply(this,arguments)}function BE(){return(BE=(0,K.A)(function*(n,e){const t=Rt(n);try{const r=yield function NS(n,e){const t=Rt(n),r=e.snapshotVersion;let s=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});s=t.Ss;const h=[];e.targetChanges.forEach((b,O)=>{const z=s.get(O);if(!z)return;h.push(t.ai.removeMatchingKeys(a,b.removedDocuments,O).next(()=>t.ai.addMatchingKeys(a,b.addedDocuments,O)));let ne=z.withSequenceNumber(a.currentSequenceNumber);var Pe,be,Et;null!==e.targetMismatches.get(O)?ne=ne.withResumeToken(qi.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):b.resumeToken.approximateByteSize()>0&&(ne=ne.withResumeToken(b.resumeToken,r)),s=s.insert(O,ne),be=ne,Et=b,(0===(Pe=z).resumeToken.approximateByteSize()||be.snapshotVersion.toMicroseconds()-Pe.snapshotVersion.toMicroseconds()>=FM||Et.addedDocuments.size+Et.modifiedDocuments.size+Et.removedDocuments.size>0)&&h.push(t.ai.updateTargetData(a,ne))});let g=Na(),v=cr();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(function Jy(n,e,t){let r=cr(),s=cr();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Na();return t.forEach((h,g)=>{const v=a.get(h);g.isFoundDocument()!==v.isFoundDocument()&&(s=s.add(h)),g.isNoDocument()&&g.version.isEqual(Yt.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):ut(Vg,"Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",g.version)}),{xs:c,Os:s}})}(a,c,e.documentUpdates).next(b=>{g=b.xs,v=b.Os})),!r.isEqual(Yt.min())){const b=t.ai.getLastRemoteSnapshotVersion(a).next(O=>t.ai.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return De.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ss=s,a))}(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t._u.get(a);c&&(Wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.tu=!0:s.modifiedDocuments.size>0?Wt(c.tu,14607):s.removedDocuments.size>0&&(Wt(c.tu,42227),c.tu=!1))}),yield Gl(t,r,e)}catch(r){yield pi(r)}})).apply(this,arguments)}function jE(n,e,t){const r=Rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ru.forEach((a,c)=>{const h=c.view.ga(e);h.snapshot&&s.push(h.snapshot)}),function(c,h){const g=Rt(c);g.onlineState=h;let v=!1;g.queries.forEach((b,O)=>{for(const z of O.Ra)z.ga(h)&&(v=!0)}),v&&ME(g)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GS(n,e,t){return $E.apply(this,arguments)}function $E(){return($E=(0,K.A)(function*(n,e,t){const r=Rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r._u.get(e),a=s&&s.key;if(a){let c=new Rr(Y.comparator);c=c.insert(a,_t.newNoDocument(a,Yt.min()));const h=cr().add(a),g=new sl(Yt.min(),new Map,new Rr(un),c,h);yield MA(r,g),r.ou=r.ou.remove(a),r._u.delete(e),qE(r)}else yield $d(r.localStore,e,!1).then(()=>op(r,e,t)).catch(pi)})).apply(this,arguments)}function op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||KS(n,r)})}function KS(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);null!==t&&(np(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),qE(n))}function tm(n,e,t){for(const r of t)r instanceof OE?(n.au.addReference(r.key,e),OA(n,r)):r instanceof RA?(ut(Hl,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||KS(n,r.key)):Bt(19791,{Iu:r})}function OA(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(ut(Hl,"New document in limbo: "+t),n.su.add(r),qE(n))}function qE(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Y(j.fromString(e)),r=n.lu.next();n._u.set(r,new xA(t)),n.ou=n.ou.insert(t,r),Qg(n.remoteStore,new jl(Vo(Rd(t.path)),r,"TargetPurposeLimboResolution",Zs.le))}}function Gl(n,e,t){return WE.apply(this,arguments)}function WE(){return WE=(0,K.A)(function*(n,e,t){const r=Rt(n),s=[],a=[],c=[];var h;r.ru.isEmpty()||(r.ru.forEach((h,g)=>{c.push(r.Pu(g,e,t).then(v=>{var b;if((v||t)&&r.isPrimaryClient){const O=v?!v.fromCache:null===(b=t?.targetChanges.get(g.targetId))||void 0===b?void 0:b.current;r.sharedClientState.updateQueryState(g.targetId,O?"current":"not-current")}if(v){s.push(v);const O=Xy.Ps(g.targetId,v);a.push(O)}}))}),yield Promise.all(c),r.nu.Q_(s),yield(h=(0,K.A)(function*(v,b){const O=Rt(v);try{yield O.persistence.runTransaction("notifyLocalViewChanges","readwrite",z=>De.forEach(b,ne=>De.forEach(ne.ls,le=>O.persistence.referenceDelegate.addReference(z,ne.targetId,le)).next(()=>De.forEach(ne.hs,le=>O.persistence.referenceDelegate.removeReference(z,ne.targetId,le)))))}catch(z){if(!Pi(z))throw z;ut(Vg,"Failed to update sequence numbers: "+z)}for(const z of b){const ne=z.targetId;if(!z.fromCache){const le=O.Ss.get(ne),be=le.withLastLimboFreeSnapshotVersion(le.snapshotVersion);O.Ss=O.Ss.insert(ne,be)}}}),function g(v,b){return h.apply(this,arguments)})(r.localStore,a))}),WE.apply(this,arguments)}function kA(n,e){return KE.apply(this,arguments)}function KE(){return(KE=(0,K.A)(function*(n,e){const t=Rt(n);if(!t.currentUser.isEqual(e)){ut(Hl,"User change. New user:",e.toKey());const r=yield oA(t.localStore,e);t.currentUser=e,(a=t).cu.forEach(h=>{h.forEach(g=>{g.reject(new ct($e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.cu.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gl(t,r.Ms)}var a})).apply(this,arguments)}function QS(n,e){const t=Rt(n),r=t._u.get(e);if(r&&r.tu)return cr().add(r.key);{let s=cr();const a=t.iu.get(e);if(!a)return s;for(const c of a){const h=t.ru.get(c);s=s.unionWith(h.view.Wa)}return s}}function rm(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GS.bind(null,e),e.nu.Q_=bA.bind(null,e.eventManager),e.nu.Tu=zM.bind(null,e.eventManager),e}let im=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,K.A)(function*(){r.serializer=Wg(t.databaseInfo.databaseId),r.sharedClientState=r.Au(t),r.persistence=r.Ru(t),yield r.persistence.start(),r.localStore=r.Vu(t),r.gcScheduler=r.mu(t,r.localStore),r.indexBackfillerScheduler=r.fu(t,r.localStore)})()}mu(t,r){return null}fu(t,r){return null}Vu(t){return function sA(n,e,t,r){return new LM(n,e,t,r)}(this.persistence,new cE,t.initialUser,this.serializer)}Ru(t){return new Xf(Jf.Ei,this.serializer)}Au(t){return new dA}terminate(){var t=this;return(0,K.A)(function*(){var r,s;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(s=t.indexBackfillerScheduler)||void 0===s||s.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class sm extends im{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){return Wt(this.persistence.referenceDelegate instanceof Oh,46915),new JT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?Oa.withCacheSize(this.cacheSizeBytes):Oa.DEFAULT;return new Xf(r=>Oh.Ei(r,t),this.serializer)}}let up=(()=>{class n{initialize(t,r){var s=this;return(0,K.A)(function*(){s.localStore||(s.localStore=t.localStore,s.sharedClientState=t.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!t.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>jE(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=kA.bind(null,s.syncEngine),yield qd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(t){return new DA}createDatastore(t){const r=Wg(t.databaseInfo.databaseId),s=new kS(t.databaseInfo);return new mE(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return s=this.localStore,a=this.datastore,c=t.asyncQueue,h=r=>jE(this.syncEngine,r,0),g=qg.C()?new qg:new hA,new _A(s,a,c,h,g);var s,a,c,h,g}createSyncEngine(t,r){return function(a,c,h,g,v,b,O){const z=new PA(a,c,h,g,v,b);return O&&(z.hu=!0),z}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,K.A)(function*(){var r,s,a;yield(a=(0,K.A)(function*(h){const g=Rt(h);ut(zl,"RemoteStore shutting down."),g.aa.add(5),yield Uh(g),g.ca.shutdown(),g.la.set("Unknown")}),function c(h){return a.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(s=t.eventManager)||void 0===s||s.terminate()})()}}return n.provider={build:()=>new n},n})();class w_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const oc="FirestoreClient";class HA{constructor(e,t,r,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ts.UNAUTHENTICATED,this.clientId=zu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,function(){var h=(0,K.A)(function*(g){ut(oc,"Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ut(oc,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,K.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Bh(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function cp(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,K.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ut(oc,"Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,K.A)(function*(a){r.isEqual(a)||(yield oA(e.localStore,a),r=a)});return function(a){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),GA.apply(this,arguments)}function qA(n,e){return A_.apply(this,arguments)}function A_(){return(A_=(0,K.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function D_(n){return e0.apply(this,arguments)}(n);ut(oc,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>AA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>AA(e.remoteStore,s)),n._onlineComponents=e})).apply(this,arguments)}function e0(){return(e0=(0,K.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ut(oc,"Using user provided OfflineComponentProvider");try{yield cp(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(s=e).name?s.code===$e.FAILED_PRECONDITION||s.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw e;Sr("Error using user provided cache. Falling back to memory cache: "+e),yield cp(n,new im)}}else ut(oc,"Using default OfflineComponentProvider"),yield cp(n,new sm(void 0));var s;return n._offlineComponents})).apply(this,arguments)}function C_(){return(C_=(0,K.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ut(oc,"Using user provided OnlineComponentProvider"),yield qA(n,n._uninitializedComponentsProvider._online)):(ut(oc,"Using default OnlineComponentProvider"),yield qA(n,new up))),n._onlineComponents})).apply(this,arguments)}function lp(n){return r0.apply(this,arguments)}function r0(){return(r0=(0,K.A)(function*(n){const e=yield function b_(n){return C_.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=ip.bind(null,e.syncEngine),t.onUnlisten=FE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LE.bind(null,e.syncEngine),t})).apply(this,arguments)}function XA(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const JA=new Map;function Tr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ct($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function x_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Bt(12329,{type:typeof n})}(n);throw new ct($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class u0{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ct($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ct($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function oR(n,e,t,r){if(!0===e&&!0===r)throw new ct($e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=XA(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dp{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ct($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new xi;switch(r.type){case"firstParty":return new pc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Be("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,K.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=JA.get(t);r&&(ut("ComponentProvider","Removing Datastore"),JA.delete(t),r.terminate())}(this),Promise.resolve()}}class Us{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class bs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bs(this.firestore,e,this._key)}}class fl extends Us{constructor(e,t,r){super(e,t,Rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bs(this.firestore,null,new Y(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}const Kd="AsyncQueue";class am{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new i_(this,"async_queue_retry"),this.ju=()=>{const r=Hd();r&&ut(Kd,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Hd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Hd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Bi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){var e=this;return(0,K.A)(function*(){if(0!==e.Qu.length){try{yield e.Qu[0](),e.Qu.shift(),e.y_.reset()}catch(t){if(!Pi(t))throw t;ut(Kd,"Operation failed with retryable error: "+t)}e.Qu.length>0&&e.y_.E_(()=>e.Zu())}})()}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Yr("INTERNAL UNHANDLED ERROR: ",Cu(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const s=bE.createAndSchedule(this,e,t,r,a=>this.Xu(a));return this.Uu.push(s),s}Ju(){this.Ku&&Bt(47125,{ec:Cu(this.Ku)})}verifyOperationInProgress(){}tc(){var e=this;return(0,K.A)(function*(){let t;do{t=e.Hu,yield t}while(t!==e.Hu)})()}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Cu(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),e}function um(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class ei extends dp{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new am,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,K.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new am(t),e._firestoreClient=void 0,yield t}})()}}function bi(n){if(n._terminated)throw new ct($e.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||function Hh(n){var e,t,r;const s=n._freezeSettings(),a=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bf(n._databaseId,g,n._persistenceKey,(b=s).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,XA(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator));var g,b;n._componentsProvider||!(null===(t=s.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=s.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new HA(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const g=h?._online.build();return{_offline:h?._offline.build(g),_online:g}}(n._componentsProvider))}(n),n._firestoreClient}class fp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fp(qi.fromBase64String(e))}catch(t){throw new ct($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fp(qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pp{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ct($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new U(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ct($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ct($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}}class N_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}const yR=new RegExp("[~\\*/\\[\\]]");function k_(n,e,t,r,s){const a=r&&!r.isEmpty(),c=void 0!==s;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${s}`),g+=")"),new ct($e.INVALID_ARGUMENT,h+n+g)}class _m{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new bs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _R extends _m{data(){return super.data()}}function vm(n,e){return"string"==typeof e?function vp(n,e,t){if(e.search(yR)>=0)throw k_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pp(...e.split("."))._internalPath}catch{throw k_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof pp?e._internalPath:e._delegate._internalPath}class U_{convertValue(e,t="none"){switch(Xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ku(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=null===(s=null===(r=null===(t=e.fields)||void 0===t?void 0:t[Tu].arrayValue)||void 0===r?void 0:r.values)||void 0===s?void 0:s.map(c=>Ai(c.doubleValue));return new N_(a)}convertGeoPoint(e){return new rD(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ol(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ts(e));default:return null}}convertTimestamp(e){const t=ns(e);return new ui(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=j.fromString(e);Wt(qf(r),9688,{name:e});const s=new na(r.get(1),r.get(3)),a=new Y(r.popFirst(5));return s.isEqual(t)||Yr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class Kh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tp extends _m{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Tm extends Tp{data(e={}){return super.data(e)}}class Yd{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Kh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Tm(this._firestore,this._userDataWriter,r.key,r,new Kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ct($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(h=>({type:"added",doc:new Tm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Kh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const g=new Tm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Kh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let v=-1,b=-1;return 0!==h.type&&(v=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),b=c.indexOf(h.doc.key)),{type:fD(h.type),doc:g,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt(61501,{type:n})}}class Kl extends U_{constructor(e){super(),this.firestore=e}convertBytes(e){return new fp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bs(this.firestore,null,t)}}!function(e,t=!0){Aa="11.7.3",yr(new qs("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),h=new ei(new qa(r.getProvider("auth-internal")),new gu(c,r.getProvider("app-check-internal")),function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ct($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(v.options.projectId,b)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),ho(fd,"4.7.14",e),ho(fd,"4.7.14","esm2017")}();var TD=Z(1985),E0=Z(6354),Xh=function(){return Xh=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xh.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var AD={includeMetadataChanges:!1};function z_(n,e){return void 0===e&&(e=AD),new TD.c(function(t){var r=function Yh(n,...e){var t,r,s;n=function jr(n){return n&&n._delegate?n._delegate:n}(n);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof e[c]||um(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(um(e[c])){const O=e[c];e[c]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[c+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[c+2]=null===(s=O.complete)||void 0===s?void 0:s.bind(O)}let g,v,b;if(n instanceof bs)v=Tr(n.firestore,ei),b=Rd(n._key.path),g={next:O=>{e[c]&&e[c](function Dm(n,e,t){const r=t.docs.get(e._key),s=new Kl(n);return new Tp(n,s,e._key,r,new Kh(t.hasPendingWrites,t.fromCache),e.converter)}(v,n,O))},error:e[c+1],complete:e[c+2]};else{const O=Tr(n,Us);v=Tr(O.firestore,ei),b=O._query;const z=new Kl(v);g={next:ne=>{e[c]&&e[c](new Yd(v,z,O,ne))},error:e[c+1],complete:e[c+2]},function g0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ct($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(z,ne,le,Pe){const be=new w_(Pe),Et=new f_(ne,be,le);return z.asyncQueue.enqueueAndForget((0,K.A)(function*(){return function SE(n,e){return RE.apply(this,arguments)}(yield lp(z),Et)})),()=>{be.yu(),z.asyncQueue.enqueueAndForget((0,K.A)(function*(){return function xE(n,e){return PE.apply(this,arguments)}(yield lp(z),Et)}))}}(bi(v),b,h,g)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function HR(n,e){return void 0===e&&(e={}),function RD(n){return z_(n,{includeMetadataChanges:!0}).pipe((0,E0.T)(function(e){return e.docs}))}(n).pipe((0,E0.T)(function(t){return t.map(function(r){return function bD(n,e){var t;void 0===e&&(e={});var r=n.data(e);return n.exists()&&"object"==typeof r&&null!==r&&e.idField?Xh(Xh({},r),((t={})[e.idField]=n.id,t)):r}(r,e)})}))}var Qt,Dp=Z(1631),qR=Z(8779),Jh=Z(5398),Bs=Z(1401),WR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vc={},b0=b0||{},Qn=WR||self;function W_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var C0="closure_uid_"+(1e9*Math.random()>>>0),xD=0;function PD(n,e,t){return n.call.apply(n.bind,arguments)}function MD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Bo(n,e,t){return(Bo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?PD:MD).apply(null,arguments)}function Sm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ro(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[s].apply(r,c)}}function Xl(){this.s=this.s,this.o=this.o}Xl.prototype.s=!1,Xl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function KR(n){Object.prototype.hasOwnProperty.call(n,C0)&&n[C0]||(n[C0]=++xD)}(this)},Xl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function K_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function R0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(W_(r)){const s=n.length||0,a=r.length||0;n.length=s+a;for(let c=0;c<a;c++)n[s+c]=r[c]}else n.push(r)}}function hs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hs.prototype.h=function(){this.defaultPrevented=!0};var QR=function(){if(!Qn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qn.addEventListener("test",()=>{},e),Qn.removeEventListener("test",()=>{},e)}catch{}return n}();function Rm(n){return/^[\s\xa0]*$/.test(n)}function Jl(){var n=Qn.navigator;return n&&(n=n.userAgent)?n:""}function Zl(n){return-1!=Jl().indexOf(n)}function xm(n){return xm[" "](n),n}xm[" "]=function(){};var Zd,n,OD=Zl("Opera"),Zh=Zl("Trident")||Zl("MSIE"),YR=Zl("Edge"),Jd=YR||Zh,kD=Zl("Gecko")&&!(-1!=Jl().toLowerCase().indexOf("webkit")&&!Zl("Edge"))&&!(Zl("Trident")||Zl("MSIE"))&&!Zl("Edge"),XR=-1!=Jl().toLowerCase().indexOf("webkit")&&!Zl("Edge");function FD(){var n=Qn.document;return n?n.documentMode:void 0}e:{var x0="",bp=(n=Jl(),kD?/rv:([^\);]+)(\)|;)/.exec(n):YR?/Edge\/([\d\.]+)/.exec(n):Zh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):XR?/WebKit\/(\S+)/.exec(n):OD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bp&&(x0=bp?bp[1]:""),Zh){var Cp=FD();if(null!=Cp&&Cp>parseFloat(x0)){Zd=String(Cp);break e}}Zd=x0}var LD=Qn.document&&Zh&&(FD()||parseInt(Zd,10))||void 0;function Sp(n,e){if(hs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(kD){e:{try{xm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sp.$.h.call(this)}}ro(Sp,hs);var ZR={2:"touch",3:"pen",4:"mouse"};Sp.prototype.h=function(){Sp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rp="closure_listenable_"+(1e6*Math.random()|0),VD=0;function UD(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++VD,this.fa=this.ia=!1}function Pm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function P0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function BD(n){const e={};for(const t in n)e[t]=n[t];return e}const xp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jD(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let a=0;a<xp.length;a++)t=xp[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Q_(n){this.src=n,this.g={},this.h=0}function M0(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],s=S0(r,e);(a=0<=s)&&Array.prototype.splice.call(r,s,1),a&&(Pm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Pp(n,e,t,r){for(var s=0;s<n.length;++s){var a=n[s];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return s}return-1}Q_.prototype.add=function(n,e,t,r,s){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Pp(n,e,r,s);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new UD(e,this.src,a,!!r,s)).ia=t,n.push(e)),e};var Y_="closure_lm_"+(1e6*Math.random()|0),X_={};function N0(n,e,t,r,s){if(r&&r.once)return Mp(n,e,t,r,s);if(Array.isArray(e)){for(var a=0;a<e.length;a++)N0(n,e[a],t,r,s);return null}return t=k0(t),n&&n[Rp]?n.O(e,t,Cm(r)?!!r.capture:!!r,s):$D(n,e,t,!1,r,s)}function $D(n,e,t,r,s,a){if(!e)throw Error("Invalid event type");var c=Cm(s)?!!s.capture:!!s,h=J_(n);if(h||(n[Y_]=h=new Q_(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function Mm(){const e=GD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QR||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(HD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Mp(n,e,t,r,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Mp(n,e[a],t,r,s);return null}return t=k0(t),n&&n[Rp]?n.P(e,t,Cm(r)?!!r.capture:!!r,s):$D(n,e,t,!0,r,s)}function zD(n,e,t,r,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)zD(n,e[a],t,r,s);else r=Cm(r)?!!r.capture:!!r,t=k0(t),n&&n[Rp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Pp(a=n.g[e],t,r,s))&&(Pm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=J_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Pp(e,t,r,s)),(t=-1<n?e[n]:null)&&O0(t))}function O0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Rp])M0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(HD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=J_(e))?(M0(t,n),0==t.h&&(t.src=null,e[Y_]=null)):Pm(n)}}}function HD(n){return n in X_?X_[n]:X_[n]="on"+n}function GD(n,e){if(n.fa)n=!0;else{e=new Sp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&O0(n),n=t.call(r,e)}return n}function J_(n){return(n=n[Y_])instanceof Q_?n:null}var Z_="__closure_events_fn_"+(1e9*Math.random()>>>0);function k0(n){return"function"==typeof n?n:(n[Z_]||(n[Z_]=function(e){return n.handleEvent(e)}),n[Z_])}function io(){Xl.call(this),this.i=new Q_(this),this.S=this,this.J=null}function jo(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new hs(e,n);else if(e instanceof hs)e.target=e.target||n;else{var s=e;jD(e=new hs(r,n),s)}if(s=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];s=ev(c,r,!0,e)&&s}if(s=ev(c=e.g=n,r,!0,e)&&s,s=ev(c,r,!1,e)&&s,t)for(a=0;a<t.length;a++)s=ev(c=e.g=t[a],r,!1,e)&&s}function ev(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var h=c.listener,g=c.la||c.src;c.ia&&M0(n.i,c),s=!1!==h.call(g,r)&&s}}return s&&!r.defaultPrevented}ro(io,Xl),io.prototype[Rp]=!0,io.prototype.removeEventListener=function(n,e,t,r){zD(this,n,e,t,r)},io.prototype.N=function(){if(io.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Pm(t[r]);delete n.g[e],n.h--}}this.J=null},io.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},io.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qD=Qn.JSON.stringify;function yN(){var n=L0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var F0=new class mN{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new tv,n=>n.reset());class tv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tx(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function nx(n){Qn.setTimeout(()=>{throw n},0)}let Np,ed=!1,L0=new class _N{constructor(){this.h=this.g=null}add(e,t){const r=F0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},WD=()=>{const n=Qn.Promise.resolve(void 0);Np=()=>{n.then(rx)}};var rx=()=>{for(var n;n=yN();){try{n.h.call(n.g)}catch(t){nx(t)}var e=F0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ed=!1};function nv(n,e){io.call(this),this.h=n||1,this.g=e||Qn,this.j=Bo(this.qb,this),this.l=Date.now()}function KD(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function V0(n,e,t){if("function"==typeof n)t&&(n=Bo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bo(n.handleEvent,n)}return 2147483647<Number(e)?-1:Qn.setTimeout(n,e||0)}function U0(n){n.g=V0(()=>{n.g=null,n.i&&(n.i=!1,U0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ro(nv,io),(Qt=nv.prototype).ga=!1,Qt.T=null,Qt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jo(this,"tick"),this.ga&&(KD(this),this.start()))}},Qt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qt.N=function(){nv.$.N.call(this),KD(this),delete this.g};class ix extends Xl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:U0(this)}N(){super.N(),this.g&&(Qn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nm(n){Xl.call(this),this.h=n,this.g={}}ro(Nm,Xl);var Op=[];function QD(n,e,t,r){Array.isArray(t)||(t&&(Op[0]=t.toString()),t=Op);for(var s=0;s<t.length;s++){var a=N0(e,t[s],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function B0(n){P0(n.g,function(e,t){this.g.hasOwnProperty(t)&&O0(e)},n),n.g={}}function rv(){this.g=!0}function ef(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function j0(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<s.length;c++)s[c]=""}}}return qD(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Nm.prototype.N=function(){Nm.$.N.call(this),B0(this)},Nm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rv.prototype.Ea=function(){this.g=!1},rv.prototype.info=function(){};var tf={},$0=null;function Om(){return $0=$0||new io}function XD(n){hs.call(this,tf.Ta,n)}function km(n){const e=Om();jo(e,new XD(e))}function JD(n,e){hs.call(this,tf.STAT_EVENT,n),this.stat=e}function $o(n){const e=Om();jo(e,new JD(e,n))}function ZD(n,e){hs.call(this,tf.Ua,n),this.size=e}function kp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qn.setTimeout(function(){n()},e)}tf.Ta="serverreachability",ro(XD,hs),tf.STAT_EVENT="statevent",ro(JD,hs),tf.Ua="timingevent",ro(ZD,hs);var iv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function z0(){}function nb(){}z0.prototype.h=null;var sv,Fm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function H0(){hs.call(this,"d")}function G0(){hs.call(this,"c")}function Lm(){}function Vm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Nm(this),this.P=ib,this.V=new nv(n=Jd?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rb}function rb(){this.i=null,this.g="",this.h=!1}ro(H0,hs),ro(G0,hs),ro(Lm,z0),Lm.prototype.g=function(){return new XMLHttpRequest},Lm.prototype.i=function(){return{}},sv=new Lm;var ib=45e3,q0={},ov={};function W0(n,e,t){n.L=1,n.v=Fp(nd(e)),n.s=t,n.S=!0,sb(n,null)}function sb(n,e){n.G=Date.now(),nf(n),n.A=nd(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),fb(t.i,"t",r),n.C=0,t=n.l.J,n.h=new rb,n.g=iw(n.l,t?e:null,!n.s),0<n.O&&(n.M=new ix(Bo(n.Pa,n,n.g),n.O)),QD(n.U,n.g,"readystatechange",n.nb),e=n.I?BD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),km(),function YD(n,e,t,r,s,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var b=v[0];v=v[1];var O=b.split("_");c=2<=O.length&&"type"==O[1]?c+(b+"=")+v+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function av(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function uv(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=ob(n,t),s==ov){4==e&&(n.o=4,$o(14),r=!1),ef(n.j,n.m,null,"[Incomplete Response]");break}if(s==q0){n.o=4,$o(15),ef(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ef(n.j,n.m,s,null),lv(n,s)}av(n)&&s!=ov&&s!=q0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,$o(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),zp(e),e.M=!0,$o(11))):(ef(n.j,n.m,t,"[Invalid Chunked Response]"),sf(n),rf(n))}function ob(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ov:(t=Number(e.substring(t,r)),isNaN(t)?q0:(r+=1)+t>e.length?ov:(e=e.slice(r,r+t),n.C=r+t,e))}function nf(n){n.Y=Date.now()+n.P,ab(n,n.P)}function ab(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kp(Bo(n.lb,n),e)}function cv(n){n.B&&(Qn.clearTimeout(n.B),n.B=null)}function rf(n){0==n.l.H||n.J||tw(n.l,n)}function sf(n){cv(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,KD(n.V),B0(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function lv(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||X0(t.i,n)))if(!n.K&&X0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;_v(t),mv(t)}yv(t),$o(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=kp(Bo(t.ib,t),6e3));if(1>=mb(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else rd(t,11)}else if((n.K||t.g==n)&&_v(t),!Rm(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let v=s[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const b=v[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const O=v[4];null!=O&&(t.Ga=O,t.l.info("SVER="+t.Ga));const z=v[5];null!=z&&"number"==typeof z&&0<z&&(t.L=r=1.5*z,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const ne=n.g;if(ne){const le=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var a=r.i;a.g||-1==le.indexOf("spdy")&&-1==le.indexOf("quic")&&-1==le.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(J0(a,a.h),a.h=null))}if(r.F){const Pe=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.Da=Pe,Li(r.I,r.F,Pe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=Sb(r,r.J?r.pa:null,r.Y),c.K){yb(r.i,c);var h=c,g=r.L;g&&h.setTimeout(g),h.B&&(cv(h),nf(h)),r.g=c}else bb(r);0<t.j.length&&cf(t)}else"stop"!=v[0]&&"close"!=v[0]||rd(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?rd(t,7):gv(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}km()}catch{}}function cb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(W_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ub(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(W_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function af(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(W_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,a=0;a<s;a++)e.call(void 0,r[a],t&&t[a],n)}(Qt=Vm.prototype).setTimeout=function(n){this.P=n},Qt.nb=function(n){n=n.target;const e=this.M;e&&3==ml(n)?e.l():this.Pa(n)},Qt.Pa=function(n){try{if(n==this.g)e:{const b=ml(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||Jd||this.g&&(this.h.h||this.g.ja()||Ex(this.g)))){this.J||4!=b||7==e||km(),cv(this);var t=this.g.da();this.ca=t;t:if(av(this)){var r=Ex(this.g);n="";var s=r.length,a=4==ml(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sf(this),rf(this);var c="";break t}this.h.i=new Qn.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function sx(n,e,t,r,s,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rm(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,$o(12),sf(this),rf(this);break e}ef(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lv(this,t)}this.S?(uv(this,b,c),Jd&&this.i&&3==b&&(QD(this.U,this.V,"tick",this.mb),this.V.start())):(ef(this.j,this.m,c,null),lv(this,c)),4==b&&sf(this),this.i&&!this.J&&(4==b?tw(this.l,this):(this.i=!1,nf(this)))}else(function qm(n){const e={};n=(n.g&&2<=ml(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Rm(n[r]))continue;var t=tx(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[s]||[];e[s]=a,a.push(t)}!function ex(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,$o(12)):(this.o=0,$o(13)),sf(this),rf(this)}}}catch{}},Qt.mb=function(){if(this.g){var n=ml(this.g),e=this.g.ja();this.C<e.length&&(cv(this),uv(this,n,e),this.i&&4!=n&&nf(this))}},Qt.cancel=function(){this.J=!0,sf(this)},Qt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ox(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(km(),$o(17)),sf(this),this.o=2,rf(this)):ab(this,this.Y-n)};var ax=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function td(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof td){this.h=n.h,Um(this,n.j),this.s=n.s,this.g=n.g,Bm(this,n.m),this.l=n.l;var e=n.i,t=new Up;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),lb(this,t),this.o=n.o}else n&&(e=String(n).match(ax))?(this.h=!1,Um(this,e[1]||"",!0),this.s=Lp(e[2]||""),this.g=Lp(e[3]||"",!0),Bm(this,e[4]),this.l=Lp(e[5]||"",!0),lb(this,e[6]||"",!0),this.o=Lp(e[7]||"")):(this.h=!1,this.i=new Up(null,this.h))}function nd(n){return new td(n)}function Um(n,e,t){n.j=t?Lp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Bm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function lb(n,e,t){e instanceof Up?(n.i=e,function hx(n,e){e&&!n.j&&(uf(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Y0(this,r),fb(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Vp(e,lx)),n.i=new Up(e,n.h))}function Li(n,e,t){n.i.set(e,t)}function Fp(n){return Li(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,db),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function db(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}td.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vp(e,Q0,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vp(e,Q0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vp(t,"/"==t.charAt(0)?cx:ux,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vp(t,dx)),n.join("")};var Q0=/[#\/\?@]/g,ux=/[#\?:]/g,cx=/[#\?]/g,lx=/[#\?@]/g,dx=/#/g;function Up(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function uf(n){n.g||(n.g=new Map,n.h=0,n.i&&function K0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var a=n[t].substring(0,r);s=n[t].substring(r+1)}else a=n[t];e(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Y0(n,e){uf(n),e=jm(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hb(n,e){return uf(n),e=jm(n,e),n.g.has(e)}function fb(n,e,t){Y0(n,e),0<t.length&&(n.i=null,n.g.set(jm(n,e),K_(t)),n.h+=t.length)}function jm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function pb(n){this.l=n||px,n=Qn.PerformanceNavigationTiming?0<(n=Qn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qn.g&&Qn.g.Ka&&Qn.g.Ka()&&Qn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qt=Up.prototype).add=function(n,e){uf(this),this.i=null,n=jm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qt.forEach=function(n,e){uf(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Qt.ta=function(){uf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let a=0;a<s.length;a++)t.push(e[r])}return t},Qt.Z=function(n){uf(this);let e=[];if("string"==typeof n)hb(this,n)&&(e=e.concat(this.g.get(jm(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Qt.set=function(n,e){return uf(this),this.i=null,hb(this,n=jm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var s=a;""!==c[r]&&(s+="="+encodeURIComponent(String(c[r]))),n.push(s)}}return this.i=n.join("&")};var px=10;function gb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mb(n){return n.h?1:n.g?n.g.size:0}function X0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function J0(n,e){n.g?n.g.add(e):n.h=e}function yb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _b(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return K_(n.i)}pb.prototype.cancel=function(){if(this.i=_b(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var gx=class{stringify(n){return Qn.JSON.stringify(n,void 0)}parse(n){return Qn.JSON.parse(n,void 0)}};function mx(){this.g=new gx}function $m(n,e,t){const r=t||"";try{cb(n,function(s,a){let c=s;Cm(s)&&(c=qD(s)),e.push(r+a+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function zm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Bp(n){this.l=n.fc||null,this.j=n.ob||!1}function Hm(n,e){io.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=dv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ro(Bp,z0),Bp.prototype.g=function(){return new Hm(this.l,this.j)},Bp.prototype.i=function(n){return function(){return n}}({}),ro(Hm,io);var dv=0;function Ib(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Gm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hv(n)}function hv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qt=Hm.prototype).open=function(n,e){if(this.readyState!=dv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hv(this)},Qt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Qn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gm(this)),this.readyState=dv},Qt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hv(this)),this.g&&(this.readyState=3,hv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Qn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ib(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Qt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Gm(this):hv(this),3==this.readyState&&Ib(this)}},Qt.Za=function(n){this.g&&(this.response=this.responseText=n,Gm(this))},Qt.Ya=function(n){this.g&&(this.response=n,Gm(this))},Qt.ka=function(){this.g&&Gm(this)},Qt.setRequestHeader=function(n,e){this.v.append(n,e)},Qt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Hm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vN=Qn.JSON.parse;function fs(n){io.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Eb,this.L=this.M=!1}ro(fs,io);var Eb="",yx=/^https?$/i,_x=["POST","PUT"];function jp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wb(n),pv(n)}function wb(n){n.F||(n.F=!0,jo(n,"complete"),jo(n,"error"))}function fv(n){if(n.h&&typeof b0<"u"&&(!n.C[1]||4!=ml(n)||2!=n.da()))if(n.v&&4==ml(n))V0(n.La,0,n);else if(jo(n,"readystatechange"),4==ml(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var s=String(n.I).match(ax)[1]||null;!s&&Qn.self&&Qn.self.location&&(s=Qn.self.location.protocol.slice(0,-1)),r=!yx.test(s?s.toLowerCase():"")}t=r}if(t)jo(n,"complete"),jo(n,"success");else{n.m=6;try{var a=2<ml(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",wb(n)}}finally{pv(n)}}}function pv(n,e){if(n.g){Ix(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||jo(n,"ready");try{t.onreadystatechange=r}catch{}}}function Ix(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Qn.clearTimeout(n.A),n.A=null)}function ml(n){return n.g?n.g.readyState:0}function Ex(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Eb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Tb(n){let e="";return P0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Z0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Tb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Li(n,e,t))}function Wm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Km(n){this.Ga=0,this.j=[],this.l=new rv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wm("baseRetryDelayMs",5e3,n),this.hb=Wm("retryDelaySeedMs",1e4,n),this.eb=Wm("forwardChannelMaxRetries",2,n),this.xa=Wm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new pb(n&&n.concurrentRequestLimit),this.Ja=new mx,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function gv(n){if(ew(n),3==n.H){var e=n.W++,t=nd(n.I);if(Li(t,"SID",n.K),Li(t,"RID",e),Li(t,"TYPE","terminate"),$p(n,t),(e=new Vm(n,n.l,e)).L=2,e.v=Fp(nd(t)),t=!1,Qn.navigator&&Qn.navigator.sendBeacon)try{t=Qn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Qn.Image&&((new Image).src=e.v,t=!0),t||(e.g=iw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),nf(e)}rw(n)}function mv(n){n.g&&(zp(n),n.g.cancel(),n.g=null)}function ew(n){mv(n),n.u&&(Qn.clearTimeout(n.u),n.u=null),_v(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Qn.clearTimeout(n.m),n.m=null)}function cf(n){if(!gb(n.i)&&!n.m){n.m=!0;var e=n.Na;Np||WD(),ed||(Np(),ed=!0),L0.add(e,n),n.C=0}}function Ab(n,e){var t;t=e?e.m:n.W++;const r=nd(n.I);Li(r,"SID",n.K),Li(r,"RID",t),Li(r,"AID",n.V),$p(n,r),n.o&&n.s&&Z0(r,n.o,n.s),t=new Vm(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Db(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),J0(n.i,t),W0(t,r,e)}function $p(n,e){n.na&&P0(n.na,function(t,r){Li(e,r,t)}),n.h&&cb({},function(t,r){Li(e,r,t)})}function Db(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Bo(n.h.Va,n.h,n):null;e:{var s=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=s[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let v=s[g].g;const b=s[g].map;if(v-=a,0>v)a=Math.max(0,s[g].g-100),h=!1;else try{$m(b,c,"req"+v+"_")}catch{r&&r(b)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function bb(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Np||WD(),ed||(Np(),ed=!0),L0.add(e,n),n.A=0}}function yv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kp(Bo(n.Ma,n),nw(n,n.A)),n.A++,0))}function zp(n){null!=n.B&&(Qn.clearTimeout(n.B),n.B=null)}function Cb(n){n.g=new Vm(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=nd(n.wa);Li(e,"RID","rpc"),Li(e,"SID",n.K),Li(e,"AID",n.V),Li(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Li(e,"TO",n.qa),Li(e,"TYPE","xmlhttp"),$p(n,e),n.o&&n.s&&Z0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Fp(nd(e)),t.s=null,t.S=!0,sb(t,n)}function _v(n){null!=n.v&&(Qn.clearTimeout(n.v),n.v=null)}function tw(n,e){var t=null;if(n.g==e){_v(n),zp(n),n.g=null;var r=2}else{if(!X0(n.i,e))return;t=e.F,yb(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;jo(r=Om(),new ZD(r,t)),cf(n)}else bb(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function wx(n,e){return!(mb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kp(Bo(n.Na,n,e),nw(n,n.C)),n.C++,0)))}(n,e)||2==r&&yv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:rd(n,5);break;case 4:rd(n,10);break;case 3:rd(n,6);break;default:rd(n,2)}}function nw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function rd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Bo(n.pb,n);t||(t=new td("//www.google.com/images/cleardot.gif"),Qn.location&&"http"==Qn.location.protocol||Um(t,"https"),Fp(t)),function vb(n,e){const t=new rv;if(Qn.Image){const r=new Image;r.onload=Sm(zm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Sm(zm,t,r,"TestLoadImage: error",!1,e),r.onabort=Sm(zm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sm(zm,t,r,"TestLoadImage: timeout",!1,e),Qn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else $o(2);n.H=0,n.h&&n.h.za(e),rw(n),ew(n)}function rw(n){if(n.H=0,n.ma=[],n.h){const e=_b(n.i);(0!=e.length||0!=n.j.length)&&(R0(n.ma,e),R0(n.ma,n.j),n.i.i.length=0,K_(n.j),n.j.length=0),n.h.ya()}}function Sb(n,e,t){var r=t instanceof td?nd(t):new td(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Bm(r,r.m);else{var s=Qn.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var a=new td(null);r&&Um(a,r),e&&(a.g=e),s&&Bm(a,s),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Li(r,t,e),Li(r,"VER",n.ra),$p(n,r),r}function iw(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fs(t&&n.Ha&&!n.va?new Bp({ob:!0}):n.va)).Oa(n.J),e}function sw(){}function vv(){if(Zh&&!(10<=Number(LD)))throw Error("Environmental error: no available transport.")}function Su(n,e){io.call(this),this.g=new Km(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Rm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rm(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lf(this)}function Iv(n){H0.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ev(){G0.call(this),this.status=1}function lf(n){this.g=n}function Ru(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function aw(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((s=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=(t=(s=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(s^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(s^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(s^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^a&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(s^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^a&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(s^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^a&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(s^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^a&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(s^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^s^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=s+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=s+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=s+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=s+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(s^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(s^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((s=a+((c=s+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+a&4294967295}function yi(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var a=0|n[s];r&&a==e||(t[s]=a,r=!1)}this.g=t}(Qt=fs.prototype).Oa=function(n){this.M=n},Qt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sv.g(),this.C=function tb(n){return n.h||(n.h=n.i())}(this.u?this.u:sv),this.g.onreadystatechange=Bo(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void jp(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),s=Qn.FormData&&n instanceof Qn.FormData,!(0<=S0(_x,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ix(this),0<this.B&&((this.L=function vx(n){return Zh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bo(this.ua,this)):this.A=V0(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){jp(this,a)}},Qt.ua=function(){typeof b0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jo(this,"timeout"),this.abort(8))},Qt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,jo(this,"complete"),jo(this,"abort"),pv(this))},Qt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pv(this,!0)),fs.$.N.call(this)},Qt.La=function(){this.s||(this.G||this.v||this.l?fv(this):this.kb())},Qt.kb=function(){fv(this)},Qt.isActive=function(){return!!this.g},Qt.da=function(){try{return 2<ml(this)?this.g.status:-1}catch{return-1}},Qt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vN(e)}},Qt.Ia=function(){return this.m},Qt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qt=Km.prototype).ra=8,Qt.H=1,Qt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Vm(this,this.l,n);let a=this.s;if(this.U&&(a?(a=BD(a),jD(a,this.U)):a=this.U),null!==this.o||this.O||(s.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Db(this,s,e),Li(t=nd(this.I),"RID",n),Li(t,"CVER",22),this.F&&Li(t,"X-HTTP-Session-Id",this.F),$p(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(Tb(a)))+"&"+e:this.o&&Z0(t,this.o,a)),J0(this.i,s),this.bb&&Li(t,"TYPE","init"),this.P?(Li(t,"$req",e),Li(t,"SID","null"),s.aa=!0,W0(s,t,null)):W0(s,t,e),this.H=2}}else 3==this.H&&(n?Ab(this,n):0==this.j.length||gb(this.i)||Ab(this))},Qt.Ma=function(){if(this.u=null,Cb(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kp(Bo(this.jb,this),n)}},Qt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$o(10),mv(this),Cb(this))},Qt.ib=function(){null!=this.v&&(this.v=null,mv(this),yv(this),$o(19))},Qt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),$o(2)):(this.l.info("Failed to ping google.com"),$o(1))},Qt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Qt=sw.prototype).Ba=function(){},Qt.Aa=function(){},Qt.za=function(){},Qt.ya=function(){},Qt.isActive=function(){return!0},Qt.Va=function(){},vv.prototype.g=function(n,e){return new Su(n,e)},ro(Su,io),Su.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;$o(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Sb(n,null,n.Y),cf(n)},Su.prototype.close=function(){gv(this.g)},Su.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qD(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&cf(e)},Su.prototype.N=function(){this.g.h=null,delete this.j,gv(this.g),delete this.g,Su.$.N.call(this)},ro(Iv,H0),ro(Ev,G0),ro(lf,sw),lf.prototype.Ba=function(){jo(this.g,"a")},lf.prototype.Aa=function(n){jo(this.g,new Iv(n))},lf.prototype.za=function(n){jo(this.g,new Ev)},lf.prototype.ya=function(){jo(this.g,"b")},ro(Ru,function ow(){this.blockSize=-1}),Ru.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ru.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,a=0;a<e;){if(0==s)for(;a<=t;)aw(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[s++]=n.charCodeAt(a++),s==this.blockSize){aw(this,r),s=0;break}}else for(;a<e;)if(r[s++]=n[a++],s==this.blockSize){aw(this,r),s=0;break}}this.h=s,this.i+=e},Ru.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Tx={};function uw(n){return-128<=n&&128>n?function gN(n,e){var t=Tx;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yi([0|e],0>e?-1:0)}):new yi([0|n],0>n?-1:0)}function Uc(n){if(isNaN(n)||!isFinite(n))return Hp;if(0>n)return Do(Uc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Tv;return new yi(e,0)}var Tv=4294967296,Hp=uw(0),Av=uw(1),cw=uw(16777216);function id(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function xu(n){return-1==n.h}function Do(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yi(t,~n.h).add(Av)}function Dv(n,e){return n.add(Do(e))}function Qm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ym(n,e){this.g=n,this.h=e}function bo(n,e){if(id(e))throw Error("division by zero");if(id(n))return new Ym(Hp,Hp);if(xu(n))return e=bo(Do(n),e),new Ym(Do(e.g),Do(e.h));if(xu(e))return e=bo(n,Do(e)),new Ym(Do(e.g),e.h);if(30<n.g.length){if(xu(n)||xu(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Av,r=e;0>=r.X(n);)t=df(t),r=df(r);var s=Gp(t,1),a=Gp(r,1);for(r=Gp(r,2),t=Gp(t,2);!id(r);){var c=a.add(r);0>=c.X(n)&&(s=s.add(t),a=c),r=Gp(r,1),t=Gp(t,1)}return e=Dv(n,s.R(e)),new Ym(s,e)}for(s=Hp;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Uc(t)).R(e);xu(c)||0<c.X(n);)c=(a=Uc(t-=r)).R(e);id(a)&&(a=Av),s=s.add(a),n=Dv(n,c)}return new Ym(s,n)}function df(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yi(t,n.h)}function Gp(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],a=0;a<r;a++)s[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new yi(s,n.h)}(Qt=yi.prototype).ea=function(){if(xu(this))return-Do(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Tv+r)*e,e*=Tv}return n},Qt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(id(this))return"0";if(xu(this))return"-"+Do(this).toString(n);for(var e=Uc(Math.pow(n,6)),t=this,r="";;){var s=bo(t,e).g,a=((0<(t=Dv(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(id(t=s))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Qt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Qt.X=function(n){return xu(n=Dv(this,n))?-1:id(n)?0:1},Qt.abs=function(){return xu(this)?Do(this):this},Qt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var a=r+(65535&this.D(s))+(65535&n.D(s)),c=(a>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=c>>>16,t[s]=(c&=65535)<<16|(a&=65535)}return new yi(t,-2147483648&t[t.length-1]?-1:0)},Qt.R=function(n){if(id(this)||id(n))return Hp;if(xu(this))return xu(n)?Do(this).R(Do(n)):Do(Do(this).R(n));if(xu(n))return Do(this.R(Do(n)));if(0>this.X(cw)&&0>n.X(cw))return Uc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var a=this.D(r)>>>16,c=65535&this.D(r),h=n.D(s)>>>16,g=65535&n.D(s);t[2*r+2*s]+=c*g,Qm(t,2*r+2*s),t[2*r+2*s+1]+=a*g,Qm(t,2*r+2*s+1),t[2*r+2*s+1]+=c*h,Qm(t,2*r+2*s+1),t[2*r+2*s+2]+=a*h,Qm(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yi(t,0)},Qt.gb=function(n){return bo(this,n).h},Qt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yi(t,this.h&n.h)},Qt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yi(t,this.h|n.h)},Qt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yi(t,this.h^n.h)},vv.prototype.createWebChannel=vv.prototype.g,Su.prototype.send=Su.prototype.u,Su.prototype.open=Su.prototype.m,Su.prototype.close=Su.prototype.close,iv.NO_ERROR=0,iv.TIMEOUT=8,iv.HTTP_ERROR=6,eb.COMPLETE="complete",nb.EventType=Fm,Fm.OPEN="a",Fm.CLOSE="b",Fm.ERROR="c",Fm.MESSAGE="d",io.prototype.listen=io.prototype.O,fs.prototype.listenOnce=fs.prototype.P,fs.prototype.getLastError=fs.prototype.Sa,fs.prototype.getLastErrorCode=fs.prototype.Ia,fs.prototype.getStatus=fs.prototype.da,fs.prototype.getResponseJson=fs.prototype.Wa,fs.prototype.getResponseText=fs.prototype.ja,fs.prototype.send=fs.prototype.ha,fs.prototype.setWithCredentials=fs.prototype.Oa,Ru.prototype.digest=Ru.prototype.l,Ru.prototype.reset=Ru.prototype.reset,Ru.prototype.update=Ru.prototype.j,yi.prototype.add=yi.prototype.add,yi.prototype.multiply=yi.prototype.R,yi.prototype.modulo=yi.prototype.gb,yi.prototype.compare=yi.prototype.X,yi.prototype.toNumber=yi.prototype.ea,yi.prototype.toString=yi.prototype.toString,yi.prototype.getBits=yi.prototype.D,yi.fromNumber=Uc,yi.fromString=function wv(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Do(wv(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Uc(Math.pow(e,8)),r=Hp,s=0;s<n.length;s+=8){var a=Math.min(8,n.length-s),c=parseInt(n.substring(s,s+a),e);8>a?(a=Uc(Math.pow(e,a)),r=r.R(a).add(Uc(c))):r=(r=r.R(t)).add(Uc(c))}return r};var Ax=Vc.createWebChannelTransport=function(){return new vv},IN=Vc.getStatEventTarget=function(){return Om()},Rb=Vc.ErrorCode=iv,xb=Vc.EventType=eb,lw=Vc.Event=tf,Dx=Vc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},EN=Vc.FetchXmlHttpFactory=Bp,dw=Vc.WebChannel=nb,Xm=Vc.XhrIo=fs,bx=Vc.Md5=Ru,eh=Vc.Integer=yi;const Pb="@firebase/firestore";class so{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}so.UNAUTHENTICATED=new so(null),so.GOOGLE_CREDENTIALS=new so("google-credentials-uid"),so.FIRST_PARTY=new so("first-party-uid"),so.MOCK_USER=new so("mock-user");let qp="9.23.0";const th=new Jh.Vy("@firebase/firestore");function hw(){return th.logLevel}function At(n,...e){if(th.logLevel<=Jh.$b.DEBUG){const t=e.map(Jm);th.debug(`Firestore (${qp}): ${n}`,...t)}}function Cs(n,...e){if(th.logLevel<=Jh.$b.ERROR){const t=e.map(Jm);th.error(`Firestore (${qp}): ${n}`,...t)}}function eu(n,...e){if(th.logLevel<=Jh.$b.WARN){const t=e.map(Jm);th.warn(`Firestore (${qp}): ${n}`,...t)}}function Jm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Zt(n="Unexpected state"){const e=`FIRESTORE (${qp}) INTERNAL ASSERTION FAILED: `+n;throw Cs(e),new Error(e)}function hn(n,e){n||Zt()}function Gt(n,e){return n}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends Bs.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class js{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(so.UNAUTHENTICATED))}shutdown(){}}class Cx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AN{constructor(e){this.t=e,this.currentUser=so.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const a=v=>this.i!==s?(s=this.i,t(v)):Promise.resolve();let c=new js;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new js,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=c;e.enqueueRetryable((0,K.A)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new js)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(hn("string"==typeof r.accessToken),new bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return hn(null===e||"string"==typeof e),new so(e)}}class Sx{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=so.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Rx{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Sx(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(so.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ob{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,At("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?s(a):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(hn("string"==typeof t.token),this.T=t.token,new Nb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Px(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class fw{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=Px(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[a]%62))}return r}}function zn(n,e){return n<e?-1:n>e?1:0}function Wp(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}class Wi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new It(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new It(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new It(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wi.fromMillis(Date.now())}static fromDate(e){return Wi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zn(this.nanoseconds,e.nanoseconds):zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yn(e)}static min(){return new yn(new Wi(0,0))}static max(){return new yn(new Wi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Zt(),void 0===r?r=e.length-t:r>e.length-t&&Zt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Kp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),c=t.get(s);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vr extends Kp{construct(e,t,r){return new Vr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new It(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Vr(t)}static emptyPath(){return new Vr([])}}const Fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends Kp{construct(e,t,r){return new ps(e,t,r)}static isValidIdentifier(e){return Fb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ps(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(0===r.length)throw new It(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if("\\"===h){if(s+1===e.length)throw new It(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new It(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,s+=2}else"`"===h?(c=!c,s++):"."!==h||c?(r+=h,s++):(a(),s++)}if(a(),c)throw new It(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ps(t)}static emptyPath(){return new ps([])}}class qt{constructor(e){this.path=e}static fromPath(e){return new qt(Vr.fromString(e))}static fromName(e){return new qt(Vr.fromString(e).popFirst(5))}static empty(){return new qt(Vr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new Vr(e.slice()))}}function Nx(n){return new uc(n.readTime,n.key,-1)}class uc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new uc(yn.min(),qt.empty(),-1)}static max(){return new uc(yn.max(),qt.empty(),-1)}}function Vb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qt.comparator(n.documentKey,e.documentKey),0!==t?t:zn(n.largestBatchId,e.largestBatchId))}const Ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function yl(n){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,K.A)(function*(n){if(n.code!==We.FAILED_PRECONDITION||n.message!==Ox)throw n;At("LocalStore","Unexpectedly lost primary lease")}),Rv.apply(this,arguments)}class Ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ge((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ge?t:Ge.resolve(t)}catch(t){return Ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ge.reject(t)}static resolve(e){return new Ge((t,r)=>{t(e)})}static reject(e){return new Ge((t,r)=>{r(e)})}static waitFor(e){return new Ge((t,r)=>{let s=0,a=0,c=!1;e.forEach(h=>{++s,h.next(()=>{++a,c&&a===s&&t()},g=>r(g))}),c=!0,a===s&&t()})}static or(e){let t=Ge.resolve(!1);for(const r of e)t=t.next(s=>s?Ge.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new Ge((r,s)=>{const a=e.length,c=new Array(a);let h=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(b=>{c[v]=b,++h,h===a&&r(c)},b=>s(b))}})}static doWhile(e,t){return new Ge((r,s)=>{const a=()=>{!0===e()?t().next(()=>{a()},s):r()};a()})}}function rh(n){return"IndexedDbTransactionError"===n.name}let zo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ih(n){return null==n}function Zm(n){return 0===n&&1/n==-1/0}function Ov(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Iw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ci{constructor(e,t){this.comparator=e,this.root=t||Ho.EMPTY}insert(e,t){return new Ci(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ho.BLACK,null,null))}remove(e){return new Ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ho.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qp(this.root,e,this.comparator,!0)}}class Qp{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ho{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Ho.RED,this.left=s??Ho.EMPTY,this.right=a??Ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Ho(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===a?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ho.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ho.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zt();const e=this.left.check();if(e!==this.right.check())throw Zt();return e+(this.isRed()?0:1)}}Ho.EMPTY=null,Ho.RED=!0,Ho.BLACK=!1,Ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Zt()}get value(){throw Zt()}get color(){throw Zt()}get left(){throw Zt()}get right(){throw Zt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ho(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ki{constructor(e){this.comparator=e,this.data=new Ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ew(this.data.getIterator())}getIteratorFrom(e){return new Ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(s,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ki(this.comparator);return t.data=e,t}}class Ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nu{constructor(e){this.fields=e,e.sort(ps.comparator)}static empty(){return new nu([])}unionWith(e){let t=new Ki(ps.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new nu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $s{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wb("Invalid base64 string: "+s):s}}(e);return new $s(t)}static fromUint8Array(e){const t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new $s(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$s.EMPTY_BYTE_STRING=new $s("");const xN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sd(n){if(hn(!!n),"string"==typeof n){let e=0;const t=xN.exec(n);if(hn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gs(n.seconds),nanos:gs(n.nanos)}}function gs(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vl(n){return"string"==typeof n?$s.fromBase64String(n):$s.fromUint8Array(n)}function ww(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xp(n){const e=n.mapValue.fields.__previous_value__;return ww(e)?Xp(e):e}function Jp(n){const e=sd(n.mapValue.fields.__local_write_time__.timestampValue);return new Wi(e.seconds,e.nanos)}class Kb{constructor(e,t,r,s,a,c,h,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=v}}class pf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pf&&e.projectId===this.projectId&&e.database===this.database}}const od={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ww(n)?4:Jb(n)?9007199254740991:10:Zt()}function Mu(n,e){if(n===e)return!0;const t=Pu(n);if(t!==Pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jp(n).isEqual(Jp(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=sd(r.timestampValue),c=sd(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,vl(n.bytesValue).isEqual(vl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return gs(r.geoPointValue.latitude)===gs(s.geoPointValue.latitude)&&gs(r.geoPointValue.longitude)===gs(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return gs(r.integerValue)===gs(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=gs(r.doubleValue),c=gs(s.doubleValue);return a===c?Zm(a)===Zm(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Wp(n.arrayValue.values||[],e.arrayValue.values||[],Mu);case 10:return function(r,s){const a=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Ov(a)!==Ov(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!Mu(a[h],c[h])))return!1;return!0}(n,e);default:return Zt()}var s}function Zp(n,e){return void 0!==(n.values||[]).find(t=>Mu(t,e))}function ad(n,e){if(n===e)return 0;const t=Pu(n),r=Pu(e);if(t!==r)return zn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zn(n.booleanValue,e.booleanValue);case 2:return function(s,a){const c=gs(s.integerValue||s.doubleValue),h=gs(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Qb(n.timestampValue,e.timestampValue);case 4:return Qb(Jp(n),Jp(e));case 5:return zn(n.stringValue,e.stringValue);case 6:return function(s,a){const c=vl(s),h=vl(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let g=0;g<c.length&&g<h.length;g++){const v=zn(c[g],h[g]);if(0!==v)return v}return zn(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const c=zn(gs(s.latitude),gs(a.latitude));return 0!==c?c:zn(gs(s.longitude),gs(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,a){const c=s.values||[],h=a.values||[];for(let g=0;g<c.length&&g<h.length;++g){const v=ad(c[g],h[g]);if(v)return v}return zn(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===od.mapValue&&a===od.mapValue)return 0;if(s===od.mapValue)return 1;if(a===od.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),g=a.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){const O=zn(h[b],v[b]);if(0!==O)return O;const z=ad(c[h[b]],g[v[b]]);if(0!==z)return z}return zn(h.length,v.length)}(n.mapValue,e.mapValue);default:throw Zt()}}function Qb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zn(n,e);const t=sd(n),r=sd(e),s=zn(t.seconds,r.seconds);return 0!==s?s:zn(t.nanos,r.nanos)}function eg(n){return Yb(n)}function Yb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=sd(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vl(n.bytesValue).toBase64():"referenceValue"in n?qt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",a=!0;for(const c of r.values||[])a?a=!1:s+=",",s+=Yb(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of s)c?c=!1:a+=",",a+=`${h}:${Yb(r.fields[h])}`;return a+"}"}(n.mapValue):Zt();var e}function gf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xb(n){return!!n&&"integerValue"in n}function kv(n){return!!n&&"arrayValue"in n}function Yx(n){return!!n&&"nullValue"in n}function Xx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ny(n){return!!n&&"mapValue"in n}function ry(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ry(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ry(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Jb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class ua{constructor(e){this.value=e}static empty(){return new ua({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ny(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ry(t)}setAll(e){let t=ps.emptyPath(),r={},s=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=ry(c):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());ny(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ny(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Fa(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new ua(ry(this.value))}}function t1(n){const e=[];return Fa(n.fields,(t,r)=>{const s=new ps([t]);if(ny(r)){const a=t1(r.mapValue).fields;if(0===a.length)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new nu(e)}class Vi{constructor(e,t,r,s,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Vi(e,0,yn.min(),yn.min(),yn.min(),ua.empty(),0)}static newFoundDocument(e,t,r,s){return new Vi(e,1,t,yn.min(),r,s,0)}static newNoDocument(e,t){return new Vi(e,2,t,yn.min(),yn.min(),ua.empty(),0)}static newUnknownDocument(e,t){return new Vi(e,3,t,yn.min(),yn.min(),ua.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ua.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ua.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jc{constructor(e,t){this.position=e,this.inclusive=t}}function Zb(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(r=a.field.isKeyField()?qt.comparator(qt.fromName(c.referenceValue),t.key):ad(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function eC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mu(n.position[t],e.position[t]))return!1;return!0}class mf{constructor(e,t="asc"){this.field=e,this.dir=t}}function yf(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Tw{}class Ar extends Tw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new i1(e,t,r):"array-contains"===t?new rC(e,r):"in"===t?new Dw(e,r):"not-in"===t?new iC(e,r):"array-contains-any"===t?new a1(e,r):new Ar(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new s1(e,r):new o1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ad(t,this.value)):null!==t&&Pu(this.value)===Pu(t)&&this.matchesComparison(ad(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class si extends Tw{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new si(e,t)}matches(e){return tg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tg(n){return"and"===n.op}function sy(n){return function oy(n){for(const e of n.filters)if(e instanceof si)return!1;return!0}(n)&&tg(n)}function tC(n){if(n instanceof Ar)return n.field.canonicalString()+n.op.toString()+eg(n.value);if(sy(n))return n.filters.map(e=>tC(e)).join(",");{const e=n.filters.map(t=>tC(t)).join(",");return`${n.op}(${e})`}}function n1(n,e){return n instanceof Ar?(t=n,(r=e)instanceof Ar&&t.op===r.op&&t.field.isEqual(r.field)&&Mu(t.value,r.value)):n instanceof si?function(t,r){return r instanceof si&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,a,c)=>s&&n1(a,r.filters[c]),!0)}(n,e):void Zt();var t,r}function Aw(n){return n instanceof Ar?`${(e=n).field.canonicalString()} ${e.op} ${eg(e.value)}`:n instanceof si?function(e){return e.op.toString()+" {"+e.getFilters().map(Aw).join(" ,")+"}"}(n):"Filter";var e}class i1 extends Ar{constructor(e,t,r){super(e,t,r),this.key=qt.fromName(r.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class s1 extends Ar{constructor(e,t){super(e,"in",t),this.keys=nC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class o1 extends Ar{constructor(e,t){super(e,"not-in",t),this.keys=nC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qt.fromName(r.referenceValue))}class rC extends Ar{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kv(t)&&Zp(t.arrayValue,this.value)}}class Dw extends Ar{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zp(this.value.arrayValue,t)}}class iC extends Ar{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zp(this.value.arrayValue,t)}}class a1 extends Ar{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zp(this.value.arrayValue,r))}}class u1{constructor(e,t=null,r=[],s=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=h,this.dt=null}}function Fv(n,e=null,t=[],r=[],s=null,a=null,c=null){return new u1(n,e,t,r,s,a,c)}function ud(n){const e=Gt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ih(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eg(r)).join(",")),e.dt=t}return e.dt}function Lv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yf(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!n1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eC(n.startAt,e.startAt)&&eC(n.endAt,e.endAt)}function ay(n){return qt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class sh{constructor(e,t=null,r=[],s=[],a=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=g,this.wt=null,this._t=null}}function rg(n){return new sh(n)}function aC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function bw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Uv(n){return null!==n.collectionGroup}function oh(n){const e=Gt(n);if(null===e.wt){e.wt=[];const t=Vv(e),r=bw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new mf(t)),e.wt.push(new mf(ps.keyField(),"asc"));else{let s=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(s=!0);if(!s){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new mf(ps.keyField(),a))}}}return e.wt}function La(n){const e=Gt(n);if(!e._t)if("F"===e.limitType)e._t=Fv(e.path,e.collectionGroup,oh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of oh(e))t.push(new mf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new jc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new jc(e.startAt.position,e.startAt.inclusive):null;e._t=Fv(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Bv(n,e){e.getFirstInequalityField(),Vv(n);const t=n.filters.concat([e]);return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function uy(n,e,t){return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jv(n,e){return Lv(La(n),La(e))&&n.limitType===e.limitType}function uC(n){return`${ud(La(n))}|lt:${n.limitType}`}function cy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Aw(r)).join(", ")}]`),ih(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eg(r)).join(",")),`Target(${t})`}(La(n))}; limitType=${n.limitType})`}function ig(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):qt.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of oh(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,a,c){const h=Zb(s,a,c);return s.inclusive?h<=0:h<0}(t.startAt,oh(t),r)||t.endAt&&!function(s,a,c){const h=Zb(s,a,c);return s.inclusive?h>=0:h>0}(t.endAt,oh(t),r)));var t,r}function cC(n){return(e,t)=>{let r=!1;for(const s of oh(n)){const a=$v(s,e,t);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function $v(n,e,t){const r=n.field.isKeyField()?qt.comparator(e.key,t.key):function(s,a,c){const h=a.data.field(s),g=c.data.field(s);return null!==h&&null!==g?ad(h,g):Zt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Zt()}}class cd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,a]of r)if(this.equalsFn(s,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}const l1=new Ci(qt.comparator);function Va(){return l1}const Sw=new Ci(qt.comparator);function zv(...n){let e=Sw;for(const t of n)e=e.insert(t.key,t);return e}function lC(n){let e=Sw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ld(){return Hv()}function dC(){return Hv()}function Hv(){return new cd(n=>n.toString(),(n,e)=>n.isEqual(e))}const MN=new Ci(qt.comparator),d1=new Ki(qt.comparator);function dr(...n){let e=d1;for(const t of n)e=e.add(t);return e}const NN=new Ki(zn);function h1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zm(e)?"-0":e}}function f1(n){return{integerValue:""+n}}function p1(n,e){return function jb(n){return"number"==typeof n&&Number.isInteger(n)&&!Zm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?f1(e):h1(n,e)}class Gv{constructor(){this._=void 0}}function ON(n,e,t){return n instanceof ly?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ww(s)&&(s=Xp(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof sg?fC(n,e):n instanceof og?i(n,e):function(r,s){const a=g1(r,s),c=u(a)+u(r.gt);return Xb(a)&&Xb(r.gt)?f1(c):h1(r.serializer,c)}(n,e)}function kN(n,e,t){return n instanceof sg?fC(n,e):n instanceof og?i(n,e):t}function g1(n,e){return n instanceof o?Xb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ly extends Gv{}class sg extends Gv{constructor(e){super(),this.elements=e}}function fC(n,e){const t=l(e);for(const r of n.elements)t.some(s=>Mu(s,r))||t.push(r);return{arrayValue:{values:t}}}class og extends Gv{constructor(e){super(),this.elements=e}}function i(n,e){let t=l(e);for(const r of n.elements)t=t.filter(s=>!Mu(s,r));return{arrayValue:{values:t}}}class o extends Gv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function u(n){return gs(n.integerValue||n.doubleValue)}function l(n){return kv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _{constructor(e,t){this.version=e,this.transformResults=t}}class E{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new E}static exists(e){return new E(void 0,e)}static updateTime(e){return new E(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class L{}function H(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Yn(n.key,E.none()):new yt(n.key,n.data,E.none());{const t=n.data,r=ua.empty();let s=new Ki(ps.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),s=s.add(a)}return new Vt(n.key,r,new nu(s.toArray()),E.none())}}function ie(n,e,t){n instanceof yt?function(r,s,a){const c=r.value.clone(),h=lt(r.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Vt?function(r,s,a){if(!R(r.precondition,s))return void s.convertToUnknownDocument(a.version);const c=lt(r.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(nn(r)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fe(n,e,t,r){return n instanceof yt?function(s,a,c,h){if(!R(s.precondition,a))return c;const g=s.value.clone(),v=jn(s.fieldTransforms,h,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vt?function(s,a,c,h){if(!R(s.precondition,a))return c;const g=jn(s.fieldTransforms,h,a),v=a.data;return v.setAll(nn(s)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===c?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,R(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function Ae(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=g1(r.transform,s||null);null!=a&&(null===t&&(t=ua.empty()),t.set(r.field,a))}return t||null}function Je(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wp(t,r,(s,a)=>function f(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof sg&&r instanceof sg||t instanceof og&&r instanceof og?Wp(t.elements,r.elements,Mu):t instanceof o&&r instanceof o?Mu(t.gt,r.gt):t instanceof ly&&r instanceof ly);var t,r}(s,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class yt extends L{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vt extends L{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nn(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lt(n,e,t){const r=new Map;hn(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,h=e.data.field(a.field);r.set(a.field,kN(c,h,t[s]))}return r}function jn(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,ON(a,c,e))}return r}class Yn extends L{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oi extends L{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ca{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&ie(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fe(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fe(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dC();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(s.key)?null:h;const g=H(c,h);null!==g&&r.set(s.key,g),c.isValidDocument()||c.convertToNoDocument(yn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dr())}isEqual(e){return this.batchId===e.batchId&&Wp(this.mutations,e.mutations,(t,r)=>Je(t,r))&&Wp(this.baseMutations,e.baseMutations,(t,r)=>Je(t,r))}}class $c{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){hn(e.mutations.length===r.length);let s=MN;const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new $c(e,t,r,s)}}class ah{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class m1{constructor(e,t){this.count=e,this.unchangedNames=t}}var zs,ti;function LN(n){if(void 0===n)return Cs("GRPC error has no .code"),We.UNKNOWN;switch(n){case zs.OK:return We.OK;case zs.CANCELLED:return We.CANCELLED;case zs.UNKNOWN:return We.UNKNOWN;case zs.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case zs.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case zs.INTERNAL:return We.INTERNAL;case zs.UNAVAILABLE:return We.UNAVAILABLE;case zs.UNAUTHENTICATED:return We.UNAUTHENTICATED;case zs.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case zs.NOT_FOUND:return We.NOT_FOUND;case zs.ALREADY_EXISTS:return We.ALREADY_EXISTS;case zs.PERMISSION_DENIED:return We.PERMISSION_DENIED;case zs.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case zs.ABORTED:return We.ABORTED;case zs.OUT_OF_RANGE:return We.OUT_OF_RANGE;case zs.UNIMPLEMENTED:return We.UNIMPLEMENTED;case zs.DATA_LOSS:return We.DATA_LOSS;default:return Zt()}}(ti=zs||(zs={}))[ti.OK=0]="OK",ti[ti.CANCELLED=1]="CANCELLED",ti[ti.UNKNOWN=2]="UNKNOWN",ti[ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ti[ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ti[ti.NOT_FOUND=5]="NOT_FOUND",ti[ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",ti[ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",ti[ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",ti[ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ti[ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ti[ti.ABORTED=10]="ABORTED",ti[ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",ti[ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",ti[ti.INTERNAL=13]="INTERNAL",ti[ti.UNAVAILABLE=14]="UNAVAILABLE",ti[ti.DATA_LOSS=15]="DATA_LOSS";class y1{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return pC}static getOrCreateInstance(){return null===pC&&(pC=new y1),pC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let pC=null;const KF=new eh([4294967295,4294967295],0);function UN(n){const e=function VN(){return new TextEncoder}().encode(n),t=new bx;return t.update(e),new Uint8Array(t.digest())}function BN(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new eh([t,r],0),new eh([s,a],0)]}class _1{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xw(`Invalid padding: ${t}`);if(r<0)throw new xw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new xw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new xw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=eh.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(eh.fromNumber(r)));return 1===s.compare(KF)&&(s=new eh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=UN(e),[r,s]=BN(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,s,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new _1(a,s,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.It)return;const t=UN(e),[r,s]=BN(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,s,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class xw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pw{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Mw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Pw(yn.min(),s,new Ci(zn),Va(),dr())}}class Mw{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mw(r,t,dr(),dr(),dr())}}class gC{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class jN{constructor(e,t){this.targetId=e,this.Vt=t}}class $N{constructor(e,t,r=$s.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class zN{constructor(){this.St=0,this.Dt=GN(),this.Ct=$s.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=dr(),t=dr(),r=dr();return this.Dt.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Zt()}}),new Mw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=GN()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class QF{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Va(),this.zt=HN(),this.Wt=new Ci(zn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(ay(c))if(0===s){const h=new qt(c.path);this.Yt(r,h,Vi.newNoDocument(h,yn.min()))}else hn(1===s);else{const h=this.ie(r);if(h!==s){const g=this.re(e,h);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=y1.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,b,O){var z,ne,le,Pe,be,Et;const xt={localCacheCount:b,existenceFilterCount:O.count},wt=O.unchangedNames;return wt&&(xt.bloomFilter={applied:0===v,hashCount:null!==(z=wt?.hashCount)&&void 0!==z?z:0,bitmapLength:null!==(Pe=null===(le=null===(ne=wt?.bits)||void 0===ne?void 0:ne.bitmap)||void 0===le?void 0:le.length)&&void 0!==Pe?Pe:0,padding:null!==(Et=null===(be=wt?.bits)||void 0===be?void 0:be.padding)&&void 0!==Et?Et:0}),xt}(g,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:h=0}=r;let g,v;try{g=vl(a).toUint8Array()}catch(b){if(b instanceof Wb)return eu("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{v=new _1(g,c,h)}catch(b){return eu(b instanceof xw?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===v.It?1:s!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(a=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const h=this.se(c);if(h){if(a.current&&ay(h.target)){const g=new qt(h.target.path);null!==this.jt.get(g)||this.ae(c,g)||this.Yt(c,g,Vi.newNoDocument(g,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=dr();this.zt.forEach((a,c)=>{let h=!0;c.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const s=new Pw(e,t,this.Wt,this.jt,r);return this.jt=Va(),this.zt=HN(),this.Wt=new Ci(zn),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new zN,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ki(zn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||At("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new zN),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function HN(){return new Ci(qt.comparator)}function GN(){return new Ci(qt.comparator)}const YF={asc:"ASCENDING",desc:"DESCENDING"},XF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JF={and:"AND",or:"OR"};class ZF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function v1(n,e){return n.useProto3Json||ih(e)?e:{value:e}}function qv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eL(n,e){return qv(n,e.toTimestamp())}function oo(n){return hn(!!n),yn.fromTimestamp(function(e){const t=sd(e);return new Wi(t.seconds,t.nanos)}(n))}function I1(n,e){return(t=n,new Vr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function WN(n){const e=Vr.fromString(n);return hn(nO(e)),e}function Nw(n,e){return I1(n.databaseId,e.path)}function uh(n,e){const t=WN(e);if(t.get(1)!==n.databaseId.projectId)throw new It(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new It(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qt(QN(t))}function E1(n,e){return I1(n.databaseId,e)}function Ow(n){return new Vr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QN(n){return hn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function YN(n,e,t){return{name:Nw(n,e),fields:t.value.mapValue.fields}}function JN(n,e){return{documents:[E1(n,e.path)]}}function T1(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=E1(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E1(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(g){if(0!==g.length)return tO(si.create(g,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:ag((b=v).field),direction:sL(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=v1(n,e.limit);var h,g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function ZN(n){let e=function KN(n){const e=WN(n);return 4===e.length?Vr.emptyPath():QN(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){hn(1===r);const b=t.from[0];b.allDescendants?s=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const O=eO(b);return O instanceof si&&sy(O)?O.getFilters():[O]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new mf(Wv((O=b).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let h=null;t.limit&&(h=function(b){let O;return O="object"==typeof b?b.value:b,ih(O)?null:O}(t.limit));let g=null;var b;t.startAt&&(g=new jc((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new jc(b.values||[],!b.before)}(t.endAt)),function c1(n,e,t,r,s,a,c,h){return new sh(n,e,t,r,s,a,c,h)}(e,s,c,a,h,"F",g,v)}function eO(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Wv(e.unaryFilter.field);return Ar.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Wv(e.unaryFilter.field);return Ar.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wv(e.unaryFilter.field);return Ar.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wv(e.unaryFilter.field);return Ar.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Zt()}}(n):void 0!==n.fieldFilter?Ar.create(Wv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return si.create(e.compositeFilter.filters.map(t=>eO(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Zt()}}(e.compositeFilter.op))}(n):Zt();var e}function sL(n){return YF[n]}function oL(n){return XF[n]}function aL(n){return JF[n]}function ag(n){return{fieldPath:n.canonicalString()}}function Wv(n){return ps.fromServerFormat(n.fieldPath)}function tO(n){return n instanceof Ar?function(e){if("=="===e.op){if(Xx(e.value))return{unaryFilter:{field:ag(e.field),op:"IS_NAN"}};if(Yx(e.value))return{unaryFilter:{field:ag(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xx(e.value))return{unaryFilter:{field:ag(e.field),op:"IS_NOT_NAN"}};if(Yx(e.value))return{unaryFilter:{field:ag(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ag(e.field),op:oL(e.op),value:e.value}}}(n):n instanceof si?function(e){const t=e.getFilters().map(r=>tO(r));return 1===t.length?t[0]:{compositeFilter:{op:aL(e.op),filters:t}}}(n):Zt()}function uL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class _f{constructor(e,t,r,s,a=yn.min(),c=yn.min(),h=$s.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new _f(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rO{constructor(e){this.fe=e}}function A1(n){const e=ZN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?uy(e,e.limit,"L"):e}class py{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(gs(e.integerValue));else if("doubleValue"in e){const r=gs(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Zm(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(vl(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Jb(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Zt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),qt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}py.Ve=new py;class yL{constructor(){this.rn=new x1}addToCollectionParentIndex(e,t){return this.rn.add(t),Ge.resolve()}getCollectionParents(e,t){return Ge.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ge.resolve()}deleteFieldIndex(e,t){return Ge.resolve()}getDocumentsMatchingTarget(e,t){return Ge.resolve(null)}getIndexType(e,t){return Ge.resolve(0)}getFieldIndexes(e,t){return Ge.resolve([])}getNextCollectionGroupToUpdate(e){return Ge.resolve(null)}getMinOffset(e,t){return Ge.resolve(uc.min())}getMinOffsetFromCollectionGroup(e,t){return Ge.resolve(uc.min())}updateCollectionGroup(e,t,r){return Ge.resolve()}updateIndexEntries(e,t){return Ge.resolve()}}class x1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ki(Vr.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ki(Vr.comparator)).toArray()}}new Uint8Array(0);class ru{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ru(e,ru.DEFAULT_COLLECTION_PERCENTILE,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ru.DEFAULT_COLLECTION_PERCENTILE=10,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ru.DEFAULT=new ru(41943040,ru.DEFAULT_COLLECTION_PERCENTILE,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ru.DISABLED=new ru(-1,0,0);class my{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new my(0)}static Mn(){return new my(-1)}}class DO{constructor(){this.changes=new cd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xO{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&fe(r.mutation,s,nu.empty(),Wi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dr()){const s=ld();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let c=zv();return a.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ld();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dr()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,s){let a=Va();const c=Hv(),h=Hv();return t.forEach((g,v)=>{const b=r.get(v.key);s.has(v.key)&&(void 0===b||b.mutation instanceof Vt)?a=a.insert(v.key,v):void 0!==b?(c.set(v.key,b.mutation.getFieldMask()),fe(b.mutation,v,b.mutation.getFieldMask(),Wi.now())):c.set(v.key,nu.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,b)=>c.set(v,b)),t.forEach((v,b)=>{var O;return h.set(v,new DL(b,null!==(O=c.get(v))&&void 0!==O?O:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Hv();let s=new Ci((c,h)=>c-h),a=dr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let b=r.get(g)||nu.empty();b=h.applyToLocalView(v,b),r.set(g,b);const O=(s.get(h.batchId)||dr()).add(g);s=s.insert(h.batchId,O)})}).next(()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),v=g.key,b=g.value,O=dC();b.forEach(z=>{if(!a.has(z)){const ne=H(t.get(z),r.get(z));null!==ne&&O.set(z,ne),a=a.add(z)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,O))}return Ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qt.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Uv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Ge.resolve(ld());let h=-1,g=a;return c.next(v=>Ge.forEach(v,(b,O)=>(h<O.largestBatchId&&(h=O.largestBatchId),a.get(b)?Ge.resolve():this.remoteDocumentCache.getEntry(e,b).next(z=>{g=g.insert(b,z)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,dr())).next(b=>({batchId:h,changes:lC(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next(r=>{let s=zv();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let a=zv();return this.indexManager.getCollectionParents(e,s).next(c=>Ge.forEach(c,h=>{const g=(v=t,b=h.child(s),new sh(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((b,O)=>{a=a.insert(b,O)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(a=>{s.forEach((h,g)=>{const v=g.getKey();null===a.get(v)&&(a=a.insert(v,Vi.newInvalidDocument(v)))});let c=zv();return a.forEach((h,g)=>{const v=s.get(h);void 0!==v&&fe(v.mutation,g,nu.empty(),Wi.now()),ig(t,g)&&(c=c.insert(h,g))}),c})}}class bL{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ge.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:oo(r.createTime)}),Ge.resolve()}getNamedQuery(e,t){return Ge.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:A1(r.bundledQuery),readTime:oo(r.readTime)}),Ge.resolve();var r}}class CL{constructor(){this.overlays=new Ci(qt.comparator),this.ls=new Map}getOverlay(e,t){return Ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ld();return Ge.forEach(t,s=>this.getOverlay(e,s).next(a=>{null!==a&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.we(e,t,a)}),Ge.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),Ge.resolve()}getOverlaysForCollection(e,t,r){const s=ld(),a=t.length+1,c=new qt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&s.set(g.getKey(),g)}return Ge.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Ci((v,b)=>v-b);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=ld(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const h=ld(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,b)=>h.set(v,b)),!(h.size()>=s)););return Ge.resolve(h)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ah(t,r));let a=this.ls.get(t);void 0===a&&(a=dr(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class P1{constructor(){this.fs=new Ki(la.ds),this.ws=new Ki(la._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new la(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new la(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new qt(new Vr([])),r=new la(t,e),s=new la(t,e+1),a=[];return this.ws.forEachInRange([r,s],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qt(new Vr([])),r=new la(t,e),s=new la(t,e+1);let a=dr();return this.ws.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new la(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class la{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qt.comparator(e.key,t.key)||zn(e.As,t.As)}static _s(e,t){return zn(e.As,t.As)||qt.comparator(e.key,t.key)}}class SL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ki(la.ds)}checkEmpty(e){return Ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const a=this.vs;this.vs++;const c=new ca(a,t,r,s);this.mutationQueue.push(c);for(const h of s)this.Rs=this.Rs.add(new la(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Ge.resolve(c)}lookupMutationBatch(e,t){return Ge.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),a=s<0?0:s;return Ge.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new la(t,0),s=new la(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,s],c=>{const h=this.Ps(c.As);a.push(h)}),Ge.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ki(zn);return t.forEach(s=>{const a=new la(s,0),c=new la(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],h=>{r=r.add(h.As)})}),Ge.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;qt.isDocumentKey(a)||(a=a.child(""));const c=new la(new qt(a),0);let h=new Ki(zn);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===s&&(h=h.add(g.As)),!0)},c),Ge.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){hn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Ge.forEach(t.mutations,s=>{const a=new la(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new la(t,0),s=this.Rs.firstAfterOrEqual(r);return Ge.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return Ge.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class RL{constructor(e){this.Ds=e,this.docs=new Ci(qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ge.resolve(r?r.document.mutableCopy():Vi.newInvalidDocument(t))}getEntries(e,t){let r=Va();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Vi.newInvalidDocument(s))}),Ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Va();const c=t.path,h=new qt(c.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:v,value:{document:b}}=g.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Vb(Nx(b),r)<=0||(s.has(b.key)||ig(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return Ge.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Zt()}Cs(e,t){return Ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xL(this)}getSize(e){return Ge.resolve(this.size)}}class xL extends DO{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),Ge.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class PL{constructor(e){this.persistence=e,this.xs=new cd(t=>ud(t),Lv),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new P1,this.targetCount=0,this.Ms=my.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),Ge.resolve()}getLastRemoteSnapshotVersion(e){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ge.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Ge.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new my(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ge.resolve()}updateTargetData(e,t){return this.Fn(t),Ge.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Ge.waitFor(a).next(()=>s)}getTargetCount(e){return Ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Ge.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Ge.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),Ge.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Ge.resolve(r)}containsKey(e,t){return Ge.resolve(this.ks.containsKey(t))}}class M1{constructor(e,t){this.$s={},this.overlays={},this.Os=new zo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new PL(this),this.indexManager=new yL,this.remoteDocumentCache=new RL(r=>this.referenceDelegate.Ls(r)),this.serializer=new rO(t),this.qs=new bL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new SL(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){At("MemoryPersistence","Starting transaction:",e);const s=new ML(this.Os.next());return this.referenceDelegate.Us(),r(s).next(a=>this.referenceDelegate.Ks(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Gs(e,t){return Ge.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class ML extends gw{constructor(e){super(),this.currentSequenceNumber=e}}class AC{constructor(e){this.persistence=e,this.Qs=new P1,this.js=null}static zs(e){return new AC(e)}get Ws(){if(this.js)return this.js;throw Zt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Ge.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Ge.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ge.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.Ws,r=>{const s=qt.fromPath(r);return this.Hs(e,s).next(a=>{a||t.removeEntry(s,yn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ge.or([()=>Ge.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class F1{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=dr(),s=dr();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new F1(e,t.fromCache,r,s)}}class MO{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(a=>a||this.Gi(e,t,s,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(aC(t))return Ge.resolve(null);let r=La(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=uy(t,null,"F"),r=La(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=dr(...a);return this.Ui.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,h);return this.zi(t,v,c,g.readTime)?this.Ki(e,uy(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,s){return aC(t)||s.isEqual(yn.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,s)?this.Qi(e,t):(hw()<=Jh.$b.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cy(t)),this.Wi(e,c,t,function Mx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=yn.fromTimestamp(1e9===r?new Wi(t+1,0):new Wi(t,r));return new uc(s,qt.empty(),e)}(s,-1)))})}ji(e,t){let r=new Ki(cC(e));return t.forEach((s,a)=>{ig(e,a)&&(r=r.add(a))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Qi(e,t){return hw()<=Jh.$b.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",cy(t)),this.Ui.getDocumentsMatchingQuery(e,t,uc.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class OL{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Ci(zn),this.Yi=new cd(a=>ud(a),Lv),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function OO(n,e){return L1.apply(this,arguments)}function L1(){return L1=(0,K.A)(function*(n,e){const t=Gt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let g=dr();for(const v of s){c.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}for(const v of a){h.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:c,addedBatchIds:h}))})})}),L1.apply(this,arguments)}function kO(n){const e=Gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function LL(n,e){const t=Gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xv(n,e,t){return V1.apply(this,arguments)}function V1(){return V1=(0,K.A)(function*(n,e,t){const r=Gt(n),s=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!rh(c))throw c;At("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),V1.apply(this,arguments)}function CC(n,e,t){const r=Gt(n);let s=yn.min(),a=dr();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,g,v){const b=Gt(h),O=b.Yi.get(v);return void 0!==O?Ge.resolve(b.Ji.get(O)):b.Bs.getTargetData(g,v)}(r,c,La(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?s:yn.min(),t?a:dr())).next(h=>(function UO(n,e,t){let r=n.Xi.get(e)||yn.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}(r,function Cw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,ir:a})))}class z1{constructor(){this.activeTargetIds=function hC(){return NN}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $O{constructor(){this.Hr=new z1,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new z1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BL{Yr(e){}shutdown(){}}class zO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){At("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){At("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xC=null;function G1(){return null===xC?xC=268435456+Math.round(2147483648*Math.random()):xC++,"0x"+xC.toString(16)}const jL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $L{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const iu="WebChannelConnection";class zL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,a){const c=G1(),h=this.To(e,t);At("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const g={};return this.Eo(g,s,a),this.Ao(e,h,g,r).then(v=>(At("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw eu("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,s,a,c){return this.Io(e,t,r,s,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}To(e,t){return`${this.mo}/v1/${t}:${jL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const a=G1();return new Promise((c,h)=>{const g=new Xm;g.setWithCredentials(!0),g.listenOnce(xb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Rb.NO_ERROR:const b=g.getResponseJson();At(iu,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),c(b);break;case Rb.TIMEOUT:At(iu,`RPC '${e}' ${a} timed out`),h(new It(We.DEADLINE_EXCEEDED,"Request time out"));break;case Rb.HTTP_ERROR:const O=g.getStatus();if(At(iu,`RPC '${e}' ${a} failed with status:`,O,"response text:",g.getResponseText()),O>0){let z=g.getResponseJson();Array.isArray(z)&&(z=z[0]);const ne=z?.error;if(ne&&ne.status&&ne.message){const le=function(Pe){const be=Pe.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(be)>=0?be:We.UNKNOWN}(ne.status);h(new It(le,ne.message))}else h(new It(We.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new It(We.UNAVAILABLE,"Connection failed."));break;default:Zt()}}finally{At(iu,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(s);At(iu,`RPC '${e}' ${a} sending request:`,s),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const s=G1(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ax(),h=IN(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new EN({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=a.join("");At(iu,`Creating RPC '${e}' stream ${s}: ${b}`,g);const O=c.createWebChannel(b,g);let z=!1,ne=!1;const le=new $L({ro:be=>{ne?At(iu,`Not sending because RPC '${e}' stream ${s} is closed:`,be):(z||(At(iu,`Opening RPC '${e}' stream ${s} transport.`),O.open(),z=!0),At(iu,`RPC '${e}' stream ${s} sending:`,be),O.send(be))},oo:()=>O.close()}),Pe=(be,Et,xt)=>{be.listen(Et,wt=>{try{xt(wt)}catch(rn){setTimeout(()=>{throw rn},0)}})};return Pe(O,dw.EventType.OPEN,()=>{ne||At(iu,`RPC '${e}' stream ${s} transport opened.`)}),Pe(O,dw.EventType.CLOSE,()=>{ne||(ne=!0,At(iu,`RPC '${e}' stream ${s} transport closed`),le.wo())}),Pe(O,dw.EventType.ERROR,be=>{ne||(ne=!0,eu(iu,`RPC '${e}' stream ${s} transport errored:`,be),le.wo(new It(We.UNAVAILABLE,"The operation could not be completed")))}),Pe(O,dw.EventType.MESSAGE,be=>{var Et;if(!ne){const xt=be.data[0];hn(!!xt);const rn=xt.error||(null===(Et=xt[0])||void 0===Et?void 0:Et.error);if(rn){At(iu,`RPC '${e}' stream ${s} received error:`,rn);const On=rn.status;let on=function(oe){const me=zs[oe];if(void 0!==me)return LN(me)}(On),Ee=rn.message;void 0===on&&(on=We.INTERNAL,Ee="Unknown error status: "+On+" with message "+rn.message),ne=!0,le.wo(new It(on,Ee)),O.close()}else At(iu,`RPC '${e}' stream ${s} received:`,xt),le._o(xt)}}),Pe(h,lw.STAT_EVENT,be=>{be.stat===Dx.PROXY?At(iu,`RPC '${e}' stream ${s} detected buffering proxy`):be.stat===Dx.NOPROXY&&At(iu,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{le.fo()},0),le}}function PC(){return typeof document<"u"?document:null}function Hw(n){return new ZF(n,!0)}class q1{constructor(e,t,r=1e3,s=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&At("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class GO{constructor(e,t,r,s,a,c,h,g){this.ii=e,this.$o=r,this.Oo=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new q1(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,K.A)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,K.A)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,K.A)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(Cs(t.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===We.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new It(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,K.A)(function*(){e.state=0,e.start()}))}tu(e){return At("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(At("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HL extends GO{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function nL(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:Zt(),s=e.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(hn(void 0===v||"string"==typeof v),$s.fromBase64String(v||"")):(hn(void 0===v||v instanceof Uint8Array),$s.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const v=void 0===g.code?We.UNKNOWN:LN(g.code);return new It(v,g.message||"")}(c);t=new $N(r,s,a,h||null)}else if("documentChange"in e){const r=e.documentChange,s=uh(n,r.document.name),a=oo(r.document.updateTime),c=r.document.createTime?oo(r.document.createTime):yn.min(),h=new ua({mapValue:{fields:r.document.fields}}),g=Vi.newFoundDocument(s,a,c,h);t=new gC(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=uh(n,r.document),a=r.readTime?oo(r.readTime):yn.min(),c=Vi.newNoDocument(s,a);t=new gC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=uh(n,r.document);t=new gC([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Zt();{const r=e.filter,{count:s=0,unchangedNames:a}=r,c=new m1(s,a);t=new jN(r.targetId,c)}}var g;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return yn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?yn.min():a.readTime?oo(a.readTime):yn.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Ow(this.serializer),t.addTarget=function(s,a){let c;const h=a.target;if(c=ay(h)?{documents:JN(s,h)}:{query:T1(s,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=qN(s,a.resumeToken);const g=v1(s,a.expectedCount);null!==g&&(c.expectedCount=g)}else if(a.snapshotVersion.compareTo(yn.min())>0){c.readTime=qv(s,a.snapshotVersion.toTimestamp());const g=v1(s,a.expectedCount);null!==g&&(c.expectedCount=g)}return c}(this.serializer,e);const r=function iL(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Ow(this.serializer),t.removeTarget=e,this.Wo(t)}}class GL extends GO{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(hn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function rL(n,e){return n&&n.length>0?(hn(void 0!==e),n.map(t=>function(r,s){let a=oo(r.updateTime?r.updateTime:s);return a.isEqual(yn.min())&&(a=oo(s)),new _(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=oo(e.commitTime);return this.listener.cu(r,t)}return hn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ow(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function kw(n,e){let t;if(e instanceof yt)t={update:YN(n,e.key,e.value)};else if(e instanceof Yn)t={delete:Nw(n,e.key)};else if(e instanceof Vt)t={update:YN(n,e.key,e.data),updateMask:uL(e.fieldMask)};else{if(!(e instanceof oi))return Zt();t={verify:Nw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof ly)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof sg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof og)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof o)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw Zt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:eL(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Zt()),t;var s}(this.serializer,r))};this.Wo(t)}}class qL extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new It(We.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Io(e,t,r,s,a)).catch(s=>{throw"FirebaseError"===s.name?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new It(We.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,s)).catch(a=>{throw"FirebaseError"===a.name?(a.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new It(We.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class KL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Cs(t),this.mu=!1):At("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class QL{constructor(e,t,r,s,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,K.A)(function*(){var g;dg(c)&&(At("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,K.A)(function*(v){const b=Gt(v);b.vu.add(4),yield Jv(b),b.bu.set("Unknown"),b.vu.delete(4),yield Gw(b)}),function(v){return g.apply(this,arguments)})(c))}))}),this.bu=new KL(r,s)}}function Gw(n){return K1.apply(this,arguments)}function K1(){return K1=(0,K.A)(function*(n){if(dg(n))for(const e of n.Ru)yield e(!0)}),K1.apply(this,arguments)}function Jv(n){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,K.A)(function*(n){for(const e of n.Ru)yield e(!1)}),Q1.apply(this,arguments)}function MC(n,e){const t=Gt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),J1(t)?X1(t):eI(t).Ko()&&Y1(t,e))}function qw(n,e){const t=Gt(n),r=eI(t);t.Au.delete(e),r.Ko()&&qO(t,e),0===t.Au.size&&(r.Ko()?r.jo():dg(t)&&t.bu.set("Unknown"))}function Y1(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}eI(n).su(e)}function qO(n,e){n.Vu.qt(e),eI(n).iu(e)}function X1(n){n.Vu=new QF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),eI(n).start(),n.bu.gu()}function J1(n){return dg(n)&&!eI(n).Uo()&&n.Au.size>0}function dg(n){return 0===Gt(n).vu.size}function WO(n){n.Vu=void 0}function YL(n){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,K.A)(function*(n){n.Au.forEach((e,t)=>{Y1(n,e)})}),Z1.apply(this,arguments)}function XL(n,e){return eP.apply(this,arguments)}function eP(){return eP=(0,K.A)(function*(n,e){WO(n),J1(n)?(n.bu.Iu(e),X1(n)):n.bu.set("Unknown")}),eP.apply(this,arguments)}function JL(n,e,t){return tP.apply(this,arguments)}function tP(){return tP=(0,K.A)(function*(n,e,t){if(n.bu.set("Online"),e instanceof $N&&2===e.state&&e.cause)try{yield(r=(0,K.A)(function*(s,a){const c=a.cause;for(const h of a.targetIds)s.Au.has(h)&&(yield s.remoteSyncer.rejectListen(h,c),s.Au.delete(h),s.Vu.removeTarget(h))}),function(s,a){return r.apply(this,arguments)})(n,e)}catch(r){At("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield NC(n,r)}else if(e instanceof gC?n.Vu.Ht(e):e instanceof jN?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(yn.min()))try{const r=yield kO(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){const c=s.Vu.ce(a);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=s.Au.get(g);v&&s.Au.set(g,v.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,g)=>{const v=s.Au.get(h);if(!v)return;s.Au.set(h,v.withResumeToken($s.EMPTY_BYTE_STRING,v.snapshotVersion)),qO(s,h);const b=new _f(v.target,h,g,v.sequenceNumber);Y1(s,b)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){At("RemoteStore","Failed to raise snapshot:",r),yield NC(n,r)}var r}),tP.apply(this,arguments)}function NC(n,e,t){return nP.apply(this,arguments)}function nP(){return nP=(0,K.A)(function*(n,e,t){if(!rh(e))throw e;n.vu.add(1),yield Jv(n),n.bu.set("Offline"),t||(t=()=>kO(n.localStore)),n.asyncQueue.enqueueRetryable((0,K.A)(function*(){At("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Gw(n)}))}),nP.apply(this,arguments)}function KO(n,e){return e().catch(t=>NC(n,t,e))}function Zv(n){return rP.apply(this,arguments)}function rP(){return rP=(0,K.A)(function*(n){const e=Gt(n),t=hg(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;ZL(e);)try{const s=yield LL(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,eV(e,s)}catch(s){yield NC(e,s)}QO(e)&&YO(e)}),rP.apply(this,arguments)}function ZL(n){return dg(n)&&n.Eu.length<10}function eV(n,e){n.Eu.push(e);const t=hg(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function QO(n){return dg(n)&&!hg(n).Uo()&&n.Eu.length>0}function YO(n){hg(n).start()}function tV(n){return iP.apply(this,arguments)}function iP(){return iP=(0,K.A)(function*(n){hg(n).hu()}),iP.apply(this,arguments)}function nV(n){return sP.apply(this,arguments)}function sP(){return sP=(0,K.A)(function*(n){const e=hg(n);for(const t of n.Eu)e.uu(t.mutations)}),sP.apply(this,arguments)}function rV(n,e,t){return oP.apply(this,arguments)}function oP(){return oP=(0,K.A)(function*(n,e,t){const r=n.Eu.shift(),s=$c.from(r,e,t);yield KO(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Zv(n)}),oP.apply(this,arguments)}function iV(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,K.A)(function*(n,e){var t;e&&hg(n).ou&&(yield(t=(0,K.A)(function*(r,s){if(function FN(n){switch(n){default:return Zt();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}(a=s.code)&&a!==We.ABORTED){const c=r.Eu.shift();hg(r).Qo(),yield KO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield Zv(r)}var a}),function(r,s){return t.apply(this,arguments)})(n,e)),QO(n)&&YO(n)}),aP.apply(this,arguments)}function XO(n,e){return uP.apply(this,arguments)}function uP(){return uP=(0,K.A)(function*(n,e){const t=Gt(n);t.asyncQueue.verifyOperationInProgress(),At("RemoteStore","RemoteStore received new credentials");const r=dg(t);t.vu.add(3),yield Jv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Gw(t)}),uP.apply(this,arguments)}function lP(){return lP=(0,K.A)(function*(n,e){const t=Gt(n);e?(t.vu.delete(2),yield Gw(t)):e||(t.vu.add(2),yield Jv(t),t.bu.set("Unknown"))}),lP.apply(this,arguments)}function eI(n){return n.Su||(n.Su=function(e,t,r){const s=Gt(e);return s.fu(),new HL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:YL.bind(null,n),ao:XL.bind(null,n),nu:JL.bind(null,n)}),n.Ru.push(function(){var e=(0,K.A)(function*(t){t?(n.Su.Qo(),J1(n)?X1(n):n.bu.set("Unknown")):(yield n.Su.stop(),WO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function hg(n){return n.Du||(n.Du=function(e,t,r){const s=Gt(e);return s.fu(),new GL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:tV.bind(null,n),ao:iV.bind(null,n),au:nV.bind(null,n),cu:rV.bind(null,n)}),n.Ru.push(function(){var e=(0,K.A)(function*(t){t?(n.Du.Qo(),yield Zv(n)):(yield n.Du.stop(),n.Eu.length>0&&(At("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class dP{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,h=new dP(e,t,c,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new It(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tI(n,e){if(Cs("AsyncQueue",`${e}: ${n}`),rh(n))return new It(We.UNAVAILABLE,`${e}: ${n}`);throw n}class nI{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qt.comparator(t.key,r.key):(t,r)=>qt.comparator(t.key,r.key),this.keyedMap=zv(),this.sortedSet=new Ci(this.comparator)}static emptySet(e){return new nI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nI)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new nI;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JO{constructor(){this.Cu=new Ci(qt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Zt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class rI{constructor(e,t,r,s,a,c,h,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new rI(e,t,nI.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class sV{constructor(){this.Nu=void 0,this.listeners=[]}}class oV{constructor(){this.queries=new cd(e=>uC(e),jv),this.onlineState="Unknown",this.ku=new Set}}function fP(){return fP=(0,K.A)(function*(n,e){const t=Gt(n),r=e.query;let s=!1,a=t.queries.get(r);if(a||(s=!0,a=new sV),s)try{a.Nu=yield t.onListen(r)}catch(c){const h=tI(c,`Initialization of query '${cy(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&mP(t)}),fP.apply(this,arguments)}function gP(){return gP=(0,K.A)(function*(n,e){const t=Gt(n),r=e.query;let s=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),s=0===a.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),gP.apply(this,arguments)}function aV(n,e){const t=Gt(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const h of c.listeners)h.$u(s)&&(r=!0);c.Nu=s}}r&&mP(t)}function uV(n,e,t){const r=Gt(n),s=r.queries.get(e);if(s)for(const a of s.listeners)a.onError(t);r.queries.delete(e)}function mP(n){n.ku.forEach(e=>{e.next()})}class yP{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new rI(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=rI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class tk{constructor(e){this.key=e}}class nk{constructor(e){this.key=e}}class rk{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=dr(),this.mutatedKeys=dr(),this.tc=cC(e),this.ec=new nI(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new JO,s=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const g="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,v="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((b,O)=>{const z=s.get(b),ne=ig(this.query,O)?O:null,le=!!z&&this.mutatedKeys.has(z.key),Pe=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let be=!1;z&&ne?z.data.isEqual(ne.data)?le!==Pe&&(r.track({type:3,doc:ne}),be=!0):this.rc(z,ne)||(r.track({type:2,doc:ne}),be=!0,(g&&this.tc(ne,g)>0||v&&this.tc(ne,v)<0)&&(h=!0)):!z&&ne?(r.track({type:0,doc:ne}),be=!0):z&&!ne&&(r.track({type:1,doc:z}),be=!0,(g||v)&&(h=!0)),be&&(ne?(c=c.add(ne),a=Pe?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:c,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,b)=>function(O,z){const ne=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zt()}};return ne(O)-ne(z)}(v.type,b.type)||this.tc(v.doc,b.doc)),this.oc(r);const c=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,g=h!==this.Xu;return this.Xu=h,0!==a.length||g?{snapshot:new rI(this.query,e.ec,s,a,e.mutatedKeys,0===h,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new JO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=dr(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new nk(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new tk(r))}),t}hc(e){this.Yu=e.ir,this.Zu=dr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return rI.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class dV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hV{constructor(e){this.key=e,this.fc=!1}}class fV{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new cd(h=>uC(h),jv),this._c=new Map,this.mc=new Set,this.gc=new Ci(qt.comparator),this.yc=new Map,this.Ic=new P1,this.Tc={},this.Ec=new Map,this.Ac=my.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function pV(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,K.A)(function*(n,e){const t=function jP(n){const e=Gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ik.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yV.bind(null,e),e.dc.nu=aV.bind(null,e.eventManager),e.dc.Pc=uV.bind(null,e.eventManager),e}(n);let r,s;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),s=a.view.lc();else{const c=yield function Yv(n,e){const t=Gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(a=>a?(s=a,Ge.resolve(s)):t.Bs.allocateTargetId(r).next(c=>(s=new _f(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,La(e)),h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield function vP(n,e,t,r,s){return IP.apply(this,arguments)}(t,e,r,"current"===h,c.resumeToken),t.isPrimaryClient&&MC(t.remoteStore,c)}return s}),_P.apply(this,arguments)}function IP(){return IP=(0,K.A)(function*(n,e,t,r,s){n.Rc=(O,z,ne)=>{return(le=(0,K.A)(function*(Pe,be,Et,xt){let wt=be.view.sc(Et);wt.zi&&(wt=yield CC(Pe.localStore,be.query,!1).then(({documents:on})=>be.view.sc(on,wt)));const rn=xt&&xt.targetChanges.get(be.targetId),On=be.view.applyChanges(wt,Pe.isPrimaryClient,rn);return xP(Pe,be.targetId,On.cc),On.snapshot}),function(Pe,be,Et,xt){return le.apply(this,arguments)})(n,O,z,ne);var le};const a=yield CC(n.localStore,e,!0),c=new rk(e,a.ir),h=c.sc(a.documents),g=Mw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),v=c.applyChanges(h,n.isPrimaryClient,g);xP(n,t,v.cc);const b=new dV(e,t,c);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),IP.apply(this,arguments)}function gV(n,e){return EP.apply(this,arguments)}function EP(){return EP=(0,K.A)(function*(n,e){const t=Gt(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(a=>!jv(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qw(t.remoteStore,r.targetId),iI(t,r.targetId)}).catch(yl))):(iI(t,r.targetId),yield Xv(t.localStore,r.targetId,!0))}),EP.apply(this,arguments)}function wP(){return wP=(0,K.A)(function*(n,e,t){const r=function $P(n){const e=Gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_V.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vV.bind(null,e),e}(n);try{const s=yield function(a,c){const h=Gt(a),g=Wi.now(),v=c.reduce((z,ne)=>z.add(ne.key),dr());let b,O;return h.persistence.runTransaction("Locally write mutations","readwrite",z=>{let ne=Va(),le=dr();return h.Zi.getEntries(z,v).next(Pe=>{ne=Pe,ne.forEach((be,Et)=>{Et.isValidDocument()||(le=le.add(be))})}).next(()=>h.localDocuments.getOverlayedDocuments(z,ne)).next(Pe=>{b=Pe;const be=[];for(const Et of c){const xt=Ae(Et,b.get(Et.key).overlayedDocument);null!=xt&&be.push(new Vt(Et.key,xt,t1(xt.value.mapValue),E.exists(!0)))}return h.mutationQueue.addMutationBatch(z,g,be,c)}).next(Pe=>{O=Pe;const be=Pe.applyToLocalDocumentSet(b,le);return h.documentOverlayCache.saveOverlays(z,Pe.batchId,be)})}).then(()=>({batchId:O.batchId,changes:lC(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,h){let g=a.Tc[a.currentUser.toKey()];g||(g=new Ci(zn)),g=g.insert(c,h),a.Tc[a.currentUser.toKey()]=g}(r,s.batchId,t),yield vf(r,s.changes),yield Zv(r.remoteStore)}catch(s){const a=tI(s,"Failed to persist write");t.reject(a)}}),wP.apply(this,arguments)}function ik(n,e){return TP.apply(this,arguments)}function TP(){return TP=(0,K.A)(function*(n,e){const t=Gt(n);try{const r=yield function FL(n,e){const t=Gt(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const h=[];e.targetChanges.forEach((b,O)=>{const z=s.get(O);if(!z)return;h.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,O).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,O)));let ne=z.withSequenceNumber(a.currentSequenceNumber);var le,Pe,be;null!==e.targetMismatches.get(O)?ne=ne.withResumeToken($s.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):b.resumeToken.approximateByteSize()>0&&(ne=ne.withResumeToken(b.resumeToken,r)),s=s.insert(O,ne),Pe=ne,be=b,(0===(le=z).resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=3e8||be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,ne))});let g=Va(),v=dr();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(function FO(n,e,t){let r=dr(),s=dr();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Va();return t.forEach((h,g)=>{const v=a.get(h);g.isFoundDocument()!==v.isFoundDocument()&&(s=s.add(h)),g.isNoDocument()&&g.version.isEqual(yn.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):At("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",g.version)}),{nr:c,sr:s}})}(a,c,e.documentUpdates).next(b=>{g=b.nr,v=b.sr})),!r.isEqual(yn.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(O=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return Ge.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ji=s,a))}(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.yc.get(a);c&&(hn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.fc=!0:s.modifiedDocuments.size>0?hn(c.fc):s.removedDocuments.size>0&&(hn(c.fc),c.fc=!1))}),yield vf(t,r,e)}catch(r){yield yl(r)}}),TP.apply(this,arguments)}function sk(n,e,t){const r=Gt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((a,c)=>{const h=c.view.Mu(e);h.snapshot&&s.push(h.snapshot)}),function(a,c){const h=Gt(a);h.onlineState=c;let g=!1;h.queries.forEach((v,b)=>{for(const O of b.listeners)O.Mu(c)&&(g=!0)}),g&&mP(h)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yV(n,e,t){return AP.apply(this,arguments)}function AP(){return AP=(0,K.A)(function*(n,e,t){const r=Gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),a=s&&s.key;if(a){let c=new Ci(qt.comparator);c=c.insert(a,Vi.newNoDocument(a,yn.min()));const h=dr().add(a),g=new Pw(yn.min(),new Map,new Ci(zn),c,h);yield ik(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),PP(r)}else yield Xv(r.localStore,e,!1).then(()=>iI(r,e,t)).catch(yl)}),AP.apply(this,arguments)}function _V(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,K.A)(function*(n,e){const t=Gt(n),r=e.batch.batchId;try{const s=yield function kL(n,e){const t=Gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,v){const b=g.batch,O=b.keys();let z=Ge.resolve();return O.forEach(ne=>{z=z.next(()=>v.getEntry(h,ne)).next(le=>{const Pe=g.docVersions.get(ne);hn(null!==Pe),le.version.compareTo(Pe)<0&&(b.applyToRemoteDocument(le,g),le.isValidDocument()&&(le.setReadTime(g.commitVersion),v.addEntry(le)))})}),z.next(()=>c.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=dr();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(h=h.add(c.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);RP(t,r,null),SP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vf(t,s)}catch(s){yield yl(s)}}),DP.apply(this,arguments)}function vV(n,e,t){return bP.apply(this,arguments)}function bP(){return bP=(0,K.A)(function*(n,e,t){const r=Gt(n);try{const s=yield function(a,c){const h=Gt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.mutationQueue.lookupMutationBatch(g,c).next(b=>(hn(null!==b),v=b.keys(),h.mutationQueue.removeMutationBatch(g,b))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,v,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>h.localDocuments.getDocuments(g,v))})}(r.localStore,e);RP(r,e,t),SP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vf(r,s)}catch(s){yield yl(s)}}),bP.apply(this,arguments)}function SP(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function RP(n,e,t){const r=Gt(n);let s=r.Tc[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function iI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||ok(n,r)})}function ok(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(qw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),PP(n))}function xP(n,e,t){for(const r of t)r instanceof tk?(n.Ic.addReference(r.key,e),EV(n,r)):r instanceof nk?(At("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||ok(n,r.key)):Zt()}function EV(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(At("SyncEngine","New document in limbo: "+t),n.mc.add(r),PP(n))}function PP(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new qt(Vr.fromString(e)),r=n.Ac.next();n.yc.set(r,new hV(t)),n.gc=n.gc.insert(t,r),MC(n.remoteStore,new _f(La(rg(t.path)),r,"TargetPurposeLimboResolution",zo.ct))}}function vf(n,e,t){return MP.apply(this,arguments)}function MP(){return MP=(0,K.A)(function*(n,e,t){const r=Gt(n),s=[],a=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,g)=>{c.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){s.push(v);const b=F1.Li(g.targetId,v);a.push(b)}}))}),yield Promise.all(c),r.dc.nu(s),yield(h=(0,K.A)(function*(g,v){const b=Gt(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Ge.forEach(v,z=>Ge.forEach(z.Fi,ne=>b.persistence.referenceDelegate.addReference(O,z.targetId,ne)).next(()=>Ge.forEach(z.Bi,ne=>b.persistence.referenceDelegate.removeReference(O,z.targetId,ne)))))}catch(O){if(!rh(O))throw O;At("LocalStore","Failed to update sequence numbers: "+O)}for(const O of v){const z=O.targetId;if(!O.fromCache){const ne=b.Ji.get(z),Pe=ne.withLastLimboFreeSnapshotVersion(ne.snapshotVersion);b.Ji=b.Ji.insert(z,Pe)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,a))}),MP.apply(this,arguments)}function wV(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,K.A)(function*(n,e){const t=Gt(n);if(!t.currentUser.isEqual(e)){At("SyncEngine","User change. New user:",e.toKey());const r=yield OO(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(c=>{c.forEach(h=>{h.reject(new It(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vf(t,r.er)}var s}),NP.apply(this,arguments)}function TV(n,e){const t=Gt(n),r=t.yc.get(e);if(r&&r.fc)return dr().add(r.key);{let s=dr();const a=t._c.get(e);if(!a)return s;for(const c of a){const h=t.wc.get(c);s=s.unionWith(h.view.nc)}return s}}class sI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,K.A)(function*(){t.serializer=Hw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function NO(n,e,t,r){return new OL(n,e,t,r)}(this.persistence,new MO,e.initialUser,this.serializer)}createPersistence(e){return new M1(AC.zs,this.serializer)}createSharedClientState(e){return new $O}terminate(){var e=this;return(0,K.A)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oI{initialize(e,t){var r=this;return(0,K.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>sk(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=wV.bind(null,r.syncEngine),yield function cP(n,e){return lP.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new oV}createDatastore(e){const t=Hw(e.databaseInfo.databaseId),r=new zL(e.databaseInfo);return new qL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,a=h=>sk(this.syncEngine,h,0),c=zO.D()?new zO:new BL,new QL(t,r,s,a,c);var t,r,s,a,c}createSyncEngine(e,t){return function(r,s,a,c,h,g,v){const b=new fV(r,s,a,c,h,g);return v&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,K.A)(function*(t){const r=Gt(t);At("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Jv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class OC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class FV{constructor(e,t,r,s){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=so.UNAUTHENTICATED,this.clientId=fw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,K.A)(function*(h){At("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(At("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,K.A)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new It(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,K.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=tI(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function kC(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,K.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),At("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,K.A)(function*(a){r.isEqual(a)||(yield OO(e.localStore,a),r=a)});return function(a){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),HP.apply(this,arguments)}function GP(n,e){return qP.apply(this,arguments)}function qP(){return qP=(0,K.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function WP(n){return KP.apply(this,arguments)}(n);At("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>XO(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>XO(e.remoteStore,a)),n._onlineComponents=e}),qP.apply(this,arguments)}function KP(){return KP=(0,K.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){At("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function dk(n){return"FirebaseError"===n.name?n.code===We.FAILED_PRECONDITION||n.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;eu("Error using user provided cache. Falling back to memory cache: "+t),yield kC(n,new sI)}}else At("FirestoreClient","Using default OfflineComponentProvider"),yield kC(n,new sI);return n._offlineComponents}),KP.apply(this,arguments)}function FC(n){return QP.apply(this,arguments)}function QP(){return QP=(0,K.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(At("FirestoreClient","Using user provided OnlineComponentProvider"),yield GP(n,n._uninitializedComponentsProvider._online)):(At("FirestoreClient","Using default OnlineComponentProvider"),yield GP(n,new oI))),n._onlineComponents}),QP.apply(this,arguments)}function XP(){return XP=(0,K.A)(function*(n){const e=yield FC(n),t=e.eventManager;return t.onListen=pV.bind(null,e.syncEngine),t.onUnlisten=gV.bind(null,e.syncEngine),t}),XP.apply(this,arguments)}function mk(n,e,t={}){const r=new js;return n.asyncQueue.enqueueAndForget((0,K.A)(function*(){return function(s,a,c,h,g){const v=new OC({next:O=>{a.enqueueAndForget(()=>function pP(n,e){return gP.apply(this,arguments)}(s,b)),O.fromCache&&"server"===h.source?g.reject(new It(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(O)},error:O=>g.reject(O)}),b=new yP(c,v,{includeMetadataChanges:!0,Ku:!0});return function hP(n,e){return fP.apply(this,arguments)}(s,b)}(yield function aI(n){return XP.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function yk(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const _k=new Map;function JP(n,e,t){if(!t)throw new It(We.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vk(n){if(!qt.isDocumentKey(n))throw new It(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ik(n){if(qt.isDocumentKey(n))throw new It(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Zt()}function qr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new It(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=VC(n);throw new It(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class wk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new It(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new It(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function GV(n,e,t,r){if(!0===e&&!0===r)throw new It(We.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yk(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new It(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new It(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new It(We.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ww{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new It(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new It(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new TN;switch(t.type){case"firstParty":return new Rx(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new It(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_k.get(e);t&&(At("ComponentProvider","Removing Datastore"),_k.delete(e),t.terminate())}(this),Promise.resolve()}}class ao{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ch(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ao(this.firestore,e,this._key)}}class Ua{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class ch extends Ua{constructor(e,t,r){super(e,t,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ao(this.firestore,null,new qt(e))}withConverter(e){return new ch(this.firestore,e,this._path)}}function WV(n,e,...t){if(n=(0,Bs.Ku)(n),JP("collection","path",e),n instanceof Ww){const r=Vr.fromString(e,...t);return Ik(r),new ch(n,null,r)}{if(!(n instanceof ao||n instanceof ch))throw new It(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vr.fromString(e,...t));return Ik(r),new ch(n.firestore,null,r)}}function Tk(n,e,...t){if(n=(0,Bs.Ku)(n),1===arguments.length&&(e=fw.A()),JP("doc","path",e),n instanceof Ww){const r=Vr.fromString(e,...t);return vk(r),new ao(n,null,new qt(r))}{if(!(n instanceof ao||n instanceof ch))throw new It(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vr.fromString(e,...t));return vk(r),new ao(n.firestore,n instanceof ch?n.converter:null,new qt(r))}}class KV{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new q1(this,"async_queue_retry"),this.Xc=()=>{const t=PC();t&&At("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=PC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=PC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new js;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,K.A)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!rh(t))throw t;At("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Cs("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=dP.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(s),s}Zc(){this.Wc&&Zt()}verifyOperationInProgress(){}sa(){var e=this;return(0,K.A)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class rs extends Ww{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new KV,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Dk(this),this._firestoreClient.terminate()}}function YV(n,e){const t="object"==typeof n?n:(0,Dp.Sx)(),r="string"==typeof n?n:e||"(default)",s=(0,Dp.j6)(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=(0,Bs.yU)("firestore");a&&function qV(n,e,t,r={}){var s;const a=(n=qr(n,Ww))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=so.MOCK_USER;else{h=(0,Bs.Fy)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new It(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new so(v)}n._authCredentials=new Cx(new bv(h,g))}}(s,...a)}return s}function So(n){return n._firestoreClient||Dk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Dk(n){var e,t,r;const s=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Kb(n._databaseId,h,n._persistenceKey,(v=s).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,yk(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new FV(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}class _y{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _y($s.fromBase64String(e))}catch(t){throw new It(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _y($s.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vy{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new It(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uI{constructor(e){this._methodName=e}}class eM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new It(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new It(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zn(this._lat,e._lat)||zn(this._long,e._long)}}const JV=/^__.*__$/;class ZV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vt(e,this.data,this.fieldMask,t,this.fieldTransforms):new yt(e,this.data,t,this.fieldTransforms)}}class Sk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zt()}}class UC{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new UC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return $C(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Rk(this.ca)&&JV.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class e2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hw(e)}ya(e,t,r,s=!1){return new UC({ca:e,methodName:t,ga:r,path:ps.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iy(n){const e=n._freezeSettings(),t=Hw(n._databaseId);return new e2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BC(n,e,t,r,s,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,s);iM("Data must be an object, but it was:",c,r);const h=Mk(r,c);let g,v;if(a.merge)g=new nu(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const O of a.mergeFields){const z=Yw(e,O,t);if(!c.contains(z))throw new It(We.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);Ok(b,z)||b.push(z)}g=new nu(b),v=c.fieldTransforms.filter(O=>g.covers(O.field))}else g=null,v=c.fieldTransforms;return new ZV(new ua(h),g,v)}class Qw extends uI{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qw}}function Ey(n,e){if(Nk(n=(0,Bs.Ku)(n)))return iM("Unsupported field value:",e,n),Mk(n,e);if(n instanceof uI)return function(t,r){if(!Rk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let a=0;for(const c of t){let h=Ey(c,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Bs.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return p1(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Wi.fromDate(t);return{timestampValue:qv(r.serializer,s)}}if(t instanceof Wi){const s=new Wi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qv(r.serializer,s)}}if(t instanceof eM)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _y)return{bytesValue:qN(r.serializer,t._byteString)};if(t instanceof ao){const s=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(s))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:I1(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${VC(t)}`)}(n,e)}function Mk(n,e){const t={};return Iw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(n,(r,s)=>{const a=Ey(s,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Nk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wi||n instanceof eM||n instanceof _y||n instanceof ao||n instanceof uI)}function iM(n,e,t){if(!Nk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=VC(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Yw(n,e,t){if((e=(0,Bs.Ku)(e))instanceof vy)return e._internalPath;if("string"==typeof e)return jC(n,e);throw $C("Field path arguments must be of type string or ",n,!1,void 0,t)}const i2=new RegExp("[~\\*/\\[\\]]");function jC(n,e,t){if(e.search(i2)>=0)throw $C(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vy(...e.split("."))._internalPath}catch{throw $C(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $C(n,e,t,r,s){const a=r&&!r.isEmpty(),c=void 0!==s;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${s}`),g+=")"),new It(We.INVALID_ARGUMENT,h+n+g)}function Ok(n,e){return n.some(t=>t.isEqual(e))}class Xw{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ao(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new s2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class s2 extends Xw{data(){return super.data()}}function zC(n,e){return"string"==typeof e?jC(n,e):e instanceof vy?e._internalPath:e._delegate._internalPath}class sM{}class Jw extends sM{}function o2(n,e,...t){let r=[];e instanceof sM&&r.push(e),r=r.concat(t),function(s){const a=s.filter(h=>h instanceof cI).length,c=s.filter(h=>h instanceof Zw).length;if(a>1||a>0&&c>0)throw new It(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Zw extends Jw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Zw(e,t,r)}_apply(e){const t=this._parse(e);return Uk(e._query,t),new Ua(e.firestore,e.converter,Bv(e._query,t))}_parse(e){const t=Iy(e.firestore);return function(s,a,c,h,g,v,b){let O;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new It(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Vk(b,v);const z=[];for(const ne of b)z.push(Lk(h,s,ne));O={arrayValue:{values:z}}}else O=Lk(h,s,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Vk(b,v),O=function Pk(n,e,t,r=!1){return Ey(t,n.ya(r?4:3,e))}(c,"where",b,"in"===v||"not-in"===v);return Ar.create(g,v,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function a2(n,e,t){const r=e,s=zC("where",n);return Zw._create(s,r,t)}class cI extends sM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let a=r;const c=s.getFlattenedFilters();for(const h of c)Uk(a,h),a=Bv(a,h)}(e._query,t),new Ua(e.firestore,e.converter,Bv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Lk(n,e,t){if("string"==typeof(t=(0,Bs.Ku)(t))){if(""===t)throw new It(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uv(e)&&-1!==t.indexOf("/"))throw new It(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Vr.fromString(t));if(!qt.isDocumentKey(r))throw new It(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gf(n,new qt(r))}if(t instanceof ao)return gf(n,t._key);throw new It(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VC(t)}.`)}function Vk(n,e){if(!Array.isArray(n)||0===n.length)throw new It(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Uk(n,e){if(e.isInequality()){const r=Vv(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new It(We.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const a=bw(n);null!==a&&function Bk(n,e,t){if(!t.isEqual(e))throw new It(We.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}(0,s,a)}const t=function(r,s){for(const a of r)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new It(We.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $k{convertValue(e,t="none"){switch(Pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fa(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new eM(gs(e.latitude),gs(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jp(e));default:return null}}convertTimestamp(e){const t=sd(e);return new Wi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Vr.fromString(e);hn(nO(r));const s=new pf(r.get(1),r.get(3)),a=new qt(r.popFirst(5));return s.isEqual(t)||Cs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class wy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lI extends Xw{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new KC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class KC extends lI{data(e={}){return super.data(e)}}class dI{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new wy(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new KC(this._firestore,this._userDataWriter,r.key,r,new wy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new It(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new KC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new wy(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const h=new KC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new wy(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==c.type&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:l2(c.type),doc:h,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function l2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zt()}}class fg extends $k{constructor(e){super(),this.firestore=e}convertBytes(e){return new _y(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ao(this.firestore,null,t)}}function d2(n){n=qr(n,Ua);const e=qr(n.firestore,rs),t=So(e),r=new fg(e);return function kk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new It(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),mk(t,n._query).then(s=>new dI(e,r,n,s))}function h2(n,e,t,...r){n=qr(n,ao);const s=qr(n.firestore,rs),a=Iy(s);let c;return c="string"==typeof(e=(0,Bs.Ku)(e))||e instanceof vy?function rM(n,e,t,r,s,a){const c=n.ya(1,e,t),h=[Yw(e,r,t)],g=[s];if(a.length%2!=0)throw new It(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<a.length;z+=2)h.push(Yw(e,a[z])),g.push(a[z+1]);const v=[],b=ua.empty();for(let z=h.length-1;z>=0;--z)if(!Ok(v,h[z])){const ne=h[z];let le=g[z];le=(0,Bs.Ku)(le);const Pe=c.da(ne);if(le instanceof Qw)v.push(ne);else{const be=Ey(le,Pe);null!=be&&(v.push(ne),b.set(ne,be))}}const O=new nu(v);return new Sk(b,O,c.fieldTransforms)}(a,"updateDoc",n._key,e,t,r):function nM(n,e,t,r){const s=n.ya(1,e,t);iM("Data must be an object, but it was:",s,r);const a=[],c=ua.empty();Fa(r,(g,v)=>{const b=jC(e,g,t);v=(0,Bs.Ku)(v);const O=s.da(b);if(v instanceof Qw)a.push(b);else{const z=Ey(v,O);null!=z&&(a.push(b),c.set(b,z))}});const h=new nu(a);return new Sk(c,h,s.fieldTransforms)}(a,"updateDoc",n._key,e),eT(s,[c.toMutation(n._key,E.exists(!0))])}function f2(n){return eT(qr(n.firestore,rs),[new Yn(n._key,E.none())])}function p2(n,e){const t=qr(n.firestore,rs),r=Tk(n),s=function WC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return eT(t,[BC(Iy(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,E.exists(!1))]).then(()=>r)}function eT(n,e){return function(t,r){const s=new js;return t.asyncQueue.enqueueAndForget((0,K.A)(function*(){return function mV(n,e,t){return wP.apply(this,arguments)}(yield function YP(n){return FC(n).then(e=>e.syncEngine)}(t),r,s)})),s.promise}(So(n),e)}!function(n,e=!0){qp=Dp.MF,(0,Dp.om)(new qR.uA("firestore",(t,{instanceIdentifier:r,options:s})=>{const a=t.getProvider("app").getImmediate(),c=new rs(new AN(t.getProvider("auth-internal")),new Ob(t.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new It(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pf(h.options.projectId,g)}(a,r),a);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),(0,Dp.KO)(Pb,"3.13.0",n),(0,Dp.KO)(Pb,"3.13.0","esm2017")}();class QC{constructor(e){return e}}const Hk="firestore",uM=new he.nKC("angularfire2.firestore-instances");function S2(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new QC(r)}}const R2={provide:class b2{constructor(){return(0,N.CA)(Hk)}},deps:[[new he.Xx1,uM]]},x2={provide:QC,useFactory:function C2(n,e){const t=(0,N.lR)(Hk,n,e);return t&&new QC(t)},deps:[[new he.Xx1,uM],Me.XU]};let P2=(()=>{class n{constructor(){(0,Te.KO)("angularfire",N.xv.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=he.$C({type:n}),n.\u0275inj=he.G2t({providers:[x2,R2]}),n})();function M2(n,...e){return{ngModule:P2,providers:[{provide:uM,useFactory:S2(n),multi:!0,deps:[he.SKi,he.zZn,N.u0,Me.gL,[new he.Xx1,Ie.DF],[new he.Xx1,re.kR],...e]}]}}const N2=(0,N.S3)(HR,!0),O2=(0,N.S3)(p2,!0),k2=(0,N.S3)(WV,!0),F2=(0,N.S3)(f2,!0),L2=(0,N.S3)(Tk,!0),V2=(0,N.S3)(d2,!0),U2=(0,N.S3)(YV,!0),B2=(0,N.S3)(o2,!0),j2=(0,N.S3)(h2,!0),$2=(0,N.S3)(a2,!0)},9126:(ln,it,Z)=>{Z.d(it,{xv:()=>Yu,u0:()=>Ju,CA:()=>Au,lR:()=>xa,S3:()=>Pc});var N=Z(6276),he=Z(7037),Ie=Z(467),Me=Z(1631),Te=Z(1401),re=Z(8779),K=Z(5398);const mt=(A,P)=>P.some(V=>A instanceof V);let Ze,ue;const tt=new WeakMap,st=new WeakMap,Mt=new WeakMap,Tn=new WeakMap,fn=new WeakMap;let pn={get(A,P,V){if(A instanceof IDBTransaction){if("done"===P)return st.get(A);if("objectStoreNames"===P)return A.objectStoreNames||Mt.get(A);if("store"===P)return V.objectStoreNames[1]?void 0:V.objectStore(V.objectStoreNames[0])}return Xe(A[P])},set:(A,P,V)=>(A[P]=V,!0),has:(A,P)=>A instanceof IDBTransaction&&("done"===P||"store"===P)||P in A};function ht(A){return"function"==typeof A?function vt(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...P){return A.apply(kt(this),P),Xe(tt.get(this))}:function(...P){return Xe(A.apply(kt(this),P))}:function(P,...V){const ee=A.call(kt(this),P,...V);return Mt.set(ee,P.sort?P.sort():[P]),Xe(ee)}}(A):(A instanceof IDBTransaction&&function Hn(A){if(st.has(A))return;const P=new Promise((V,ee)=>{const de=()=>{A.removeEventListener("complete",_e),A.removeEventListener("error",Ke),A.removeEventListener("abort",Ke)},_e=()=>{V(),de()},Ke=()=>{ee(A.error||new DOMException("AbortError","AbortError")),de()};A.addEventListener("complete",_e),A.addEventListener("error",Ke),A.addEventListener("abort",Ke)});st.set(A,P)}(A),mt(A,function ce(){return Ze||(Ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,pn):A)}function Xe(A){if(A instanceof IDBRequest)return function Dt(A){const P=new Promise((V,ee)=>{const de=()=>{A.removeEventListener("success",_e),A.removeEventListener("error",Ke)},_e=()=>{V(Xe(A.result)),de()},Ke=()=>{ee(A.error),de()};A.addEventListener("success",_e),A.addEventListener("error",Ke)});return P.then(V=>{V instanceof IDBCursor&&tt.set(V,A)}).catch(()=>{}),fn.set(P,A),P}(A);if(Tn.has(A))return Tn.get(A);const P=ht(A);return P!==A&&(Tn.set(A,P),fn.set(P,A)),P}const kt=A=>fn.get(A),jt=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],Xn=new Map;function ze(A,P){if(!(A instanceof IDBDatabase)||P in A||"string"!=typeof P)return;if(Xn.get(P))return Xn.get(P);const V=P.replace(/FromIndex$/,""),ee=P!==V,de=ot.includes(V);if(!(V in(ee?IDBIndex:IDBObjectStore).prototype)||!de&&!jt.includes(V))return;const _e=function(){var Ke=(0,Ie.A)(function*(_t,...Pt){const en=this.transaction(_t,de?"readwrite":"readonly");let xn=en.store;return ee&&(xn=xn.index(Pt.shift())),(yield Promise.all([xn[V](...Pt),de&&en.done]))[0]});return function(Pt){return Ke.apply(this,arguments)}}();return Xn.set(P,_e),_e}!function bt(A){pn=A(pn)}(A=>({...A,get:(P,V,ee)=>ze(P,V)||A.get(P,V,ee),has:(P,V)=>!!ze(P,V)||A.has(P,V)}));const Ut="@firebase/installations",hr="0.6.4",an=1e4,Cr=`w:${hr}`,wr="FIS_v2",Dr="https://firebaseinstallations.googleapis.com/v1",xe=36e5,pt=new Te.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(A){return A instanceof Te.g&&A.code.includes("request-failed")}function Nt({projectId:A}){return`${Dr}/projects/${A}/installations`}function $t(A){return{token:A.token,requestStatus:2,expiresIn:$r(A.expiresIn),creationTime:Date.now()}}function Bn(A,P){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,Ie.A)(function*(A,P){const ee=(yield P.json()).error;return pt.create("request-failed",{requestName:A,serverCode:ee.code,serverMessage:ee.message,serverStatus:ee.status})})).apply(this,arguments)}function sr({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function fr(A){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Ie.A)(function*(A){const P=yield A();return P.status>=500&&P.status<600?A():P})).apply(this,arguments)}function $r(A){return Number(A.replace("s","000"))}function Cn(){return(Cn=(0,Ie.A)(function*({appConfig:A,heartbeatServiceProvider:P},{fid:V}){const ee=Nt(A),de=sr(A),_e=P.getImmediate({optional:!0});if(_e){const en=yield _e.getHeartbeatsHeader();en&&de.append("x-firebase-client",en)}const _t={method:"POST",headers:de,body:JSON.stringify({fid:V,authVersion:wr,appId:A.appId,sdkVersion:Cr})},Pt=yield fr(()=>fetch(ee,_t));if(Pt.ok){const en=yield Pt.json();return{fid:en.fid||V,registrationStatus:2,refreshToken:en.refreshToken,authToken:$t(en.authToken)}}throw yield Bn("Create Installation",Pt)})).apply(this,arguments)}function gn(A){return new Promise(P=>{setTimeout(P,A)})}const Br=/^[cdef][\w-]{21}$/,Pr="";function In(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const V=function Vn(A){return function ni(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Br.test(V)?V:Pr}catch{return Pr}}function gr(A){return`${A.appName}!${A.appId}`}const ri=new Map;function Mr(A,P){const V=gr(A);cn(V,P),function or(A,P){const V=function An(){return!ms&&"BroadcastChannel"in self&&(ms=new BroadcastChannel("[Firebase] FID Change"),ms.onmessage=A=>{cn(A.data.key,A.data.fid)}),ms}();V&&V.postMessage({key:A,fid:P}),function Qi(){0===ri.size&&ms&&(ms.close(),ms=null)}()}(V,P)}function cn(A,P){const V=ri.get(A);if(V)for(const ee of V)ee(P)}let ms=null;const ss="firebase-installations-database",vr=1,_i="firebase-installations-store";let zi=null;function Qe(){return zi||(zi=function Ne(A,P,{blocked:V,upgrade:ee,blocking:de,terminated:_e}={}){const Ke=indexedDB.open(A,P),_t=Xe(Ke);return ee&&Ke.addEventListener("upgradeneeded",Pt=>{ee(Xe(Ke.result),Pt.oldVersion,Pt.newVersion,Xe(Ke.transaction))}),V&&Ke.addEventListener("blocked",()=>V()),_t.then(Pt=>{_e&&Pt.addEventListener("close",()=>_e()),de&&Pt.addEventListener("versionchange",()=>de())}).catch(()=>{}),_t}(ss,vr,{upgrade:(A,P)=>{0===P&&A.createObjectStore(_i)}})),zi}function nt(A,P){return zt.apply(this,arguments)}function zt(){return(zt=(0,Ie.A)(function*(A,P){const V=gr(A),de=(yield Qe()).transaction(_i,"readwrite"),_e=de.objectStore(_i),Ke=yield _e.get(V);return yield _e.put(P,V),yield de.done,(!Ke||Ke.fid!==P.fid)&&Mr(A,P.fid),P})).apply(this,arguments)}function sn(A){return kn.apply(this,arguments)}function kn(){return(kn=(0,Ie.A)(function*(A){const P=gr(A),ee=(yield Qe()).transaction(_i,"readwrite");yield ee.objectStore(_i).delete(P),yield ee.done})).apply(this,arguments)}function Sn(A,P){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,Ie.A)(function*(A,P){const V=gr(A),de=(yield Qe()).transaction(_i,"readwrite"),_e=de.objectStore(_i),Ke=yield _e.get(V),_t=P(Ke);return void 0===_t?yield _e.delete(V):yield _e.put(_t,V),yield de.done,_t&&(!Ke||Ke.fid!==_t.fid)&&Mr(A,_t.fid),_t})).apply(this,arguments)}function ae(A){return q.apply(this,arguments)}function q(){return q=(0,Ie.A)(function*(A){let P;const V=yield Sn(A.appConfig,ee=>{const de=function Q(A){return En(A||{fid:In(),registrationStatus:0})}(ee),_e=function W(A,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(pt.create("app-offline"))};const V={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},ee=function X(A,P){return we.apply(this,arguments)}(A,V);return{installationEntry:V,registrationPromise:ee}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:at(A)}:{installationEntry:P}}(A,de);return P=_e.registrationPromise,_e.installationEntry});return V.fid===Pr?{installationEntry:yield P}:{installationEntry:V,registrationPromise:P}}),q.apply(this,arguments)}function we(){return we=(0,Ie.A)(function*(A,P){try{const V=yield function Si(A,P){return Cn.apply(this,arguments)}(A,P);return nt(A.appConfig,V)}catch(V){throw gt(V)&&409===V.customData.serverCode?yield sn(A.appConfig):yield nt(A.appConfig,{fid:P.fid,registrationStatus:0}),V}}),we.apply(this,arguments)}function at(A){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,Ie.A)(function*(A){let P=yield Rn(A.appConfig);for(;1===P.registrationStatus;)yield gn(100),P=yield Rn(A.appConfig);if(0===P.registrationStatus){const{installationEntry:V,registrationPromise:ee}=yield ae(A);return ee||V}return P})).apply(this,arguments)}function Rn(A){return Sn(A,P=>{if(!P)throw pt.create("installation-not-found");return En(P)})}function En(A){return function Er(A){return 1===A.registrationStatus&&A.registrationTime+an<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function br(){return(br=(0,Ie.A)(function*({appConfig:A,heartbeatServiceProvider:P},V){const ee=function Gs(A,{fid:P}){return`${Nt(A)}/${P}/authTokens:generate`}(A,V),de=function Jn(A,{refreshToken:P}){const V=sr(A);return V.append("Authorization",function Ur(A){return`${wr} ${A}`}(P)),V}(A,V),_e=P.getImmediate({optional:!0});if(_e){const en=yield _e.getHeartbeatsHeader();en&&de.append("x-firebase-client",en)}const _t={method:"POST",headers:de,body:JSON.stringify({installation:{sdkVersion:Cr,appId:A.appId}})},Pt=yield fr(()=>fetch(ee,_t));if(Pt.ok)return $t(yield Pt.json());throw yield Bn("Generate Auth Token",Pt)})).apply(this,arguments)}function Yi(A){return ja.apply(this,arguments)}function ja(){return ja=(0,Ie.A)(function*(A,P=!1){let V;const ee=yield Sn(A.appConfig,_e=>{if(!Ss(_e))throw pt.create("not-registered");const Ke=_e.authToken;if(!P&&function Ro(A){return 2===A.requestStatus&&!function qo(A){const P=Date.now();return P<A.creationTime||A.creationTime+A.expiresIn<P+xe}(A)}(Ke))return _e;if(1===Ke.requestStatus)return V=function jr(A,P){return qs.apply(this,arguments)}(A,P),_e;{if(!navigator.onLine)throw pt.create("app-offline");const _t=function Mn(A){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:P})}(_e);return V=function da(A,P){return Go.apply(this,arguments)}(A,_t),_t}});return V?yield V:ee.authToken}),ja.apply(this,arguments)}function qs(){return(qs=(0,Ie.A)(function*(A,P){let V=yield Gn(A.appConfig);for(;1===V.authToken.requestStatus;)yield gn(100),V=yield Gn(A.appConfig);const ee=V.authToken;return 0===ee.requestStatus?Yi(A,P):ee})).apply(this,arguments)}function Gn(A){return Sn(A,P=>{if(!Ss(P))throw pt.create("not-registered");return function os(A){return 1===A.requestStatus&&A.requestTime+an<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Go(){return Go=(0,Ie.A)(function*(A,P){try{const V=yield function Fn(A,P){return br.apply(this,arguments)}(A,P),ee=Object.assign(Object.assign({},P),{authToken:V});return yield nt(A.appConfig,ee),V}catch(V){if(!gt(V)||401!==V.customData.serverCode&&404!==V.customData.serverCode){const ee=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield nt(A.appConfig,ee)}else yield sn(A.appConfig);throw V}}),Go.apply(this,arguments)}function Ss(A){return void 0!==A&&2===A.registrationStatus}function Hi(){return(Hi=(0,Ie.A)(function*(A){const P=A,{installationEntry:V,registrationPromise:ee}=yield ae(P);return ee?ee.catch(console.error):Yi(P).catch(console.error),V.fid})).apply(this,arguments)}function Nn(){return Nn=(0,Ie.A)(function*(A,P=!1){const V=A;return yield function Wo(A){return fa.apply(this,arguments)}(V),(yield Yi(V,P)).token}),Nn.apply(this,arguments)}function fa(){return(fa=(0,Ie.A)(function*(A){const{registrationPromise:P}=yield ae(A);P&&(yield P)})).apply(this,arguments)}function ye(A){return pt.create("missing-app-config-values",{valueName:A})}const Oe="installations",Ct=A=>{const P=A.getProvider("app").getImmediate(),V=function ge(A){if(!A||!A.options)throw ye("App Configuration");if(!A.name)throw ye("App Name");const P=["projectId","apiKey","appId"];for(const V of P)if(!A.options[V])throw ye(V);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(P);return{app:P,appConfig:V,heartbeatServiceProvider:(0,Me.j6)(P,"heartbeat"),_delete:()=>Promise.resolve()}},dn=A=>{const P=A.getProvider("app").getImmediate(),V=(0,Me.j6)(P,Oe).getImmediate();return{getId:()=>function ha(A){return Hi.apply(this,arguments)}(V),getToken:de=>function Xi(A){return Nn.apply(this,arguments)}(V,de)}};(function qn(){(0,Me.om)(new re.uA(Oe,Ct,"PUBLIC")),(0,Me.om)(new re.uA("installations-internal",dn,"PRIVATE"))})(),(0,Me.KO)(Ut,hr),(0,Me.KO)(Ut,hr,"esm2017");const Ln="@firebase/remote-config",Ni=new Te.FA("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ws{constructor(P,V,ee,de){this.client=P,this.storage=V,this.storageCache=ee,this.logger=de}isCachedDataFresh(P,V){if(!V)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ee=Date.now()-V,de=ee<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${de}.`),de}fetch(P){var V=this;return(0,Ie.A)(function*(){const[ee,de]=yield Promise.all([V.storage.getLastSuccessfulFetchTimestampMillis(),V.storage.getLastSuccessfulFetchResponse()]);if(de&&V.isCachedDataFresh(P.cacheMaxAgeMillis,ee))return de;P.eTag=de&&de.eTag;const _e=yield V.client.fetch(P),Ke=[V.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===_e.status&&Ke.push(V.storage.setLastSuccessfulFetchResponse(_e)),yield Promise.all(Ke),_e})()}}function yr(A=navigator){return A.languages&&A.languages[0]||A.language}class Ks{constructor(P,V,ee,de,_e,Ke){this.firebaseInstallations=P,this.sdkVersion=V,this.namespace=ee,this.projectId=de,this.apiKey=_e,this.appId=Ke}fetch(P){var V=this;return(0,Ie.A)(function*(){const[ee,de]=yield Promise.all([V.firebaseInstallations.getId(),V.firebaseInstallations.getToken()]),Ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${V.projectId}/namespaces/${V.namespace}:fetch?key=${V.apiKey}`,_t={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},Pt={sdk_version:V.sdkVersion,app_instance_id:ee,app_instance_id_token:de,app_id:V.appId,language_code:yr()},en={method:"POST",headers:_t,body:JSON.stringify(Pt)},xn=fetch(Ke,en),Pn=new Promise((sa,ko)=>{P.signal.addEventListener(()=>{const kl=new Error("The operation was aborted.");kl.name="AbortError",ko(kl)})});let Oo;try{yield Promise.race([xn,Pn]),Oo=yield xn}catch(sa){let ko="fetch-client-network";throw"AbortError"===sa?.name&&(ko="fetch-timeout"),Ni.create(ko,{originalErrorMessage:sa?.message})}let Mi=Oo.status;const ir=Oo.headers.get("ETag")||void 0;let xr,Hr;if(200===Oo.status){let sa;try{sa=yield Oo.json()}catch(ko){throw Ni.create("fetch-client-parse",{originalErrorMessage:ko?.message})}xr=sa.entries,Hr=sa.state}if("INSTANCE_STATE_UNSPECIFIED"===Hr?Mi=500:"NO_CHANGE"===Hr?Mi=304:("NO_TEMPLATE"===Hr||"EMPTY_CONFIG"===Hr)&&(xr={}),304!==Mi&&200!==Mi)throw Ni.create("fetch-status",{httpStatus:Mi});return{status:Mi,eTag:ir,config:xr}})()}}class hd{constructor(P,V){this.client=P,this.storage=V}fetch(P){var V=this;return(0,Ie.A)(function*(){const ee=(yield V.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return V.attemptFetch(P,ee)})()}attemptFetch(P,V){var ee=this;return(0,Ie.A)(function*(de,{throttleEndTimeMillis:_e,backoffCount:Ke}){yield function Lu(A,P){return new Promise((V,ee)=>{const de=Math.max(P-Date.now(),0),_e=setTimeout(V,de);A.addEventListener(()=>{clearTimeout(_e),ee(Ni.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(de.signal,_e);try{const _t=yield ee.client.fetch(de);return yield ee.storage.deleteThrottleMetadata(),_t}catch(_t){if(!function Qo(A){if(!(A instanceof Te.g&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(_t))throw _t;const Pt={throttleEndTimeMillis:Date.now()+(0,Te.p9)(Ke),backoffCount:Ke+1};return yield ee.storage.setThrottleMetadata(Pt),ee.attemptFetch(de,Pt)}}).apply(this,arguments)}}class Ot{constructor(P,V,ee,de,_e){this.app=P,this._client=V,this._storageCache=ee,this._storage=de,this._logger=_e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _n(A,P){const V=A.target.error||void 0;return Ni.create(P,{originalErrorMessage:V&&V?.message})}const ar="app_namespace_store";class lo{constructor(P,V,ee,de=function Ri(){return new Promise((A,P)=>{try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=ee=>{P(_n(ee,"storage-open"))},V.onsuccess=ee=>{A(ee.target.result)},V.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(ar,{keyPath:"compositeKey"})}}catch(V){P(Ni.create("storage-open",{originalErrorMessage:V?.message}))}})}()){this.appId=P,this.appName=V,this.namespace=ee,this.openDbPromise=de}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var V=this;return(0,Ie.A)(function*(){const ee=yield V.openDbPromise;return new Promise((de,_e)=>{const _t=ee.transaction([ar],"readonly").objectStore(ar),Pt=V.createCompositeKey(P);try{const en=_t.get(Pt);en.onerror=xn=>{_e(_n(xn,"storage-get"))},en.onsuccess=xn=>{const Pn=xn.target.result;de(Pn?Pn.value:void 0)}}catch(en){_e(Ni.create("storage-get",{originalErrorMessage:en?.message}))}})})()}set(P,V){var ee=this;return(0,Ie.A)(function*(){const de=yield ee.openDbPromise;return new Promise((_e,Ke)=>{const Pt=de.transaction([ar],"readwrite").objectStore(ar),en=ee.createCompositeKey(P);try{const xn=Pt.put({compositeKey:en,value:V});xn.onerror=Pn=>{Ke(_n(Pn,"storage-set"))},xn.onsuccess=()=>{_e()}}catch(xn){Ke(Ni.create("storage-set",{originalErrorMessage:xn?.message}))}})})()}delete(P){var V=this;return(0,Ie.A)(function*(){const ee=yield V.openDbPromise;return new Promise((de,_e)=>{const _t=ee.transaction([ar],"readwrite").objectStore(ar),Pt=V.createCompositeKey(P);try{const en=_t.delete(Pt);en.onerror=xn=>{_e(_n(xn,"storage-delete"))},en.onsuccess=()=>{de()}}catch(en){_e(Ni.create("storage-delete",{originalErrorMessage:en?.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class hi{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,Ie.A)(function*(){const V=P.storage.getLastFetchStatus(),ee=P.storage.getLastSuccessfulFetchTimestampMillis(),de=P.storage.getActiveConfig(),_e=yield V;_e&&(P.lastFetchStatus=_e);const Ke=yield ee;Ke&&(P.lastSuccessfulFetchTimestampMillis=Ke);const _t=yield de;_t&&(P.activeConfig=_t)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function ho(){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,Ie.A)(function*(){if(!(0,Te.zW)())return!1;try{return yield(0,Te.eX)()}catch{return!1}})).apply(this,arguments)}!function ya(){(0,Me.om)(new re.uA("remote-config",function A(P,{instanceIdentifier:V}){const ee=P.getProvider("app").getImmediate(),de=P.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ni.create("registration-window");if(!(0,Te.zW)())throw Ni.create("indexed-db-unavailable");const{projectId:_e,apiKey:Ke,appId:_t}=ee.options;if(!_e)throw Ni.create("registration-project-id");if(!Ke)throw Ni.create("registration-api-key");if(!_t)throw Ni.create("registration-app-id");const Pt=new lo(_t,ee.name,V=V||"firebase"),en=new hi(Pt),xn=new K.Vy(Ln);xn.logLevel=K.$b.ERROR;const Pn=new Ks(de,Me.MF,V,_e,Ke,_t),Oo=new hd(Pn,Pt),Mi=new Ws(Oo,Pt,en,xn),ir=new Ot(ee,Mi,en,Pt,xn);return function dc(A){const P=(0,Te.Ku)(A);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(ir),ir},"PUBLIC").setMultipleInstances(!0)),(0,Me.KO)(Ln,"0.4.4"),(0,Me.KO)(Ln,"0.4.4","esm2017")}();const Vu=(A,P)=>P.some(V=>A instanceof V);let Or,Ga;const _a=new WeakMap,Ms=new WeakMap,Ns=new WeakMap,ys=new WeakMap,va=new WeakMap;let Qs={get(A,P,V){if(A instanceof IDBTransaction){if("done"===P)return Ms.get(A);if("objectStoreNames"===P)return A.objectStoreNames||Ns.get(A);if("store"===P)return V.objectStoreNames[1]?void 0:V.objectStore(V.objectStoreNames[0])}return us(A[P])},set:(A,P,V)=>(A[P]=V,!0),has:(A,P)=>A instanceof IDBTransaction&&("done"===P||"store"===P)||P in A};function Os(A){return"function"==typeof A?function El(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ps(){return Ga||(Ga=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...P){return A.apply(Ys(this),P),us(_a.get(this))}:function(...P){return us(A.apply(Ys(this),P))}:function(P,...V){const ee=A.call(Ys(this),P,...V);return Ns.set(ee,P.sort?P.sort():[P]),us(ee)}}(A):(A instanceof IDBTransaction&&function Wn(A){if(Ms.has(A))return;const P=new Promise((V,ee)=>{const de=()=>{A.removeEventListener("complete",_e),A.removeEventListener("error",Ke),A.removeEventListener("abort",Ke)},_e=()=>{V(),de()},Ke=()=>{ee(A.error||new DOMException("AbortError","AbortError")),de()};A.addEventListener("complete",_e),A.addEventListener("error",Ke),A.addEventListener("abort",Ke)});Ms.set(A,P)}(A),Vu(A,function fo(){return Or||(Or=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,Qs):A)}function us(A){if(A instanceof IDBRequest)return function Yo(A){const P=new Promise((V,ee)=>{const de=()=>{A.removeEventListener("success",_e),A.removeEventListener("error",Ke)},_e=()=>{V(us(A.result)),de()},Ke=()=>{ee(A.error),de()};A.addEventListener("success",_e),A.addEventListener("error",Ke)});return P.then(V=>{V instanceof IDBCursor&&_a.set(V,A)}).catch(()=>{}),va.set(P,A),P}(A);if(ys.has(A))return ys.get(A);const P=Os(A);return P!==A&&(ys.set(A,P),va.set(P,A)),P}const Ys=A=>va.get(A);function Ui(A,P,{blocked:V,upgrade:ee,blocking:de,terminated:_e}={}){const Ke=indexedDB.open(A,P),_t=us(Ke);return ee&&Ke.addEventListener("upgradeneeded",Pt=>{ee(us(Ke.result),Pt.oldVersion,Pt.newVersion,us(Ke.transaction))}),V&&Ke.addEventListener("blocked",()=>V()),_t.then(Pt=>{_e&&Pt.addEventListener("close",()=>_e()),de&&Pt.addEventListener("versionchange",()=>de())}).catch(()=>{}),_t}function Oi(A,{blocked:P}={}){const V=indexedDB.deleteDatabase(A);return P&&V.addEventListener("blocked",()=>P()),us(V).then(()=>{})}const Ia=["get","getKey","getAll","getAllKeys","count"],es=["put","add","delete","clear"],zr=new Map;function Xo(A,P){if(!(A instanceof IDBDatabase)||P in A||"string"!=typeof P)return;if(zr.get(P))return zr.get(P);const V=P.replace(/FromIndex$/,""),ee=P!==V,de=es.includes(V);if(!(V in(ee?IDBIndex:IDBObjectStore).prototype)||!de&&!Ia.includes(V))return;const _e=function(){var Ke=(0,Ie.A)(function*(_t,...Pt){const en=this.transaction(_t,de?"readwrite":"readonly");let xn=en.store;return ee&&(xn=xn.index(Pt.shift())),(yield Promise.all([xn[V](...Pt),de&&en.done]))[0]});return function(Pt){return Ke.apply(this,arguments)}}();return zr.set(P,_e),_e}!function Uu(A){Qs=A(Qs)}(A=>({...A,get:(P,V,ee)=>Xo(P,V)||A.get(P,V,ee),has:(P,V)=>!!Xo(P,V)||A.has(P,V)}));const _s="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",cs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fc="https://fcmregistrations.googleapis.com/v1",ur="google.c.a.c_id",Ea="google.c.a.c_l",Bu="google.c.a.ts";var Ta=function(A){return A.PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",A}(Ta||{});function po(A){const P=new Uint8Array(A);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fd(A){const V=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ee=atob(V),de=new Uint8Array(ee.length);for(let _e=0;_e<ee.length;++_e)de[_e]=ee.charCodeAt(_e);return de}const fu="fcm_token_details_db",ts=5,Aa="fcm_token_object_Store";function xo(){return xo=(0,Ie.A)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(fu))return null;let P=null;return(yield Ui(fu,ts,{upgrade:(ee=(0,Ie.A)(function*(de,_e,Ke,_t){var Pt;if(_e<2||!de.objectStoreNames.contains(Aa))return;const en=_t.objectStore(Aa),xn=yield en.index("fcmSenderId").get(A);if(yield en.clear(),xn)if(2===_e){const Pn=xn;if(!Pn.auth||!Pn.p256dh||!Pn.endpoint)return;P={token:Pn.fcmToken,createTime:null!==(Pt=Pn.createTime)&&void 0!==Pt?Pt:Date.now(),subscriptionOptions:{auth:Pn.auth,p256dh:Pn.p256dh,endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:"string"==typeof Pn.vapidKey?Pn.vapidKey:po(Pn.vapidKey)}}}else if(3===_e){const Pn=xn;P={token:Pn.fcmToken,createTime:Pn.createTime,subscriptionOptions:{auth:po(Pn.auth),p256dh:po(Pn.p256dh),endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:po(Pn.vapidKey)}}}else if(4===_e){const Pn=xn;P={token:Pn.fcmToken,createTime:Pn.createTime,subscriptionOptions:{auth:po(Pn.auth),p256dh:po(Pn.p256dh),endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:po(Pn.vapidKey)}}}}),function(_e,Ke,_t,Pt){return ee.apply(this,arguments)})})).close(),yield Oi(fu),yield Oi("fcm_vapid_details_db"),yield Oi("undefined"),function wl(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:P}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}(P)?P:null;var ee}),xo.apply(this,arguments)}const ut="firebase-messaging-database",Yr=1,Sr="firebase-messaging-store";let ju=null;function Bt(){return ju||(ju=Ui(ut,Yr,{upgrade:(A,P)=>{0===P&&A.createObjectStore(Sr)}})),ju}function Kc(A){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,Ie.A)(function*(A){const P=Bi(A),ee=yield(yield Bt()).transaction(Sr).objectStore(Sr).get(P);if(ee)return ee;{const de=yield function go(A){return xo.apply(this,arguments)}(A.appConfig.senderId);if(de)return yield pd(A,de),de}}),Wt.apply(this,arguments)}function pd(A,P){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,Ie.A)(function*(A,P){const V=Bi(A),de=(yield Bt()).transaction(Sr,"readwrite");return yield de.objectStore(Sr).put(P,V),yield de.done,P})).apply(this,arguments)}function ct(){return(ct=(0,Ie.A)(function*(A){const P=Bi(A),ee=(yield Bt()).transaction(Sr,"readwrite");yield ee.objectStore(Sr).delete(P),yield ee.done})).apply(this,arguments)}function Bi({appConfig:A}){return A.appId}const xi=new Te.FA("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vs(A,P){return qa.apply(this,arguments)}function qa(){return(qa=(0,Ie.A)(function*(A,P){const V=yield Ka(A),ee=zu(P),de={method:"POST",headers:V,body:JSON.stringify(ee)};let _e;try{_e=yield(yield fetch($u(A.appConfig),de)).json()}catch(Ke){throw xi.create("token-subscribe-failed",{errorInfo:Ke?.toString()})}if(_e.error)throw xi.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw xi.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function pc(){return(pc=(0,Ie.A)(function*(A,P){const V=yield Ka(A),ee=zu(P.subscriptionOptions),de={method:"PATCH",headers:V,body:JSON.stringify(ee)};let _e;try{_e=yield(yield fetch(`${$u(A.appConfig)}/${P.token}`,de)).json()}catch(Ke){throw xi.create("token-update-failed",{errorInfo:Ke?.toString()})}if(_e.error)throw xi.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw xi.create("token-update-no-token");return _e.token})).apply(this,arguments)}function Wa(A,P){return gu.apply(this,arguments)}function gu(){return(gu=(0,Ie.A)(function*(A,P){const ee={method:"DELETE",headers:yield Ka(A)};try{const _e=yield(yield fetch(`${$u(A.appConfig)}/${P}`,ee)).json();if(_e.error)throw xi.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(de){throw xi.create("token-unsubscribe-failed",{errorInfo:de?.toString()})}})).apply(this,arguments)}function $u({projectId:A}){return`${fc}/projects/${A}/registrations`}function Ka(A){return Po.apply(this,arguments)}function Po(){return(Po=(0,Ie.A)(function*({appConfig:A,installations:P}){const V=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${V}`})})).apply(this,arguments)}function zu({p256dh:A,auth:P,endpoint:V,vapidKey:ee}){const de={web:{endpoint:V,auth:P,p256dh:A}};return ee!==cs&&(de.web.applicationPubKey=ee),de}const un=6048e5;function Jo(){return Jo=(0,Ie.A)(function*(A){const P=yield function Yt(A,P){return Qa.apply(this,arguments)}(A.swRegistration,A.vapidKey),V={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:P.endpoint,auth:po(P.getKey("auth")),p256dh:po(P.getKey("p256dh"))},ee=yield Kc(A.firebaseDependencies);if(ee){if(function D(A,P){return P.vapidKey===A.vapidKey&&P.endpoint===A.endpoint&&P.auth===A.auth&&P.p256dh===A.p256dh}(ee.subscriptionOptions,V))return Date.now()>=ee.createTime+un?function Hu(A,P){return Gu.apply(this,arguments)}(A,{token:ee.token,createTime:Date.now(),subscriptionOptions:V}):ee.token;try{yield Wa(A.firebaseDependencies,ee.token)}catch(de){console.warn(de)}return gd(A.firebaseDependencies,V)}return gd(A.firebaseDependencies,V)}),Jo.apply(this,arguments)}function ls(){return ls=(0,Ie.A)(function*(A){const P=yield Kc(A.firebaseDependencies);P&&(yield Wa(A.firebaseDependencies,P.token),yield function $e(A){return ct.apply(this,arguments)}(A.firebaseDependencies));const V=yield A.swRegistration.pushManager.getSubscription();return!V||V.unsubscribe()}),ls.apply(this,arguments)}function Gu(){return Gu=(0,Ie.A)(function*(A,P){try{const V=yield function pu(A,P){return pc.apply(this,arguments)}(A.firebaseDependencies,P),ee=Object.assign(Object.assign({},P),{token:V,createTime:Date.now()});return yield pd(A.firebaseDependencies,ee),V}catch(V){throw yield function mu(A){return ls.apply(this,arguments)}(A),V}}),Gu.apply(this,arguments)}function gd(A,P){return ui.apply(this,arguments)}function ui(){return(ui=(0,Ie.A)(function*(A,P){const ee={token:yield vs(A,P),createTime:Date.now(),subscriptionOptions:P};return yield pd(A,ee),ee.token})).apply(this,arguments)}function Qa(){return(Qa=(0,Ie.A)(function*(A,P){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fd(P)})})).apply(this,arguments)}function j(A){const P={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function k(A,P){if(!P.notification)return;A.notification={};const V=P.notification.title;V&&(A.notification.title=V);const ee=P.notification.body;ee&&(A.notification.body=ee);const de=P.notification.image;de&&(A.notification.image=de);const _e=P.notification.icon;_e&&(A.notification.icon=_e)}(P,A),function U(A,P){P.data&&(A.data=P.data)}(P,A),function Y(A,P){var V,ee,de,_e,Ke;if(!(P.fcmOptions||null!==(V=P.notification)&&void 0!==V&&V.click_action))return;A.fcmOptions={};const _t=null!==(de=null===(ee=P.fcmOptions)||void 0===ee?void 0:ee.link)&&void 0!==de?de:null===(_e=P.notification)||void 0===_e?void 0:_e.click_action;_t&&(A.fcmOptions.link=_t);const Pt=null===(Ke=P.fcmOptions)||void 0===Ke?void 0:Ke.analytics_label;Pt&&(A.fcmOptions.analyticsLabel=Pt)}(P,A),P}function et(A,P){const V=[];for(let ee=0;ee<A.length;ee++)V.push(A.charAt(ee)),ee<P.length&&V.push(P.charAt(ee));return V.join("")}function rr(A){return xi.create("missing-app-config-values",{valueName:A})}et("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),et("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class kr{constructor(P,V,ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const de=function Jt(A){if(!A||!A.options)throw rr("App Configuration Object");if(!A.name)throw rr("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:V}=A;for(const ee of P)if(!V[ee])throw rr(ee);return{appName:A.name,projectId:V.projectId,apiKey:V.apiKey,appId:V.appId,senderId:V.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:de,installations:V,analyticsProvider:ee}}_delete(){return Promise.resolve()}}function Un(){return(Un=(0,Ie.A)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(_s,{scope:Gi}),A.swRegistration.update().catch(()=>{})}catch(P){throw xi.create("failed-service-worker-registration",{browserErrorMessage:P?.message})}})).apply(this,arguments)}function pr(){return(pr=(0,Ie.A)(function*(A,P){if(!P&&!A.swRegistration&&(yield function Kn(A){return Un.apply(this,arguments)}(A)),P||!A.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw xi.create("invalid-sw-registration");A.swRegistration=P}})).apply(this,arguments)}function ii(){return(ii=(0,Ie.A)(function*(A,P){P?A.vapidKey=P:A.vapidKey||(A.vapidKey=cs)})).apply(this,arguments)}function Js(){return Js=(0,Ie.A)(function*(A,P){if(!navigator)throw xi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xi.create("permission-blocked");return yield function Ti(A,P){return ii.apply(this,arguments)}(A,P?.vapidKey),yield function Fr(A,P){return pr.apply(this,arguments)}(A,P?.serviceWorkerRegistration),function Qc(A){return Jo.apply(this,arguments)}(A)}),Js.apply(this,arguments)}function pi(){return(pi=(0,Ie.A)(function*(A,P,V){const ee=function mo(A){switch(A){case Ta.NOTIFICATION_CLICKED:return"notification_open";case Ta.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(P);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(ee,{message_id:V[ur],message_name:V[Ea],message_time:V[Bu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Is(){return Is=(0,Ie.A)(function*(A,P){const V=P.data;if(!V.isFirebaseMessaging)return;A.onMessageHandler&&V.messageType===Ta.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(j(V)):A.onMessageHandler.next(j(V)));const ee=V.data;(function He(A){return"object"==typeof A&&!!A&&ur in A})(ee)&&"1"===ee["google.c.a.e"]&&(yield function fi(A,P,V){return pi.apply(this,arguments)}(A,V.messageType,ee))}),Is.apply(this,arguments)}const gc="@firebase/messaging",mc=A=>{const P=new kr(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",V=>function De(A,P){return Is.apply(this,arguments)}(P,V)),P},yc=A=>{const P=A.getProvider("messaging").getImmediate();return{getToken:ee=>function Xs(A,P){return Js.apply(this,arguments)}(P,ee)}};function Pi(){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,Ie.A)(function*(){try{yield(0,Te.eX)()}catch{return!1}return typeof window<"u"&&(0,Te.zW)()&&(0,Te.dM)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function yu(){(0,Me.om)(new re.uA("messaging",mc,"PUBLIC")),(0,Me.om)(new re.uA("messaging-internal",yc,"PRIVATE")),(0,Me.KO)(gc,"0.12.4"),(0,Me.KO)(gc,"0.12.4","esm2017")}();const ki="analytics",vc="firebase_id",Ic="origin",Al=6e4,$n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yc="https://www.googletagmanager.com/gtag/js",gi=new K.Vy("@firebase/analytics"),mi=new Te.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function vu(A){if(!A.startsWith(Yc)){const P=mi.create("invalid-gtag-resource",{gtagURL:A});return gi.warn(P.message),""}return A}function Es(A){return Promise.all(A.map(P=>P.catch(V=>V)))}function ks(){return(ks=(0,Ie.A)(function*(A,P,V,ee,de,_e){const Ke=ee[de];try{if(Ke)yield P[Ke];else{const Pt=(yield Es(V)).find(en=>en.measurementId===de);Pt&&(yield P[Pt.appId])}}catch(_t){gi.error(_t)}A("config",de,_e)})).apply(this,arguments)}function ba(){return(ba=(0,Ie.A)(function*(A,P,V,ee,de){try{let _e=[];if(de&&de.send_to){let Ke=de.send_to;Array.isArray(Ke)||(Ke=[Ke]);const _t=yield Es(V);for(const Pt of Ke){const en=_t.find(Pn=>Pn.measurementId===Pt),xn=en&&P[en.appId];if(!xn){_e=[];break}_e.push(xn)}}0===_e.length&&(_e=Object.values(P)),yield Promise.all(_e),A("event",ee,de||{})}catch(_e){gi.error(_e)}})).apply(this,arguments)}const Ec=30,dt=new class Xc{constructor(P={},V=1e3){this.throttleMetadata=P,this.intervalMillis=V}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,V){this.throttleMetadata[P]=V}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function _r(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Eu(){return(Eu=(0,Ie.A)(function*(A){var P;const{appId:V,apiKey:ee}=A,de={method:"GET",headers:_r(ee)},_e=$n.replace("{app-id}",V),Ke=yield fetch(_e,de);if(200!==Ke.status&&304!==Ke.status){let _t="";try{const Pt=yield Ke.json();null!==(P=Pt.error)&&void 0!==P&&P.message&&(_t=Pt.error.message)}catch{}throw mi.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:_t})}return Ke.json()})).apply(this,arguments)}function Sa(){return(Sa=(0,Ie.A)(function*(A,P=dt,V){const{appId:ee,apiKey:de,measurementId:_e}=A.options;if(!ee)throw mi.create("no-app-id");if(!de){if(_e)return{measurementId:_e,appId:ee};throw mi.create("no-api-key")}const Ke=P.getThrottleMetadata(ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_t=new bl;return setTimeout((0,Ie.A)(function*(){_t.abort()}),void 0!==V?V:Al),wu({appId:ee,apiKey:de,measurementId:_e},Ke,_t,P)})).apply(this,arguments)}function wu(A,P,V){return Io.apply(this,arguments)}function Io(){return Io=(0,Ie.A)(function*(A,{throttleEndTimeMillis:P,backoffCount:V},ee,de=dt){var _e;const{appId:Ke,measurementId:_t}=A;try{yield function Xa(A,P){return new Promise((V,ee)=>{const de=Math.max(P-Date.now(),0),_e=setTimeout(V,de);A.addEventListener(()=>{clearTimeout(_e),ee(mi.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(ee,P)}catch(Pt){if(_t)return gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:Ke,measurementId:_t};throw Pt}try{const Pt=yield function dh(A){return Eu.apply(this,arguments)}(A);return de.deleteThrottleMetadata(Ke),Pt}catch(Pt){const en=Pt;if(!function Wu(A){if(!(A instanceof Te.g&&A.customData))return!1;const P=Number(A.customData.httpStatus);return 429===P||500===P||503===P||504===P}(en)){if(de.deleteThrottleMetadata(Ke),_t)return gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${en?.message}]`),{appId:Ke,measurementId:_t};throw Pt}const xn=503===Number(null===(_e=en?.customData)||void 0===_e?void 0:_e.httpStatus)?(0,Te.p9)(V,de.intervalMillis,Ec):(0,Te.p9)(V,de.intervalMillis),Pn={throttleEndTimeMillis:Date.now()+xn,backoffCount:V+1};return de.setThrottleMetadata(Ke,Pn),gi.debug(`Calling attemptFetch again in ${xn} millis`),wu(A,Pn,ee,de)}}),Io.apply(this,arguments)}class bl{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}let _d,x;function Xr(){return(Xr=(0,Ie.A)(function*(A,P,V,ee,de){if(de&&de.global)A("event",V,ee);else{const _e=yield P;A("event",V,Object.assign(Object.assign({},ee),{send_to:_e}))}})).apply(this,arguments)}function Ue(){return(Ue=(0,Ie.A)(function*(){if(!(0,Te.zW)())return gi.warn(mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Te.eX)()}catch(A){return gi.warn(mi.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function Lt(){return Lt=(0,Ie.A)(function*(A,P,V,ee,de,_e,Ke){var _t;const Pt=function Fi(A){return Sa.apply(this,arguments)}(A);Pt.then(Mi=>{V[Mi.measurementId]=Mi.appId,A.options.measurementId&&Mi.measurementId!==A.options.measurementId&&gi.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Mi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mi=>gi.error(Mi)),P.push(Pt);const en=function se(){return Ue.apply(this,arguments)}().then(Mi=>{if(Mi)return ee.getId()}),[xn,Pn]=yield Promise.all([Pt,en]);(function Iu(A){const P=window.document.getElementsByTagName("script");for(const V of Object.values(P))if(V.src&&V.src.includes(Yc)&&V.src.includes(A))return V;return null})(_e)||function lh(A,P){const V=function mn(A,P){let V;return window.trustedTypes&&(V=window.trustedTypes.createPolicy(A,P)),V}("firebase-js-sdk-policy",{createScriptURL:vu}),ee=document.createElement("script"),de=`${Yc}?l=${A}&id=${P}`;ee.src=V?V?.createScriptURL(de):de,ee.async=!0,document.head.appendChild(ee)}(_e,xn.measurementId),x&&(de("consent","default",x),function F(A){x=A}(void 0)),de("js",new Date);const Oo=null!==(_t=Ke?.config)&&void 0!==_t?_t:{};return Oo[Ic]="firebase",Oo.update=!0,null!=Pn&&(Oo[vc]=Pn),de("config",xn.measurementId,Oo),_d&&(de("set",_d),function G(A){_d=A}(void 0)),xn.measurementId}),Lt.apply(this,arguments)}class bn{constructor(P){this.app=P}_delete(){return delete Zn[this.app.options.appId],Promise.resolve()}}let Zn={},er=[];const Eo={};let ta,tr,Fs="dataLayer",xl=!1;function Ig(A,P,V){!function vg(){const A=[];if((0,Te.sr)()&&A.push("This is a browser extension environment."),(0,Te.dM)()||A.push("Cookies are not available."),A.length>0){const P=A.map((ee,de)=>`(${de+1}) ${ee}`).join(" "),V=mi.create("invalid-analytics-context",{errorInfo:P});gi.warn(V.message)}}();const ee=A.options.appId;if(!ee)throw mi.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw mi.create("no-api-key");gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zn[ee])throw mi.create("already-exists",{id:ee});if(!xl){!function vo(A){let P=[];Array.isArray(window[A])?P=window[A]:window[A]=P}(Fs);const{wrappedGtag:_e,gtagCore:Ke}=function yd(A,P,V,ee,de){let _e=function(...Ke){window[ee].push(arguments)};return window[de]&&"function"==typeof window[de]&&(_e=window[de]),window[de]=function Ca(A,P,V,ee){function _e(){return _e=(0,Ie.A)(function*(Ke,..._t){try{if("event"===Ke){const[Pt,en]=_t;yield function qu(A,P,V,ee,de){return ba.apply(this,arguments)}(A,P,V,Pt,en)}else if("config"===Ke){const[Pt,en]=_t;yield function md(A,P,V,ee,de,_e){return ks.apply(this,arguments)}(A,P,V,ee,Pt,en)}else if("consent"===Ke){const[Pt]=_t;A("consent","update",Pt)}else if("get"===Ke){const[Pt,en,xn]=_t;A("get",Pt,en,xn)}else if("set"===Ke){const[Pt]=_t;A("set",Pt)}else A(Ke,..._t)}catch(Pt){gi.error(Pt)}}),_e.apply(this,arguments)}return function de(Ke){return _e.apply(this,arguments)}}(_e,A,P,V),{gtagCore:_e,wrappedGtag:window[de]}}(Zn,er,Eo,Fs,"gtag");tr=_e,ta=Ke,xl=!0}return Zn[ee]=function Fe(A,P,V,ee,de,_e,Ke){return Lt.apply(this,arguments)}(A,er,Eo,P,ta,Fs,V),new bn(A)}function Id(){return wo.apply(this,arguments)}function wo(){return(wo=(0,Ie.A)(function*(){if((0,Te.sr)()||!(0,Te.dM)()||!(0,Te.zW)())return!1;try{return yield(0,Te.eX)()}catch{return!1}})).apply(this,arguments)}const Ra="@firebase/analytics";!function Jr(){(0,Me.om)(new re.uA(ki,(P,{options:V})=>Ig(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),V),"PUBLIC")),(0,Me.om)(new re.uA("analytics-internal",function A(P){try{const V=P.getProvider(ki).getImmediate();return{logEvent:(ee,de,_e)=>function Ed(A,P,V,ee){A=(0,Te.Ku)(A),function wc(A,P,V,ee,de){return Xr.apply(this,arguments)}(tr,Zn[A.app.options.appId],P,V,ee).catch(de=>gi.error(de))}(V,ee,de,_e)}}catch(V){throw mi.create("interop-component-reg-failed",{reason:V})}},"PRIVATE")),(0,Me.KO)(Ra,"0.10.0"),(0,Me.KO)(Ra,"0.10.0","esm2017")}();var Nl=Z(8359);class Zc extends Nl.yU{constructor(P,V){super()}schedule(P,V=0){return this}}const Ls={setInterval(A,P,...V){const{delegate:ee}=Ls;return ee?.setInterval?ee.setInterval(A,P,...V):setInterval(A,P,...V)},clearInterval(A){const{delegate:P}=Ls;return(P?.clearInterval||clearInterval)(A)},delegate:void 0};var Af=Z(7908);class Df extends Zc{constructor(P,V){super(P,V),this.scheduler=P,this.work=V,this.pending=!1}schedule(P,V=0){var ee;if(this.closed)return this;this.state=P;const de=this.id,_e=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(_e,de,V)),this.pending=!0,this.delay=V,this.id=null!==(ee=this.id)&&void 0!==ee?ee:this.requestAsyncId(_e,this.id,V),this}requestAsyncId(P,V,ee=0){return Ls.setInterval(P.flush.bind(P,this),ee)}recycleAsyncId(P,V,ee=0){if(null!=ee&&this.delay===ee&&!1===this.pending)return V;null!=V&&Ls.clearInterval(V)}execute(P,V){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(P,V);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(P,V){let de,ee=!1;try{this.work(P)}catch(_e){ee=!0,de=_e||new Error("Scheduled action threw falsy error")}if(ee)return this.unsubscribe(),de}unsubscribe(){if(!this.closed){const{id:P,scheduler:V}=this,{actions:ee}=V;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Af.o)(ee,this),null!=P&&(this.id=this.recycleAsyncId(V,P,null)),this.delay=null,super.unsubscribe()}}}const wd={now:()=>(wd.delegate||Date).now(),delegate:void 0};class ns{constructor(P,V=ns.now){this.schedulerActionCtor=P,this.now=V}schedule(P,V=0,ee){return new this.schedulerActionCtor(this,P).schedule(ee,V)}}ns.now=wd.now;class Ai extends ns{constructor(P,V=ns.now){super(P,V),this.actions=[],this._active=!1}flush(P){const{actions:V}=this;if(this._active)return void V.push(P);let ee;this._active=!0;do{if(ee=P.execute(P.state,P.delay))break}while(P=V.shift());if(this._active=!1,ee){for(;P=V.shift();)P.unsubscribe();throw ee}}}const el=new class Mo extends Ai{}(class qi extends Df{constructor(P,V){super(P,V),this.scheduler=P,this.work=V}schedule(P,V=0){return V>0?super.schedule(P,V):(this.delay=V,this.state=P,this.scheduler.flush(this),this)}execute(P,V){return V>0||this.closed?super.execute(P,V):this._execute(P,V)}requestAsyncId(P,V,ee=0){return null!=ee&&ee>0||null==ee&&this.delay>0?super.requestAsyncId(P,V,ee):(P.flush(this),0)}}),fh=new Ai(Df);var Qu=Z(1985),Ol=Z(8141),Ts=Z(6745),bf=Z(941);const Yu=new N.RxE("7.6.1"),na="__angularfire_symbol__analyticsIsSupportedValue",Ac="__angularfire_symbol__analyticsIsSupported",Dc="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",bc="__angularfire_symbol__messagingIsSupportedValue",Tu="__angularfire_symbol__messagingIsSupported";function xa(A,P,V){if(P){if(1===P.length)return P[0];const _e=P.filter(Ke=>Ke.app===V);if(1===_e.length)return _e[0]}return V.container.getProvider(A).getImmediate({optional:!0})}globalThis[Ac]||(globalThis[Ac]=Id().then(A=>globalThis[na]=A).catch(()=>globalThis[na]=!1)),globalThis[Tu]||(globalThis[Tu]=Pi().then(A=>globalThis[bc]=A).catch(()=>globalThis[bc]=!1)),globalThis[ra]||(globalThis[ra]=ho().then(A=>globalThis[Dc]=A).catch(()=>globalThis[Dc]=!1));const Au=(A,P)=>{const V=P?[P]:(0,he.Dk)(),ee=[];return V.forEach(de=>{de.container.getProvider(A).instances.forEach(Ke=>{ee.includes(Ke)||ee.push(Ke)})}),ee};function Sc(){}class Pa{constructor(P,V=el){this.zone=P,this.delegate=V}now(){return this.delegate.now()}schedule(P,V,ee){const de=this.zone;return this.delegate.schedule(function(Ke){de.runGuarded(()=>{P.apply(this,[Ke])})},V,ee)}}class Ad{constructor(P){this.zone=P,this.task=null}call(P,V){const ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sc,{},Sc,Sc)),V.pipe((0,Ol.M)({next:ee,complete:ee,error:ee})).subscribe(P).add(ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ju=(()=>{class A{constructor(V){this.ngZone=V,this.outsideAngular=V.runOutsideAngular(()=>new Pa(Zone.current)),this.insideAngular=V.run(()=>new Pa(Zone.current,fh)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(V){return new(V||A)(N.KVO(N.SKi))},A.\u0275prov=N.jDH({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function No(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Ma(A){return No().ngZone.run(()=>A())}function Dd(A){return No(),function Rc(A){return function(V){return(V=V.lift(new Ad(A.ngZone))).pipe((0,Ts._)(A.outsideAngular),(0,bf.Q)(A.insideAngular))}}(No())(A)}const xc=(A,P)=>function(){const ee=arguments;return P&&setTimeout(()=>{"scheduled"===P.state&&P.invoke()},10),Ma(()=>A.apply(void 0,ee))},Pc=(A,P)=>function(){let V;const ee=arguments;for(let _e=0;_e<arguments.length;_e++)"function"==typeof ee[_e]&&(P&&(V||(V=Ma(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sc,{},Sc,Sc)))),ee[_e]=xc(ee[_e],V));const de=function As(A){return No().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,ee));if(!P){if(de instanceof Qu.c){const _e=No();return de.pipe((0,Ts._)(_e.outsideAngular),(0,bf.Q)(_e.insideAngular))}return Ma(()=>de)}return de instanceof Qu.c?de.pipe(Dd):de instanceof Promise?Ma(()=>new Promise((_e,Ke)=>de.then(_t=>Ma(()=>_e(_t)),_t=>Ma(()=>Ke(_t))))):"function"==typeof de&&V?function(){return setTimeout(()=>{V&&"scheduled"===V.state&&V.invoke()},10),de.apply(this,arguments)}:Ma(()=>de)}},1401:(ln,it,Z)=>{Z.d(it,{Am:()=>Br,FA:()=>je,Fy:()=>Xe,I9:()=>Pr,Im:()=>Ur,K3:()=>re,Ku:()=>Ir,T9:()=>bt,Tj:()=>Hn,Uj:()=>Ze,XA:()=>vt,ZQ:()=>kt,bD:()=>Cn,cY:()=>ht,dM:()=>xe,eX:()=>Dr,g:()=>Be,hp:()=>In,jZ:()=>Ne,lT:()=>Ut,lV:()=>Xn,nr:()=>Cr,p9:()=>sn,sr:()=>ot,tD:()=>gr,u:()=>ue,yU:()=>pn,zW:()=>wr});const Me=function(ae){const q=[];let Q=0;for(let W=0;W<ae.length;W++){let X=ae.charCodeAt(W);X<128?q[Q++]=X:X<2048?(q[Q++]=X>>6|192,q[Q++]=63&X|128):55296==(64512&X)&&W+1<ae.length&&56320==(64512&ae.charCodeAt(W+1))?(X=65536+((1023&X)<<10)+(1023&ae.charCodeAt(++W)),q[Q++]=X>>18|240,q[Q++]=X>>12&63|128,q[Q++]=X>>6&63|128,q[Q++]=63&X|128):(q[Q++]=X>>12|224,q[Q++]=X>>6&63|128,q[Q++]=63&X|128)}return q},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ae,q){if(!Array.isArray(ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let X=0;X<ae.length;X+=3){const we=ae[X],at=X+1<ae.length,Ft=at?ae[X+1]:0,Rn=X+2<ae.length,En=Rn?ae[X+2]:0;let br=(15&Ft)<<2|En>>6,Gs=63&En;Rn||(Gs=64,at||(br=64)),W.push(Q[we>>2],Q[(3&we)<<4|Ft>>4],Q[br],Q[Gs])}return W.join("")},encodeString(ae,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ae):this.encodeByteArray(Me(ae),q)},decodeString(ae,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ae):function(ae){const q=[];let Q=0,W=0;for(;Q<ae.length;){const X=ae[Q++];if(X<128)q[W++]=String.fromCharCode(X);else if(X>191&&X<224){const we=ae[Q++];q[W++]=String.fromCharCode((31&X)<<6|63&we)}else if(X>239&&X<365){const Rn=((7&X)<<18|(63&ae[Q++])<<12|(63&ae[Q++])<<6|63&ae[Q++])-65536;q[W++]=String.fromCharCode(55296+(Rn>>10)),q[W++]=String.fromCharCode(56320+(1023&Rn))}else{const we=ae[Q++],at=ae[Q++];q[W++]=String.fromCharCode((15&X)<<12|(63&we)<<6|63&at)}}return q.join("")}(this.decodeStringToByteArray(ae,q))},decodeStringToByteArray(ae,q){this.init_();const Q=q?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let X=0;X<ae.length;){const we=Q[ae.charAt(X++)],Ft=X<ae.length?Q[ae.charAt(X)]:0;++X;const En=X<ae.length?Q[ae.charAt(X)]:64;++X;const Fn=X<ae.length?Q[ae.charAt(X)]:64;if(++X,null==we||null==Ft||null==En||null==Fn)throw new K;W.push(we<<2|Ft>>4),64!==En&&(W.push(Ft<<4&240|En>>2),64!==Fn&&W.push(En<<6&192|Fn))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ae=0;ae<this.ENCODED_VALS.length;ae++)this.byteToCharMap_[ae]=this.ENCODED_VALS.charAt(ae),this.charToByteMap_[this.byteToCharMap_[ae]]=ae,this.byteToCharMapWebSafe_[ae]=this.ENCODED_VALS_WEBSAFE.charAt(ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ae]]=ae,ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ae)]=ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ae)]=ae)}}};class K extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ze=function(ae){return function(ae){const q=Me(ae);return re.encodeByteArray(q,!0)}(ae).replace(/\./g,"")},ue=function(ae){try{return re.decodeString(ae,!0)}catch(q){console.error("base64Decode failed: ",q)}return null},Dt=()=>{try{return function st(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ae=process.env.__FIREBASE_DEFAULTS__;return ae?JSON.parse(ae):void 0})()||(()=>{if(typeof document>"u")return;let ae;try{ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=ae&&ue(ae[1]);return q&&JSON.parse(q)})()}catch(ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ae}`)}},Hn=ae=>{var q,Q;return null===(Q=null===(q=Dt())||void 0===q?void 0:q.emulatorHosts)||void 0===Q?void 0:Q[ae]},pn=ae=>{const q=Hn(ae);if(!q)return;const Q=q.lastIndexOf(":");if(Q<=0||Q+1===q.length)throw new Error(`Invalid host ${q} with no separate hostname and port!`);const W=parseInt(q.substring(Q+1),10);return"["===q[0]?[q.substring(1,Q-1),W]:[q.substring(0,Q),W]},bt=()=>{var ae;return null===(ae=Dt())||void 0===ae?void 0:ae.config},vt=ae=>{var q;return null===(q=Dt())||void 0===q?void 0:q[`_${ae}`]};class ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Q)=>{this.resolve=q,this.reject=Q})}wrapCallback(q){return(Q,W)=>{Q?this.reject(Q):this.resolve(W),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Q):q(Q,W))}}}function Xe(ae,q){if(ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=q||"demo-project",X=ae.iat||0,we=ae.sub||ae.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const at=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:X,exp:X+3600,auth_time:X,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},ae);return[Ze(JSON.stringify({alg:"none",type:"JWT"})),Ze(JSON.stringify(at)),""].join(".")}function kt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function ot(){const ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ae&&void 0!==ae.id}function Xn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ut(){const ae=kt();return ae.indexOf("MSIE ")>=0||ae.indexOf("Trident/")>=0}function Cr(){return!function ft(){var ae;const q=null===(ae=Dt())||void 0===ae?void 0:ae.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wr(){try{return"object"==typeof indexedDB}catch{return!1}}function Dr(){return new Promise((ae,q)=>{try{let Q=!0;const W="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(W);X.onsuccess=()=>{X.result.close(),Q||self.indexedDB.deleteDatabase(W),ae(!0)},X.onupgradeneeded=()=>{Q=!1},X.onerror=()=>{var we;q((null===(we=X.error)||void 0===we?void 0:we.message)||"")}}catch(Q){q(Q)}})}function xe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Be extends Error{constructor(q,Q,W){super(Q),this.code=q,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(q,Q,W){this.service=q,this.serviceName=Q,this.errors=W}create(q,...Q){const W=Q[0]||{},X=`${this.service}/${q}`,we=this.errors[q],at=we?function pt(ae,q){return ae.replace(gt,(Q,W)=>{const X=q[W];return null!=X?String(X):`<${W}?>`})}(we,W):"Error";return new Be(X,`${this.serviceName}: ${at} (${X}).`,W)}}const gt=/\{\$([^}]+)}/g;function Ur(ae){for(const q in ae)if(Object.prototype.hasOwnProperty.call(ae,q))return!1;return!0}function Cn(ae,q){if(ae===q)return!0;const Q=Object.keys(ae),W=Object.keys(q);for(const X of Q){if(!W.includes(X))return!1;const we=ae[X],at=q[X];if(gn(we)&&gn(at)){if(!Cn(we,at))return!1}else if(we!==at)return!1}for(const X of W)if(!Q.includes(X))return!1;return!0}function gn(ae){return null!==ae&&"object"==typeof ae}function Br(ae){const q=[];for(const[Q,W]of Object.entries(ae))Array.isArray(W)?W.forEach(X=>{q.push(encodeURIComponent(Q)+"="+encodeURIComponent(X))}):q.push(encodeURIComponent(Q)+"="+encodeURIComponent(W));return q.length?"&"+q.join("&"):""}function Pr(ae){const q={};return ae.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[X,we]=W.split("=");q[decodeURIComponent(X)]=decodeURIComponent(we)}}),q}function In(ae){const q=ae.indexOf("?");if(!q)return"";const Q=ae.indexOf("#",q);return ae.substring(q,Q>0?Q:void 0)}function gr(ae,q){const Q=new ri(ae,q);return Q.subscribe.bind(Q)}class ri{constructor(q,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{q(this)}).catch(W=>{this.error(W)})}next(q){this.forEachObserver(Q=>{Q.next(q)})}error(q){this.forEachObserver(Q=>{Q.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Q,W){let X;if(void 0===q&&void 0===Q&&void 0===W)throw new Error("Missing Observer.");X=function Wr(ae,q){if("object"!=typeof ae||null===ae)return!1;for(const Q of q)if(Q in ae&&"function"==typeof ae[Q])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Q,complete:W},void 0===X.next&&(X.next=Kr),void 0===X.error&&(X.error=Kr),void 0===X.complete&&(X.complete=Kr);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),we}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,q)}sendOne(q,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Q(this.observers[q])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kr(){}const zi=1e3,Qe=2,nt=144e5,zt=.5;function sn(ae,q=zi,Q=Qe){const W=q*Math.pow(Q,ae),X=Math.round(zt*W*(Math.random()-.5)*2);return Math.min(nt,W+X)}function Ir(ae){return ae&&ae._delegate?ae._delegate:ae}},226:(ln,it,Z)=>{var N=Z(345),he=Z(6143),Ie=Z(6276);const Me=[{path:"",redirectTo:"auth/login",pathMatch:"full"},{path:"auth",loadChildren:()=>Promise.all([Z.e(341),Z.e(384)]).then(Z.bind(Z,5384)).then(Se=>Se.AuthModule)},{path:"dashboard",loadChildren:()=>Promise.all([Z.e(341),Z.e(814)]).then(Z.bind(Z,8814)).then(Se=>Se.DashboardModule)}];let Te=(()=>{class Se{static{this.\u0275fac=function(Mt){return new(Mt||Se)}}static{this.\u0275mod=Ie.$C({type:Se})}static{this.\u0275inj=Ie.G2t({imports:[he.iI.forRoot(Me),he.iI]})}}return Se})(),re=(()=>{class Se{constructor(){this.title="coop-app"}static{this.\u0275fac=function(Mt){return new(Mt||Se)}}static{this.\u0275cmp=Ie.VBU({type:Se,selectors:[["app-root"]],decls:1,vars:0,template:function(Mt,Tn){1&Mt&&Ie.nrm(0,"router-outlet")},dependencies:[he.n3]})}}return Se})();const K_firebase={apiKey:"AIzaSyCbw8b_ag8QyunuIJIXl24SCepm439uzVU",authDomain:"coop-pro.firebaseapp.com",projectId:"coop-pro",storageBucket:"coop-pro.firebasestorage.app",messagingSenderId:"770543345465",appId:"1:770543345465:web:33089459f3d6eba9b992e8",measurementId:"G-T4463ZST23"};var mt=Z(8934),Ze=Z(2595),ue=Z(9676);let ce=(()=>{class Se{static{this.\u0275fac=function(Mt){return new(Mt||Se)}}static{this.\u0275mod=Ie.$C({type:Se,bootstrap:[re]})}static{this.\u0275inj=Ie.G2t({imports:[(0,ue._q)(()=>(0,ue.xI)()),N.Bb,Te,(0,mt.MW)(()=>(0,mt.Wp)(K_firebase)),(0,Ze.hV)(()=>(0,Ze.aU)())]})}}return Se})();N.sG().bootstrapModule(ce).catch(Se=>console.error(Se))},4412:(ln,it,Z)=>{Z.d(it,{t:()=>he});var N=Z(1413);class he extends N.B{constructor(Me){super(),this._value=Me}get value(){return this.getValue()}_subscribe(Me){const Te=super._subscribe(Me);return!Te.closed&&Me.next(this._value),Te}getValue(){const{hasError:Me,thrownError:Te,_value:re}=this;if(Me)throw Te;return this._throwIfClosed(),re}next(Me){super.next(this._value=Me)}}},1985:(ln,it,Z)=>{Z.d(it,{c:()=>mt});var N=Z(7707),he=Z(8359),Ie=Z(3494),Me=Z(1203),Te=Z(1026),re=Z(8071),K=Z(9786);let mt=(()=>{class Se{constructor(st){st&&(this._subscribe=st)}lift(st){const Mt=new Se;return Mt.source=this,Mt.operator=st,Mt}subscribe(st,Mt,Tn){const fn=function ce(Se){return Se&&Se instanceof N.vU||function ue(Se){return Se&&(0,re.T)(Se.next)&&(0,re.T)(Se.error)&&(0,re.T)(Se.complete)}(Se)&&(0,he.Uv)(Se)}(st)?st:new N.Ms(st,Mt,Tn);return(0,K.Y)(()=>{const{operator:Dt,source:Hn}=this;fn.add(Dt?Dt.call(fn,Hn):Hn?this._subscribe(fn):this._trySubscribe(fn))}),fn}_trySubscribe(st){try{return this._subscribe(st)}catch(Mt){st.error(Mt)}}forEach(st,Mt){return new(Mt=Ze(Mt))((Tn,fn)=>{const Dt=new N.Ms({next:Hn=>{try{st(Hn)}catch(pn){fn(pn),Dt.unsubscribe()}},error:fn,complete:Tn});this.subscribe(Dt)})}_subscribe(st){var Mt;return null===(Mt=this.source)||void 0===Mt?void 0:Mt.subscribe(st)}[Ie.s](){return this}pipe(...st){return(0,Me.m)(st)(this)}toPromise(st){return new(st=Ze(st))((Mt,Tn)=>{let fn;this.subscribe(Dt=>fn=Dt,Dt=>Tn(Dt),()=>Mt(fn))})}}return Se.create=tt=>new Se(tt),Se})();function Ze(Se){var tt;return null!==(tt=Se??Te.$.Promise)&&void 0!==tt?tt:Promise}},1413:(ln,it,Z)=>{Z.d(it,{B:()=>K});var N=Z(1985),he=Z(8359);const Me=(0,Z(1853).L)(Ze=>function(){Ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=Z(7908),re=Z(9786);let K=(()=>{class Ze extends N.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ce){const Se=new mt(this,this);return Se.operator=ce,Se}_throwIfClosed(){if(this.closed)throw new Me}next(ce){(0,re.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Se of this.currentObservers)Se.next(ce)}})}error(ce){(0,re.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ce;const{observers:Se}=this;for(;Se.length;)Se.shift().error(ce)}})}complete(){(0,re.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ce}=this;for(;ce.length;)ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ce;return(null===(ce=this.observers)||void 0===ce?void 0:ce.length)>0}_trySubscribe(ce){return this._throwIfClosed(),super._trySubscribe(ce)}_subscribe(ce){return this._throwIfClosed(),this._checkFinalizedStatuses(ce),this._innerSubscribe(ce)}_innerSubscribe(ce){const{hasError:Se,isStopped:tt,observers:st}=this;return Se||tt?he.Kn:(this.currentObservers=null,st.push(ce),new he.yU(()=>{this.currentObservers=null,(0,Te.o)(st,ce)}))}_checkFinalizedStatuses(ce){const{hasError:Se,thrownError:tt,isStopped:st}=this;Se?ce.error(tt):st&&ce.complete()}asObservable(){const ce=new N.c;return ce.source=this,ce}}return Ze.create=(ue,ce)=>new mt(ue,ce),Ze})();class mt extends K{constructor(ue,ce){super(),this.destination=ue,this.source=ce}next(ue){var ce,Se;null===(Se=null===(ce=this.destination)||void 0===ce?void 0:ce.next)||void 0===Se||Se.call(ce,ue)}error(ue){var ce,Se;null===(Se=null===(ce=this.destination)||void 0===ce?void 0:ce.error)||void 0===Se||Se.call(ce,ue)}complete(){var ue,ce;null===(ce=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===ce||ce.call(ue)}_subscribe(ue){var ce,Se;return null!==(Se=null===(ce=this.source)||void 0===ce?void 0:ce.subscribe(ue))&&void 0!==Se?Se:he.Kn}}},7707:(ln,it,Z)=>{Z.d(it,{Ms:()=>Tn,vU:()=>Se});var N=Z(8071),he=Z(8359),Ie=Z(1026),Me=Z(5334),Te=Z(5343);const re=Ze("C",void 0,void 0);function Ze(bt,vt,ht){return{kind:bt,value:vt,error:ht}}var ue=Z(9270),ce=Z(9786);class Se extends he.yU{constructor(vt){super(),this.isStopped=!1,vt?(this.destination=vt,(0,he.Uv)(vt)&&vt.add(this)):this.destination=pn}static create(vt,ht,Xe){return new Tn(vt,ht,Xe)}next(vt){this.isStopped?Hn(function mt(bt){return Ze("N",bt,void 0)}(vt),this):this._next(vt)}error(vt){this.isStopped?Hn(function K(bt){return Ze("E",void 0,bt)}(vt),this):(this.isStopped=!0,this._error(vt))}complete(){this.isStopped?Hn(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(vt){this.destination.next(vt)}_error(vt){try{this.destination.error(vt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function st(bt,vt){return tt.call(bt,vt)}class Mt{constructor(vt){this.partialObserver=vt}next(vt){const{partialObserver:ht}=this;if(ht.next)try{ht.next(vt)}catch(Xe){fn(Xe)}}error(vt){const{partialObserver:ht}=this;if(ht.error)try{ht.error(vt)}catch(Xe){fn(Xe)}else fn(vt)}complete(){const{partialObserver:vt}=this;if(vt.complete)try{vt.complete()}catch(ht){fn(ht)}}}class Tn extends Se{constructor(vt,ht,Xe){let kt;if(super(),(0,N.T)(vt)||!vt)kt={next:vt??void 0,error:ht??void 0,complete:Xe??void 0};else{let Ne;this&&Ie.$.useDeprecatedNextContext?(Ne=Object.create(vt),Ne.unsubscribe=()=>this.unsubscribe(),kt={next:vt.next&&st(vt.next,Ne),error:vt.error&&st(vt.error,Ne),complete:vt.complete&&st(vt.complete,Ne)}):kt=vt}this.destination=new Mt(kt)}}function fn(bt){Ie.$.useDeprecatedSynchronousErrorHandling?(0,ce.l)(bt):(0,Me.m)(bt)}function Hn(bt,vt){const{onStoppedNotification:ht}=Ie.$;ht&&ue.f.setTimeout(()=>ht(bt,vt))}const pn={closed:!0,next:Te.l,error:function Dt(bt){throw bt},complete:Te.l}},8359:(ln,it,Z)=>{Z.d(it,{Kn:()=>re,yU:()=>Te,Uv:()=>K});var N=Z(8071);const Ie=(0,Z(1853).L)(Ze=>function(ce){Ze(this),this.message=ce?`${ce.length} errors occurred during unsubscription:\n${ce.map((Se,tt)=>`${tt+1}) ${Se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ce});var Me=Z(7908);class Te{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:ce}=this;if(ce)if(this._parentage=null,Array.isArray(ce))for(const st of ce)st.remove(this);else ce.remove(this);const{initialTeardown:Se}=this;if((0,N.T)(Se))try{Se()}catch(st){ue=st instanceof Ie?st.errors:[st]}const{_finalizers:tt}=this;if(tt){this._finalizers=null;for(const st of tt)try{mt(st)}catch(Mt){ue=ue??[],Mt instanceof Ie?ue=[...ue,...Mt.errors]:ue.push(Mt)}}if(ue)throw new Ie(ue)}}add(ue){var ce;if(ue&&ue!==this)if(this.closed)mt(ue);else{if(ue instanceof Te){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._finalizers=null!==(ce=this._finalizers)&&void 0!==ce?ce:[]).push(ue)}}_hasParent(ue){const{_parentage:ce}=this;return ce===ue||Array.isArray(ce)&&ce.includes(ue)}_addParent(ue){const{_parentage:ce}=this;this._parentage=Array.isArray(ce)?(ce.push(ue),ce):ce?[ce,ue]:ue}_removeParent(ue){const{_parentage:ce}=this;ce===ue?this._parentage=null:Array.isArray(ce)&&(0,Me.o)(ce,ue)}remove(ue){const{_finalizers:ce}=this;ce&&(0,Me.o)(ce,ue),ue instanceof Te&&ue._removeParent(this)}}Te.EMPTY=(()=>{const Ze=new Te;return Ze.closed=!0,Ze})();const re=Te.EMPTY;function K(Ze){return Ze instanceof Te||Ze&&"closed"in Ze&&(0,N.T)(Ze.remove)&&(0,N.T)(Ze.add)&&(0,N.T)(Ze.unsubscribe)}function mt(Ze){(0,N.T)(Ze)?Ze():Ze.unsubscribe()}},1026:(ln,it,Z)=>{Z.d(it,{$:()=>N});const N={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},983:(ln,it,Z)=>{Z.d(it,{w:()=>he});const he=new(Z(1985).c)(Te=>Te.complete())},8455:(ln,it,Z)=>{Z.d(it,{H:()=>vt});var N=Z(8750),he=Z(941),Ie=Z(6745),re=Z(1985),mt=Z(4761),Ze=Z(8071),ue=Z(5225);function Se(ht,Xe){if(!ht)throw new Error("Iterable cannot be null");return new re.c(kt=>{(0,ue.N)(kt,Xe,()=>{const Ne=ht[Symbol.asyncIterator]();(0,ue.N)(kt,Xe,()=>{Ne.next().then(ft=>{ft.done?kt.complete():kt.next(ft.value)})},0,!0)})})}var tt=Z(5055),st=Z(9858),Mt=Z(7441),Tn=Z(5397),fn=Z(7953),Dt=Z(591),Hn=Z(5196);function vt(ht,Xe){return Xe?function bt(ht,Xe){if(null!=ht){if((0,tt.l)(ht))return function Me(ht,Xe){return(0,N.Tg)(ht).pipe((0,Ie._)(Xe),(0,he.Q)(Xe))}(ht,Xe);if((0,Mt.X)(ht))return function K(ht,Xe){return new re.c(kt=>{let Ne=0;return Xe.schedule(function(){Ne===ht.length?kt.complete():(kt.next(ht[Ne++]),kt.closed||this.schedule())})})}(ht,Xe);if((0,st.y)(ht))return function Te(ht,Xe){return(0,N.Tg)(ht).pipe((0,Ie._)(Xe),(0,he.Q)(Xe))}(ht,Xe);if((0,fn.T)(ht))return Se(ht,Xe);if((0,Tn.x)(ht))return function ce(ht,Xe){return new re.c(kt=>{let Ne;return(0,ue.N)(kt,Xe,()=>{Ne=ht[mt.l](),(0,ue.N)(kt,Xe,()=>{let ft,jt;try{({value:ft,done:jt}=Ne.next())}catch(ot){return void kt.error(ot)}jt?kt.complete():kt.next(ft)},0,!0)}),()=>(0,Ze.T)(Ne?.return)&&Ne.return()})}(ht,Xe);if((0,Hn.U)(ht))return function pn(ht,Xe){return Se((0,Hn.C)(ht),Xe)}(ht,Xe)}throw(0,Dt.L)(ht)}(ht,Xe):(0,N.Tg)(ht)}},8750:(ln,it,Z)=>{Z.d(it,{Tg:()=>tt});var N=Z(1635),he=Z(7441),Ie=Z(9858),Me=Z(1985),Te=Z(5055),re=Z(7953),K=Z(591),mt=Z(5397),Ze=Z(5196),ue=Z(8071),ce=Z(5334),Se=Z(3494);function tt(bt){if(bt instanceof Me.c)return bt;if(null!=bt){if((0,Te.l)(bt))return function st(bt){return new Me.c(vt=>{const ht=bt[Se.s]();if((0,ue.T)(ht.subscribe))return ht.subscribe(vt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(bt);if((0,he.X)(bt))return function Mt(bt){return new Me.c(vt=>{for(let ht=0;ht<bt.length&&!vt.closed;ht++)vt.next(bt[ht]);vt.complete()})}(bt);if((0,Ie.y)(bt))return function Tn(bt){return new Me.c(vt=>{bt.then(ht=>{vt.closed||(vt.next(ht),vt.complete())},ht=>vt.error(ht)).then(null,ce.m)})}(bt);if((0,re.T)(bt))return Dt(bt);if((0,mt.x)(bt))return function fn(bt){return new Me.c(vt=>{for(const ht of bt)if(vt.next(ht),vt.closed)return;vt.complete()})}(bt);if((0,Ze.U)(bt))return function Hn(bt){return Dt((0,Ze.C)(bt))}(bt)}throw(0,K.L)(bt)}function Dt(bt){return new Me.c(vt=>{(function pn(bt,vt){var ht,Xe,kt,Ne;return(0,N.sH)(this,void 0,void 0,function*(){try{for(ht=(0,N.xN)(bt);!(Xe=yield ht.next()).done;)if(vt.next(Xe.value),vt.closed)return}catch(ft){kt={error:ft}}finally{try{Xe&&!Xe.done&&(Ne=ht.return)&&(yield Ne.call(ht))}finally{if(kt)throw kt.error}}vt.complete()})})(bt,vt).catch(ht=>vt.error(ht))})}},7673:(ln,it,Z)=>{Z.d(it,{of:()=>Ie});var N=Z(3794),he=Z(8455);function Ie(...Me){const Te=(0,N.lI)(Me);return(0,he.H)(Me,Te)}},4360:(ln,it,Z)=>{Z.d(it,{_:()=>he});var N=Z(7707);function he(Me,Te,re,K,mt){return new Ie(Me,Te,re,K,mt)}class Ie extends N.vU{constructor(Te,re,K,mt,Ze,ue){super(Te),this.onFinalize=Ze,this.shouldUnsubscribe=ue,this._next=re?function(ce){try{re(ce)}catch(Se){Te.error(Se)}}:super._next,this._error=mt?function(ce){try{mt(ce)}catch(Se){Te.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=K?function(){try{K()}catch(ce){Te.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(Te=this.onFinalize)||void 0===Te||Te.call(this))}}}},3294:(ln,it,Z)=>{Z.d(it,{F:()=>Me});var N=Z(3669),he=Z(9974),Ie=Z(4360);function Me(re,K=N.D){return re=re??Te,(0,he.N)((mt,Ze)=>{let ue,ce=!0;mt.subscribe((0,Ie._)(Ze,Se=>{const tt=K(Se);(ce||!re(ue,tt))&&(ce=!1,ue=tt,Ze.next(Se))}))})}function Te(re,K){return re===K}},6354:(ln,it,Z)=>{Z.d(it,{T:()=>Ie});var N=Z(9974),he=Z(4360);function Ie(Me,Te){return(0,N.N)((re,K)=>{let mt=0;re.subscribe((0,he._)(K,Ze=>{K.next(Me.call(Te,Ze,mt++))}))})}},6365:(ln,it,Z)=>{Z.d(it,{U:()=>Ie});var N=Z(1397),he=Z(3669);function Ie(Me=1/0){return(0,N.Z)(he.D,Me)}},1397:(ln,it,Z)=>{Z.d(it,{Z:()=>mt});var N=Z(6354),he=Z(8750),Ie=Z(9974),Me=Z(5225),Te=Z(4360),K=Z(8071);function mt(Ze,ue,ce=1/0){return(0,K.T)(ue)?mt((Se,tt)=>(0,N.T)((st,Mt)=>ue(Se,st,tt,Mt))((0,he.Tg)(Ze(Se,tt))),ce):("number"==typeof ue&&(ce=ue),(0,Ie.N)((Se,tt)=>function re(Ze,ue,ce,Se,tt,st,Mt,Tn){const fn=[];let Dt=0,Hn=0,pn=!1;const bt=()=>{pn&&!fn.length&&!Dt&&ue.complete()},vt=Xe=>Dt<Se?ht(Xe):fn.push(Xe),ht=Xe=>{st&&ue.next(Xe),Dt++;let kt=!1;(0,he.Tg)(ce(Xe,Hn++)).subscribe((0,Te._)(ue,Ne=>{tt?.(Ne),st?vt(Ne):ue.next(Ne)},()=>{kt=!0},void 0,()=>{if(kt)try{for(Dt--;fn.length&&Dt<Se;){const Ne=fn.shift();Mt?(0,Me.N)(ue,Mt,()=>ht(Ne)):ht(Ne)}bt()}catch(Ne){ue.error(Ne)}}))};return Ze.subscribe((0,Te._)(ue,vt,()=>{pn=!0,bt()})),()=>{Tn?.()}}(Se,tt,Ze,ce)))}},941:(ln,it,Z)=>{Z.d(it,{Q:()=>Me});var N=Z(5225),he=Z(9974),Ie=Z(4360);function Me(Te,re=0){return(0,he.N)((K,mt)=>{K.subscribe((0,Ie._)(mt,Ze=>(0,N.N)(mt,Te,()=>mt.next(Ze),re),()=>(0,N.N)(mt,Te,()=>mt.complete(),re),Ze=>(0,N.N)(mt,Te,()=>mt.error(Ze),re)))})}},6745:(ln,it,Z)=>{Z.d(it,{_:()=>he});var N=Z(9974);function he(Ie,Me=0){return(0,N.N)((Te,re)=>{re.add(Ie.schedule(()=>Te.subscribe(re),Me))})}},5558:(ln,it,Z)=>{Z.d(it,{n:()=>Me});var N=Z(8750),he=Z(9974),Ie=Z(4360);function Me(Te,re){return(0,he.N)((K,mt)=>{let Ze=null,ue=0,ce=!1;const Se=()=>ce&&!Ze&&mt.complete();K.subscribe((0,Ie._)(mt,tt=>{Ze?.unsubscribe();let st=0;const Mt=ue++;(0,N.Tg)(Te(tt,Mt)).subscribe(Ze=(0,Ie._)(mt,Tn=>mt.next(re?re(tt,Tn,Mt,st++):Tn),()=>{Ze=null,Se()}))},()=>{ce=!0,Se()}))})}},8141:(ln,it,Z)=>{Z.d(it,{M:()=>Te});var N=Z(8071),he=Z(9974),Ie=Z(4360),Me=Z(3669);function Te(re,K,mt){const Ze=(0,N.T)(re)||K||mt?{next:re,error:K,complete:mt}:re;return Ze?(0,he.N)((ue,ce)=>{var Se;null===(Se=Ze.subscribe)||void 0===Se||Se.call(Ze);let tt=!0;ue.subscribe((0,Ie._)(ce,st=>{var Mt;null===(Mt=Ze.next)||void 0===Mt||Mt.call(Ze,st),ce.next(st)},()=>{var st;tt=!1,null===(st=Ze.complete)||void 0===st||st.call(Ze),ce.complete()},st=>{var Mt;tt=!1,null===(Mt=Ze.error)||void 0===Mt||Mt.call(Ze,st),ce.error(st)},()=>{var st,Mt;tt&&(null===(st=Ze.unsubscribe)||void 0===st||st.call(Ze)),null===(Mt=Ze.finalize)||void 0===Mt||Mt.call(Ze)}))}):Me.D}},9270:(ln,it,Z)=>{Z.d(it,{f:()=>N});const N={setTimeout(he,Ie,...Me){const{delegate:Te}=N;return Te?.setTimeout?Te.setTimeout(he,Ie,...Me):setTimeout(he,Ie,...Me)},clearTimeout(he){const{delegate:Ie}=N;return(Ie?.clearTimeout||clearTimeout)(he)},delegate:void 0}},4761:(ln,it,Z)=>{Z.d(it,{l:()=>he});const he=function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(ln,it,Z)=>{Z.d(it,{s:()=>N});const N="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(ln,it,Z)=>{Z.d(it,{R0:()=>re,ms:()=>Me,lI:()=>Te});var N=Z(8071);function Ie(K){return K[K.length-1]}function Me(K){return(0,N.T)(Ie(K))?K.pop():void 0}function Te(K){return function he(K){return K&&(0,N.T)(K.schedule)}(Ie(K))?K.pop():void 0}function re(K,mt){return"number"==typeof Ie(K)?K.pop():mt}},3073:(ln,it,Z)=>{Z.d(it,{D:()=>Te});const{isArray:N}=Array,{getPrototypeOf:he,prototype:Ie,keys:Me}=Object;function Te(K){if(1===K.length){const mt=K[0];if(N(mt))return{args:mt,keys:null};if(function re(K){return K&&"object"==typeof K&&he(K)===Ie}(mt)){const Ze=Me(mt);return{args:Ze.map(ue=>mt[ue]),keys:Ze}}}return{args:K,keys:null}}},7908:(ln,it,Z)=>{function N(he,Ie){if(he){const Me=he.indexOf(Ie);0<=Me&&he.splice(Me,1)}}Z.d(it,{o:()=>N})},1853:(ln,it,Z)=>{function N(he){const Me=he(Te=>{Error.call(Te),Te.stack=(new Error).stack});return Me.prototype=Object.create(Error.prototype),Me.prototype.constructor=Me,Me}Z.d(it,{L:()=>N})},8496:(ln,it,Z)=>{function N(he,Ie){return he.reduce((Me,Te,re)=>(Me[Te]=Ie[re],Me),{})}Z.d(it,{e:()=>N})},9786:(ln,it,Z)=>{Z.d(it,{Y:()=>Ie,l:()=>Me});var N=Z(1026);let he=null;function Ie(Te){if(N.$.useDeprecatedSynchronousErrorHandling){const re=!he;if(re&&(he={errorThrown:!1,error:null}),Te(),re){const{errorThrown:K,error:mt}=he;if(he=null,K)throw mt}}else Te()}function Me(Te){N.$.useDeprecatedSynchronousErrorHandling&&he&&(he.errorThrown=!0,he.error=Te)}},5225:(ln,it,Z)=>{function N(he,Ie,Me,Te=0,re=!1){const K=Ie.schedule(function(){Me(),re?he.add(this.schedule(null,Te)):this.unsubscribe()},Te);if(he.add(K),!re)return K}Z.d(it,{N:()=>N})},3669:(ln,it,Z)=>{function N(he){return he}Z.d(it,{D:()=>N})},7441:(ln,it,Z)=>{Z.d(it,{X:()=>N});const N=he=>he&&"number"==typeof he.length&&"function"!=typeof he},7953:(ln,it,Z)=>{Z.d(it,{T:()=>he});var N=Z(8071);function he(Ie){return Symbol.asyncIterator&&(0,N.T)(Ie?.[Symbol.asyncIterator])}},8071:(ln,it,Z)=>{function N(he){return"function"==typeof he}Z.d(it,{T:()=>N})},5055:(ln,it,Z)=>{Z.d(it,{l:()=>Ie});var N=Z(3494),he=Z(8071);function Ie(Me){return(0,he.T)(Me[N.s])}},5397:(ln,it,Z)=>{Z.d(it,{x:()=>Ie});var N=Z(4761),he=Z(8071);function Ie(Me){return(0,he.T)(Me?.[N.l])}},9858:(ln,it,Z)=>{Z.d(it,{y:()=>he});var N=Z(8071);function he(Ie){return(0,N.T)(Ie?.then)}},5196:(ln,it,Z)=>{Z.d(it,{C:()=>Ie,U:()=>Me});var N=Z(1635),he=Z(8071);function Ie(Te){return(0,N.AQ)(this,arguments,function*(){const K=Te.getReader();try{for(;;){const{value:mt,done:Ze}=yield(0,N.N3)(K.read());if(Ze)return yield(0,N.N3)(void 0);yield yield(0,N.N3)(mt)}}finally{K.releaseLock()}})}function Me(Te){return(0,he.T)(Te?.getReader)}},9974:(ln,it,Z)=>{Z.d(it,{N:()=>Ie,S:()=>he});var N=Z(8071);function he(Me){return(0,N.T)(Me?.lift)}function Ie(Me){return Te=>{if(he(Te))return Te.lift(function(re){try{return Me(re,this)}catch(K){this.error(K)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(ln,it,Z)=>{Z.d(it,{I:()=>Me});var N=Z(6354);const{isArray:he}=Array;function Me(Te){return(0,N.T)(re=>function Ie(Te,re){return he(re)?Te(...re):Te(re)}(Te,re))}},5343:(ln,it,Z)=>{function N(){}Z.d(it,{l:()=>N})},1203:(ln,it,Z)=>{Z.d(it,{F:()=>he,m:()=>Ie});var N=Z(3669);function he(...Me){return Ie(Me)}function Ie(Me){return 0===Me.length?N.D:1===Me.length?Me[0]:function(re){return Me.reduce((K,mt)=>mt(K),re)}}},5334:(ln,it,Z)=>{Z.d(it,{m:()=>Ie});var N=Z(1026),he=Z(9270);function Ie(Me){he.f.setTimeout(()=>{const{onUnhandledError:Te}=N.$;if(!Te)throw Me;Te(Me)})}},591:(ln,it,Z)=>{function N(he){return new TypeError(`You provided ${null!==he&&"object"==typeof he?"an invalid object":`'${he}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Z.d(it,{L:()=>N})},177:(ln,it,Z)=>{Z.d(it,{AJ:()=>Qr,MD:()=>ma,N0:()=>Zi,QT:()=>Ie,Sm:()=>Mt,Sq:()=>pa,VF:()=>Te,Vy:()=>Ha,Xr:()=>ya,ZD:()=>Me,_b:()=>ha,aZ:()=>fn,bT:()=>uo,fw:()=>Tn,hb:()=>tt,hj:()=>mt,qQ:()=>re});var N=Z(6276);let he=null;function Ie(){return he}function Me(D){he||(he=D)}class Te{}const re=new N.nKC("DocumentToken");let K=(()=>{class D{historyGo(k){throw new Error("Not implemented")}static{this.\u0275fac=function(U){return new(U||D)}}static{this.\u0275prov=N.jDH({token:D,factory:function(){return(0,N.WQX)(Ze)},providedIn:"platform"})}}return D})();const mt=new N.nKC("Location Initialized");let Ze=(()=>{class D extends K{constructor(){super(),this._doc=(0,N.WQX)(re),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ie().getBaseHref(this._doc)}onPopState(k){const U=Ie().getGlobalEventTarget(this._doc,"window");return U.addEventListener("popstate",k,!1),()=>U.removeEventListener("popstate",k)}onHashChange(k){const U=Ie().getGlobalEventTarget(this._doc,"window");return U.addEventListener("hashchange",k,!1),()=>U.removeEventListener("hashchange",k)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(k){this._location.pathname=k}pushState(k,U,Y){this._history.pushState(k,U,Y)}replaceState(k,U,Y){this._history.replaceState(k,U,Y)}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}static{this.\u0275fac=function(U){return new(U||D)}}static{this.\u0275prov=N.jDH({token:D,factory:function(){return new D},providedIn:"platform"})}}return D})();function ue(D,j){if(0==D.length)return j;if(0==j.length)return D;let k=0;return D.endsWith("/")&&k++,j.startsWith("/")&&k++,2==k?D+j.substring(1):1==k?D+j:D+"/"+j}function ce(D){const j=D.match(/#|\?|$/),k=j&&j.index||D.length;return D.slice(0,k-("/"===D[k-1]?1:0))+D.slice(k)}function Se(D){return D&&"?"!==D[0]?"?"+D:D}let tt=(()=>{class D{historyGo(k){throw new Error("Not implemented")}static{this.\u0275fac=function(U){return new(U||D)}}static{this.\u0275prov=N.jDH({token:D,factory:function(){return(0,N.WQX)(Mt)},providedIn:"root"})}}return D})();const st=new N.nKC("appBaseHref");let Mt=(()=>{class D extends tt{constructor(k,U){super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=U??this._platformLocation.getBaseHrefFromDOM()??(0,N.WQX)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return ue(this._baseHref,k)}path(k=!1){const U=this._platformLocation.pathname+Se(this._platformLocation.search),Y=this._platformLocation.hash;return Y&&k?`${U}${Y}`:U}pushState(k,U,Y,He){const et=this.prepareExternalUrl(Y+Se(He));this._platformLocation.pushState(k,U,et)}replaceState(k,U,Y,He){const et=this.prepareExternalUrl(Y+Se(He));this._platformLocation.replaceState(k,U,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}static{this.\u0275fac=function(U){return new(U||D)(N.KVO(K),N.KVO(st,8))}}static{this.\u0275prov=N.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})(),Tn=(()=>{class D extends tt{constructor(k,U){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=U&&(this._baseHref=U)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let U=this._platformLocation.hash;return null==U&&(U="#"),U.length>0?U.substring(1):U}prepareExternalUrl(k){const U=ue(this._baseHref,k);return U.length>0?"#"+U:U}pushState(k,U,Y,He){let et=this.prepareExternalUrl(Y+Se(He));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.pushState(k,U,et)}replaceState(k,U,Y,He){let et=this.prepareExternalUrl(Y+Se(He));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.replaceState(k,U,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}static{this.\u0275fac=function(U){return new(U||D)(N.KVO(K),N.KVO(st,8))}}static{this.\u0275prov=N.jDH({token:D,factory:D.\u0275fac})}}return D})(),fn=(()=>{class D{constructor(k){this._subject=new N.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const U=this._locationStrategy.getBaseHref();this._basePath=function bt(D){if(new RegExp("^(https?:)?//").test(D)){const[,k]=D.split(/\/\/[^\/]+/);return k}return D}(ce(pn(U))),this._locationStrategy.onPopState(Y=>{this._subject.emit({url:this.path(!0),pop:!0,state:Y.state,type:Y.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,U=""){return this.path()==this.normalize(k+Se(U))}normalize(k){return D.stripTrailingSlash(function Hn(D,j){if(!D||!j.startsWith(D))return j;const k=j.substring(D.length);return""===k||["/",";","?","#"].includes(k[0])?k:j}(this._basePath,pn(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,U="",Y=null){this._locationStrategy.pushState(Y,"",k,U),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Se(U)),Y)}replaceState(k,U="",Y=null){this._locationStrategy.replaceState(Y,"",k,U),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Se(U)),Y)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){this._locationStrategy.historyGo?.(k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(U=>{this._notifyUrlChangeListeners(U.url,U.state)})),()=>{const U=this._urlChangeListeners.indexOf(k);this._urlChangeListeners.splice(U,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",U){this._urlChangeListeners.forEach(Y=>Y(k,U))}subscribe(k,U,Y){return this._subject.subscribe({next:k,error:U,complete:Y})}static{this.normalizeQueryParams=Se}static{this.joinWithSlash=ue}static{this.stripTrailingSlash=ce}static{this.\u0275fac=function(U){return new(U||D)(N.KVO(tt))}}static{this.\u0275prov=N.jDH({token:D,factory:function(){return function Dt(){return new fn((0,N.KVO)(tt))}()},providedIn:"root"})}}return D})();function pn(D){return D.replace(/\/index.html$/,"")}function ha(D,j){j=encodeURIComponent(j);for(const k of D.split(";")){const U=k.indexOf("="),[Y,He]=-1==U?[k,""]:[k.slice(0,U),k.slice(U+1)];if(Y.trim()===j)return decodeURIComponent(He)}return null}class cu{constructor(j,k,U,Y){this.$implicit=j,this.ngForOf=k,this.index=U,this.count=Y}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pa=(()=>{class D{set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}constructor(k,U,Y){this._viewContainer=k,this._template=U,this._differs=Y,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const U=this._viewContainer;k.forEachOperation((Y,He,et)=>{if(null==Y.previousIndex)U.createEmbeddedView(this._template,new cu(Y.item,this._ngForOf,-1,-1),null===et?void 0:et);else if(null==et)U.remove(null===He?void 0:He);else if(null!==He){const Jt=U.get(He);U.move(Jt,et),Ji(Jt,Y)}});for(let Y=0,He=U.length;Y<He;Y++){const Jt=U.get(Y).context;Jt.index=Y,Jt.count=He,Jt.ngForOf=this._ngForOf}k.forEachIdentityChange(Y=>{Ji(U.get(Y.currentIndex),Y)})}static ngTemplateContextGuard(k,U){return!0}static{this.\u0275fac=function(U){return new(U||D)(N.rXU(N.c1b),N.rXU(N.C4Q),N.rXU(N._q3))}}static{this.\u0275dir=N.FsC({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return D})();function Ji(D,j){D.context.$implicit=j.item}let uo=(()=>{class D{constructor(k,U){this._viewContainer=k,this._context=new co,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=U}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){lu("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){lu("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,U){return!0}static{this.\u0275fac=function(U){return new(U||D)(N.rXU(N.c1b),N.rXU(N.C4Q))}}static{this.\u0275dir=N.FsC({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return D})();class co{constructor(){this.$implicit=null,this.ngIf=null}}function lu(D,j){if(j&&!j.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,N.Tbb)(j)}'.`)}let ma=(()=>{class D{static{this.\u0275fac=function(U){return new(U||D)}}static{this.\u0275mod=N.$C({type:D})}static{this.\u0275inj=N.G2t({})}}return D})();const Qr="browser",Ot="server";function Ha(D){return D===Ot}let ya=(()=>{class D{static{this.\u0275prov=(0,N.jDH)({token:D,providedIn:"root",factory:()=>new xs((0,N.KVO)(re),window)})}}return D})();class xs{constructor(j,k){this.document=j,this.window=k,this.offset=()=>[0,0]}setOffset(j){this.offset=Array.isArray(j)?()=>j:j}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(j){this.supportsScrolling()&&this.window.scrollTo(j[0],j[1])}scrollToAnchor(j){if(!this.supportsScrolling())return;const k=function vn(D,j){const k=D.getElementById(j)||D.getElementsByName(j)[0];if(k)return k;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const U=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let Y=U.currentNode;for(;Y;){const He=Y.shadowRoot;if(He){const et=He.getElementById(j)||He.querySelector(`[name="${j}"]`);if(et)return et}Y=U.nextNode()}}return null}(this.document,j);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(j){this.supportsScrolling()&&(this.window.history.scrollRestoration=j)}scrollToElement(j){const k=j.getBoundingClientRect(),U=k.left+this.window.pageXOffset,Y=k.top+this.window.pageYOffset,He=this.offset();this.window.scrollTo(U-He[0],Y-He[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Zi{}},6276:(ln,it,Z)=>{Z.d(it,{iLQ:()=>Qp,sZ2:()=>Xy,hnV:()=>gw,Hbi:()=>aC,o8S:()=>Pu,BIS:()=>sA,gRc:()=>ry,Ql9:()=>Bb,Ocv:()=>Bc,Z63:()=>Qf,aKT:()=>Hd,uvJ:()=>ul,zcH:()=>Gd,bkB:()=>bu,$GK:()=>cn,nKC:()=>Qe,zZn:()=>To,_q3:()=>ud,MKu:()=>ng,xe9:()=>hf,Co$:()=>ub,Vns:()=>af,NEm:()=>nu,SKi:()=>Vs,Xx1:()=>Pf,Agw:()=>Vg,PLl:()=>cE,sFG:()=>pA,_9s:()=>i_,czy:()=>Md,kdw:()=>nl,C4Q:()=>qm,NYb:()=>Qx,giA:()=>Nv,xvI:()=>yA,RxE:()=>mA,c1b:()=>zp,gXe:()=>Hi,L39:()=>dr,Ol2:()=>Bm,w6W:()=>cb,oH4:()=>sd,Rfq:()=>ht,WQX:()=>Gn,QuC:()=>Ws,fpN:()=>rg,HJs:()=>fC,O8t:()=>pr,H3F:()=>Rv,H8p:()=>sE,$K3:()=>Ub,KH2:()=>Jd,wOt:()=>ot,WHO:()=>_w,e01:()=>vw,H5H:()=>xm,mq5:()=>OD,JZv:()=>vr,LfX:()=>Pr,plB:()=>lw,jNT:()=>V_,zjR:()=>_0,TL$:()=>jT,Tbb:()=>pn,Vt3:()=>s0,GFd:()=>dp,OA$:()=>pi,Jv_:()=>lv,aNF:()=>Li,R7$:()=>xA,BMQ:()=>um,AVh:()=>ID,wni:()=>Av,VBU:()=>Gc,FsC:()=>qc,jDH:()=>Cn,G2t:()=>ni,$C:()=>Ko,EJ8:()=>ga,rXU:()=>ip,nrm:()=>Ep,k0s:()=>m0,j41:()=>Ip,RV6:()=>y0,xGo:()=>Cf,KVO:()=>jr,kS0:()=>xc,QTQ:()=>g_,bIt:()=>U_,lsd:()=>cw,XpG:()=>DR,Y8G:()=>Qd,mGM:()=>Tv,Njj:()=>Eu,eBV:()=>dh,n$t:()=>eA,DNE:()=>vm,EFF:()=>z_,JRh:()=>H_,SpI:()=>G_,Lme:()=>bm,E5c:()=>T0});var N=Z(1413),he=Z(8359),Ie=Z(1985),Me=Z(6365),Te=Z(8750),re=Z(983),K=Z(3794),mt=Z(8455),ue=Z(4412),ce=Z(7673),Se=Z(7707),tt=Z(9974);function st(i={}){const{connector:o=(()=>new N.B),resetOnError:u=!0,resetOnComplete:l=!0,resetOnRefCountZero:d=!0}=i;return f=>{let _,E,R,L=0,H=!1,ie=!1;const fe=()=>{E?.unsubscribe(),E=void 0},Ae=()=>{fe(),_=R=void 0,H=ie=!1},Je=()=>{const yt=_;Ae(),yt?.unsubscribe()};return(0,tt.N)((yt,Vt)=>{L++,!ie&&!H&&fe();const nn=R=R??o();Vt.add(()=>{L--,0===L&&!ie&&!H&&(E=Mt(Je,d))}),nn.subscribe(Vt),!_&&L>0&&(_=new Se.Ms({next:lt=>nn.next(lt),error:lt=>{ie=!0,fe(),E=Mt(Ae,u,lt),nn.error(lt)},complete:()=>{H=!0,fe(),E=Mt(Ae,l),nn.complete()}}),(0,Te.Tg)(yt).subscribe(_))})(f)}}function Mt(i,o,...u){if(!0===o)return void i();if(!1===o)return;const l=new Se.Ms({next:()=>{l.unsubscribe(),i()}});return(0,Te.Tg)(o(...u)).subscribe(l)}var Tn=Z(5558),fn=Z(3294);function Dt(i){for(let o in i)if(i[o]===Dt)return o;throw Error("Could not find renamed property on target object.")}function Hn(i,o){for(const u in o)o.hasOwnProperty(u)&&!i.hasOwnProperty(u)&&(i[u]=o[u])}function pn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(pn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function bt(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const vt=Dt({__forward_ref__:Dt});function ht(i){return i.__forward_ref__=ht,i.toString=function(){return pn(this())},i}function Xe(i){return kt(i)?i():i}function kt(i){return"function"==typeof i&&i.hasOwnProperty(vt)&&i.__forward_ref__===ht}function Ne(i){return i&&!!i.\u0275providers}const jt="https://g.co/ng/security#xss";class ot extends Error{constructor(o,u){super(function Xn(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,u)),this.code=o}}function ze(i){return"string"==typeof i?i:null==i?"":String(i)}function wr(i,o){throw new ot(-201,!1)}function fr(i,o){null==i&&function Tt(i,o,u,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Cn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ni(i){return{providers:i.providers||[],imports:i.imports||[]}}function Br(i){return In(i,ri)||In(i,Wr)}function Pr(i){return null!==Br(i)}function In(i,o){return i.hasOwnProperty(o)?i[o]:null}function gr(i){return i&&(i.hasOwnProperty(Mr)||i.hasOwnProperty(Kr))?i[Mr]:null}const ri=Dt({\u0275prov:Dt}),Mr=Dt({\u0275inj:Dt}),Wr=Dt({ngInjectableDef:Dt}),Kr=Dt({ngInjectorDef:Dt});var cn=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(cn||{});let or;function An(i){const o=or;return or=i,o}function Qi(i,o,u){const l=Br(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&cn.Optional?null:void 0!==o?o:void wr(pn(i))}const vr=globalThis;class Qe{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Cn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const we={},at="__NG_DI_FLAG__",Ft="ngTempTokenPath",En=/\n/gm,Fn="__source";let br;function Yi(i){const o=br;return br=i,o}function ja(i,o=cn.Default){if(void 0===br)throw new ot(-203,!1);return null===br?Qi(i,void 0,o):br.get(i,o&cn.Optional?null:void 0,o)}function jr(i,o=cn.Default){return(function ms(){return or}()||ja)(Xe(i),o)}function Gn(i,o=cn.Default){return jr(i,da(o))}function da(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Go(i){const o=[];for(let u=0;u<i.length;u++){const l=Xe(i[u]);if(Array.isArray(l)){if(0===l.length)throw new ot(900,!1);let d,f=cn.Default;for(let _=0;_<l.length;_++){const E=l[_],R=Ro(E);"number"==typeof R?-1===R?d=E.token:f|=R:d=E}o.push(jr(d,f))}else o.push(jr(l))}return o}function Ss(i,o){return i[at]=o,i.prototype[at]=o,i}function Ro(i){return i[at]}function os(i){return{toString:i}.toString()}var ha=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(ha||{}),Hi=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Hi||{});const Xi={},Nn=[],Wo=Dt({\u0275cmp:Dt}),fa=Dt({\u0275dir:Dt}),cu=Dt({\u0275pipe:Dt}),pa=Dt({\u0275mod:Dt}),Ji=Dt({\u0275fac:Dt}),as=Dt({__NG_ELEMENT_ID__:Dt}),uo=Dt({__NG_ENV_ID__:Dt});function co(i,o,u){let l=i.length;for(;;){const d=i.indexOf(o,u);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}u=d+1}}function lu(i,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const f=u[l++],_=u[l++],E=u[l++];i.setAttribute(o,_,E,f)}else{const f=d,_=u[++l];ye(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),l++}}return l}function ge(i){return 3===i||4===i||6===i}function ye(i){return 64===i.charCodeAt(0)}function Oe(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||rt(i,u,d,null,-1===u||2===u?o[++l]:null)}}return i}function rt(i,o,u,l,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===u){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,u),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}const Ct="ng-template";function dn(i,o,u){let l=0,d=!0;for(;l<i.length;){let f=i[l++];if("string"==typeof f&&d){const _=i[l++];if(u&&"class"===f&&-1!==co(_.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<i.length&&"string"==typeof(f=i[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function qn(i){return 4===i.type&&i.value!==Ct}function Ln(i,o,u){return o===(4!==i.type||u?i.value:Ct)}function mr(i,o,u){let l=4;const d=i.attrs||[],f=function ku(i){for(let o=0;o<i.length;o++)if(ge(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const R=o[E];if("number"!=typeof R){if(!_)if(4&l){if(l=2|1&l,""!==R&&!Ln(i,R,u)||""===R&&1===o.length){if(Nr(l))return!1;_=!0}}else{const L=8&l?R:o[++E];if(8&l&&null!==i.attrs){if(!dn(i.attrs,L,u)){if(Nr(l))return!1;_=!0}continue}const ie=vi(8&l?"class":R,d,qn(i),u);if(-1===ie){if(Nr(l))return!1;_=!0;continue}if(""!==L){let fe;fe=ie>f?"":d[ie+1].toLowerCase();const Ae=8&l?fe:null;if(Ae&&-1!==co(Ae,L,0)||2&l&&L!==fe){if(Nr(l))return!1;_=!0}}}}else{if(!_&&!Nr(l)&&!Nr(R))return!1;if(_&&Nr(R))continue;_=!1,l=R|1&l}}return Nr(l)||_}function Nr(i){return 0==(1&i)}function vi(i,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function Il(i,o){let u=i.indexOf(4);if(u>-1)for(u++;u<i.length;){const l=i[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,i)}function Ii(i,o,u=!1){for(let l=0;l<o.length;l++)if(mr(i,o[l],u))return!0;return!1}function du(i,o){return i?":not("+o.trim()+")":o}function lc(i){let o=i[0],u=1,l=2,d="",f=!1;for(;u<i.length;){let _=i[u];if("string"==typeof _)if(2&l){const E=i[++u];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Nr(_)&&(o+=du(f,d),d=""),l=_,f=f||!Nr(l);u++}return""!==d&&(o+=du(f,d)),o}function Gc(i){return os(()=>{const o=Ks(i),u={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===ha.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Hi.Emulated,styles:i.styles||Nn,_:null,schemas:i.schemas||null,tView:null,id:""};Lu(u);const l=i.dependencies;return u.directiveDefs=Qo(l,!1),u.pipeDefs=Qo(l,!0),u.id=function ma(i){let o=0;const u=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function dc(i){return Dn(i)||ai(i)}function hc(i){return null!==i}function Ko(i){return os(()=>({type:i.type,bootstrap:i.bootstrap||Nn,declarations:i.declarations||Nn,imports:i.imports||Nn,exports:i.exports||Nn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function za(i,o){if(null==i)return Xi;const u={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=l,o&&(o[d]=f)}return u}function qc(i){return os(()=>{const o=Ks(i);return Lu(o),o})}function ga(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Dn(i){return i[Wo]||null}function ai(i){return i[fa]||null}function Ei(i){return i[cu]||null}function Ws(i){const o=Dn(i)||ai(i)||Ei(i);return null!==o&&o.standalone}function yr(i,o){const u=i[pa]||null;if(!u&&!0===o)throw new Error(`Type ${pn(i)} does not have '\u0275mod' property.`);return u}function Ks(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Xi,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Nn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:za(i.inputs,o),outputs:za(i.outputs)}}function Lu(i){i.features?.forEach(o=>o(i))}function Qo(i,o){if(!i)return null;const u=o?Ei:dc;return()=>("function"==typeof i?i():i).map(l=>u(l)).filter(hc)}const Qr=0,Ot=1,_n=2,ar=3,Rs=4,Ha=5,Ri=6,lo=7,hi=8,ya=9,xs=10,vn=11,ho=12,Zi=13,Vu=14,Or=15,Ga=16,fo=17,Ps=18,_a=19,Ms=20,Ns=21,ys=22,va=23,Yo=24,Wn=25,Uu=1,El=2,Os=7,Ys=9,Oi=11;function es(i){return Array.isArray(i)&&"object"==typeof i[Uu]}function zr(i){return Array.isArray(i)&&!0===i[Uu]}function Xo(i){return 0!=(4&i.flags)}function _s(i){return i.componentOffset>-1}function Gi(i){return 1==(1&i.flags)}function cs(i){return!!i.template}function fc(i){return 0!=(512&i[_n])}function Rt(i,o){return i.hasOwnProperty(Ji)?i[Ji]:null}let wi=null,xi=!1;function vs(i){const o=wi;return wi=i,o}const qa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function pc(i){if(!mu(i)||i.dirty){if(!i.producerMustRecompute(i)&&!zu(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function $u(i){i.dirty=!0,function Wa(i){if(void 0===i.liveConsumerNode)return;const o=xi;xi=!0;try{for(const u of i.liveConsumerNode)u.dirty||$u(u)}finally{xi=o}}(i),i.consumerMarkedDirty?.(i)}function Ka(i){return i&&(i.nextProducerIndex=0),vs(i)}function Po(i,o){if(vs(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(mu(i))for(let u=i.nextProducerIndex;u<i.producerNode.length;u++)Jo(i.producerNode[u],i.producerIndexOfThis[u]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function zu(i){ls(i);for(let o=0;o<i.producerNode.length;o++){const u=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==u.version||(pc(u),l!==u.version))return!0}return!1}function un(i){if(ls(i),mu(i))for(let o=0;o<i.producerNode.length;o++)Jo(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Jo(i,o){if(function Hu(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),ls(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)Jo(i.producerNode[l],i.producerIndexOfThis[l]);const u=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[u],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[u],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];ls(d),d.producerIndexOfThis[l]=o}}function mu(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function ls(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let j=null;function pr(i){const o=vs(null);try{return i()}finally{vs(o)}}const ii=()=>{},Xs=(()=>({...qa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:ii}))();class fi{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function pi(){return mo}function mo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Is),De}function De(){const i=yo(this),o=i?.current;if(o){const u=i.previous;if(u===Xi)i.previous=o;else for(let l in o)u[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Is(i,o,u,l){const d=this.declaredInputs[u],f=yo(i)||function mc(i,o){return i[gc]=o}(i,{previous:Xi,current:null}),_=f.current||(f.current={}),E=f.previous,R=E[d];_[d]=new fi(R&&R.currentValue,o,E===Xi),i[l]=o}pi.ngInherit=!0;const gc="__ngSimpleChanges__";function yo(i){return i[gc]||null}const Pi=function(i,o,u){};function Lr(i){for(;Array.isArray(i);)i=i[Qr];return i}function _u(i,o){return Lr(o[i])}function ci(i,o){return Lr(o[i.index])}function Zs(i,o){return i.data[o]}function ki(i,o){const u=o[i];return es(u)?u:u[Qr]}function $n(i,o){return null==o?null:i[o]}function Yc(i){i[fo]=0}function gi(i){1024&i[_n]||(i[_n]|=1024,mi(i,1))}function _o(i){1024&i[_n]&&(i[_n]&=-1025,mi(i,-1))}function mi(i,o){let u=i[ar];if(null===u)return;u[Ha]+=o;let l=u;for(u=u[ar];null!==u&&(1===o&&1===l[Ha]||-1===o&&0===l[Ha]);)u[Ha]+=o,l=u,u=u[ar]}const mn={lFrame:Lt(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ba(){return mn.bindingsEnabled}function dt(){return mn.lFrame.lView}function _r(){return mn.lFrame.tView}function dh(i){return mn.lFrame.contextLView=i,i[hi]}function Eu(i){return mn.lFrame.contextLView=null,i}function Fi(){let i=Sa();for(;null!==i&&64===i.type;)i=i.parent;return i}function Sa(){return mn.lFrame.currentTNode}function Io(i,o){const u=mn.lFrame;u.currentTNode=i,u.isParent=o}function Xa(){return mn.lFrame.isParent}function eo(){return mn.lFrame.bindingIndex}function Zo(){return mn.lFrame.bindingIndex++}function ea(i){const o=mn.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,u}function Rl(i,o){const u=mn.lFrame;u.bindingIndex=u.bindingRootIndex=i,C(o)}function C(i){mn.lFrame.currentDirectiveIndex=i}function x(){return mn.lFrame.currentQueryIndex}function F(i){mn.lFrame.currentQueryIndex=i}function G(i){const o=i[Ot];return 2===o.type?o.declTNode:1===o.type?i[Ri]:null}function se(i,o,u){if(u&cn.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||u&cn.Host||(d=G(f),null===d||(f=f[Vu],10&d.type))););if(null===d)return!1;o=d,i=f}const l=mn.lFrame=Fe();return l.currentTNode=o,l.lView=i,!0}function Ue(i){const o=Fe(),u=i[Ot];mn.lFrame=o,o.currentTNode=u.firstChild,o.lView=i,o.tView=u,o.contextLView=i,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Fe(){const i=mn.lFrame,o=null===i?null:i.child;return null===o?Lt(i):o}function Lt(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function bn(){const i=mn.lFrame;return mn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Zn=bn;function er(){const i=bn();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function li(){return mn.lFrame.selectedIndex}function ta(i){mn.lFrame.selectedIndex=i}function tr(){const i=mn.lFrame;return Zs(i.tView,i.selectedIndex)}let Pl=!0;function Id(){return Pl}function wo(i){Pl=i}function Ml(i,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const f=i.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:R,ngAfterViewChecked:L,ngOnDestroy:H}=f;_&&(i.contentHooks??=[]).push(-u,_),E&&((i.contentHooks??=[]).push(u,E),(i.contentCheckHooks??=[]).push(u,E)),R&&(i.viewHooks??=[]).push(-u,R),L&&((i.viewHooks??=[]).push(u,L),(i.viewCheckHooks??=[]).push(u,L)),null!=H&&(i.destroyHooks??=[]).push(u,H)}}function Ja(i,o,u){Ku(i,o,3,u)}function ji(i,o,u,l){(3&i[_n])===u&&Ku(i,o,u,l)}function Tc(i,o){let u=i[_n];(3&u)===o&&(u&=8191,u+=1,i[_n]=u)}function Ku(i,o,u,l){const f=l??-1,_=o.length-1;let E=0;for(let R=void 0!==l?65535&i[fo]:0;R<_;R++)if("number"==typeof o[R+1]){if(E=o[R],null!=l&&E>=l)break}else o[R]<0&&(i[fo]+=65536),(E<f||-1==f)&&(Ed(i,u,o,R),i[fo]=(4294901760&i[fo])+R+2),R++}function Tf(i,o){Pi(4,i,o);const u=vs(null);try{o.call(i)}finally{vs(u),Pi(5,i,o)}}function Ed(i,o,u,l){const d=u[l]<0,f=u[l+1],E=i[d?-u[l]:u[l]];d?i[_n]>>13<i[fo]>>16&&(3&i[_n])===o&&(i[_n]+=8192,Tf(E,f)):Tf(E,f)}const Rr=-1;class Ra{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function wd(i){return i!==Rr}function ns(i){return 32767&i}function Mo(i,o){let u=function Ai(i){return i>>16}(i),l=o;for(;u>0;)l=l[Vu],u--;return l}let el=!0;function hh(i){const o=el;return el=i,o}const ph=255,Qu=5;let Ol=0;const Ts={};function Yu(i,o){const u=Ac(i,o);if(-1!==u)return u;const l=o[Ot];l.firstCreatePass&&(i.injectorIndex=o.length,na(l.data,i),na(o,null),na(l.blueprint,null));const d=Dc(i,o),f=i.injectorIndex;if(wd(d)){const _=ns(d),E=Mo(d,o),R=E[Ot].data;for(let L=0;L<8;L++)o[f+L]=E[_+L]|R[_+L]}return o[f+8]=d,f}function na(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ac(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Dc(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=Rc(d),null===l)return Rr;if(u++,d=d[Vu],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return Rr}function ra(i,o,u){!function bf(i,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(as)&&(l=u[as]),null==l&&(l=u[as]=Ol++);const d=l&ph;o.data[i+(d>>Qu)]|=1<<d}(i,o,u)}function Tu(i,o,u){if(u&cn.Optional||void 0!==i)return i;wr()}function Cc(i,o,u,l){if(u&cn.Optional&&void 0===l&&(l=null),!(u&(cn.Self|cn.Host))){const d=i[ya],f=An(void 0);try{return d?d.get(o,l,u&cn.Optional):Qi(o,l,u&cn.Optional)}finally{An(f)}}return Tu(l,0,u)}function Xu(i,o,u,l=cn.Default,d){if(null!==i){if(2048&o[_n]&&!(l&cn.Self)){const _=function Dd(i,o,u,l,d){let f=i,_=o;for(;null!==f&&null!==_&&2048&_[_n]&&!(512&_[_n]);){const E=ia(f,_,u,l|cn.Self,Ts);if(E!==Ts)return E;let R=f.parent;if(!R){const L=_[Ms];if(L){const H=L.get(u,Ts,l);if(H!==Ts)return H}R=Rc(_),_=_[Vu]}f=R}return d}(i,o,u,l,Ts);if(_!==Ts)return _}const f=ia(i,o,u,l,Ts);if(f!==Ts)return f}return Cc(o,u,l,d)}function ia(i,o,u,l,d){const f=function Sc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(as)?i[as]:void 0;return"number"==typeof o?o>=0?o&ph:Ma:o}(u);if("function"==typeof f){if(!se(o,i,l))return l&cn.Host?Tu(d,0,l):Cc(o,u,l,d);try{let _;if(_=f(l),null!=_||l&cn.Optional)return _;wr()}finally{Zn()}}else if("number"==typeof f){let _=null,E=Ac(i,o),R=Rr,L=l&cn.Host?o[Or][Ri]:null;for((-1===E||l&cn.SkipSelf)&&(R=-1===E?Dc(i,o):o[E+8],R!==Rr&&Ad(l,!1)?(_=o[Ot],E=ns(R),o=Mo(R,o)):E=-1);-1!==E;){const H=o[Ot];if(Pa(f,E,H.data)){const ie=Td(E,o,u,_,l,L);if(ie!==Ts)return ie}R=o[E+8],R!==Rr&&Ad(l,o[Ot].data[E+8]===L)&&Pa(f,E,o)?(_=H,E=ns(R),o=Mo(R,o)):E=-1}}return d}function Td(i,o,u,l,d,f){const _=o[Ot],E=_.data[i+8],H=xa(E,_,u,null==l?_s(E)&&el:l!=_&&0!=(3&E.type),d&cn.Host&&f===E);return null!==H?Au(o,_,H,E):Ts}function xa(i,o,u,l,d){const f=i.providerIndexes,_=o.data,E=1048575&f,R=i.directiveStart,H=f>>20,fe=d?E+H:i.directiveEnd;for(let Ae=l?E:E+H;Ae<fe;Ae++){const Je=_[Ae];if(Ae<R&&u===Je||Ae>=R&&Je.type===u)return Ae}if(d){const Ae=_[R];if(Ae&&cs(Ae)&&Ae.type===u)return R}return null}function Au(i,o,u,l){let d=i[u];const f=o.data;if(function ws(i){return i instanceof Ra}(d)){const _=d;_.resolving&&function hr(i,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ot(-200,`Circular dependency in DI detected for ${i}${u}`)}(function Ut(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ze(i)}(f[u]));const E=hh(_.canSeeViewProviders);_.resolving=!0;const L=_.injectImpl?An(_.injectImpl):null;se(i,l,cn.Default);try{d=i[u]=_.factory(void 0,f,i,l),o.firstCreatePass&&u>=l.directiveStart&&function mI(i,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=mo(o);(u.preOrderHooks??=[]).push(i,_),(u.preOrderCheckHooks??=[]).push(i,_)}d&&(u.preOrderHooks??=[]).push(0-i,d),f&&((u.preOrderHooks??=[]).push(i,f),(u.preOrderCheckHooks??=[]).push(i,f))}(u,f[u],o)}finally{null!==L&&An(L),hh(E),_.resolving=!1,Zn()}}return d}function Pa(i,o,u){return!!(u[o+(i>>Qu)]&1<<i)}function Ad(i,o){return!(i&cn.Self||i&cn.Host&&o)}class As{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Xu(this._tNode,this._lView,o,da(l),u)}}function Ma(){return new As(Fi(),dt())}function Cf(i){return os(()=>{const o=i.prototype.constructor,u=o[Ji]||gh(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[Ji]||gh(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function gh(i){return kt(i)?()=>{const o=gh(Xe(i));return o&&o()}:Rt(i)}function Rc(i){const o=i[Ot],u=o.type;return 2===u?o.declTNode:1===u?i[Ri]:null}function xc(i){return function bc(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const u=i.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const f=u[d];if(ge(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Fi(),i)}const A="__parameters__";function de(i,o,u){return os(()=>{const l=function ee(i){return function(...u){if(i){const l=i(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return E.annotation=_,E;function E(R,L,H){const ie=R.hasOwnProperty(A)?R[A]:Object.defineProperty(R,A,{value:[]})[A];for(;ie.length<=H;)ie.push(null);return(ie[H]=ie[H]||[]).push(_),R}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Zu(i,o){i.forEach(u=>Array.isArray(u)?Zu(u,o):o(u))}function Sf(i,o,u){o>=i.length?i.push(u):i.splice(o,0,u)}function bd(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Lo(i,o,u){let l=Cd(i,o);return l>=0?i[1|l]=u:(l=~l,function Sy(i,o,u,l){let d=i.length;if(d==o)i.push(u,l);else if(1===d)i.push(l,i[0]),i[0]=u;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=u,i[o+1]=l}}(i,l,o,u)),l}function Eg(i,o){const u=Cd(i,o);if(u>=0)return i[1|u]}function Cd(i,o){return function Fl(i,o,u){let l=0,d=i.length>>u;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<u];if(o===_)return f<<u;_>o?d=f:l=f+1}return~(d<<u)}(i,o,1)}const Pf=Ss(de("Optional"),8),nl=Ss(de("SkipSelf"),4);function Di(i){return 128==(128&i.flags)}var Md=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Md||{});const T=new Map;let p=0;const wn="__ngContext__";function tn(i,o){es(o)?(i[wn]=o[_a],function S(i){T.set(i[_a],i)}(o)):i[wn]=o}let sl;function Ul(i,o){return sl(i,o)}function Od(i){const o=i[ar];return zr(o)?o[ar]:o}function xT(i){return RI(i[ho])}function Ag(i){return RI(i[Rs])}function RI(i){for(;null!==i&&!zr(i);)i=i[Rs];return i}function zf(i,o,u,l,d){if(null!=l){let f,_=!1;zr(l)?f=l:es(l)&&(_=!0,l=l[Qr]);const E=Lr(l);0===i&&null!==u?null==d?OT(o,u,E):Fd(o,u,E,d||null,!0):1===i&&null!==u?Fd(o,u,E,d||null,!0):2===i?function Bl(i,o,u){const l=By(i,o);l&&function Dg(i,o,u,l){i.removeChild(o,u,l)}(i,l,o,u)}(o,E,_):3===i&&o.destroyNode(E),null!=f&&function _S(i,o,u,l,d){const f=u[Os];f!==Lr(u)&&zf(o,i,l,f,d);for(let E=Oi;E<u.length;E++){const R=u[E];qf(R[Ot],R,i,o,l,f)}}(o,i,f,u,d)}}function Hf(i,o,u){return i.createElement(o,u)}function NI(i,o){const u=i[Ys],l=u.indexOf(o);_o(o),u.splice(l,1)}function kd(i,o){if(i.length<=Oi)return;const u=Oi+o,l=i[u];if(l){const d=l[Ga];null!==d&&d!==i&&NI(d,l),o>0&&(i[u-1][Rs]=l[Rs]);const f=bd(i,Oi+o);!function Gf(i,o){qf(i,o,o[vn],2,null,null),o[Qr]=null,o[Ri]=null}(l[Ot],l);const _=f[Ps];null!==_&&_.detachView(f[Ot]),l[ar]=null,l[Rs]=null,l[_n]&=-129}return l}function ic(i,o){if(!(256&o[_n])){const u=o[vn];o[va]&&un(o[va]),o[Yo]&&un(o[Yo]),u.destroyNode&&qf(i,o,u,3,null,null),function Ds(i){let o=i[ho];if(!o)return Vy(i[Ot],i);for(;o;){let u=null;if(es(o))u=o[ho];else{const l=o[Oi];l&&(u=l)}if(!u){for(;o&&!o[Rs]&&o!==i;)es(o)&&Vy(o[Ot],o),o=o[ar];null===o&&(o=i),es(o)&&Vy(o[Ot],o),u=o&&o[Rs]}o=u}}(o)}}function Vy(i,o){if(!(256&o[_n])){o[_n]&=-129,o[_n]|=256,function OI(i,o){let u;if(null!=i&&null!=(u=i.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof Ra)){const f=u[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=d[f[_]],R=f[_+1];Pi(4,E,R);try{R.call(E)}finally{Pi(5,E,R)}}else{Pi(4,d,f);try{f.call(d)}finally{Pi(5,d,f)}}}}}(i,o),function NT(i,o){const u=i.cleanup,l=o[lo];if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const _=u[f+3];_>=0?l[_]():l[-_].unsubscribe(),f+=2}else u[f].call(l[u[f+1]]);null!==l&&(o[lo]=null);const d=o[Ns];if(null!==d){o[Ns]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[Ot].type&&o[vn].destroy();const u=o[Ga];if(null!==u&&zr(o[ar])){u!==o[ar]&&NI(u,o);const l=o[Ps];null!==l&&l.detachView(i)}!function J(i){T.delete(i[_a])}(o)}}function Uy(i,o,u){return function kI(i,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[Qr];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=i.data[l.directiveStart+d];if(f===Hi.None||f===Hi.Emulated)return null}return ci(l,u)}}(i,o.parent,u)}function Fd(i,o,u,l,d){i.insertBefore(o,u,l,d)}function OT(i,o,u){i.appendChild(o,u)}function kT(i,o,u,l,d){null!==l?Fd(i,o,u,l,d):OT(i,o,u)}function By(i,o){return i.parentNode(o)}let VI,GI,Ch,LI=function FI(i,o,u){return 40&i.type?ci(i,u):null};function jy(i,o,u,l){const d=Uy(i,l,o),f=o[vn],E=function bg(i,o,u){return LI(i,o,u)}(l.parent||o[Ri],l,o);if(null!=d)if(Array.isArray(u))for(let R=0;R<u.length;R++)kT(f,d,u[R],E,!1);else kT(f,d,u,E,!1);void 0!==VI&&VI(f,l,o,u,d)}function Cg(i,o){if(null!==o){const u=o.type;if(3&u)return ci(o,i);if(4&u)return ol(-1,i[o.index]);if(8&u){const l=o.child;if(null!==l)return Cg(i,l);{const d=i[o.index];return zr(d)?ol(-1,d):Lr(d)}}if(32&u)return Ul(o,i)()||Lr(i[o.index]);{const l=VT(i,o);return null!==l?Array.isArray(l)?l[0]:Cg(Od(i[Or]),l):Cg(i,o.next)}}return null}function VT(i,o){return null!==o?i[Or][Ri].projection[o.projection]:null}function ol(i,o){const u=Oi+i+1;if(u<o.length){const l=o[u],d=l[Ot].firstChild;if(null!==d)return Cg(l,d)}return o[Os]}function jI(i,o,u,l,d,f,_){for(;null!=u;){const E=l[u.index],R=u.type;if(_&&0===o&&(E&&tn(Lr(E),l),u.flags|=2),32!=(32&u.flags))if(8&R)jI(i,o,u.child,l,d,f,!1),zf(o,i,d,E,f);else if(32&R){const L=Ul(u,l);let H;for(;H=L();)zf(o,i,d,H,f);zf(o,i,d,E,f)}else 16&R?$I(i,o,l,u,d,f):zf(o,i,d,E,f);u=_?u.projectionNext:u.next}}function qf(i,o,u,l,d,f){jI(u,l,i.firstChild,o,d,f,!1)}function $I(i,o,u,l,d,f){const _=u[Or],R=_[Ri].projection[l.projection];if(Array.isArray(R))for(let L=0;L<R.length;L++)zf(o,i,d,R[L],f);else{let L=R;const H=_[ar];Di(l)&&(L.flags|=128),jI(i,o,L,H,d,f,!0)}}function Ld(i,o,u){""===u?i.removeAttribute(o,"class"):i.setAttribute(o,"class",u)}function Vd(i,o,u){const{mergedAttrs:l,classes:d,styles:f}=u;null!==l&&lu(i,o,l),null!==d&&Ld(i,o,d),null!==f&&function $y(i,o,u){i.setAttribute(o,"style",u)}(i,o,f)}function jT(i){GI=i}function Rh(i){return function Sh(){if(void 0===Ch&&(Ch=null,vr.trustedTypes))try{Ch=vr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ch}()?.createScriptURL(i)||i}class zT{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jt})`}}function Za(i){return i instanceof zT?i.changingThisBreaksApplicationSecurity:i}function sc(i,o){const u=function GT(i){return i instanceof zT&&i.getTypeName()||null}(i);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${jt})`)}return u===o}const zy=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Mh=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Mh||{});function ZI(i){const o=Ng();return o?o.sanitize(Mh.URL,i)||"":sc(i,"URL")?Za(i):function QI(i){return(i=String(i)).match(zy)?i:"unsafe:"+i}(ze(i))}function eE(i){const o=Ng();if(o)return Rh(o.sanitize(Mh.RESOURCE_URL,i)||"");if(sc(i,"ResourceURL"))return Rh(Za(i));throw new ot(904,!1)}function eA(i,o,u){return function ZT(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?eE:ZI}(o,u)(i)}function Ng(){const i=dt();return i&&i[xs].sanitizer}const Qf=new Qe("ENVIRONMENT_INITIALIZER"),tA=new Qe("INJECTOR",-1),nE=new Qe("INJECTOR_DEF_TYPES");class $l{get(o,u=we){if(u===we){const l=new Error(`NullInjectorError: No provider for ${pn(o)}!`);throw l.name="NullInjectorError",l}return u}}function nA(...i){return{\u0275providers:rE(0,i),\u0275fromNgModule:!0}}function rE(i,...o){const u=[],l=new Set;let d;const f=_=>{u.push(_)};return Zu(o,_=>{const E=_;Og(E,f,[],l)&&(d||=[],d.push(E))}),void 0!==d&&rA(d,f),u}function rA(i,o){for(let u=0;u<i.length;u++){const{ngModule:l,providers:d}=i[u];iE(d,f=>{o(f,l)})}}function Og(i,o,u,l){if(!(i=Xe(i)))return!1;let d=null,f=gr(i);const _=!f&&Dn(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const R=i.ngModule;if(f=gr(R),!f)return!1;d=R}const E=l.has(d);if(_){if(E)return!1;if(l.add(d),_.dependencies){const R="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const L of R)Og(L,o,u,l)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let L;l.add(d);try{Zu(f.imports,H=>{Og(H,o,u,l)&&(L||=[],L.push(H))})}finally{}void 0!==L&&rA(L,o)}if(!E){const L=Rt(d)||(()=>new d);o({provide:d,useFactory:L,deps:Nn},d),o({provide:nE,useValue:d,multi:!0},d),o({provide:Qf,useValue:()=>jr(d),multi:!0},d)}const R=f.providers;if(null!=R&&!E){const L=i;iE(R,H=>{o(H,L)})}}}return d!==i&&void 0!==i.providers}function iE(i,o){for(let u of i)Ne(u)&&(u=u.\u0275providers),Array.isArray(u)?iE(u,o):o(u)}const RS=Dt({provide:String,useValue:Dt});function kg(i){return null!==i&&"object"==typeof i&&RS in i}function Nh(i){return"function"==typeof i}const sE=new Qe("Set Injector scope."),Xf={},PS={};let Jf;function Oh(){return void 0===Jf&&(Jf=new $l),Jf}class ul{}class kh extends ul{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lg(o,_=>this.processProvider(_)),this.records.set(tA,Fh(void 0,this)),d.has("environment")&&this.records.set(ul,Fh(void 0,this));const f=this.records.get(sE);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(nE.multi,Nn,cn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=Yi(this),l=An(void 0);try{return o()}finally{Yi(u),An(l)}}get(o,u=we,l=cn.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(uo))return o[uo](this);l=da(l);const f=Yi(this),_=An(void 0);try{if(!(l&cn.SkipSelf)){let R=this.records.get(o);if(void 0===R){const L=function Yy(i){return"function"==typeof i||"object"==typeof i&&i instanceof Qe}(o)&&Br(o);R=L&&this.injectableDefInScope(L)?Fh(cl(o),Xf):null,this.records.set(o,R)}if(null!=R)return this.hydrate(o,R)}return(l&cn.Self?Oh():this.parent).get(o,u=l&cn.Optional&&u===we?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[Ft]=E[Ft]||[]).unshift(pn(o)),f)throw E;return function qo(i,o,u,l){const d=i[Ft];throw o[Fn]&&d.unshift(o[Fn]),i.message=function Mn(i,o,u,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=pn(o);if(Array.isArray(o))d=o.map(pn).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):pn(E)))}d=`{${f.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${i.replace(En,"\n  ")}`}("\n"+i.message,d,u,l),i.ngTokenPath=d,i[Ft]=null,i}(E,o,"R3InjectorError",this.source)}throw E}finally{An(_),Yi(f)}}resolveInjectorInitializers(){const o=Yi(this),u=An(void 0);try{const d=this.get(Qf.multi,Nn,cn.Self);for(const f of d)f()}finally{Yi(o),An(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(pn(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ot(205,!1)}processProvider(o){let u=Nh(o=Xe(o))?o:Xe(o&&o.provide);const l=function aE(i){return kg(i)?Fh(void 0,i.useValue):Fh(Qy(i),Xf)}(o);if(Nh(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Fh(void 0,Xf,!0),d.factory=()=>Go(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===Xf&&(u.value=PS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Fg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Xe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function cl(i){const o=Br(i),u=null!==o?o.factory:Rt(i);if(null!==u)return u;if(i instanceof Qe)throw new ot(204,!1);if(i instanceof Function)return function oE(i){const o=i.length;if(o>0)throw function mh(i,o){const u=[];for(let l=0;l<i;l++)u.push(o);return u}(o,"?"),new ot(204,!1);const u=function Vn(i){return i&&(i[ri]||i[Wr])||null}(i);return null!==u?()=>u.factory(i):()=>new i}(i);throw new ot(204,!1)}function Qy(i,o,u){let l;if(Nh(i)){const d=Xe(i);return Rt(d)||cl(d)}if(kg(i))l=()=>Xe(i.useValue);else if(function iA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Go(i.deps||[]));else if(function to(i){return!(!i||!i.useExisting)}(i))l=()=>jr(Xe(i.useExisting));else{const d=Xe(i&&(i.useClass||i.provide));if(!function uE(i){return!!i.deps}(i))return Rt(d)||cl(d);l=()=>new d(...Go(i.deps))}return l}function Fh(i,o,u=!1){return{factory:i,value:o,multi:u?[]:void 0}}function Lg(i,o){for(const u of i)Array.isArray(u)?Lg(u,o):u&&Ne(u)?Lg(u.\u0275providers,o):o(u)}const Xy=new Qe("AppId",{providedIn:"root",factory:()=>MS}),MS="ng",cE=new Qe("Platform Initializer"),Vg=new Qe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sA=new Qe("CSP nonce",{providedIn:"root",factory:()=>function bh(){if(void 0!==GI)return GI;if(typeof document<"u")return document;throw new ot(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let hE=(i,o,u)=>null;function zg(i,o,u=!1){return hE(i,o,u)}class n_{}class r_{}class OS{resolveComponentFactory(o){throw function gE(i){const o=Error(`No component factory found for ${pn(i)}.`);return o.ngComponent=i,o}(o)}}let no=(()=>{class i{static{this.NULL=new OS}}return i})();function kS(){return Vh(Fi(),dt())}function Vh(i,o){return new Hd(ci(i,o))}let Hd=(()=>{class i{constructor(u){this.nativeElement=u}static{this.__NG_ELEMENT_ID__=kS}}return i})();function Wg(i){return i instanceof Hd?i.nativeElement:i}class i_{}let pA=(()=>{class i{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function gA(){const i=dt(),u=ki(Fi().index,i);return(es(u)?u:i)[vn]}()}}return i})(),FS=(()=>{class i{static{this.\u0275prov=Cn({token:i,providedIn:"root",factory:()=>null})}}return i})();class mA{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const yA=new mA("16.2.12"),mE={};function s_(i,o=null,u=null,l){const d=o_(i,o,u,l);return d.resolveInjectorInitializers(),d}function o_(i,o=null,u=null,l,d=new Set){const f=[u||Nn,nA(i)];return l=l||("object"==typeof i?void 0:pn(i)),new kh(f,o||Oh(),l||null,d)}let To=(()=>{class i{static{this.THROW_IF_NOT_FOUND=we}static{this.NULL=new $l}static create(u,l){if(Array.isArray(u))return s_({name:""},l,u,"");{const d=u.name??"";return s_({name:d},u.parent,u.providers,d)}}static{this.\u0275prov=Cn({token:i,providedIn:"any",factory:()=>jr(tA)})}static{this.__NG_ELEMENT_ID__=-1}}return i})();function Yg(i){return i.ngOriginalError}class Gd{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Yg(o);for(;u&&Yg(u);)u=Yg(u);return u||null}}function Xg(i){return o=>{setTimeout(i,void 0,o)}}const bu=class US extends N.B{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,f=u||(()=>null),_=l;if(o&&"object"==typeof o){const R=o;d=R.next?.bind(R),f=R.error?.bind(R),_=R.complete?.bind(R)}this.__isAsync&&(f=Xg(f),d&&(d=Xg(d)),_&&(_=Xg(_)));const E=super.subscribe({next:d,error:f,complete:_});return o instanceof he.yU&&o.add(E),E}};function a_(...i){}class Vs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bu(!1),this.onMicrotaskEmpty=new bu(!1),this.onStable=new bu(!1),this.onError=new bu(!1),typeof Zone>"u")throw new ot(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function vA(){const i="function"==typeof vr.requestAnimationFrame;let o=vr[i?"requestAnimationFrame":"setTimeout"],u=vr[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function EA(i){const o=()=>{!function IA(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(vr,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,TE(i),i.isCheckStableRunning=!0,wE(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),TE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,f,_,E)=>{if(function jS(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(E))return u.invokeTask(d,f,_,E);try{return u_(i),u.invokeTask(d,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),wA(i)}},onInvoke:(u,l,d,f,_,E,R)=>{try{return u_(i),u.invoke(d,f,_,E,R)}finally{i.shouldCoalesceRunChangeDetection&&o(),wA(i)}},onHasTask:(u,l,d,f)=>{u.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,TE(i),wE(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,l,d,f)=>(u.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new ot(909,!1)}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new ot(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,BS,a_,a_);try{return f.runTask(_,u,l)}finally{f.cancelTask(_)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const BS={};function wE(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function TE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function u_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function wA(i){i._nesting--,wE(i)}class AE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bu,this.onMicrotaskEmpty=new bu,this.onStable=new bu,this.onError=new bu}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const TA=new Qe("",{providedIn:"root",factory:c_});function c_(){const i=Gn(Vs);let o=!0;return function Ze(...i){const o=(0,K.lI)(i),u=(0,K.R0)(i,1/0),l=i;return l.length?1===l.length?(0,Te.Tg)(l[0]):(0,Me.U)(u)((0,mt.H)(l,o)):re.w}(new Ie.c(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),new Ie.c(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const _=i.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}}).pipe(st()))}function kc(i){return i instanceof Function?i():i}let d_=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Cn({token:i,providedIn:"root",factory:()=>new i})}}return i})();function ll(i){for(;i;){i[_n]|=64;const o=Od(i);if(fc(i)&&!o)return i;i=o}return null}const CE=new Qe("",{providedIn:"root",factory:()=>!1});let p_=null;function NE(i,o){return i[o]??Hl()}function OE(i,o){const u=Hl();u.producerNode?.length&&(i[o]=p_,u.lView=i,p_=kE())}const RA={...qa,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{ll(i.lView)},lView:null};function kE(){return Object.create(RA)}function Hl(){return p_??=kE(),p_}const nr={};function xA(i){PA(_r(),dt(),li()+i,!1)}function PA(i,o,u,l){if(!l)if(3==(3&o[_n])){const f=i.preOrderCheckHooks;null!==f&&Ja(o,f,u)}else{const f=i.preOrderHooks;null!==f&&ji(o,f,0,u)}ta(u)}function ip(i,o=cn.Default){const u=dt();return null===u?jr(i,o):Xu(Fi(),u,Xe(i),o)}function g_(){throw new Error("invalid")}function sp(i,o,u,l,d,f,_,E,R,L,H){const ie=o.blueprint.slice();return ie[Qr]=d,ie[_n]=140|l,(null!==L||i&&2048&i[_n])&&(ie[_n]|=2048),Yc(ie),ie[ar]=ie[Vu]=i,ie[hi]=u,ie[xs]=_||i&&i[xs],ie[vn]=E||i&&i[vn],ie[ya]=R||i&&i[ya]||null,ie[Ri]=f,ie[_a]=function y(){return p++}(),ie[ys]=H,ie[Ms]=L,ie[Or]=2==o.type?i[Or]:ie,ie}function $h(i,o,u,l,d){let f=i.data[o];if(null===f)f=function Zg(i,o,u,l,d){const f=Sa(),_=Xa(),R=i.data[o]=function zE(i,o,u,l,d,f){let _=o?o.injectorIndex:-1,E=0;return function Ca(){return null!==mn.skipHydrationRootTNode}()&&(E|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,u,o,l,d);return null===i.firstChild&&(i.firstChild=R),null!==f&&(_?null==f.child&&null!==R.parent&&(f.child=R):null===f.next&&(f.next=R,R.prev=f)),R}(i,o,u,l,d),function Sl(){return mn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=u,f.value=l,f.attrs=d;const _=function wu(){const i=mn.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Io(f,!0),f}function zh(i,o,u,l){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function m_(i,o,u,l,d){const f=NE(o,va),_=li(),E=2&l;try{ta(-1),E&&o.length>Wn&&PA(i,o,Wn,!1),Pi(E?2:0,d);const L=E?f:null,H=Ka(L);try{null!==L&&(L.dirty=!1),u(l,d)}finally{Po(L,H)}}finally{E&&null===o[va]&&OE(o,va),ta(_),Pi(E?3:1,d)}}function FE(i,o,u){if(Xo(o)){const l=vs(null);try{const f=o.directiveEnd;for(let _=o.directiveStart;_<f;_++){const E=i.data[_];E.contentQueries&&E.contentQueries(1,u[_],_)}}finally{vs(l)}}}function em(i,o,u){ba()&&(function WE(i,o,u,l){const d=u.directiveStart,f=u.directiveEnd;_s(u)&&function JE(i,o,u){const l=ci(o,i),d=y_(u);let _=16;u.signals?_=4096:u.onPush&&(_=64);const E=ap(i,sp(i,d,null,_,l,o,null,i[xs].rendererFactory.createRenderer(l,u),null,null,null));i[o.index]=E}(o,u,i.data[d+u.componentOffset]),i.firstCreatePass||Yu(u,o),tn(l,o);const _=u.initialInputs;for(let E=d;E<f;E++){const R=i.data[E],L=Au(o,i,E,u);tn(L,o),null!==_&&FA(0,E-d,L,R,0,_),cs(R)&&(ki(u.index,o)[hi]=Au(o,i,E,u))}}(i,o,u,ci(u,o)),64==(64&u.flags)&&kA(i,o,u))}function LE(i,o,u=ci){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?u(o,i):i[_];i[d++]=E}}}function y_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=VE(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function VE(i,o,u,l,d,f,_,E,R,L,H){const ie=Wn+l,fe=ie+d,Ae=function UE(i,o){const u=[];for(let l=0;l<o;l++)u.push(l<i?null:nr);return u}(ie,fe),Je="function"==typeof L?L():L;return Ae[Ot]={type:i,blueprint:Ae,template:u,queries:null,viewQuery:E,declTNode:o,data:Ae.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:R,consts:Je,incompleteFirstPass:!1,ssrId:H}}let jE=i=>null;function NA(i,o,u,l){for(let d in i)if(i.hasOwnProperty(d)){u=null===u?{}:u;const f=i[d];null===l?__(u,o,d,f):l.hasOwnProperty(d)&&__(u,o,l[d],f)}return u}function __(i,o,u,l){i.hasOwnProperty(u)?i[u].push(o,l):i[u]=[o,l]}function tm(i,o,u,l){if(ba()){const d=null===l?null:{"":-1},f=function QS(i,o){const u=i.directiveRegistry;let l=null,d=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];if(Ii(o,_.selectors,!1))if(l||(l=[]),cs(_))if(null!==_.findHostDirectiveDefs){const E=[];d=d||new Map,_.findHostDirectiveDefs(_,E,d),l.unshift(...E,_),QE(i,o,E.length)}else l.unshift(_),QE(i,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,l,d),l.push(_)}return null===l?null:[l,d]}(i,u);let _,E;null===f?_=E=null:[_,E]=f,null!==_&&OA(i,o,u,_,d,E),d&&function YE(i,o,u){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new ot(-301,!1);l.push(o[d],f)}}}(u,l,d)}u.mergedAttrs=Oe(u.mergedAttrs,u.attrs)}function OA(i,o,u,l,d,f){for(let L=0;L<l.length;L++)ra(Yu(u,o),i,l[L].type);!function XE(i,o,u){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+u,i.providerIndexes=o}(u,i.data.length,l.length);for(let L=0;L<l.length;L++){const H=l[L];H.providersResolver&&H.providersResolver(H)}let _=!1,E=!1,R=zh(i,o,l.length,null);for(let L=0;L<l.length;L++){const H=l[L];u.mergedAttrs=Oe(u.mergedAttrs,H.hostAttrs),XS(i,u,o,R,H),YS(R,H,d),null!==H.contentQueries&&(u.flags|=4),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(u.flags|=64);const ie=H.type.prototype;!_&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((i.preOrderHooks??=[]).push(u.index),_=!0),!E&&(ie.ngOnChanges||ie.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(u.index),E=!0),R++}!function WS(i,o,u){const d=o.directiveEnd,f=i.data,_=o.attrs,E=[];let R=null,L=null;for(let H=o.directiveStart;H<d;H++){const ie=f[H],fe=u?u.get(ie):null,Je=fe?fe.outputs:null;R=NA(ie.inputs,H,R,fe?fe.inputs:null),L=NA(ie.outputs,H,L,Je);const yt=null===R||null===_||qn(o)?null:LA(R,H,_);E.push(yt)}null!==R&&(R.hasOwnProperty("class")&&(o.flags|=8),R.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=R,o.outputs=L}(i,u,f)}function kA(i,o,u){const l=u.directiveStart,d=u.directiveEnd,f=u.index,_=function w(){return mn.lFrame.currentDirectiveIndex}();try{ta(f);for(let E=l;E<d;E++){const R=i.data[E],L=o[E];C(E),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&KE(R,L)}}finally{ta(-1),C(_)}}function KE(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function QE(i,o,u){o.componentOffset=u,(i.components??=[]).push(o.index)}function YS(i,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=i;cs(o)&&(u[""]=i)}}function XS(i,o,u,l,d){i.data[l]=d;const f=d.factory||(d.factory=Rt(d.type)),_=new Ra(f,cs(d),ip);i.blueprint[l]=_,u[l]=_,function qE(i,o,u,l,d){const f=d.hostBindings;if(f){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const E=~o.index;(function Gl(i){let o=i.length;for(;o>0;){const u=i[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=E&&_.push(E),_.push(u,l,f)}}(i,o,l,zh(i,u,d.hostVars,nr),d)}function dl(i,o,u,l,d,f){const _=ci(i,o);!function nm(i,o,u,l,d,f,_){if(null==f)i.removeAttribute(o,d,u);else{const E=null==_?ze(f):_(f,l||"",d);i.setAttribute(o,d,E,u)}}(o[vn],_,f,i.value,u,l,d)}function FA(i,o,u,l,d,f){const _=f[o];if(null!==_)for(let E=0;E<_.length;)v_(l,u,_[E++],_[E++],_[E++])}function v_(i,o,u,l,d){const f=vs(null);try{const _=i.inputTransforms;null!==_&&_.hasOwnProperty(l)&&(d=_[l].call(o,d)),null!==i.setInput?i.setInput(o,d,u,l):o[l]=d}finally{vs(f)}}function LA(i,o,u){let l=null,d=0;for(;d<u.length;){const f=u[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===l&&(l=[]);const _=i[f];for(let E=0;E<_.length;E+=2)if(_[E]===o){l.push(f,_[E+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function VA(i,o,u,l){return[i,!0,!1,o,null,0,l,u,null,null,null]}function UA(i,o){const u=i.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const f=u[l+1];if(-1!==f){const _=i.data[f];F(u[l]),_.contentQueries(2,o[f],f)}}}function ap(i,o){return i[ho]?i[Zi][Rs]=o:i[ho]=o,i[Zi]=o,o}function ZE(i,o,u){F(0);const l=vs(null);try{o(i,u)}finally{vs(l)}}function rm(i){return i[lo]||(i[lo]=[])}function I_(i){return i.cleanup||(i.cleanup=[])}function im(i,o){const u=i[ya],l=u?u.get(Gd,null):null;l&&l.handleError(o)}function sm(i,o,u,l,d){for(let f=0;f<u.length;){const _=u[f++],E=u[f++];v_(i.data[_],o[_],l,E,d)}}function Lc(i,o,u){const l=_u(o,i);!function PT(i,o,u){i.setValue(o,u)}(i[vn],l,u)}function $A(i,o){const u=ki(o,i),l=u[Ot];!function up(i,o){for(let u=o.length;u<i.blueprint.length;u++)o.push(i.blueprint[u])}(l,u);const d=u[Qr];null!==d&&null===u[ys]&&(u[ys]=zg(d,u[ya])),E_(l,u,u[hi])}function E_(i,o,u){Ue(o);try{const l=i.viewQuery;null!==l&&ZE(1,l,u);const d=i.template;null!==d&&m_(i,o,d,1,u),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&UA(i,o),i.staticViewQueries&&ZE(2,i.viewQuery,u);const f=i.components;null!==f&&function w_(i,o){for(let u=0;u<o.length;u++)$A(i,o[u])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[_n]&=-5,er()}}let zA=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(u,l,d){const f=typeof Zone>"u"?null:Zone.current,_=function Ti(i,o,u){const l=Object.create(Xs);u&&(l.consumerAllowSignalWrites=!0),l.fn=i,l.schedule=o;const d=_=>{l.cleanupFn=_};return l.ref={notify:()=>$u(l),run:()=>{if(l.dirty=!1,l.hasRun&&!zu(l))return;l.hasRun=!0;const _=Ka(l);try{l.cleanupFn(),l.cleanupFn=ii,l.fn(d)}finally{Po(l,_)}},cleanup:()=>l.cleanupFn()},l.ref}(u,L=>{this.all.has(L)&&this.queue.set(L,f)},d);let E;this.all.add(_),_.notify();const R=()=>{_.cleanup(),E?.(),this.all.delete(_),this.queue.delete(_)};return E=l?.onDestroy(R),{destroy:R}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Cn({token:i,providedIn:"root",factory:()=>new i})}}return i})();function T_(i,o,u){let l=u?i.styles:null,d=u?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?f=E:1==f?d=bt(d,E):2==f&&(l=bt(l,E+": "+o[++_]+";"))}u?i.styles=l:i.stylesWithoutHost=l,u?i.classes=d:i.classesWithoutHost=d}function oc(i,o,u,l,d=!1){for(;null!==u;){const f=o[u.index];null!==f&&l.push(Lr(f)),zr(f)&&HA(f,l);const _=u.type;if(8&_)oc(i,o,u.child,l);else if(32&_){const E=Ul(u,o);let R;for(;R=E();)l.push(R)}else if(16&_){const E=VT(o,u);if(Array.isArray(E))l.push(...E);else{const R=Od(o[Or]);oc(R[Ot],R,E,l,!0)}}u=d?u.projectionNext:u.next}return l}function HA(i,o){for(let u=Oi;u<i.length;u++){const l=i[u],d=l[Ot].firstChild;null!==d&&oc(l[Ot],l,d,o)}i[Os]!==i[Qr]&&o.push(i[Os])}function cp(i,o,u,l=!0){const d=o[xs],f=d.rendererFactory,_=d.afterRenderEventManager;f.begin?.(),_?.begin();try{A_(i,o,i.template,u)}catch(R){throw l&&im(o,R),R}finally{f.end?.(),d.effectManager?.flush(),_?.end()}}function A_(i,o,u,l){const d=o[_n];if(256!=(256&d)){o[xs].effectManager?.flush(),Ue(o);try{Yc(o),function Cl(i){return mn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==u&&m_(i,o,u,2,l);const _=3==(3&d);if(_){const L=i.preOrderCheckHooks;null!==L&&Ja(o,L,null)}else{const L=i.preOrderHooks;null!==L&&ji(o,L,0,null),Tc(o,0)}if(function e0(i){for(let o=xT(i);null!==o;o=Ag(o)){if(!o[El])continue;const u=o[Ys];for(let l=0;l<u.length;l++){gi(u[l])}}}(o),D_(o,2),null!==i.contentQueries&&UA(i,o),_){const L=i.contentCheckHooks;null!==L&&Ja(o,L)}else{const L=i.contentHooks;null!==L&&ji(o,L,1),Tc(o,1)}!function HS(i,o){const u=i.hostBindingOpCodes;if(null===u)return;const l=NE(o,Yo);try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)ta(~f);else{const _=f,E=u[++d],R=u[++d];Rl(E,_),l.dirty=!1;const L=Ka(l);try{R(2,o[_])}finally{Po(l,L)}}}}finally{null===o[Yo]&&OE(o,Yo),ta(-1)}}(i,o);const E=i.components;null!==E&&t0(o,E,0);const R=i.viewQuery;if(null!==R&&ZE(2,R,l),_){const L=i.viewCheckHooks;null!==L&&Ja(o,L)}else{const L=i.viewHooks;null!==L&&ji(o,L,2),Tc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[_n]&=-73,_o(o)}finally{er()}}}function D_(i,o){for(let u=xT(i);null!==u;u=Ag(u))for(let l=Oi;l<u.length;l++)C_(u[l],o)}function b_(i,o,u){C_(ki(o,i),u)}function C_(i,o){if(!function Ic(i){return 128==(128&i[_n])}(i))return;const u=i[Ot],l=i[_n];if(80&l&&0===o||1024&l||2===o)A_(u,i,u.template,i[hi]);else if(i[Ha]>0){D_(i,1);const d=u.components;null!==d&&t0(i,d,1)}}function t0(i,o,u){for(let l=0;l<o.length;l++)b_(i,o[l],u)}class hl{get rootNodes(){const o=this._lView,u=o[Ot];return oc(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hi]}set context(o){this._lView[hi]=o}get destroyed(){return 256==(256&this._lView[_n])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[ar];if(zr(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(kd(o,l),bd(u,l))}this._attachedToViewContainer=!1}ic(this._lView[Ot],this._lView)}onDestroy(o){!function vu(i,o){if(256==(256&i[_n]))throw new ot(911,!1);null===i[Ns]&&(i[Ns]=[]),i[Ns].push(o)}(this._lView,o)}markForCheck(){ll(this._cdRefInjectingView||this._lView)}detach(){this._lView[_n]&=-129}reattach(){this._lView[_n]|=128}detectChanges(){cp(this._lView[Ot],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ot(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yS(i,o){qf(i,o,o[vn],2,null,null)}(this._lView[Ot],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ot(902,!1);this._appRef=o}}class WA extends hl{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;cp(o[Ot],o,o[hi],!1)}checkNoChanges(){}get context(){return null}}class S_ extends no{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Dn(o);return new om(u,this.ngModule)}}function n0(i){const o=[];for(let u in i)i.hasOwnProperty(u)&&o.push({propName:i[u],templateName:u});return o}class r0{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=da(l);const d=this.injector.get(o,mE,l);return d!==mE||u===mE?d:this.parentInjector.get(o,u,l)}}class om extends r_{get inputs(){const o=this.componentDef,u=o.inputTransforms,l=n0(o.inputs);if(null!==u)for(const d of l)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return l}get outputs(){return n0(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function $a(i){return i.map(lc).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let f=(d=d||this.ngModule)instanceof ul?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new r0(o,f):o,E=_.get(i_,null);if(null===E)throw new ot(407,!1);const ie={rendererFactory:E,sanitizer:_.get(FS,null),effectManager:_.get(zA,null),afterRenderEventManager:_.get(d_,null)},fe=E.createRenderer(null,this.componentDef),Ae=this.componentDef.selectors[0][0]||"div",Je=l?function MA(i,o,u,l){const f=l.get(CE,!1)||u===Hi.ShadowDom,_=i.selectRootElement(o,f);return function BE(i){jE(i)}(_),_}(fe,l,this.componentDef.encapsulation,_):Hf(fe,Ae,function lp(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Ae)),nn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let lt=null;null!==Je&&(lt=zg(Je,_,!0));const jn=VE(0,null,null,1,0,null,null,null,null,null,null),Yn=sp(null,jn,null,nn,null,null,ie,fe,_,null,lt);let oi,ca;Ue(Yn);try{const $c=this.componentDef;let ah,Rw=null;$c.findHostDirectiveDefs?(ah=[],Rw=new Map,$c.findHostDirectiveDefs($c,ah,Rw),ah.push($c)):ah=[$c];const m1=function eR(i,o){const u=i[Ot],l=Wn;return i[l]=o,$h(u,l,2,"#host",null)}(Yn,Je),zs=function KA(i,o,u,l,d,f,_){const E=d[Ot];!function tR(i,o,u,l){for(const d of i)o.mergedAttrs=Oe(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(T_(o,o.mergedAttrs,!0),null!==u&&Vd(l,u,o))}(l,i,o,_);let R=null;null!==o&&(R=zg(o,d[ya]));const L=f.rendererFactory.createRenderer(o,u);let H=16;u.signals?H=4096:u.onPush&&(H=64);const ie=sp(d,y_(u),null,H,d[i.index],i,f,L,null,null,R);return E.firstCreatePass&&QE(E,i,l.length-1),ap(d,ie),d[i.index]=ie}(m1,Je,$c,ah,Yn,ie,fe);ca=Zs(jn,Wn),Je&&function nR(i,o,u,l){if(l)lu(i,u,["ng-version",yA.full]);else{const{attrs:d,classes:f}=function Hc(i){const o=[],u=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&u.push(f);else{if(!Nr(d))break;d=f}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&lu(i,u,d),f&&f.length>0&&Ld(i,u,f.join(" "))}}(fe,$c,Je,l),void 0!==u&&function rR(i,o,u){const l=i.projection=[];for(let d=0;d<o.length;d++){const f=u[d];l.push(null!=f?Array.from(f):null)}}(ca,this.ngContentSelectors,u),oi=function QA(i,o,u,l,d,f){const _=Fi(),E=d[Ot],R=ci(_,d);OA(E,d,_,u,null,l);for(let H=0;H<u.length;H++)tn(Au(d,E,_.directiveStart+H,_),d);kA(E,d,_),R&&tn(R,d);const L=Au(d,E,_.directiveStart+_.componentOffset,_);if(i[hi]=d[hi]=L,null!==f)for(const H of f)H(L,o);return FE(E,_,i),L}(zs,$c,ah,Rw,Yn,[iR]),E_(jn,Yn,null)}finally{er()}return new ZS(this.componentType,oi,Vh(ca,Yn),Yn,ca)}}class ZS extends n_{constructor(o,u,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new WA(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const f=this._rootLView;sm(f[Ot],f,d,o,u),this.previousInputValues.set(o,u),ll(ki(this._tNode.index,f))}}get injector(){return new As(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function iR(){const i=Fi();Ml(dt()[Ot],i)}function s0(i){let o=function YA(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),u=!0;const l=[i];for(;o;){let d;if(cs(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ot(903,!1);d=o.\u0275dir}if(d){if(u){l.push(d);const _=i;_.inputs=R_(i.inputs),_.inputTransforms=R_(i.inputTransforms),_.declaredInputs=R_(i.declaredInputs),_.outputs=R_(i.outputs);const E=d.hostBindings;E&&o0(i,E);const R=d.viewQuery,L=d.contentQueries;if(R&&XA(i,R),L&&JA(i,L),Hn(i.inputs,d.inputs),Hn(i.declaredInputs,d.declaredInputs),Hn(i.outputs,d.outputs),null!==d.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),Hn(_.inputTransforms,d.inputTransforms)),cs(d)&&d.data.animation){const H=i.data;H.animation=(H.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===s0&&(u=!1)}}o=Object.getPrototypeOf(o)}!function sR(i){let o=0,u=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Oe(d.hostAttrs,u=Oe(u,d.hostAttrs))}}(l)}function R_(i){return i===Xi?{}:i===Nn?[]:i}function XA(i,o){const u=i.viewQuery;i.viewQuery=u?(l,d)=>{o(l,d),u(l,d)}:o}function JA(i,o){const u=i.contentQueries;i.contentQueries=u?(l,d,f)=>{o(l,d,f),u(l,d,f)}:o}function o0(i,o){const u=i.hostBindings;i.hostBindings=u?(l,d)=>{o(l,d),u(l,d)}:o}function dp(i){const o=i.inputConfig,u={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(u[l]=d[2])}i.inputTransforms=u}function Us(i){return!!nD(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function nD(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Uo(i,o,u){return!Object.is(i[o],u)&&(i[o]=u,!0)}function Kd(i,o,u,l){const d=Uo(i,o,u);return Uo(i,o+1,l)||d}function um(i,o,u,l){const d=dt();return Uo(d,Zo(),o)&&(_r(),dl(tr(),d,i,o,u,l)),um}function lm(i,o,u,l,d,f,_,E){const L=function am(i,o,u,l,d){const f=Kd(i,o,u,l);return Uo(i,o+2,d)||f}(i,eo(),u,d,_);return ea(3),L?o+ze(u)+l+ze(d)+f+ze(_)+E:nr}function vm(i,o,u,l,d,f,_,E){const R=dt(),L=_r(),H=i+Wn,ie=L.firstCreatePass?function _R(i,o,u,l,d,f,_,E,R){const L=o.consts,H=$h(o,i,4,_||null,$n(L,E));tm(o,u,H,$n(L,R)),Ml(o,H);const ie=H.tView=VE(2,H,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,L,null);return null!==o.queries&&(o.queries.template(o,H),ie.queries=o.queries.embeddedTView(H)),H}(H,L,R,o,u,l,d,f,_):L.data[H];Io(ie,!1);const fe=g0(L,R,ie,i);Id()&&jy(L,R,fe,ie),tn(fe,R),ap(R,R[H]=VA(fe,R,fe,ie)),Gi(ie)&&em(L,R,ie),null!=_&&LE(R,ie,E)}let g0=function F_(i,o,u,l){return wo(!0),o[vn].createComment("")};function Qd(i,o,u){const l=dt();return Uo(l,Zo(),o)&&function ka(i,o,u,l,d,f,_,E){const R=ci(o,u);let H,L=o.inputs;!E&&null!=L&&(H=L[l])?(sm(i,u,H,l,d),_s(o)&&function GE(i,o){const u=ki(o,i);16&u[_n]||(u[_n]|=64)}(u,o.index)):3&o.type&&(l=function HE(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,f.setProperty(R,l,d))}(_r(),tr(),l,i,o,l[vn],u,!1),Qd}function uD(i,o,u,l,d){const _=d?"class":"style";sm(i,u,o.inputs[_],_,l)}function Ip(i,o,u,l){const d=dt(),f=_r(),_=Wn+i,E=d[vn],R=f.firstCreatePass?function YM(i,o,u,l,d,f){const _=o.consts,R=$h(o,i,2,l,$n(_,d));return tm(o,u,R,$n(_,f)),null!==R.attrs&&T_(R,R.attrs,!1),null!==R.mergedAttrs&&T_(R,R.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,R),R}(_,f,d,o,u,l):f.data[_],L=vR(f,d,R,E,o,i);d[_]=L;const H=Gi(R);return Io(R,!0),Vd(E,L,R),32!=(32&R.flags)&&Id()&&jy(f,d,L,R),0===function md(){return mn.lFrame.elementDepthCount}()&&tn(L,d),function ks(){mn.lFrame.elementDepthCount++}(),H&&(em(f,d,R),FE(f,R,d)),null!==l&&LE(d,R),Ip}function m0(){let i=Fi();Xa()?function Wu(){mn.lFrame.isParent=!1}():(i=i.parent,Io(i,!1));const o=i;(function yd(i){return mn.skipHydrationRootTNode===i})(o)&&function Xc(){mn.skipHydrationRootTNode=null}(),function qu(){mn.lFrame.elementDepthCount--}();const u=_r();return u.firstCreatePass&&(Ml(u,i),Xo(i)&&u.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Ls(i){return 0!=(8&i.flags)}(o)&&uD(u,o,dt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Af(i){return 0!=(16&i.flags)}(o)&&uD(u,o,dt(),o.stylesWithoutHost,!1),m0}function Ep(i,o,u,l){return Ip(i,o,u,l),m0(),Ep}let vR=(i,o,u,l,d,f)=>(wo(!0),Hf(l,d,function Cy(){return mn.lFrame.currentNamespace}()));function y0(){return dt()}function V_(i){return!!i&&"function"==typeof i.then}function _0(i){return!!i&&"function"==typeof i.subscribe}function U_(i,o,u,l){const d=dt(),f=_r(),_=Fi();return function TR(i,o,u,l,d,f,_){const E=Gi(l),L=i.firstCreatePass&&I_(i),H=o[hi],ie=rm(o);let fe=!0;if(3&l.type||_){const yt=ci(l,o),Vt=_?_(yt):yt,nn=ie.length,lt=_?Yn=>_(Lr(Yn[l.index])):l.index;let jn=null;if(!_&&E&&(jn=function wR(i,o,u,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===u&&d[f+1]===l){const E=o[lo],R=d[f+2];return E.length>R?E[R]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,l.index)),null!==jn)(jn.__ngLastListenerFn__||jn).__ngNextListenerFn__=f,jn.__ngLastListenerFn__=f,fe=!1;else{f=hD(l,o,H,f,!1);const Yn=u.listen(Vt,d,f);ie.push(f,Yn),L&&L.push(d,lt,nn,nn+1)}}else f=hD(l,o,H,f,!1);const Ae=l.outputs;let Je;if(fe&&null!==Ae&&(Je=Ae[d])){const yt=Je.length;if(yt)for(let Vt=0;Vt<yt;Vt+=2){const oi=o[Je[Vt]][Je[Vt+1]].subscribe(f),ca=ie.length;ie.push(f,oi),L&&L.push(d,l.index,ca,-(ca+1))}}}(f,d,d[vn],_,i,o,l),U_}function AR(i,o,u,l){try{return Pi(6,o,u),!1!==u(l)}catch(d){return im(i,d),!1}finally{Pi(7,o,u)}}function hD(i,o,u,l,d){return function f(_){if(_===Function)return l;ll(i.componentOffset>-1?ki(i.index,o):o);let R=AR(o,u,l,_),L=f.__ngNextListenerFn__;for(;L;)R=AR(o,u,L,_)&&R,L=L.__ngNextListenerFn__;return d&&!1===R&&_.preventDefault(),R}}function DR(i=1){return function Eo(i){return(mn.lFrame.contextLView=function Fs(i,o){for(;i>0;)o=o[Vu],i--;return o}(i,mn.lFrame.contextLView))[hi]}(i)}function v0(i,o){return i<<17|o<<2}function Qh(i){return i>>17&32767}function pD(i){return 2|i}function Yh(i){return(131068&i)>>2}function gD(i,o){return-131069&i|o<<2}function Dm(i){return 1|i}function mD(i,o,u,l,d){const f=i[u+1],_=null===o;let E=l?Qh(f):Yh(f),R=!1;for(;0!==E&&(!1===R||_);){const H=i[E+1];OR(i[E],o)&&(R=!0,i[E+1]=l?Dm(H):pD(H)),E=l?Qh(H):Yh(H)}R&&(i[u+1]=l?pD(f):Dm(f))}function OR(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Cd(i,o)>=0}function ID(i,o){return function gl(i,o,u,l){const d=dt(),f=_r(),_=ea(2);f.firstUpdatePass&&function $R(i,o,u,l){const d=i.data;if(null===d[u+1]){const f=d[li()],_=function ED(i,o){return o>=i.expandoStartIndex}(i,u);(function AD(i,o){return 0!=(i.flags&(o?8:16))})(f,l)&&null===o&&!_&&(o=!1),o=function aN(i,o,u,l){const d=function I(i){const o=mn.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=j_(u=B_(null,i,o,u,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(u=B_(d,i,o,u,l),null===f){let R=function uN(i,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==Yh(l))return i[Qh(l)]}(i,o,l);void 0!==R&&Array.isArray(R)&&(R=B_(null,i,o,R[1],l),R=j_(R,o.attrs,l),function cN(i,o,u,l){i[Qh(u?o.classBindings:o.styleBindings)]=l}(i,o,l,R))}else f=function wD(i,o,u){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=j_(l,i[f].hostAttrs,u);return j_(l,o.attrs,u)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,l),function MR(i,o,u,l,d,f){let _=f?o.classBindings:o.styleBindings,E=Qh(_),R=Yh(_);i[l]=u;let H,L=!1;if(Array.isArray(u)?(H=u[1],(null===H||Cd(u,H)>0)&&(L=!0)):H=u,d)if(0!==R){const fe=Qh(i[E+1]);i[l+1]=v0(fe,E),0!==fe&&(i[fe+1]=gD(i[fe+1],l)),i[E+1]=function tN(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=v0(E,0),0!==E&&(i[E+1]=gD(i[E+1],l)),E=l;else i[l+1]=v0(R,0),0===E?E=l:i[R+1]=gD(i[R+1],l),R=l;L&&(i[l+1]=pD(i[l+1])),mD(i,H,l,!0),mD(i,H,l,!1),function NR(i,o,u,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Cd(f,o)>=0&&(u[l+1]=Dm(u[l+1]))}(o,H,i,l,f),_=v0(E,R),f?o.classBindings=_:o.styleBindings=_}(d,f,o,u,_,l)}}(f,i,_,l),o!==nr&&Uo(d,_,o)&&function TD(i,o,u,l,d,f,_,E){if(!(3&o.type))return;const R=i.data,L=R[E+1],H=function Am(i){return 1==(1&i)}(L)?E0(R,o,u,d,Yh(L),_):void 0;Xh(H)||(Xh(f)||function eN(i){return 2==(2&i)}(L)&&(f=E0(R,null,u,d,E,_)),function UT(i,o,u,l,d){if(o)d?i.addClass(u,l):i.removeClass(u,l);else{let f=-1===l.indexOf("-")?void 0:Md.DashCase;null==d?i.removeStyle(u,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Md.Important),i.setStyle(u,l,d,f))}}(l,_,_u(li(),u),d,f))}(f,f.data[li()],d,d[vn],i,d[_+1]=function w0(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=pn(Za(i)))),i}(o,u),l,_)}(i,o,null,!0),ID}function B_(i,o,u,l,d){let f=null;const _=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<_&&(f=o[E],l=j_(l,f.hostAttrs,d),f!==i);)E++;return null!==i&&(u.directiveStylingLast=E),l}function j_(i,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Lo(i,_,!!u||o[++f]))}return void 0===i?null:i}function E0(i,o,u,l,d,f){const _=null===o;let E;for(;d>0;){const R=i[d],L=Array.isArray(R),H=L?R[1]:R,ie=null===H;let fe=u[d+1];fe===nr&&(fe=ie?Nn:void 0);let Ae=ie?Eg(fe,l):H===l?fe:void 0;if(L&&!Xh(Ae)&&(Ae=Eg(R,l)),Xh(Ae)&&(E=Ae,_))return E;const Je=i[d+1];d=_?Qh(Je):Yh(Je)}if(null!==o){let R=f?o.residualClasses:o.residualStyles;null!=R&&(E=Eg(R,l))}return E}function Xh(i){return void 0!==i}function z_(i,o=""){const u=dt(),l=_r(),d=i+Wn,f=l.firstCreatePass?$h(l,d,1,o,null):l.data[d],_=DD(l,u,f,o,i);u[d]=_,Id()&&jy(l,u,_,f),Io(f,!1)}let DD=(i,o,u,l,d)=>(wo(!0),function Ly(i,o){return i.createText(o)}(o[vn],l));function H_(i){return G_("",i,""),H_}function G_(i,o,u){const l=dt(),d=function cm(i,o,u,l){return Uo(i,Zo(),u)?o+ze(u)+l:nr}(l,i,o,u);return d!==nr&&Lc(l,li(),d),G_}function bm(i,o,u,l,d){const f=dt(),_=function ei(i,o,u,l,d,f){const E=Kd(i,eo(),u,d);return ea(2),E?o+ze(u)+l+ze(d)+f:nr}(f,i,o,u,l,d);return _!==nr&&Lc(f,li(),_),bm}function T0(i,o,u,l,d,f,_){const E=dt(),R=lm(E,i,o,u,l,d,f,_);return R!==nr&&Lc(E,li(),R),T0}const hs=void 0;var Rm=["en",[["a","p"],["AM","PM"],hs],[["AM","PM"],hs,hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hs,"{1} 'at' {0}",hs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QR(i){const u=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Jl={};function xm(i){const o=function kD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let u=Zh(o);if(u)return u;const l=o.split("-")[0];if(u=Zh(l),u)return u;if("en"===l)return Rm;throw new ot(701,!1)}function OD(i){return xm(i)[Jd.PluralCase]}function Zh(i){return i in Jl||(Jl[i]=vr.ng&&vr.ng.common&&vr.ng.common.locales&&vr.ng.common.locales[i]),Jl[i]}var Jd=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Jd||{});const Zd="en-US";let LD=Zd;function av(i,o,u,l,d){if(i=Xe(i),Array.isArray(i))for(let f=0;f<i.length;f++)av(i[f],o,u,l,d);else{const f=_r(),_=dt(),E=Fi();let R=Nh(i)?i:Xe(i.provide);const L=Qy(i),H=1048575&E.providerIndexes,ie=E.directiveStart,fe=E.providerIndexes>>20;if(Nh(i)||!i.multi){const Ae=new Ra(L,d,ip),Je=nf(R,o,d?H:H+fe,ie);-1===Je?(ra(Yu(E,_),f,R),uv(f,i,o.length),o.push(R),E.directiveStart++,E.directiveEnd++,d&&(E.providerIndexes+=1048576),u.push(Ae),_.push(Ae)):(u[Je]=Ae,_[Je]=Ae)}else{const Ae=nf(R,o,H+fe,ie),Je=nf(R,o,H,H+fe),Vt=Je>=0&&u[Je];if(d&&!Vt||!d&&!(Ae>=0&&u[Ae])){ra(Yu(E,_),f,R);const nn=function sf(i,o,u,l,d){const f=new Ra(i,u,ip);return f.multi=[],f.index=o,f.componentProviders=0,ob(f,d,l&&!u),f}(d?cv:ab,u.length,d,l,L);!d&&Vt&&(u[Je].providerFactory=nn),uv(f,i,o.length,0),o.push(R),E.directiveStart++,E.directiveEnd++,d&&(E.providerIndexes+=1048576),u.push(nn),_.push(nn)}else uv(f,i,Ae>-1?Ae:Je,ob(u[d?Je:Ae],L,!d&&l));!d&&l&&Vt&&u[Je].componentProviders++}}}function uv(i,o,u,l){const d=Nh(o),f=function xS(i){return!!i.useClass}(o);if(d||f){const R=(f?Xe(o.useClass):o).prototype.ngOnDestroy;if(R){const L=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const H=L.indexOf(u);-1===H?L.push(u,[l,R]):L[H+1].push(l,R)}else L.push(u,R)}}}function ob(i,o,u){return u&&i.componentProviders++,i.multi.push(o)-1}function nf(i,o,u,l){for(let d=u;d<l;d++)if(o[d]===i)return d;return-1}function ab(i,o,u,l){return rf(this.multi,[])}function cv(i,o,u,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Au(u,u[Ot],this.providerFactory.index,l);f=E.slice(0,_),rf(d,f);for(let R=_;R<E.length;R++)f.push(E[R])}else f=[],rf(d,f);return f}function rf(i,o){for(let u=0;u<i.length;u++)o.push((0,i[u])());return o}function lv(i,o=[]){return u=>{u.providersResolver=(l,d)=>function sb(i,o,u){const l=_r();if(l.firstCreatePass){const d=cs(i);av(u,l.data,l.blueprint,d,!0),av(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class af{}class ub{}function cb(i,o){return new K0(i,o??null,[])}class K0 extends af{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new S_(this);const d=yr(o);this._bootstrapComponents=kc(d.bootstrap),this._r3Injector=o_(o,u,[{provide:af,useValue:this},{provide:no,useValue:this.componentFactoryResolver},...l],pn(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class td extends ub{constructor(o){super(),this.moduleType=o}create(o){return new K0(this.moduleType,o,[])}}class Um extends af{constructor(o){super(),this.componentFactoryResolver=new S_(this),this.instance=null;const u=new kh([...o.providers,{provide:af,useValue:this},{provide:no,useValue:this.componentFactoryResolver}],o.parent||Oh(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Bm(i,o,u=null){return new Um({providers:i,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let lb=(()=>{class i{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const l=rE(0,u.type),d=l.length>0?Bm([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Cn({token:i,providedIn:"environment",factory:()=>new i(jr(ul))})}}return i})();function Li(i){i.getStandaloneInjector=o=>o.get(lb).getOrCreateStandaloneInjector(i)}function wb(){return this._results[Symbol.iterator]()}class fv{get changes(){return this._changes||(this._changes=new bu)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=fv.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=wb)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function Fo(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function kl(i,o,u){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ml(i,o,u,l=!0){const d=o[Ot];if(function PI(i,o,u,l){const d=Oi+l,f=u.length;l>0&&(u[d-1][Rs]=o),l<f-Oi?(o[Rs]=u[d],Sf(u,Oi+l,o)):(u.push(o),o[Rs]=null),o[ar]=u;const _=o[Ga];null!==_&&u!==_&&function MI(i,o){const u=i[Ys];o[Or]!==o[ar][ar][Or]&&(i[El]=!0),null===u?i[Ys]=[o]:u.push(o)}(_,o);const E=o[Ps];null!==E&&E.insertView(i),o[_n]|=128}(d,o,i,u),l){const f=ol(u,i),_=o[vn],E=By(_,i[Os]);null!==E&&function MT(i,o,u,l,d,f){l[Qr]=d,l[Ri]=o,qf(i,l,u,1,d,f)}(d,i[Ri],_,o,E,f)}}let qm=(()=>{class i{static{this.__NG_ELEMENT_ID__=Wm}}return i})();const Tb=qm,Z0=class extends Tb{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u)}createEmbeddedViewImpl(o,u,l){const d=function pv(i,o,u,l){const d=o.tView,E=sp(i,d,u,4096&i[_n]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);E[Ga]=i[o.index];const L=i[Ps];return null!==L&&(E[Ps]=L.createEmbeddedView(d)),E_(d,E,u),E}(this._declarationLView,this._declarationTContainer,o,{injector:u,hydrationInfo:l});return new hl(d)}};function Wm(){return Km(Fi(),dt())}function Km(i,o){return 4&i.type?new Z0(o,i,Vh(i,o)):null}let zp=(()=>{class i{static{this.__NG_ELEMENT_ID__=Cb}}return i})();function Cb(){return rw(Fi(),dt())}const _v=zp,tw=class extends _v{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return Vh(this._hostTNode,this._hostLView)}get injector(){return new As(this._hostTNode,this._hostLView)}get parentInjector(){const o=Dc(this._hostTNode,this._hostLView);if(wd(o)){const u=Mo(o,this._hostLView),l=ns(o);return new As(u[Ot].data[l+8],u)}return new As(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=nw(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Oi}createEmbeddedView(o,u,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const E=o.createEmbeddedViewImpl(u||{},f,null);return this.insertImpl(E,d,false),E}createComponent(o,u,l,d,f){const _=o&&!function ko(i){return"function"==typeof i}(o);let E;if(_)E=u;else{const yt=u||{};E=yt.index,l=yt.injector,d=yt.projectableNodes,f=yt.environmentInjector||yt.ngModuleRef}const R=_?o:new om(Dn(o)),L=l||this.parentInjector;if(!f&&null==R.ngModule){const Vt=(_?L:this.parentInjector).get(ul,null);Vt&&(f=Vt)}Dn(R.componentType??{});const Ae=R.create(L,d,null,f);return this.insertImpl(Ae.hostView,E,false),Ae}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const d=o._lView;if(function Al(i){return zr(i[ar])}(d)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=d[ar],H=new tw(L,L[Ri],L[ar]);H.detach(H.indexOf(o))}}const _=this._adjustIndex(u),E=this._lContainer;return ml(E,d,_,!l),o.attachToViewContainerRef(),Sf(rd(E),_,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=nw(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=kd(this._lContainer,u);l&&(bd(rd(this._lContainer),u),ic(l[Ot],l))}detach(o){const u=this._adjustIndex(o,-1),l=kd(this._lContainer,u);return l&&null!=bd(rd(this._lContainer),u)?new hl(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function nw(i){return i[8]}function rd(i){return i[8]||(i[8]=[])}function rw(i,o){let u;const l=o[i.index];return zr(l)?u=l:(u=VA(l,o,null,i),o[i.index]=u,ap(o,u)),iw(u,o,i,l),new tw(u,i,o)}let iw=function sw(i,o,u,l){if(i[Os])return;let d;d=8&u.type?Lr(l):function Sb(i,o){const u=i[vn],l=u.createComment(""),d=ci(o,i);return Fd(u,By(u,d),l,function LT(i,o){return i.nextSibling(o)}(u,d),!1),l}(o,u),i[Os]=d};class Iv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Iv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ev{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<l;f++){const _=u.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new Ev(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Qm(o,u).matches&&this.queries[u].setDirty()}}class lf{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class ow{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==u?u.push(f):u=[f])}return null!==u?new ow(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ru{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Ru(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,u,aw(u,f)),this.matchTNodeWithReadOption(o,u,xa(u,o,f,!1,!1))}else l===qm?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,xa(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Hd||d===zp||d===qm&&4&u.type)this.addMatch(u.index,-2);else{const f=xa(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function aw(i,o){const u=i.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function Tx(i,o,u,l){return-1===u?function yi(i,o){return 11&i.type?Vh(i,o):4&i.type?Km(i,o):null}(o,i):-2===u?function uw(i,o,u){return u===Hd?Vh(o,i):u===qm?Km(o,i):u===zp?rw(o,i):void 0}(i,o,l):Au(i,i[Ot],u,o)}function Uc(i,o,u,l){const d=o[Ps].queries[l];if(null===d.matches){const f=i.data,_=u.matches,E=[];for(let R=0;R<_.length;R+=2){const L=_[R];E.push(L<0?null:Tx(o,f[L],_[R+1],u.metadata.read))}d.matches=E}return d.matches}function wv(i,o,u,l){const d=i.queries.getByIndex(u),f=d.matches;if(null!==f){const _=Uc(i,o,d,u);for(let E=0;E<f.length;E+=2){const R=f[E];if(R>0)l.push(_[E/2]);else{const L=f[E+1],H=o[-R];for(let ie=Oi;ie<H.length;ie++){const fe=H[ie];fe[Ga]===fe[ar]&&wv(fe[Ot],fe,L,l)}if(null!==H[Ys]){const ie=H[Ys];for(let fe=0;fe<ie.length;fe++){const Ae=ie[fe];wv(Ae[Ot],Ae,L,l)}}}}}return l}function Tv(i){const o=dt(),u=_r(),l=x();F(l+1);const d=Qm(u,l);if(i.dirty&&function vc(i){return 4==(4&i[_n])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?wv(u,o,l,[]):Uc(u,o,d,l);i.reset(f,Wg),i.notifyOnChanges()}return!0}return!1}function Av(i,o,u,l){const d=_r();if(d.firstCreatePass){const f=Fi();(function Do(i,o,u){null===i.queries&&(i.queries=new ow),i.queries.track(new Ru(o,u))})(d,new lf(o,u,l),f.index),function Dv(i,o){const u=i.contentQueries||(i.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(i.queries.length-1,o)}(d,i),2==(2&u)&&(d.staticContentQueries=!0)}!function xu(i,o,u){const l=new fv(4==(4&u));(function qS(i,o,u,l){const d=rm(o);d.push(u),i.firstCreatePass&&I_(i).push(l,d.length-1)})(i,o,l,l.destroy),null===o[Ps]&&(o[Ps]=new Ev),o[Ps].queries.push(new Iv(l))}(d,dt(),u)}function cw(){return function id(i,o){return i[Ps].queries[o].queryList}(dt(),x())}function Qm(i,o){return i.queries.getByIndex(o)}function lw(i){return!!yr(i)}const gw=new Qe("Application Initializer");let yl=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=Gn(gw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const f=d();if(V_(f))u.push(f);else if(_0(f)){const _=new Promise((E,R)=>{f.subscribe({complete:E,error:R})});u.push(_)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Rv=(()=>{class i{log(u){console.log(u)}warn(u){console.warn(u)}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();const hf=new Qe("LocaleId",{providedIn:"root",factory:()=>Gn(hf,cn.Optional|cn.SkipSelf)||function Ge(){return typeof $localize<"u"&&$localize.locale||Zd}()}),Bc=new Qe("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Ub=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ue.t(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class ff{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Bb=(()=>{class i{compileModuleSync(u){return new td(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),f=kc(yr(u).declarations).reduce((_,E)=>{const R=Dn(E);return R&&_.push(new om(R)),_},[]);return new ff(l,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const _w=new Qe(""),vw=new Qe("");let Ov,Qx=(()=>{class i{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ov||(function Co(i){Ov=i}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}static{this.\u0275fac=function(l){return new(l||i)(jr(Vs),jr(Nv),jr(vw))}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac})}}return i})(),Nv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return Ov?.findTestabilityInTree(this,u,l)??null}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})(),Fa=null;const Iw=new Qe("AllowMultipleToken"),Ci=new Qe("PlatformDestroyListeners"),Qp=new Qe("appBootstrapListener");class nu{constructor(o,u){this.name=o,this.token=u}}function sd(i,o,u=[]){const l=`Platform: ${o}`,d=new Qe(l);return(f=[])=>{let _=Xp();if(!_||_.injector.get(Iw,!1)){const E=[...u,...f,{provide:d,useValue:!0}];i?i(E):function Wb(i){if(Fa&&!Fa.get(Iw,!1))throw new ot(400,!1);(function Ew(){!function U(i){j=i}(()=>{throw new ot(600,!1)})})(),Fa=i;const o=i.get(Jp);(function $s(i){i.get(cE,null)?.forEach(u=>u())})(i)}(function vl(i=[],o){return To.create({name:o,providers:[{provide:sE,useValue:"platform"},{provide:Ci,useValue:new Set([()=>Fa=null])},...i]})}(E,l))}return function gs(i){const o=Xp();if(!o)throw new ot(401,!1);return o}()}}function Xp(){return Fa?.get(Jp)??null}let Jp=(()=>{class i{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function pf(i="zone.js",o){return"noop"===i?new AE:"zone.js"===i?new Vs(o):i}(l?.ngZone,function Kb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function nd(i,o,u){return new K0(i,o,u)}(u.moduleType,this.injector,function ty(i){return[{provide:Vs,useFactory:i},{provide:Qf,multi:!0,useFactory:()=>{const o=Gn(eg,{optional:!0});return()=>o.initialize()}},{provide:ad,useFactory:Qb},{provide:TA,useFactory:c_}]}(()=>d)),_=f.injector.get(Gd,null);return d.runOutsideAngular(()=>{const E=d.onError.subscribe({next:R=>{_.handleError(R)}});f.onDestroy(()=>{Mu(this._modules,f),E.unsubscribe()})}),function od(i,o,u){try{const l=u();return V_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(_,d,()=>{const E=f.injector.get(yl);return E.runInitializers(),E.donePromise.then(()=>(function Sp(i){fr(i,"Expected localeId to be defined"),"string"==typeof i&&(LD=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(hf,Zd)||Zd),this._moduleDoBootstrap(f),f))})})}bootstrapModule(u,l=[]){const d=ey({},l);return function Ho(i,o,u){const l=new td(u);return Promise.resolve(l)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const l=u.injector.get(Pu);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ot(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ot(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Ci,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(l){return new(l||i)(jr(To))}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();function ey(i,o){return Array.isArray(o)?o.reduce(ey,i):{...i,...o}}let Pu=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Gn(ad),this.zoneIsStable=Gn(TA),this.componentTypes=[],this.components=[],this.isStable=Gn(Ub).hasPendingTasks.pipe((0,Tn.n)(u=>u?(0,ce.of)(!1):this.zoneIsStable),(0,fn.F)(),st()),this._injector=Gn(ul)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const d=u instanceof r_;if(!this._injector.get(yl).done)throw!d&&Ws(u),new ot(405,!1);let _;_=d?u:this._injector.get(no).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const E=function Yp(i){return i.isBoundToModule}(_)?void 0:this._injector.get(af),L=_.create(To.NULL,[],l||_.selector,E),H=L.location.nativeElement,ie=L.injector.get(_w,null);return ie?.registerApplication(H),L.onDestroy(()=>{this.detachView(L.hostView),Mu(this.components,L),ie?.unregisterApplication(H)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new ot(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Mu(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(Qp,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Mu(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ot(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Mu(i,o){const u=i.indexOf(o);u>-1&&i.splice(u,1)}const ad=new Qe("",{providedIn:"root",factory:()=>Gn(Gd).handleError.bind(void 0)});function Qb(){const i=Gn(Vs),o=Gn(Gd);return u=>i.runOutsideAngular(()=>o.handleError(u))}let eg=(()=>{class i{constructor(){this.zone=Gn(Vs),this.applicationRef=Gn(Pu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=Cn({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();let ry=(()=>{class i{static{this.__NG_ELEMENT_ID__=Jb}}return i})();function Jb(i){return function Jx(i,o,u){if(_s(i)&&!u){const l=ki(i.index,o);return new hl(l,l)}return 47&i.type?new hl(o[Or],o):null}(Fi(),dt(),16==(16&i))}class Aw{constructor(){}supports(o){return Us(o)}create(o){return new s1(o)}}const i1=(i,o)=>o;class s1{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||i1}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,f=null;for(;u||l;){const _=!l||u&&u.currentIndex<Dw(l,d,f)?u:l,E=Dw(_,d,f),R=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{f||(f=[]);const L=E-d,H=R-d;if(L!=H){for(let fe=0;fe<L;fe++){const Ae=fe<f.length?f[fe]:f[fe]=0,Je=Ae+fe;H<=Je&&Je<L&&(f[fe]=Ae+1)}f[_.previousIndex]=H-L}}E!==R&&o(_,E,R)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Us(o))throw new ot(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],_=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,f,_,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,_,E),l=!0),u=u._next}else d=0,function fl(i,o){if(Array.isArray(i))for(let u=0;u<i.length;u++)o(i[u]);else{const u=i[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,E,_,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,_,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new o1(u,l),f,d),o}_verifyReinsertion(o,u,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new rC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class o1{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nC{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class rC{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new nC,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dw(i,o,u){const l=i.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class iC{constructor(){}supports(o){return o instanceof Map||nD(o)}create(){return new a1}}class a1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||nD(o)))throw new ot(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new u1(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class u1{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fv(){return new ud([new Aw])}let ud=(()=>{class i{static{this.\u0275prov=Cn({token:i,providedIn:"root",factory:Fv})}constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new i(u)}static extend(u){return{provide:i,useFactory:l=>i.create(u,l||Fv()),deps:[[i,new nl,new Pf]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new ot(901,!1)}}return i})();function ay(){return new ng([new iC])}let ng=(()=>{class i{static{this.\u0275prov=Cn({token:i,providedIn:"root",factory:ay})}constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new i(u)}static extend(u){return{provide:i,useFactory:l=>i.create(u,l||ay()),deps:[[i,new nl,new Pf]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new ot(901,!1)}}return i})();const rg=sd(null,"core",[]);let aC=(()=>{class i{constructor(u){}static{this.\u0275fac=function(l){return new(l||i)(jr(Pu))}}static{this.\u0275mod=Ko({type:i})}static{this.\u0275inj=ni({})}}return i})();function dr(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function fC(i){const o=Dn(i);if(!o)return null;const u=new om(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},1631:(ln,it,Z)=>{Z.d(it,{Dk:()=>$r,KO:()=>Cn,MF:()=>Jn,Sx:()=>Tt,Wp:()=>fr,j6:()=>gt,om:()=>pt});var N=Z(467),he=Z(8779),Ie=Z(5398),Me=Z(1401),Te=Z(6749);class re{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(zt=>{if(function K(Qe){const nt=Qe.getComponent();return"VERSION"===nt?.type}(zt)){const sn=zt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(zt=>zt).join(" ")}}const mt="@firebase/app",ue=new Ie.Vy("@firebase/app"),wr="[DEFAULT]",Dr={[mt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xe=new Map,Re=new Map;function Be(Qe,nt){try{Qe.container.addComponent(nt)}catch(zt){ue.debug(`Component ${nt.name} failed to register with FirebaseApp ${Qe.name}`,zt)}}function pt(Qe){const nt=Qe.name;if(Re.has(nt))return ue.debug(`There were multiple attempts to register component ${nt}.`),!1;Re.set(nt,Qe);for(const zt of xe.values())Be(zt,Qe);return!0}function gt(Qe,nt){const zt=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return zt&&zt.triggerHeartbeat(),Qe.container.getProvider(nt)}const Xt=new Me.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sr{constructor(nt,zt,sn){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},zt),this._name=zt.name,this._automaticDataCollectionEnabled=zt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new he.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}const Jn="9.23.0";function fr(Qe,nt={}){let zt=Qe;"object"!=typeof nt&&(nt={name:nt});const sn=Object.assign({name:wr,automaticDataCollectionEnabled:!1},nt),kn=sn.name;if("string"!=typeof kn||!kn)throw Xt.create("bad-app-name",{appName:String(kn)});if(zt||(zt=(0,Me.T9)()),!zt)throw Xt.create("no-options");const Sn=xe.get(kn);if(Sn){if((0,Me.bD)(zt,Sn.options)&&(0,Me.bD)(sn,Sn.config))return Sn;throw Xt.create("duplicate-app",{appName:kn})}const Ir=new he.h1(kn);for(const q of Re.values())Ir.addComponent(q);const ae=new sr(zt,sn,Ir);return xe.set(kn,ae),ae}function Tt(Qe=wr){const nt=xe.get(Qe);if(!nt&&Qe===wr&&(0,Me.T9)())return fr();if(!nt)throw Xt.create("no-app",{appName:Qe});return nt}function $r(){return Array.from(xe.values())}function Cn(Qe,nt,zt){var sn;let kn=null!==(sn=Dr[Qe])&&void 0!==sn?sn:Qe;zt&&(kn+=`-${zt}`);const Sn=kn.match(/\s|\//),Ir=nt.match(/\s|\//);if(Sn||Ir){const ae=[`Unable to register library "${kn}" with version "${nt}":`];return Sn&&ae.push(`library name "${kn}" contains illegal characters (whitespace or "/")`),Sn&&Ir&&ae.push("and"),Ir&&ae.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void ue.warn(ae.join(" "))}pt(new he.uA(`${kn}-version`,()=>({library:kn,version:nt}),"VERSION"))}const Br="firebase-heartbeat-database",Pr=1,In="firebase-heartbeat-store";let Vn=null;function gr(){return Vn||(Vn=(0,Te.P2)(Br,Pr,{upgrade:(Qe,nt)=>{0===nt&&Qe.createObjectStore(In)}}).catch(Qe=>{throw Xt.create("idb-open",{originalErrorMessage:Qe.message})})),Vn}function Mr(){return(Mr=(0,N.A)(function*(Qe){try{return yield(yield gr()).transaction(In).objectStore(In).get(cn(Qe))}catch(nt){if(nt instanceof Me.g)ue.warn(nt.message);else{const zt=Xt.create("idb-get",{originalErrorMessage:nt?.message});ue.warn(zt.message)}}})).apply(this,arguments)}function Wr(Qe,nt){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,N.A)(function*(Qe,nt){try{const sn=(yield gr()).transaction(In,"readwrite");yield sn.objectStore(In).put(nt,cn(Qe)),yield sn.done}catch(zt){if(zt instanceof Me.g)ue.warn(zt.message);else{const sn=Xt.create("idb-set",{originalErrorMessage:zt?.message});ue.warn(sn.message)}}})).apply(this,arguments)}function cn(Qe){return`${Qe.name}!${Qe.options.appId}`}class An{constructor(nt){this.container=nt,this._heartbeatsCache=null;const zt=this.container.getProvider("app").getImmediate();this._storage=new vr(zt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var nt=this;return(0,N.A)(function*(){const sn=nt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kn=Qi();if(null===nt._heartbeatsCache&&(nt._heartbeatsCache=yield nt._heartbeatsCachePromise),nt._heartbeatsCache.lastSentHeartbeatDate!==kn&&!nt._heartbeatsCache.heartbeats.some(Sn=>Sn.date===kn))return nt._heartbeatsCache.heartbeats.push({date:kn,agent:sn}),nt._heartbeatsCache.heartbeats=nt._heartbeatsCache.heartbeats.filter(Sn=>{const Ir=new Date(Sn.date).valueOf();return Date.now()-Ir<=2592e6}),nt._storage.overwrite(nt._heartbeatsCache)})()}getHeartbeatsHeader(){var nt=this;return(0,N.A)(function*(){if(null===nt._heartbeatsCache&&(yield nt._heartbeatsCachePromise),null===nt._heartbeatsCache||0===nt._heartbeatsCache.heartbeats.length)return"";const zt=Qi(),{heartbeatsToSend:sn,unsentEntries:kn}=function ss(Qe,nt=1024){const zt=[];let sn=Qe.slice();for(const kn of Qe){const Sn=zt.find(Ir=>Ir.agent===kn.agent);if(Sn){if(Sn.dates.push(kn.date),_i(zt)>nt){Sn.dates.pop();break}}else if(zt.push({agent:kn.agent,dates:[kn.date]}),_i(zt)>nt){zt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:zt,unsentEntries:sn}}(nt._heartbeatsCache.heartbeats),Sn=(0,Me.Uj)(JSON.stringify({version:2,heartbeats:sn}));return nt._heartbeatsCache.lastSentHeartbeatDate=zt,kn.length>0?(nt._heartbeatsCache.heartbeats=kn,yield nt._storage.overwrite(nt._heartbeatsCache)):(nt._heartbeatsCache.heartbeats=[],nt._storage.overwrite(nt._heartbeatsCache)),Sn})()}}function Qi(){return(new Date).toISOString().substring(0,10)}class vr{constructor(nt){this.app=nt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,N.A)(function*(){return!!(0,Me.zW)()&&(0,Me.eX)().then(()=>!0).catch(()=>!1)})()}read(){var nt=this;return(0,N.A)(function*(){return(yield nt._canUseIndexedDBPromise)&&(yield function ri(Qe){return Mr.apply(this,arguments)}(nt.app))||{heartbeats:[]}})()}overwrite(nt){var zt=this;return(0,N.A)(function*(){var sn;if(yield zt._canUseIndexedDBPromise){const Sn=yield zt.read();return Wr(zt.app,{lastSentHeartbeatDate:null!==(sn=nt.lastSentHeartbeatDate)&&void 0!==sn?sn:Sn.lastSentHeartbeatDate,heartbeats:nt.heartbeats})}})()}add(nt){var zt=this;return(0,N.A)(function*(){var sn;if(yield zt._canUseIndexedDBPromise){const Sn=yield zt.read();return Wr(zt.app,{lastSentHeartbeatDate:null!==(sn=nt.lastSentHeartbeatDate)&&void 0!==sn?sn:Sn.lastSentHeartbeatDate,heartbeats:[...Sn.heartbeats,...nt.heartbeats]})}})()}}function _i(Qe){return(0,Me.Uj)(JSON.stringify({version:2,heartbeats:Qe})).length}!function zi(Qe){pt(new he.uA("platform-logger",nt=>new re(nt),"PRIVATE")),pt(new he.uA("heartbeat",nt=>new An(nt),"PRIVATE")),Cn(mt,"0.9.13",Qe),Cn(mt,"0.9.13","esm2017"),Cn("fire-js","")}("")},8779:(ln,it,Z)=>{Z.d(it,{h1:()=>mt,uA:()=>Ie});var N=Z(467),he=Z(1401);class Ie{constructor(ue,ce,Se){this.name=ue,this.instanceFactory=ce,this.type=Se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const Me="[DEFAULT]";class Te{constructor(ue,ce){this.name=ue,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const ce=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(ce)){const Se=new he.cY;if(this.instancesDeferred.set(ce,Se),this.isInitialized(ce)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:ce});tt&&Se.resolve(tt)}catch{}}return this.instancesDeferred.get(ce).promise}getImmediate(ue){var ce;const Se=this.normalizeInstanceIdentifier(ue?.identifier),tt=null!==(ce=ue?.optional)&&void 0!==ce&&ce;if(!this.isInitialized(Se)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Se})}catch(st){if(tt)return null;throw st}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function K(Ze){return"EAGER"===Ze.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:Me})}catch{}for(const[ce,Se]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(ce);try{const st=this.getOrInitializeService({instanceIdentifier:tt});Se.resolve(st)}catch{}}}}clearInstance(ue=Me){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,N.A)(function*(){const ce=Array.from(ue.instances.values());yield Promise.all([...ce.filter(Se=>"INTERNAL"in Se).map(Se=>Se.INTERNAL.delete()),...ce.filter(Se=>"_delete"in Se).map(Se=>Se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=Me){return this.instances.has(ue)}getOptions(ue=Me){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:ce={}}=ue,Se=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(Se))throw Error(`${this.name}(${Se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:Se,options:ce});for(const[st,Mt]of this.instancesDeferred.entries())Se===this.normalizeInstanceIdentifier(st)&&Mt.resolve(tt);return tt}onInit(ue,ce){var Se;const tt=this.normalizeInstanceIdentifier(ce),st=null!==(Se=this.onInitCallbacks.get(tt))&&void 0!==Se?Se:new Set;st.add(ue),this.onInitCallbacks.set(tt,st);const Mt=this.instances.get(tt);return Mt&&ue(Mt,tt),()=>{st.delete(ue)}}invokeOnInitCallbacks(ue,ce){const Se=this.onInitCallbacks.get(ce);if(Se)for(const tt of Se)try{tt(ue,ce)}catch{}}getOrInitializeService({instanceIdentifier:ue,options:ce={}}){let Se=this.instances.get(ue);if(!Se&&this.component&&(Se=this.component.instanceFactory(this.container,{instanceIdentifier:(Ze=ue,Ze===Me?void 0:Ze),options:ce}),this.instances.set(ue,Se),this.instancesOptions.set(ue,ce),this.invokeOnInitCallbacks(Se,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,Se)}catch{}var Ze;return Se||null}normalizeInstanceIdentifier(ue=Me){return this.component?this.component.multipleInstances?ue:Me:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class mt{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const ce=this.getProvider(ue.name);if(ce.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);ce.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const ce=new Te(ue,this);return this.providers.set(ue,ce),ce}getProviders(){return Array.from(this.providers.values())}}},5398:(ln,it,Z)=>{Z.d(it,{$b:()=>he,Vy:()=>K});const N=[];var he=function(ue){return ue[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",ue}(he||{});const Ie={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},Me=he.INFO,Te={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},re=(ue,ce,...Se)=>{if(ce<ue.logLevel)return;const tt=(new Date).toISOString(),st=Te[ce];if(!st)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[st](`[${tt}]  ${ue.name}:`,...Se)};class K{constructor(ce){this.name=ce,this._logLevel=Me,this._logHandler=re,this._userLogHandler=null,N.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in he))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?Ie[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...ce),this._logHandler(this,he.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...ce),this._logHandler(this,he.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,he.INFO,...ce),this._logHandler(this,he.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,he.WARN,...ce),this._logHandler(this,he.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...ce),this._logHandler(this,he.ERROR,...ce)}}},7037:(ln,it,Z)=>{Z.d(it,{Dk:()=>N.Dk,KO:()=>N.KO,Sx:()=>N.Sx,Wp:()=>N.Wp});var N=Z(1631);(0,N.KO)("firebase","9.23.0","app")},345:(ln,it,Z)=>{Z.d(it,{Bb:()=>Tt,hE:()=>gn,sG:()=>Xt});var N=Z(6276),he=Z(177);class Ie extends he.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Me extends Ie{static makeCurrent(){(0,he.ZD)(new Me)}onAndCancel(Q,W,X){return Q.addEventListener(W,X),()=>{Q.removeEventListener(W,X)}}dispatchEvent(Q,W){Q.dispatchEvent(W)}remove(Q){Q.parentNode&&Q.parentNode.removeChild(Q)}createElement(Q,W){return(W=W||this.getDefaultDocument()).createElement(Q)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Q){return Q.nodeType===Node.ELEMENT_NODE}isShadowRoot(Q){return Q instanceof DocumentFragment}getGlobalEventTarget(Q,W){return"window"===W?window:"document"===W?Q:"body"===W?Q.body:null}getBaseHref(Q){const W=function re(){return Te=Te||document.querySelector("base"),Te?Te.getAttribute("href"):null}();return null==W?null:function mt(q){K=K||document.createElement("a"),K.setAttribute("href",q);const Q=K.pathname;return"/"===Q.charAt(0)?Q:`/${Q}`}(W)}resetBaseElement(){Te=null}getUserAgent(){return window.navigator.userAgent}getCookie(Q){return(0,he._b)(document.cookie,Q)}}let K,Te=null,ue=(()=>{class q{build(){return new XMLHttpRequest}static{this.\u0275fac=function(X){return new(X||q)}}static{this.\u0275prov=N.jDH({token:q,factory:q.\u0275fac})}}return q})();const ce=new N.nKC("EventManagerPlugins");let Se=(()=>{class q{constructor(W,X){this._zone=X,this._eventNameToPlugin=new Map,W.forEach(we=>{we.manager=this}),this._plugins=W.slice().reverse()}addEventListener(W,X,we){return this._findPluginFor(X).addEventListener(W,X,we)}getZone(){return this._zone}_findPluginFor(W){let X=this._eventNameToPlugin.get(W);if(X)return X;if(X=this._plugins.find(at=>at.supports(W)),!X)throw new N.wOt(5101,!1);return this._eventNameToPlugin.set(W,X),X}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(ce),N.KVO(N.SKi))}}static{this.\u0275prov=N.jDH({token:q,factory:q.\u0275fac})}}return q})();class tt{constructor(Q){this._doc=Q}}const st="ng-app-id";let Mt=(()=>{class q{constructor(W,X,we,at={}){this.doc=W,this.appId=X,this.nonce=we,this.platformId=at,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,he.Vy)(at),this.resetHostNodes()}addStyles(W){for(const X of W)1===this.changeUsageCount(X,1)&&this.onStyleAdded(X)}removeStyles(W){for(const X of W)this.changeUsageCount(X,-1)<=0&&this.onStyleRemoved(X)}ngOnDestroy(){const W=this.styleNodesInDOM;W&&(W.forEach(X=>X.remove()),W.clear());for(const X of this.getAllStyles())this.onStyleRemoved(X);this.resetHostNodes()}addHost(W){this.hostNodes.add(W);for(const X of this.getAllStyles())this.addStyleToHost(W,X)}removeHost(W){this.hostNodes.delete(W)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(W){for(const X of this.hostNodes)this.addStyleToHost(X,W)}onStyleRemoved(W){const X=this.styleRef;X.get(W)?.elements?.forEach(we=>we.remove()),X.delete(W)}collectServerRenderedStyles(){const W=this.doc.head?.querySelectorAll(`style[${st}="${this.appId}"]`);if(W?.length){const X=new Map;return W.forEach(we=>{null!=we.textContent&&X.set(we.textContent,we)}),X}return null}changeUsageCount(W,X){const we=this.styleRef;if(we.has(W)){const at=we.get(W);return at.usage+=X,at.usage}return we.set(W,{usage:X,elements:[]}),X}getStyleElement(W,X){const we=this.styleNodesInDOM,at=we?.get(X);if(at?.parentNode===W)return we.delete(X),at.removeAttribute(st),at;{const Ft=this.doc.createElement("style");return this.nonce&&Ft.setAttribute("nonce",this.nonce),Ft.textContent=X,this.platformIsServer&&Ft.setAttribute(st,this.appId),Ft}}addStyleToHost(W,X){const we=this.getStyleElement(W,X);W.appendChild(we);const at=this.styleRef,Ft=at.get(X)?.elements;Ft?Ft.push(we):at.set(X,{elements:[we],usage:1})}resetHostNodes(){const W=this.hostNodes;W.clear(),W.add(this.doc.head)}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(he.qQ),N.KVO(N.sZ2),N.KVO(N.BIS,8),N.KVO(N.Agw))}}static{this.\u0275prov=N.jDH({token:q,factory:q.\u0275fac})}}return q})();const Tn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fn=/%COMP%/g,vt=new N.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function kt(q,Q){return Q.map(W=>W.replace(fn,q))}let Ne=(()=>{class q{constructor(W,X,we,at,Ft,Rn,En,Er=null){this.eventManager=W,this.sharedStylesHost=X,this.appId=we,this.removeStylesOnCompDestroy=at,this.doc=Ft,this.platformId=Rn,this.ngZone=En,this.nonce=Er,this.rendererByCompId=new Map,this.platformIsServer=(0,he.Vy)(Rn),this.defaultRenderer=new ft(W,Ft,En,this.platformIsServer)}createRenderer(W,X){if(!W||!X)return this.defaultRenderer;this.platformIsServer&&X.encapsulation===N.gXe.ShadowDom&&(X={...X,encapsulation:N.gXe.Emulated});const we=this.getOrCreateRenderer(W,X);return we instanceof hr?we.applyToHost(W):we instanceof Ut&&we.applyStyles(),we}getOrCreateRenderer(W,X){const we=this.rendererByCompId;let at=we.get(X.id);if(!at){const Ft=this.doc,Rn=this.ngZone,En=this.eventManager,Er=this.sharedStylesHost,Fn=this.removeStylesOnCompDestroy,br=this.platformIsServer;switch(X.encapsulation){case N.gXe.Emulated:at=new hr(En,Er,X,this.appId,Fn,Ft,Rn,br);break;case N.gXe.ShadowDom:return new ze(En,Er,W,X,Ft,Rn,this.nonce,br);default:at=new Ut(En,Er,X,Fn,Ft,Rn,br)}we.set(X.id,at)}return at}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(Se),N.KVO(Mt),N.KVO(N.sZ2),N.KVO(vt),N.KVO(he.qQ),N.KVO(N.Agw),N.KVO(N.SKi),N.KVO(N.BIS))}}static{this.\u0275prov=N.jDH({token:q,factory:q.\u0275fac})}}return q})();class ft{constructor(Q,W,X,we){this.eventManager=Q,this.doc=W,this.ngZone=X,this.platformIsServer=we,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Q,W){return W?this.doc.createElementNS(Tn[W]||W,Q):this.doc.createElement(Q)}createComment(Q){return this.doc.createComment(Q)}createText(Q){return this.doc.createTextNode(Q)}appendChild(Q,W){(Xn(Q)?Q.content:Q).appendChild(W)}insertBefore(Q,W,X){Q&&(Xn(Q)?Q.content:Q).insertBefore(W,X)}removeChild(Q,W){Q&&Q.removeChild(W)}selectRootElement(Q,W){let X="string"==typeof Q?this.doc.querySelector(Q):Q;if(!X)throw new N.wOt(-5104,!1);return W||(X.textContent=""),X}parentNode(Q){return Q.parentNode}nextSibling(Q){return Q.nextSibling}setAttribute(Q,W,X,we){if(we){W=we+":"+W;const at=Tn[we];at?Q.setAttributeNS(at,W,X):Q.setAttribute(W,X)}else Q.setAttribute(W,X)}removeAttribute(Q,W,X){if(X){const we=Tn[X];we?Q.removeAttributeNS(we,W):Q.removeAttribute(`${X}:${W}`)}else Q.removeAttribute(W)}addClass(Q,W){Q.classList.add(W)}removeClass(Q,W){Q.classList.remove(W)}setStyle(Q,W,X,we){we&(N.czy.DashCase|N.czy.Important)?Q.style.setProperty(W,X,we&N.czy.Important?"important":""):Q.style[W]=X}removeStyle(Q,W,X){X&N.czy.DashCase?Q.style.removeProperty(W):Q.style[W]=""}setProperty(Q,W,X){Q[W]=X}setValue(Q,W){Q.nodeValue=W}listen(Q,W,X){if("string"==typeof Q&&!(Q=(0,he.QT)().getGlobalEventTarget(this.doc,Q)))throw new Error(`Unsupported event target ${Q} for event ${W}`);return this.eventManager.addEventListener(Q,W,this.decoratePreventDefault(X))}decoratePreventDefault(Q){return W=>{if("__ngUnwrap__"===W)return Q;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Q(W)):Q(W))&&W.preventDefault()}}}function Xn(q){return"TEMPLATE"===q.tagName&&void 0!==q.content}class ze extends ft{constructor(Q,W,X,we,at,Ft,Rn,En){super(Q,at,Ft,En),this.sharedStylesHost=W,this.hostEl=X,this.shadowRoot=X.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Er=kt(we.id,we.styles);for(const Fn of Er){const br=document.createElement("style");Rn&&br.setAttribute("nonce",Rn),br.textContent=Fn,this.shadowRoot.appendChild(br)}}nodeOrShadowRoot(Q){return Q===this.hostEl?this.shadowRoot:Q}appendChild(Q,W){return super.appendChild(this.nodeOrShadowRoot(Q),W)}insertBefore(Q,W,X){return super.insertBefore(this.nodeOrShadowRoot(Q),W,X)}removeChild(Q,W){return super.removeChild(this.nodeOrShadowRoot(Q),W)}parentNode(Q){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Q)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ut extends ft{constructor(Q,W,X,we,at,Ft,Rn,En){super(Q,at,Ft,Rn),this.sharedStylesHost=W,this.removeStylesOnCompDestroy=we,this.styles=En?kt(En,X.styles):X.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class hr extends Ut{constructor(Q,W,X,we,at,Ft,Rn,En){const Er=we+"-"+X.id;super(Q,W,X,at,Ft,Rn,En,Er),this.contentAttr=function ht(q){return"_ngcontent-%COMP%".replace(fn,q)}(Er),this.hostAttr=function Xe(q){return"_nghost-%COMP%".replace(fn,q)}(Er)}applyToHost(Q){this.applyStyles(),this.setAttribute(Q,this.hostAttr,"")}createElement(Q,W){const X=super.createElement(Q,W);return super.setAttribute(X,this.contentAttr,""),X}}let an=(()=>{class q extends tt{constructor(W){super(W)}supports(W){return!0}addEventListener(W,X,we){return W.addEventListener(X,we,!1),()=>this.removeEventListener(W,X,we)}removeEventListener(W,X,we){return W.removeEventListener(X,we)}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(he.qQ))}}static{this.\u0275prov=N.jDH({token:q,factory:q.\u0275fac})}}return q})();const Cr=["alt","control","meta","shift"],wr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dr={alt:q=>q.altKey,control:q=>q.ctrlKey,meta:q=>q.metaKey,shift:q=>q.shiftKey};let xe=(()=>{class q extends tt{constructor(W){super(W)}supports(W){return null!=q.parseEventName(W)}addEventListener(W,X,we){const at=q.parseEventName(X),Ft=q.eventCallback(at.fullKey,we,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,he.QT)().onAndCancel(W,at.domEventName,Ft))}static parseEventName(W){const X=W.toLowerCase().split("."),we=X.shift();if(0===X.length||"keydown"!==we&&"keyup"!==we)return null;const at=q._normalizeKey(X.pop());let Ft="",Rn=X.indexOf("code");if(Rn>-1&&(X.splice(Rn,1),Ft="code."),Cr.forEach(Er=>{const Fn=X.indexOf(Er);Fn>-1&&(X.splice(Fn,1),Ft+=Er+".")}),Ft+=at,0!=X.length||0===at.length)return null;const En={};return En.domEventName=we,En.fullKey=Ft,En}static matchEventFullKeyCode(W,X){let we=wr[W.key]||W.key,at="";return X.indexOf("code.")>-1&&(we=W.code,at="code."),!(null==we||!we)&&(we=we.toLowerCase()," "===we?we="space":"."===we&&(we="dot"),Cr.forEach(Ft=>{Ft!==we&&(0,Dr[Ft])(W)&&(at+=Ft+".")}),at+=we,at===X)}static eventCallback(W,X,we){return at=>{q.matchEventFullKeyCode(at,W)&&we.runGuarded(()=>X(at))}}static _normalizeKey(W){return"esc"===W?"escape":W}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(he.qQ))}}static{this.\u0275prov=N.jDH({token:q,factory:q.\u0275fac})}}return q})();const Xt=(0,N.oH4)(N.fpN,"browser",[{provide:N.Agw,useValue:he.AJ},{provide:N.PLl,useValue:function gt(){Me.makeCurrent()},multi:!0},{provide:he.qQ,useFactory:function $t(){return(0,N.TL$)(document),document},deps:[]}]),sr=new N.nKC(""),Jn=[{provide:N.e01,useClass:class Ze{addToWindow(Q){N.JZv.getAngularTestability=(X,we=!0)=>{const at=Q.findTestabilityInTree(X,we);if(null==at)throw new N.wOt(5103,!1);return at},N.JZv.getAllAngularTestabilities=()=>Q.getAllTestabilities(),N.JZv.getAllAngularRootElements=()=>Q.getAllRootElements(),N.JZv.frameworkStabilizers||(N.JZv.frameworkStabilizers=[]),N.JZv.frameworkStabilizers.push(X=>{const we=N.JZv.getAllAngularTestabilities();let at=we.length,Ft=!1;const Rn=function(En){Ft=Ft||En,at--,0==at&&X(Ft)};we.forEach(En=>{En.whenStable(Rn)})})}findTestabilityInTree(Q,W,X){return null==W?null:Q.getTestability(W)??(X?(0,he.QT)().isShadowRoot(W)?this.findTestabilityInTree(Q,W.host,!0):this.findTestabilityInTree(Q,W.parentElement,!0):null)}},deps:[]},{provide:N.WHO,useClass:N.NYb,deps:[N.SKi,N.giA,N.e01]},{provide:N.NYb,useClass:N.NYb,deps:[N.SKi,N.giA,N.e01]}],fr=[{provide:N.H8p,useValue:"root"},{provide:N.zcH,useFactory:function Nt(){return new N.zcH},deps:[]},{provide:ce,useClass:an,multi:!0,deps:[he.qQ,N.SKi,N.Agw]},{provide:ce,useClass:xe,multi:!0,deps:[he.qQ]},Ne,Mt,Se,{provide:N._9s,useExisting:Ne},{provide:he.N0,useClass:ue,deps:[]},[]];let Tt=(()=>{class q{constructor(W){}static withServerTransition(W){return{ngModule:q,providers:[{provide:N.sZ2,useValue:W.appId}]}}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(sr,12))}}static{this.\u0275mod=N.$C({type:q})}static{this.\u0275inj=N.G2t({providers:[...fr,...Jn],imports:[he.MD,N.Hbi]})}}return q})(),gn=(()=>{class q{constructor(W){this._doc=W}getTitle(){return this._doc.title}setTitle(W){this._doc.title=W||""}static{this.\u0275fac=function(X){return new(X||q)(N.KVO(he.qQ))}}static{this.\u0275prov=N.jDH({token:q,factory:function(X){let we=null;return we=X?new X:function Cn(){return new gn((0,N.KVO)(he.qQ))}(),we},providedIn:"root"})}}return q})();typeof window<"u"&&window},6143:(ln,it,Z)=>{Z.d(it,{Ix:()=>ci,Wk:()=>ds,iI:()=>Io,n3:()=>hi});var N=Z(6276),he=Z(1985),Ie=Z(8071),Te=Z(8455),re=Z(7673),K=Z(4412),mt=Z(3073),Ze=Z(3669),ue=Z(6450),ce=Z(3794),Se=Z(8496),tt=Z(4360),st=Z(5225);function Mt(...w){const C=(0,ce.lI)(w),I=(0,ce.ms)(w),{args:x,keys:F}=(0,mt.D)(w);if(0===x.length)return(0,Te.H)([],C);const G=new he.c(function Tn(w,C,I=Ze.D){return x=>{fn(C,()=>{const{length:F}=w,G=new Array(F);let se=F,Ue=F;for(let Fe=0;Fe<F;Fe++)fn(C,()=>{const Lt=(0,Te.H)(w[Fe],C);let bn=!1;Lt.subscribe((0,tt._)(x,Zn=>{G[Fe]=Zn,bn||(bn=!0,Ue--),Ue||x.next(I(G.slice()))},()=>{--se||x.complete()}))},x)},x)}}(x,C,F?se=>(0,Se.e)(F,se):Ze.D));return I?G.pipe((0,ue.I)(I)):G}function fn(w,C,I){w?(0,st.N)(I,w,C):C()}const Hn=(0,Z(1853).L)(w=>function(){w(this),this.name="EmptyError",this.message="no elements in sequence"});var pn=Z(6365);function vt(...w){return function bt(){return(0,pn.U)(1)}()((0,Te.H)(w,(0,ce.lI)(w)))}var ht=Z(8750);function Xe(w){return new he.c(C=>{(0,ht.Tg)(w()).subscribe(C)})}var kt=Z(1203);function Ne(w,C){const I=(0,Ie.T)(w)?w:()=>w,x=F=>F.error(I());return new he.c(C?F=>C.schedule(x,0,F):x)}var ft=Z(983),jt=Z(8359),ot=Z(9974);function Xn(){return(0,ot.N)((w,C)=>{let I=null;w._refCount++;const x=(0,tt._)(C,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(I=null);const F=w._connection,G=I;I=null,F&&(!G||F===G)&&F.unsubscribe(),C.unsubscribe()});w.subscribe(x),x.closed||(I=w.connect())})}class ze extends he.c{constructor(C,I){super(),this.source=C,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,ot.S)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new jt.yU;const I=this.getSubject();C.add(this.source.subscribe((0,tt._)(I,void 0,()=>{this._teardown(),I.complete()},x=>{this._teardown(),I.error(x)},()=>this._teardown()))),C.closed&&(this._connection=null,C=jt.yU.EMPTY)}return C}refCount(){return Xn()(this)}}var Ut=Z(1413),hr=Z(177),an=Z(6354),Cr=Z(5558);function wr(w){return w<=0?()=>ft.w:(0,ot.N)((C,I)=>{let x=0;C.subscribe((0,tt._)(I,F=>{++x<=w&&(I.next(F),w<=x&&I.complete())}))})}function xe(w,C){return(0,ot.N)((I,x)=>{let F=0;I.subscribe((0,tt._)(x,G=>w.call(C,G,F++)&&x.next(G)))})}var Re=Z(1397);function Be(w){return(0,ot.N)((C,I)=>{let x=!1;C.subscribe((0,tt._)(I,F=>{x=!0,I.next(F)},()=>{x||I.next(w),I.complete()}))})}function je(w=pt){return(0,ot.N)((C,I)=>{let x=!1;C.subscribe((0,tt._)(I,F=>{x=!0,I.next(F)},()=>x?I.complete():I.error(w())))})}function pt(){return new Hn}function gt(w,C){const I=arguments.length>=2;return x=>x.pipe(w?xe((F,G)=>w(F,G,x)):Ze.D,wr(1),I?Be(C):je(()=>new Hn))}function Nt(w,C){return(0,Ie.T)(C)?(0,Re.Z)(w,C,1):(0,Re.Z)(w,1)}var $t=Z(8141);function Bn(w){return(0,ot.N)((C,I)=>{let G,x=null,F=!1;x=C.subscribe((0,tt._)(I,void 0,void 0,se=>{G=(0,ht.Tg)(w(se,Bn(w)(C))),x?(x.unsubscribe(),x=null,G.subscribe(I)):F=!0})),F&&(x.unsubscribe(),x=null,G.subscribe(I))})}function Jn(w){return w<=0?()=>ft.w:(0,ot.N)((C,I)=>{let x=[];C.subscribe((0,tt._)(I,F=>{x.push(F),w<x.length&&x.shift()},()=>{for(const F of x)I.next(F);I.complete()},void 0,()=>{x=null}))})}function $r(w){return(0,ot.N)((C,I)=>{try{C.subscribe(I)}finally{I.add(w)}})}var Ur=Z(5343),Cn=Z(345);const gn="primary",ni=Symbol("RouteTitle");class Br{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const I=this.params[C];return Array.isArray(I)?I[0]:I}return null}getAll(C){if(this.has(C)){const I=this.params[C];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Pr(w){return new Br(w)}function In(w,C,I){const x=I.path.split("/");if(x.length>w.length||"full"===I.pathMatch&&(C.hasChildren()||x.length<w.length))return null;const F={};for(let G=0;G<x.length;G++){const se=x[G],Ue=w[G];if(se.startsWith(":"))F[se.substring(1)]=Ue;else if(se!==Ue.path)return null}return{consumed:w.slice(0,x.length),posParams:F}}function gr(w,C){const I=w?Object.keys(w):void 0,x=C?Object.keys(C):void 0;if(!I||!x||I.length!=x.length)return!1;let F;for(let G=0;G<I.length;G++)if(F=I[G],!ri(w[F],C[F]))return!1;return!0}function ri(w,C){if(Array.isArray(w)&&Array.isArray(C)){if(w.length!==C.length)return!1;const I=[...w].sort(),x=[...C].sort();return I.every((F,G)=>x[G]===F)}return w===C}function Mr(w){return w.length>0?w[w.length-1]:null}function Wr(w){return function Me(w){return!!w&&(w instanceof he.c||(0,Ie.T)(w.lift)&&(0,Ie.T)(w.subscribe))}(w)?w:(0,N.jNT)(w)?(0,Te.H)(Promise.resolve(w)):(0,re.of)(w)}const Kr={exact:function An(w,C,I){if(!sn(w.segments,C.segments)||!_i(w.segments,C.segments,I)||w.numberOfChildren!==C.numberOfChildren)return!1;for(const x in C.children)if(!w.children[x]||!An(w.children[x],C.children[x],I))return!1;return!0},subset:ss},cn={exact:function ms(w,C){return gr(w,C)},subset:function Qi(w,C){return Object.keys(C).length<=Object.keys(w).length&&Object.keys(C).every(I=>ri(w[I],C[I]))},ignored:()=>!0};function or(w,C,I){return Kr[I.paths](w.root,C.root,I.matrixParams)&&cn[I.queryParams](w.queryParams,C.queryParams)&&!("exact"===I.fragment&&w.fragment!==C.fragment)}function ss(w,C,I){return vr(w,C,C.segments,I)}function vr(w,C,I,x){if(w.segments.length>I.length){const F=w.segments.slice(0,I.length);return!(!sn(F,I)||C.hasChildren()||!_i(F,I,x))}if(w.segments.length===I.length){if(!sn(w.segments,I)||!_i(w.segments,I,x))return!1;for(const F in C.children)if(!w.children[F]||!ss(w.children[F],C.children[F],x))return!1;return!0}{const F=I.slice(0,w.segments.length),G=I.slice(w.segments.length);return!!(sn(w.segments,F)&&_i(w.segments,F,x)&&w.children[gn])&&vr(w.children[gn],C,G,x)}}function _i(w,C,I){return C.every((x,F)=>cn[I](w[F].parameters,x.parameters))}class zi{constructor(C=new Qe([],{}),I={},x=null){this.root=C,this.queryParams=I,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pr(this.queryParams)),this._queryParamMap}toString(){return ae.serialize(this)}}class Qe{constructor(C,I){this.segments=C,this.children=I,this.parent=null,Object.values(I).forEach(x=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return q(this)}}class nt{constructor(C,I){this.path=C,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Pr(this.parameters)),this._parameterMap}toString(){return En(this)}}function sn(w,C){return w.length===C.length&&w.every((I,x)=>I.path===C[x].path)}let Sn=(()=>{class w{static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:function(){return new Ir},providedIn:"root"})}}return w})();class Ir{parse(C){const I=new Go(C);return new zi(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(C){const I=`/${Q(C.root,!0)}`,x=function Fn(w){const C=Object.keys(w).map(I=>{const x=w[I];return Array.isArray(x)?x.map(F=>`${X(I)}=${X(F)}`).join("&"):`${X(I)}=${X(x)}`}).filter(I=>!!I);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${I}${x}${"string"==typeof C.fragment?`#${function we(w){return encodeURI(w)}(C.fragment)}`:""}`}}const ae=new Ir;function q(w){return w.segments.map(C=>En(C)).join("/")}function Q(w,C){if(!w.hasChildren())return q(w);if(C){const I=w.children[gn]?Q(w.children[gn],!1):"",x=[];return Object.entries(w.children).forEach(([F,G])=>{F!==gn&&x.push(`${F}:${Q(G,!1)}`)}),x.length>0?`${I}(${x.join("//")})`:I}{const I=function kn(w,C){let I=[];return Object.entries(w.children).forEach(([x,F])=>{x===gn&&(I=I.concat(C(F,x)))}),Object.entries(w.children).forEach(([x,F])=>{x!==gn&&(I=I.concat(C(F,x)))}),I}(w,(x,F)=>F===gn?[Q(w.children[gn],!1)]:[`${F}:${Q(x,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[gn]?`${q(w)}/${I[0]}`:`${q(w)}/(${I.join("//")})`}}function W(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function X(w){return W(w).replace(/%3B/gi,";")}function at(w){return W(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ft(w){return decodeURIComponent(w)}function Rn(w){return Ft(w.replace(/\+/g,"%20"))}function En(w){return`${at(w.path)}${function Er(w){return Object.keys(w).map(C=>`;${at(C)}=${at(w[C])}`).join("")}(w.parameters)}`}const br=/^[^\/()?;#]+/;function Gs(w){const C=w.match(br);return C?C[0]:""}const Yi=/^[^\/()?;=#]+/,jr=/^[^=?&#]+/,Gn=/^[^&#]+/;class Go{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(C.length>0||Object.keys(I).length>0)&&(x[gn]=new Qe(C,I)),x}parseSegment(){const C=Gs(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new N.wOt(4009,!1);return this.capture(C),new nt(Ft(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const I=function ja(w){const C=w.match(Yi);return C?C[0]:""}(this.remaining);if(!I)return;this.capture(I);let x="";if(this.consumeOptional("=")){const F=Gs(this.remaining);F&&(x=F,this.capture(x))}C[Ft(I)]=Ft(x)}parseQueryParam(C){const I=function qs(w){const C=w.match(jr);return C?C[0]:""}(this.remaining);if(!I)return;this.capture(I);let x="";if(this.consumeOptional("=")){const se=function da(w){const C=w.match(Gn);return C?C[0]:""}(this.remaining);se&&(x=se,this.capture(x))}const F=Rn(I),G=Rn(x);if(C.hasOwnProperty(F)){let se=C[F];Array.isArray(se)||(se=[se],C[F]=se),se.push(G)}else C[F]=G}parseParens(C){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=Gs(this.remaining),F=this.remaining[x.length];if("/"!==F&&")"!==F&&";"!==F)throw new N.wOt(4010,!1);let G;x.indexOf(":")>-1?(G=x.slice(0,x.indexOf(":")),this.capture(G),this.capture(":")):C&&(G=gn);const se=this.parseChildren();I[G]=1===Object.keys(se).length?se[gn]:new Qe([],se),this.consumeOptional("//")}return I}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new N.wOt(4011,!1)}}function Ss(w){return w.segments.length>0?new Qe([],{[gn]:w}):w}function Ro(w){const C={};for(const x of Object.keys(w.children)){const G=Ro(w.children[x]);if(x===gn&&0===G.segments.length&&G.hasChildren())for(const[se,Ue]of Object.entries(G.children))C[se]=Ue;else(G.segments.length>0||G.hasChildren())&&(C[x]=G)}return function qo(w){if(1===w.numberOfChildren&&w.children[gn]){const C=w.children[gn];return new Qe(w.segments.concat(C.segments),C.children)}return w}(new Qe(w.segments,C))}function Mn(w){return w instanceof zi}function ha(w){let C;const F=Ss(function I(G){const se={};for(const Fe of G.children){const Lt=I(Fe);se[Fe.outlet]=Lt}const Ue=new Qe(G.url,se);return G===w&&(C=Ue),Ue}(w.root));return C??F}function Hi(w,C,I,x){let F=w;for(;F.parent;)F=F.parent;if(0===C.length)return Wo(F,F,F,I,x);const G=function pa(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new cu(!0,0,w);let C=0,I=!1;const x=w.reduce((F,G,se)=>{if("object"==typeof G&&null!=G){if(G.outlets){const Ue={};return Object.entries(G.outlets).forEach(([Fe,Lt])=>{Ue[Fe]="string"==typeof Lt?Lt.split("/"):Lt}),[...F,{outlets:Ue}]}if(G.segmentPath)return[...F,G.segmentPath]}return"string"!=typeof G?[...F,G]:0===se?(G.split("/").forEach((Ue,Fe)=>{0==Fe&&"."===Ue||(0==Fe&&""===Ue?I=!0:".."===Ue?C++:""!=Ue&&F.push(Ue))}),F):[...F,G]},[]);return new cu(I,C,x)}(C);if(G.toRoot())return Wo(F,F,new Qe([],{}),I,x);const se=function as(w,C,I){if(w.isAbsolute)return new Ji(C,!0,0);if(!I)return new Ji(C,!1,NaN);if(null===I.parent)return new Ji(I,!0,0);const x=Xi(w.commands[0])?0:1;return function uo(w,C,I){let x=w,F=C,G=I;for(;G>F;){if(G-=F,x=x.parent,!x)throw new N.wOt(4005,!1);F=x.segments.length}return new Ji(x,!1,F-G)}(I,I.segments.length-1+x,w.numberOfDoubleDots)}(G,F,w),Ue=se.processChildren?ge(se.segmentGroup,se.index,G.commands):lu(se.segmentGroup,se.index,G.commands);return Wo(F,se.segmentGroup,Ue,I,x)}function Xi(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Nn(w){return"object"==typeof w&&null!=w&&w.outlets}function Wo(w,C,I,x,F){let se,G={};x&&Object.entries(x).forEach(([Fe,Lt])=>{G[Fe]=Array.isArray(Lt)?Lt.map(bn=>`${bn}`):`${Lt}`}),se=w===C?I:fa(w,C,I);const Ue=Ss(Ro(se));return new zi(Ue,G,F)}function fa(w,C,I){const x={};return Object.entries(w.children).forEach(([F,G])=>{x[F]=G===C?I:fa(G,C,I)}),new Qe(w.segments,x)}class cu{constructor(C,I,x){if(this.isAbsolute=C,this.numberOfDoubleDots=I,this.commands=x,C&&x.length>0&&Xi(x[0]))throw new N.wOt(4003,!1);const F=x.find(Nn);if(F&&F!==Mr(x))throw new N.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ji{constructor(C,I,x){this.segmentGroup=C,this.processChildren=I,this.index=x}}function lu(w,C,I){if(w||(w=new Qe([],{})),0===w.segments.length&&w.hasChildren())return ge(w,C,I);const x=function ye(w,C,I){let x=0,F=C;const G={match:!1,pathIndex:0,commandIndex:0};for(;F<w.segments.length;){if(x>=I.length)return G;const se=w.segments[F],Ue=I[x];if(Nn(Ue))break;const Fe=`${Ue}`,Lt=x<I.length-1?I[x+1]:null;if(F>0&&void 0===Fe)break;if(Fe&&Lt&&"object"==typeof Lt&&void 0===Lt.outlets){if(!dn(Fe,Lt,se))return G;x+=2}else{if(!dn(Fe,{},se))return G;x++}F++}return{match:!0,pathIndex:F,commandIndex:x}}(w,C,I),F=I.slice(x.commandIndex);if(x.match&&x.pathIndex<w.segments.length){const G=new Qe(w.segments.slice(0,x.pathIndex),{});return G.children[gn]=new Qe(w.segments.slice(x.pathIndex),w.children),ge(G,0,F)}return x.match&&0===F.length?new Qe(w.segments,{}):x.match&&!w.hasChildren()?Oe(w,C,I):x.match?ge(w,0,F):Oe(w,C,I)}function ge(w,C,I){if(0===I.length)return new Qe(w.segments,{});{const x=function co(w){return Nn(w[0])?w[0].outlets:{[gn]:w}}(I),F={};if(Object.keys(x).some(G=>G!==gn)&&w.children[gn]&&1===w.numberOfChildren&&0===w.children[gn].segments.length){const G=ge(w.children[gn],C,I);return new Qe(w.segments,G.children)}return Object.entries(x).forEach(([G,se])=>{"string"==typeof se&&(se=[se]),null!==se&&(F[G]=lu(w.children[G],C,se))}),Object.entries(w.children).forEach(([G,se])=>{void 0===x[G]&&(F[G]=se)}),new Qe(w.segments,F)}}function Oe(w,C,I){const x=w.segments.slice(0,C);let F=0;for(;F<I.length;){const G=I[F];if(Nn(G)){const Fe=rt(G.outlets);return new Qe(x,Fe)}if(0===F&&Xi(I[0])){x.push(new nt(w.segments[C].path,Ct(I[0]))),F++;continue}const se=Nn(G)?G.outlets[gn]:`${G}`,Ue=F<I.length-1?I[F+1]:null;se&&Ue&&Xi(Ue)?(x.push(new nt(se,Ct(Ue))),F+=2):(x.push(new nt(se,{})),F++)}return new Qe(x,{})}function rt(w){const C={};return Object.entries(w).forEach(([I,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(C[I]=Oe(new Qe([],{}),0,x))}),C}function Ct(w){const C={};return Object.entries(w).forEach(([I,x])=>C[I]=`${x}`),C}function dn(w,C,I){return w==I.path&&gr(C,I.parameters)}const qn="imperative";class Ln{constructor(C,I){this.id=C,this.url=I}}class mr extends Ln{constructor(C,I,x="imperative",F=null){super(C,I),this.type=0,this.navigationTrigger=x,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nr extends Ln{constructor(C,I,x){super(C,I),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vi extends Ln{constructor(C,I,x,F){super(C,I),this.reason=x,this.code=F,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ii extends Ln{constructor(C,I,x,F){super(C,I),this.reason=x,this.code=F,this.type=16}}class Ni extends Ln{constructor(C,I,x,F){super(C,I),this.error=x,this.target=F,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ku extends Ln{constructor(C,I,x,F){super(C,I),this.urlAfterRedirects=x,this.state=F,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Il extends Ln{constructor(C,I,x,F){super(C,I),this.urlAfterRedirects=x,this.state=F,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cc extends Ln{constructor(C,I,x,F,G){super(C,I),this.urlAfterRedirects=x,this.state=F,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class du extends Ln{constructor(C,I,x,F){super(C,I),this.urlAfterRedirects=x,this.state=F,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lc extends Ln{constructor(C,I,x,F){super(C,I),this.urlAfterRedirects=x,this.state=F,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $a{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hc{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gc{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hu{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dc{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hc{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ko{constructor(C,I,x){this.routerEvent=C,this.position=I,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Fu{}class za{constructor(C){this.url=C}}class ga{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Dn,this.attachRef=null}}let Dn=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(I,x){const F=this.getOrCreateContext(I);F.outlet=x,this.contexts.set(I,F)}onChildOutletDestroyed(I){const x=this.getContext(I);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let x=this.getContext(I);return x||(x=new ga,this.contexts.set(I,x)),x}getContext(I){return this.contexts.get(I)||null}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();class ai{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const I=this.pathFromRoot(C);return I.length>1?I[I.length-2]:null}children(C){const I=Ei(C,this._root);return I?I.children.map(x=>x.value):[]}firstChild(C){const I=Ei(C,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(C){const I=Ws(C,this._root);return I.length<2?[]:I[I.length-2].children.map(F=>F.value).filter(F=>F!==C)}pathFromRoot(C){return Ws(C,this._root).map(I=>I.value)}}function Ei(w,C){if(w===C.value)return C;for(const I of C.children){const x=Ei(w,I);if(x)return x}return null}function Ws(w,C){if(w===C.value)return[C];for(const I of C.children){const x=Ws(w,I);if(x.length)return x.unshift(C),x}return[]}class yr{constructor(C,I){this.value=C,this.children=I}toString(){return`TreeNode(${this.value})`}}function Ks(w){const C={};return w&&w.children.forEach(I=>C[I.value.outlet]=I),C}class Lu extends ai{constructor(C,I){super(C),this.snapshot=I,Rs(this,C)}toString(){return this.snapshot.toString()}}function Qo(w,C){const I=function hd(w,C){const se=new _n([],{},{},"",{},gn,C,null,{});return new ar("",new yr(se,[]))}(0,C),x=new K.t([new nt("",{})]),F=new K.t({}),G=new K.t({}),se=new K.t({}),Ue=new K.t(""),Fe=new ma(x,F,se,Ue,G,gn,C,I.root);return Fe.snapshot=I.root,new Lu(new yr(Fe,[]),I)}class ma{constructor(C,I,x,F,G,se,Ue,Fe){this.urlSubject=C,this.paramsSubject=I,this.queryParamsSubject=x,this.fragmentSubject=F,this.dataSubject=G,this.outlet=se,this.component=Ue,this._futureSnapshot=Fe,this.title=this.dataSubject?.pipe((0,an.T)(Lt=>Lt[ni]))??(0,re.of)(void 0),this.url=C,this.params=I,this.queryParams=x,this.fragment=F,this.data=G}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,an.T)(C=>Pr(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,an.T)(C=>Pr(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qr(w,C="emptyOnly"){const I=w.pathFromRoot;let x=0;if("always"!==C)for(x=I.length-1;x>=1;){const F=I[x],G=I[x-1];if(F.routeConfig&&""===F.routeConfig.path)x--;else{if(G.component)break;x--}}return function Ot(w){return w.reduce((C,I)=>({params:{...C.params,...I.params},data:{...C.data,...I.data},resolve:{...I.data,...C.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(x))}class _n{get title(){return this.data?.[ni]}constructor(C,I,x,F,G,se,Ue,Fe,Lt){this.url=C,this.params=I,this.queryParams=x,this.fragment=F,this.data=G,this.outlet=se,this.component=Ue,this.routeConfig=Fe,this._resolve=Lt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ar extends ai{constructor(C,I){super(I),this.url=C,Rs(this,I)}toString(){return Ha(this._root)}}function Rs(w,C){C.value._routerState=w,C.children.forEach(I=>Rs(w,I))}function Ha(w){const C=w.children.length>0?` { ${w.children.map(Ha).join(", ")} } `:"";return`${w.value}${C}`}function Ri(w){if(w.snapshot){const C=w.snapshot,I=w._futureSnapshot;w.snapshot=I,gr(C.queryParams,I.queryParams)||w.queryParamsSubject.next(I.queryParams),C.fragment!==I.fragment&&w.fragmentSubject.next(I.fragment),gr(C.params,I.params)||w.paramsSubject.next(I.params),function Vn(w,C){if(w.length!==C.length)return!1;for(let I=0;I<w.length;++I)if(!gr(w[I],C[I]))return!1;return!0}(C.url,I.url)||w.urlSubject.next(I.url),gr(C.data,I.data)||w.dataSubject.next(I.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function lo(w,C){const I=gr(w.params,C.params)&&function zt(w,C){return sn(w,C)&&w.every((I,x)=>gr(I.parameters,C[x].parameters))}(w.url,C.url);return I&&!(!w.parent!=!C.parent)&&(!w.parent||lo(w.parent,C.parent))}let hi=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=gn,this.activateEvents=new N.bkB,this.deactivateEvents=new N.bkB,this.attachEvents=new N.bkB,this.detachEvents=new N.bkB,this.parentContexts=(0,N.WQX)(Dn),this.location=(0,N.WQX)(N.c1b),this.changeDetector=(0,N.WQX)(N.gRc),this.environmentInjector=(0,N.WQX)(N.uvJ),this.inputBinder=(0,N.WQX)(xs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:x,previousValue:F}=I.name;if(x)return;this.isTrackedInParentContexts(F)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(F)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N.wOt(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,x){this.activated=I,this._activatedRoute=x,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,x){if(this.isActivated)throw new N.wOt(4013,!1);this._activatedRoute=I;const F=this.location,se=I.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,Fe=new ya(I,Ue,F.injector);this.activated=F.createComponent(se,{index:F.length,injector:Fe,environmentInjector:x??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275dir=N.FsC({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[N.OA$]})}}return w})();class ya{constructor(C,I,x){this.route=C,this.childContexts=I,this.parent=x}get(C,I){return C===ma?this.route:C===Dn?this.childContexts:this.parent.get(C,I)}}const xs=new N.nKC("");let vn=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:x}=I,F=Mt([x.queryParams,x.params,x.data]).pipe((0,Cr.n)(([G,se,Ue],Fe)=>(Ue={...G,...se,...Ue},0===Fe?(0,re.of)(Ue):Promise.resolve(Ue)))).subscribe(G=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==x||null===x.component)return void this.unsubscribeFromRouteData(I);const se=(0,N.HJs)(x.component);if(se)for(const{templateName:Ue}of se.inputs)I.activatedComponentRef.setInput(Ue,G[Ue]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,F)}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac})}}return w})();function Zi(w,C,I){if(I&&w.shouldReuseRoute(C.value,I.value.snapshot)){const x=I.value;x._futureSnapshot=C.value;const F=function Vu(w,C,I){return C.children.map(x=>{for(const F of I.children)if(w.shouldReuseRoute(x.value,F.value.snapshot))return Zi(w,x,F);return Zi(w,x)})}(w,C,I);return new yr(x,F)}{if(w.shouldAttach(C.value)){const G=w.retrieve(C.value);if(null!==G){const se=G.route;return se.value._futureSnapshot=C.value,se.children=C.children.map(Ue=>Zi(w,Ue)),se}}const x=function Or(w){return new ma(new K.t(w.url),new K.t(w.params),new K.t(w.queryParams),new K.t(w.fragment),new K.t(w.data),w.outlet,w.component,w)}(C.value),F=C.children.map(G=>Zi(w,G));return new yr(x,F)}}const Ga="ngNavigationCancelingError";function fo(w,C){const{redirectTo:I,navigationBehaviorOptions:x}=Mn(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,F=Ps(!1,0,C);return F.url=I,F.navigationBehaviorOptions=x,F}function Ps(w,C,I){const x=new Error("NavigationCancelingError: "+(w||""));return x[Ga]=!0,x.cancellationCode=C,I&&(x.url=I),x}function Ms(w){return w&&w[Ga]}let Ns=(()=>{class w{static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275cmp=N.VBU({type:w,selectors:[["ng-component"]],standalone:!0,features:[N.aNF],decls:1,vars:0,template:function(x,F){1&x&&N.nrm(0,"router-outlet")},dependencies:[hi],encapsulation:2})}}return w})();function Ys(w){const C=w.children&&w.children.map(Ys),I=C?{...w,children:C}:{...w};return!I.component&&!I.loadComponent&&(C||I.loadChildren)&&I.outlet&&I.outlet!==gn&&(I.component=Ns),I}function Ui(w){return w.outlet||gn}function Ia(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let C=w.parent;C;C=C.parent){const I=C.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class Xo{constructor(C,I,x,F,G){this.routeReuseStrategy=C,this.futureState=I,this.currState=x,this.forwardEvent=F,this.inputBindingEnabled=G}activate(C){const I=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,x,C),Ri(this.futureState.root),this.activateChildRoutes(I,x,C)}deactivateChildRoutes(C,I,x){const F=Ks(I);C.children.forEach(G=>{const se=G.value.outlet;this.deactivateRoutes(G,F[se],x),delete F[se]}),Object.values(F).forEach(G=>{this.deactivateRouteAndItsChildren(G,x)})}deactivateRoutes(C,I,x){const F=C.value,G=I?I.value:null;if(F===G)if(F.component){const se=x.getContext(F.outlet);se&&this.deactivateChildRoutes(C,I,se.children)}else this.deactivateChildRoutes(C,I,x);else G&&this.deactivateRouteAndItsChildren(I,x)}deactivateRouteAndItsChildren(C,I){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,I):this.deactivateRouteAndOutlet(C,I)}detachAndStoreRouteSubtree(C,I){const x=I.getContext(C.value.outlet),F=x&&C.value.component?x.children:I,G=Ks(C);for(const se of Object.keys(G))this.deactivateRouteAndItsChildren(G[se],F);if(x&&x.outlet){const se=x.outlet.detach(),Ue=x.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:se,route:C,contexts:Ue})}}deactivateRouteAndOutlet(C,I){const x=I.getContext(C.value.outlet),F=x&&C.value.component?x.children:I,G=Ks(C);for(const se of Object.keys(G))this.deactivateRouteAndItsChildren(G[se],F);x&&(x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated()),x.attachRef=null,x.route=null)}activateChildRoutes(C,I,x){const F=Ks(I);C.children.forEach(G=>{this.activateRoutes(G,F[G.value.outlet],x),this.forwardEvent(new hc(G.value.snapshot))}),C.children.length&&this.forwardEvent(new hu(C.value.snapshot))}activateRoutes(C,I,x){const F=C.value,G=I?I.value:null;if(Ri(F),F===G)if(F.component){const se=x.getOrCreateContext(F.outlet);this.activateChildRoutes(C,I,se.children)}else this.activateChildRoutes(C,I,x);else if(F.component){const se=x.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const Ue=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),se.children.onOutletReAttached(Ue.contexts),se.attachRef=Ue.componentRef,se.route=Ue.route.value,se.outlet&&se.outlet.attach(Ue.componentRef,Ue.route.value),Ri(Ue.route.value),this.activateChildRoutes(C,null,se.children)}else{const Ue=Ia(F.snapshot);se.attachRef=null,se.route=F,se.injector=Ue,se.outlet&&se.outlet.activateWith(F,se.injector),this.activateChildRoutes(C,null,se.children)}}else this.activateChildRoutes(C,null,x)}}class _s{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Gi{constructor(C,I){this.component=C,this.route=I}}function cs(w,C,I){const x=w._root;return Ea(x,C?C._root:null,I,[x.value])}function ur(w,C){const I=Symbol(),x=C.get(w,I);return x===I?"function"!=typeof w||(0,N.LfX)(w)?C.get(w):w:x}function Ea(w,C,I,x,F={canDeactivateChecks:[],canActivateChecks:[]}){const G=Ks(C);return w.children.forEach(se=>{(function Bu(w,C,I,x,F={canDeactivateChecks:[],canActivateChecks:[]}){const G=w.value,se=C?C.value:null,Ue=I?I.getContext(w.value.outlet):null;if(se&&G.routeConfig===se.routeConfig){const Fe=function Wc(w,C,I){if("function"==typeof I)return I(w,C);switch(I){case"pathParamsChange":return!sn(w.url,C.url);case"pathParamsOrQueryParamsChange":return!sn(w.url,C.url)||!gr(w.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lo(w,C)||!gr(w.queryParams,C.queryParams);default:return!lo(w,C)}}(se,G,G.routeConfig.runGuardsAndResolvers);Fe?F.canActivateChecks.push(new _s(x)):(G.data=se.data,G._resolvedData=se._resolvedData),Ea(w,C,G.component?Ue?Ue.children:null:I,x,F),Fe&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&F.canDeactivateChecks.push(new Gi(Ue.outlet.component,se))}else se&&wa(C,Ue,F),F.canActivateChecks.push(new _s(x)),Ea(w,null,G.component?Ue?Ue.children:null:I,x,F)})(se,G[se.value.outlet],I,x.concat([se.value]),F),delete G[se.value.outlet]}),Object.entries(G).forEach(([se,Ue])=>wa(Ue,I.getContext(se),F)),F}function wa(w,C,I){const x=Ks(w),F=w.value;Object.entries(x).forEach(([G,se])=>{wa(se,F.component?C?C.children.getContext(G):null:C,I)}),I.canDeactivateChecks.push(new Gi(F.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,F))}function Ta(w){return"function"==typeof w}function ut(w){return w instanceof Hn||"EmptyError"===w?.name}const Yr=Symbol("INITIAL_VALUE");function Sr(){return(0,Cr.n)(w=>Mt(w.map(C=>C.pipe(wr(1),function Dr(...w){const C=(0,ce.lI)(w);return(0,ot.N)((I,x)=>{(C?vt(w,I,C):vt(w,I)).subscribe(x)})}(Yr)))).pipe((0,an.T)(C=>{for(const I of C)if(!0!==I){if(I===Yr)return Yr;if(!1===I||I instanceof zi)return I}return!0}),xe(C=>C!==Yr),wr(1)))}function wi(w){return(0,kt.F)((0,$t.M)(C=>{if(Mn(C))throw fo(0,C)}),(0,an.T)(C=>!0===C))}class vs{constructor(C){this.segmentGroup=C||null}}class qa{constructor(C){this.urlTree=C}}function pu(w){return Ne(new vs(w))}function pc(w){return Ne(new qa(w))}class $u{constructor(C,I){this.urlSerializer=C,this.urlTree=I}noMatchError(C){return new N.wOt(4002,!1)}lineralizeSegments(C,I){let x=[],F=I.root;for(;;){if(x=x.concat(F.segments),0===F.numberOfChildren)return(0,re.of)(x);if(F.numberOfChildren>1||!F.children[gn])return Ne(new N.wOt(4e3,!1));F=F.children[gn]}}applyRedirectCommands(C,I,x){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),C,x)}applyRedirectCreateUrlTree(C,I,x,F){const G=this.createSegmentGroup(C,I.root,x,F);return new zi(G,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(C,I){const x={};return Object.entries(C).forEach(([F,G])=>{if("string"==typeof G&&G.startsWith(":")){const Ue=G.substring(1);x[F]=I[Ue]}else x[F]=G}),x}createSegmentGroup(C,I,x,F){const G=this.createSegments(C,I.segments,x,F);let se={};return Object.entries(I.children).forEach(([Ue,Fe])=>{se[Ue]=this.createSegmentGroup(C,Fe,x,F)}),new Qe(G,se)}createSegments(C,I,x,F){return I.map(G=>G.path.startsWith(":")?this.findPosParam(C,G,F):this.findOrReturn(G,x))}findPosParam(C,I,x){const F=x[I.path.substring(1)];if(!F)throw new N.wOt(4001,!1);return F}findOrReturn(C,I){let x=0;for(const F of I){if(F.path===C.path)return I.splice(x),F;x++}return C}}const Ka={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Po(w,C,I,x,F){const G=zu(w,C,I);return G.matched?(x=function ys(w,C){return w.providers&&!w._injector&&(w._injector=(0,N.Ol2)(w.providers,C,`Route: ${w.path}`)),w._injector??C}(C,x),function xi(w,C,I,x){const F=C.canMatch;if(!F||0===F.length)return(0,re.of)(!0);const G=F.map(se=>{const Ue=ur(se,w);return Wr(function go(w){return w&&Ta(w.canMatch)}(Ue)?Ue.canMatch(C,I):w.runInContext(()=>Ue(C,I)))});return(0,re.of)(G).pipe(Sr(),wi())}(x,C,I).pipe((0,an.T)(se=>!0===se?G:{...Ka}))):(0,re.of)(G)}function zu(w,C,I){if(""===C.path)return"full"===C.pathMatch&&(w.hasChildren()||I.length>0)?{...Ka}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const F=(C.matcher||In)(I,w,C);if(!F)return{...Ka};const G={};Object.entries(F.posParams??{}).forEach(([Ue,Fe])=>{G[Ue]=Fe.path});const se=F.consumed.length>0?{...G,...F.consumed[F.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:F.consumed,remainingSegments:I.slice(F.consumed.length),parameters:se,positionalParamSegments:F.posParams??{}}}function un(w,C,I,x){return I.length>0&&function mu(w,C,I){return I.some(x=>Hu(w,C,x)&&Ui(x)!==gn)}(w,I,x)?{segmentGroup:new Qe(C,Jo(x,new Qe(I,w.children))),slicedSegments:[]}:0===I.length&&function ls(w,C,I){return I.some(x=>Hu(w,C,x))}(w,I,x)?{segmentGroup:new Qe(w.segments,Qc(w,0,I,x,w.children)),slicedSegments:I}:{segmentGroup:new Qe(w.segments,w.children),slicedSegments:I}}function Qc(w,C,I,x,F){const G={};for(const se of x)if(Hu(w,I,se)&&!F[Ui(se)]){const Ue=new Qe([],{});G[Ui(se)]=Ue}return{...F,...G}}function Jo(w,C){const I={};I[gn]=C;for(const x of w)if(""===x.path&&Ui(x)!==gn){const F=new Qe([],{});I[Ui(x)]=F}return I}function Hu(w,C,I){return(!(w.hasChildren()||C.length>0)||"full"!==I.pathMatch)&&""===I.path}class Yt{constructor(C,I,x,F,G,se,Ue){this.injector=C,this.configLoader=I,this.rootComponentType=x,this.config=F,this.urlTree=G,this.paramsInheritanceStrategy=se,this.urlSerializer=Ue,this.allowRedirects=!0,this.applyRedirects=new $u(this.urlSerializer,this.urlTree)}noMatchError(C){return new N.wOt(4002,!1)}recognize(){const C=un(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,gn).pipe(Bn(I=>{if(I instanceof qa)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof vs?this.noMatchError(I):I}),(0,an.T)(I=>{const x=new _n([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gn,this.rootComponentType,null,{}),F=new yr(x,I),G=new ar("",F),se=function os(w,C,I=null,x=null){return Hi(ha(w),C,I,x)}(x,[],this.urlTree.queryParams,this.urlTree.fragment);return se.queryParams=this.urlTree.queryParams,G.url=this.urlSerializer.serialize(se),this.inheritParamsAndData(G._root),{state:G,tree:se}}))}match(C){return this.processSegmentGroup(this.injector,this.config,C.root,gn).pipe(Bn(x=>{throw x instanceof vs?this.noMatchError(x):x}))}inheritParamsAndData(C){const I=C.value,x=Qr(I,this.paramsInheritanceStrategy);I.params=Object.freeze(x.params),I.data=Object.freeze(x.data),C.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(C,I,x,F){return 0===x.segments.length&&x.hasChildren()?this.processChildren(C,I,x):this.processSegment(C,I,x,x.segments,F,!0)}processChildren(C,I,x){const F=[];for(const G of Object.keys(x.children))"primary"===G?F.unshift(G):F.push(G);return(0,Te.H)(F).pipe(Nt(G=>{const se=x.children[G],Ue=function Oi(w,C){const I=w.filter(x=>Ui(x)===C);return I.push(...w.filter(x=>Ui(x)!==C)),I}(I,G);return this.processSegmentGroup(C,Ue,se,G)}),function sr(w,C){return(0,ot.N)(function Xt(w,C,I,x,F){return(G,se)=>{let Ue=I,Fe=C,Lt=0;G.subscribe((0,tt._)(se,bn=>{const Zn=Lt++;Fe=Ue?w(Fe,bn,Zn):(Ue=!0,bn),x&&se.next(Fe)},F&&(()=>{Ue&&se.next(Fe),se.complete()})))}}(w,C,arguments.length>=2,!0))}((G,se)=>(G.push(...se),G)),Be(null),function fr(w,C){const I=arguments.length>=2;return x=>x.pipe(w?xe((F,G)=>w(F,G,x)):Ze.D,Jn(1),I?Be(C):je(()=>new Hn))}(),(0,Re.Z)(G=>{if(null===G)return pu(x);const se=j(G);return function Qa(w){w.sort((C,I)=>C.value.outlet===gn?-1:I.value.outlet===gn?1:C.value.outlet.localeCompare(I.value.outlet))}(se),(0,re.of)(se)}))}processSegment(C,I,x,F,G,se){return(0,Te.H)(I).pipe(Nt(Ue=>this.processSegmentAgainstRoute(Ue._injector??C,I,Ue,x,F,G,se).pipe(Bn(Fe=>{if(Fe instanceof vs)return(0,re.of)(null);throw Fe}))),gt(Ue=>!!Ue),Bn(Ue=>{if(ut(Ue))return function gd(w,C,I){return 0===C.length&&!w.children[I]}(x,F,G)?(0,re.of)([]):pu(x);throw Ue}))}processSegmentAgainstRoute(C,I,x,F,G,se,Ue){return function Gu(w,C,I,x){return!!(Ui(w)===x||x!==gn&&Hu(C,I,w))&&("**"===w.path||zu(C,w,I).matched)}(x,F,G,se)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(C,F,x,G,se,Ue):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,F,I,x,G,se):pu(F):pu(F)}expandSegmentAgainstRouteUsingRedirect(C,I,x,F,G,se){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,x,F,se):this.expandRegularSegmentAgainstRouteUsingRedirect(C,I,x,F,G,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,I,x,F){const G=this.applyRedirects.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?pc(G):this.applyRedirects.lineralizeSegments(x,G).pipe((0,Re.Z)(se=>{const Ue=new Qe(se,{});return this.processSegment(C,I,Ue,se,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,I,x,F,G,se){const{matched:Ue,consumedSegments:Fe,remainingSegments:Lt,positionalParamSegments:bn}=zu(I,F,G);if(!Ue)return pu(I);const Zn=this.applyRedirects.applyRedirectCommands(Fe,F.redirectTo,bn);return F.redirectTo.startsWith("/")?pc(Zn):this.applyRedirects.lineralizeSegments(F,Zn).pipe((0,Re.Z)(er=>this.processSegment(C,x,I,er.concat(Lt),se,!1)))}matchSegmentAgainstRoute(C,I,x,F,G,se){let Ue;if("**"===x.path){const Fe=F.length>0?Mr(F).parameters:{},Lt=new _n(F,Fe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U(x),Ui(x),x.component??x._loadedComponent??null,x,Y(x));Ue=(0,re.of)({snapshot:Lt,consumedSegments:[],remainingSegments:[]}),I.children={}}else Ue=Po(I,x,F,C).pipe((0,an.T)(({matched:Fe,consumedSegments:Lt,remainingSegments:bn,parameters:Zn})=>Fe?{snapshot:new _n(Lt,Zn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U(x),Ui(x),x.component??x._loadedComponent??null,x,Y(x)),consumedSegments:Lt,remainingSegments:bn}:null));return Ue.pipe((0,Cr.n)(Fe=>null===Fe?pu(I):this.getChildConfig(C=x._injector??C,x,F).pipe((0,Cr.n)(({routes:Lt})=>{const bn=x._loadedInjector??C,{snapshot:Zn,consumedSegments:er,remainingSegments:Eo}=Fe,{segmentGroup:Fs,slicedSegments:li}=un(I,er,Eo,Lt);if(0===li.length&&Fs.hasChildren())return this.processChildren(bn,Lt,Fs).pipe((0,an.T)(tr=>null===tr?null:[new yr(Zn,tr)]));if(0===Lt.length&&0===li.length)return(0,re.of)([new yr(Zn,[])]);const ta=Ui(x)===G;return this.processSegment(bn,Lt,Fs,li,ta?gn:G,!0).pipe((0,an.T)(tr=>[new yr(Zn,tr)]))}))))}getChildConfig(C,I,x){return I.children?(0,re.of)({routes:I.children,injector:C}):I.loadChildren?void 0!==I._loadedRoutes?(0,re.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Bi(w,C,I,x){const F=C.canLoad;if(void 0===F||0===F.length)return(0,re.of)(!0);const G=F.map(se=>{const Ue=ur(se,w);return Wr(function fd(w){return w&&Ta(w.canLoad)}(Ue)?Ue.canLoad(C,I):w.runInContext(()=>Ue(C,I)))});return(0,re.of)(G).pipe(Sr(),wi())}(C,I,x).pipe((0,Re.Z)(F=>F?this.configLoader.loadChildren(C,I).pipe((0,$t.M)(G=>{I._loadedRoutes=G.routes,I._loadedInjector=G.injector})):function gu(w){return Ne(Ps(!1,3))}())):(0,re.of)({routes:[],injector:C})}}function D(w){const C=w.value.routeConfig;return C&&""===C.path}function j(w){const C=[],I=new Set;for(const x of w){if(!D(x)){C.push(x);continue}const F=C.find(G=>x.value.routeConfig===G.value.routeConfig);void 0!==F?(F.children.push(...x.children),I.add(F)):C.push(x)}for(const x of I){const F=j(x.children);C.push(new yr(x.value,F))}return C.filter(x=>!I.has(x))}function U(w){return w.data||{}}function Y(w){return w.resolve||{}}function Un(w){return"string"==typeof w.title||null===w.title}function Fr(w){return(0,Cr.n)(C=>{const I=w(C);return I?(0,Te.H)(I).pipe((0,an.T)(()=>C)):(0,re.of)(C)})}const pr=new N.nKC("ROUTES");let Ti=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,N.WQX)(N.Ql9)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,re.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const x=Wr(I.loadComponent()).pipe((0,an.T)(Js),(0,$t.M)(G=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=G}),$r(()=>{this.componentLoaders.delete(I)})),F=new ze(x,()=>new Ut.B).pipe(Xn());return this.componentLoaders.set(I,F),F}loadChildren(I,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,re.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const G=function ii(w,C,I,x){return Wr(w.loadChildren()).pipe((0,an.T)(Js),(0,Re.Z)(F=>F instanceof N.Co$||Array.isArray(F)?(0,re.of)(F):(0,Te.H)(C.compileModuleAsync(F))),(0,an.T)(F=>{x&&x(w);let G,se,Ue=!1;return Array.isArray(F)?(se=F,!0):(G=F.create(I).injector,se=G.get(pr,[],{optional:!0,self:!0}).flat()),{routes:se.map(Ys),injector:G}}))}(x,this.compiler,I,this.onLoadEndListener).pipe($r(()=>{this.childrenLoaders.delete(x)})),se=new ze(G,()=>new Ut.B).pipe(Xn());return this.childrenLoaders.set(x,se),se}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();function Js(w){return function Xs(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let fi=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ut.B,this.transitionAbortSubject=new Ut.B,this.configLoader=(0,N.WQX)(Ti),this.environmentInjector=(0,N.WQX)(N.uvJ),this.urlSerializer=(0,N.WQX)(Sn),this.rootContexts=(0,N.WQX)(Dn),this.inputBindingEnabled=null!==(0,N.WQX)(xs,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,re.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=F=>this.events.next(new Hc(F)),this.configLoader.onLoadStartListener=F=>this.events.next(new $a(F))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:x})}setupNavigations(I,x,F){return this.transitions=new K.t({id:0,currentUrlTree:x,currentRawUrl:x,currentBrowserUrl:x,extractedUrl:I.urlHandlingStrategy.extract(x),urlAfterRedirects:I.urlHandlingStrategy.extract(x),rawUrl:x,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qn,restoredState:null,currentSnapshot:F.snapshot,targetSnapshot:null,currentRouterState:F,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xe(G=>0!==G.id),(0,an.T)(G=>({...G,extractedUrl:I.urlHandlingStrategy.extract(G.rawUrl)})),(0,Cr.n)(G=>{this.currentTransition=G;let se=!1,Ue=!1;return(0,re.of)(G).pipe((0,$t.M)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.rawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Cr.n)(Fe=>{const Lt=Fe.currentBrowserUrl.toString(),bn=!I.navigated||Fe.extractedUrl.toString()!==Lt||Lt!==Fe.currentUrlTree.toString();if(!bn&&"reload"!==(Fe.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const er="";return this.events.next(new Ii(Fe.id,this.urlSerializer.serialize(Fe.rawUrl),er,0)),Fe.resolve(null),ft.w}if(I.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return(0,re.of)(Fe).pipe((0,Cr.n)(er=>{const Eo=this.transitions?.getValue();return this.events.next(new mr(er.id,this.urlSerializer.serialize(er.extractedUrl),er.source,er.restoredState)),Eo!==this.transitions?.getValue()?ft.w:Promise.resolve(er)}),function He(w,C,I,x,F,G){return(0,Re.Z)(se=>function ui(w,C,I,x,F,G,se="emptyOnly"){return new Yt(w,C,I,x,F,se,G).recognize()}(w,C,I,x,se.extractedUrl,F,G).pipe((0,an.T)(({state:Ue,tree:Fe})=>({...se,targetSnapshot:Ue,urlAfterRedirects:Fe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,$t.M)(er=>{G.targetSnapshot=er.targetSnapshot,G.urlAfterRedirects=er.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:er.urlAfterRedirects};const Eo=new ku(er.id,this.urlSerializer.serialize(er.extractedUrl),this.urlSerializer.serialize(er.urlAfterRedirects),er.targetSnapshot);this.events.next(Eo)}));if(bn&&I.urlHandlingStrategy.shouldProcessUrl(Fe.currentRawUrl)){const{id:er,extractedUrl:Eo,source:Fs,restoredState:li,extras:ta}=Fe,tr=new mr(er,this.urlSerializer.serialize(Eo),Fs,li);this.events.next(tr);const xl=Qo(0,this.rootComponentType).snapshot;return this.currentTransition=G={...Fe,targetSnapshot:xl,urlAfterRedirects:Eo,extras:{...ta,skipLocationChange:!1,replaceUrl:!1}},(0,re.of)(G)}{const er="";return this.events.next(new Ii(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),er,1)),Fe.resolve(null),ft.w}}),(0,$t.M)(Fe=>{const Lt=new Il(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects),Fe.targetSnapshot);this.events.next(Lt)}),(0,an.T)(Fe=>(this.currentTransition=G={...Fe,guards:cs(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)},G)),function ju(w,C){return(0,Re.Z)(I=>{const{targetSnapshot:x,currentSnapshot:F,guards:{canActivateChecks:G,canDeactivateChecks:se}}=I;return 0===se.length&&0===G.length?(0,re.of)({...I,guardsResult:!0}):function Bt(w,C,I,x){return(0,Te.H)(w).pipe((0,Re.Z)(F=>function ct(w,C,I,x,F){const G=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,re.of)(!0);const se=G.map(Ue=>{const Fe=Ia(C)??F,Lt=ur(Ue,Fe);return Wr(function Aa(w){return w&&Ta(w.canDeactivate)}(Lt)?Lt.canDeactivate(w,C,I,x):Fe.runInContext(()=>Lt(w,C,I,x))).pipe(gt())});return(0,re.of)(se).pipe(Sr())}(F.component,F.route,I,C,x)),gt(F=>!0!==F,!0))}(se,x,F,w).pipe((0,Re.Z)(Ue=>Ue&&function po(w){return"boolean"==typeof w}(Ue)?function Kc(w,C,I,x){return(0,Te.H)(C).pipe(Nt(F=>vt(function pd(w,C){return null!==w&&C&&C(new Gc(w)),(0,re.of)(!0)}(F.route.parent,x),function Wt(w,C){return null!==w&&C&&C(new dc(w)),(0,re.of)(!0)}(F.route,x),function $e(w,C,I){const x=C[C.length-1],G=C.slice(0,C.length-1).reverse().map(se=>function fc(w){const C=w.routeConfig?w.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:w,guards:C}:null}(se)).filter(se=>null!==se).map(se=>Xe(()=>{const Ue=se.guards.map(Fe=>{const Lt=Ia(se.node)??I,bn=ur(Fe,Lt);return Wr(function ts(w){return w&&Ta(w.canActivateChild)}(bn)?bn.canActivateChild(x,w):Lt.runInContext(()=>bn(x,w))).pipe(gt())});return(0,re.of)(Ue).pipe(Sr())}));return(0,re.of)(G).pipe(Sr())}(w,F.path,I),function Rt(w,C,I){const x=C.routeConfig?C.routeConfig.canActivate:null;if(!x||0===x.length)return(0,re.of)(!0);const F=x.map(G=>Xe(()=>{const se=Ia(C)??I,Ue=ur(G,se);return Wr(function fu(w){return w&&Ta(w.canActivate)}(Ue)?Ue.canActivate(C,w):se.runInContext(()=>Ue(C,w))).pipe(gt())}));return(0,re.of)(F).pipe(Sr())}(w,F.route,I))),gt(F=>!0!==F,!0))}(x,G,w,C):(0,re.of)(Ue)),(0,an.T)(Ue=>({...I,guardsResult:Ue})))})}(this.environmentInjector,Fe=>this.events.next(Fe)),(0,$t.M)(Fe=>{if(G.guardsResult=Fe.guardsResult,Mn(Fe.guardsResult))throw fo(0,Fe.guardsResult);const Lt=new cc(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.events.next(Lt)}),xe(Fe=>!!Fe.guardsResult||(this.cancelNavigationTransition(Fe,"",3),!1)),Fr(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,re.of)(Fe).pipe((0,$t.M)(Lt=>{const bn=new du(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),this.urlSerializer.serialize(Lt.urlAfterRedirects),Lt.targetSnapshot);this.events.next(bn)}),(0,Cr.n)(Lt=>{let bn=!1;return(0,re.of)(Lt).pipe(function et(w,C){return(0,Re.Z)(I=>{const{targetSnapshot:x,guards:{canActivateChecks:F}}=I;if(!F.length)return(0,re.of)(I);let G=0;return(0,Te.H)(F).pipe(Nt(se=>function Jt(w,C,I,x){const F=w.routeConfig,G=w._resolve;return void 0!==F?.title&&!Un(F)&&(G[ni]=F.title),function rr(w,C,I,x){const F=function kr(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===F.length)return(0,re.of)({});const G={};return(0,Te.H)(F).pipe((0,Re.Z)(se=>function Kn(w,C,I,x){const F=Ia(C)??x,G=ur(w,F);return Wr(G.resolve?G.resolve(C,I):F.runInContext(()=>G(C,I)))}(w[se],C,I,x).pipe(gt(),(0,$t.M)(Ue=>{G[se]=Ue}))),Jn(1),function Tt(w){return(0,an.T)(()=>w)}(G),Bn(se=>ut(se)?ft.w:Ne(se)))}(G,w,C,x).pipe((0,an.T)(se=>(w._resolvedData=se,w.data=Qr(w,I).resolve,F&&Un(F)&&(w.data[ni]=F.title),null)))}(se.route,x,w,C)),(0,$t.M)(()=>G++),Jn(1),(0,Re.Z)(se=>G===F.length?(0,re.of)(I):ft.w))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,$t.M)({next:()=>bn=!0,complete:()=>{bn||this.cancelNavigationTransition(Lt,"",2)}}))}),(0,$t.M)(Lt=>{const bn=new lc(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),this.urlSerializer.serialize(Lt.urlAfterRedirects),Lt.targetSnapshot);this.events.next(bn)}))}),Fr(Fe=>{const Lt=bn=>{const Zn=[];bn.routeConfig?.loadComponent&&!bn.routeConfig._loadedComponent&&Zn.push(this.configLoader.loadComponent(bn.routeConfig).pipe((0,$t.M)(er=>{bn.component=er}),(0,an.T)(()=>{})));for(const er of bn.children)Zn.push(...Lt(er));return Zn};return Mt(Lt(Fe.targetSnapshot.root)).pipe(Be(),wr(1))}),Fr(()=>this.afterPreactivation()),(0,an.T)(Fe=>{const Lt=function ho(w,C,I){const x=Zi(w,C._root,I?I._root:void 0);return new Lu(x,C)}(I.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return this.currentTransition=G={...Fe,targetRouterState:Lt},G}),(0,$t.M)(()=>{this.events.next(new Fu)}),((w,C,I,x)=>(0,an.T)(F=>(new Xo(C,F.targetRouterState,F.currentRouterState,I,x).activate(w),F)))(this.rootContexts,I.routeReuseStrategy,Fe=>this.events.next(Fe),this.inputBindingEnabled),wr(1),(0,$t.M)({next:Fe=>{se=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nr(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects))),I.titleStrategy?.updateTitle(Fe.targetRouterState.snapshot),Fe.resolve(!0)},complete:()=>{se=!0}}),function Si(w){return(0,ot.N)((C,I)=>{(0,ht.Tg)(w).subscribe((0,tt._)(I,()=>I.complete(),Ur.l)),!I.closed&&C.subscribe(I)})}(this.transitionAbortSubject.pipe((0,$t.M)(Fe=>{throw Fe}))),$r(()=>{se||Ue||this.cancelNavigationTransition(G,"",1),this.currentNavigation?.id===G.id&&(this.currentNavigation=null)}),Bn(Fe=>{if(Ue=!0,Ms(Fe))this.events.next(new vi(G.id,this.urlSerializer.serialize(G.extractedUrl),Fe.message,Fe.cancellationCode)),function _a(w){return Ms(w)&&Mn(w.url)}(Fe)?this.events.next(new za(Fe.url)):G.resolve(!1);else{this.events.next(new Ni(G.id,this.urlSerializer.serialize(G.extractedUrl),Fe,G.targetSnapshot??void 0));try{G.resolve(I.errorHandler(Fe))}catch(Lt){G.reject(Lt)}}return ft.w}))}))}cancelNavigationTransition(I,x,F){const G=new vi(I.id,this.urlSerializer.serialize(I.extractedUrl),x,F);this.events.next(G),I.resolve(!1)}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();function pi(w){return w!==qn}let mo=(()=>{class w{buildTitle(I){let x,F=I.root;for(;void 0!==F;)x=this.getResolvedTitleForRoute(F)??x,F=F.children.find(G=>G.outlet===gn);return x}getResolvedTitleForRoute(I){return I.data[ni]}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:function(){return(0,N.WQX)(De)},providedIn:"root"})}}return w})(),De=(()=>{class w extends mo{constructor(I){super(),this.title=I}updateTitle(I){const x=this.buildTitle(I);void 0!==x&&this.title.setTitle(x)}static{this.\u0275fac=function(x){return new(x||w)(N.KVO(Cn.hE))}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})(),Is=(()=>{class w{static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:function(){return(0,N.WQX)(yo)},providedIn:"root"})}}return w})();class gc{shouldDetach(C){return!1}store(C,I){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,I){return C.routeConfig===I.routeConfig}}let yo=(()=>{class w extends gc{static{this.\u0275fac=function(){let I;return function(F){return(I||(I=N.xGo(w)))(F||w)}}()}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();const mc=new N.nKC("",{providedIn:"root",factory:()=>({})});let yc=(()=>{class w{static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:function(){return(0,N.WQX)(yu)},providedIn:"root"})}}return w})(),yu=(()=>{class w{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,x){return I}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();var Pi=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(Pi||{});function Ya(w,C){w.events.pipe(xe(I=>I instanceof Nr||I instanceof vi||I instanceof Ni||I instanceof Ii),(0,an.T)(I=>I instanceof Nr||I instanceof Ii?Pi.COMPLETE:I instanceof vi&&(0===I.code||1===I.code)?Pi.REDIRECTING:Pi.FAILED),xe(I=>I!==Pi.REDIRECTING),wr(1)).subscribe(()=>{C()})}function Da(w){throw w}function Lr(w,C,I){return C.parse("/")}const _c={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_u={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,N.WQX)(N.H3F),this.isNgZoneEnabled=!1,this._events=new Ut.B,this.options=(0,N.WQX)(mc,{optional:!0})||{},this.pendingTasks=(0,N.WQX)(N.$K3),this.errorHandler=this.options.errorHandler||Da,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Lr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,N.WQX)(yc),this.routeReuseStrategy=(0,N.WQX)(Is),this.titleStrategy=(0,N.WQX)(mo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,N.WQX)(pr,{optional:!0})?.flat()??[],this.navigationTransitions=(0,N.WQX)(fi),this.urlSerializer=(0,N.WQX)(Sn),this.location=(0,N.WQX)(hr.aZ),this.componentInputBindingEnabled=!!(0,N.WQX)(xs,{optional:!0}),this.eventsSubscription=new jt.yU,this.isNgZoneEnabled=(0,N.WQX)(N.SKi)instanceof N.SKi&&N.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new zi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Qo(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(x=>{try{const{currentTransition:F}=this.navigationTransitions;if(null===F)return void(Zs(x)&&this._events.next(x));if(x instanceof mr)pi(F.source)&&(this.browserUrlTree=F.extractedUrl);else if(x instanceof Ii)this.rawUrlTree=F.rawUrl;else if(x instanceof ku){if("eager"===this.urlUpdateStrategy){if(!F.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(F.urlAfterRedirects,F.rawUrl);this.setBrowserUrl(G,F)}this.browserUrlTree=F.urlAfterRedirects}}else if(x instanceof Fu)this.currentUrlTree=F.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(F.urlAfterRedirects,F.rawUrl),this.routerState=F.targetRouterState,"deferred"===this.urlUpdateStrategy&&(F.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,F),this.browserUrlTree=F.urlAfterRedirects);else if(x instanceof vi)0!==x.code&&1!==x.code&&(this.navigated=!0),(3===x.code||2===x.code)&&this.restoreHistory(F);else if(x instanceof za){const G=this.urlHandlingStrategy.merge(x.url,F.currentRawUrl),se={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pi(F.source)};this.scheduleNavigation(G,qn,null,se,{resolve:F.resolve,reject:F.reject,promise:F.promise})}x instanceof Ni&&this.restoreHistory(F,!0),x instanceof Nr&&(this.navigated=!0),Zs(x)&&this._events.next(x)}catch(F){this.navigationTransitions.transitionAbortSubject.next(F)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qn,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const x="popstate"===I.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,x,I.state)},0)}))}navigateToSyncWithBrowser(I,x,F){const G={replaceUrl:!0},se=F?.navigationId?F:null;if(F){const Fe={...F};delete Fe.navigationId,delete Fe.\u0275routerPageId,0!==Object.keys(Fe).length&&(G.state=Fe)}const Ue=this.parseUrl(I);this.scheduleNavigation(Ue,x,se,G)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(Ys),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,x={}){const{relativeTo:F,queryParams:G,fragment:se,queryParamsHandling:Ue,preserveFragment:Fe}=x,Lt=Fe?this.currentUrlTree.fragment:se;let Zn,bn=null;switch(Ue){case"merge":bn={...this.currentUrlTree.queryParams,...G};break;case"preserve":bn=this.currentUrlTree.queryParams;break;default:bn=G||null}null!==bn&&(bn=this.removeEmptyProps(bn));try{Zn=ha(F?F.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Zn=this.currentUrlTree.root}return Hi(Zn,I,bn,Lt??null)}navigateByUrl(I,x={skipLocationChange:!1}){const F=Mn(I)?I:this.parseUrl(I),G=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(G,qn,null,x)}navigate(I,x={skipLocationChange:!1}){return function Tl(w){for(let C=0;C<w.length;C++)if(null==w[C])throw new N.wOt(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,x),x)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let x;try{x=this.urlSerializer.parse(I)}catch(F){x=this.malformedUriErrorHandler(F,this.urlSerializer,I)}return x}isActive(I,x){let F;if(F=!0===x?{..._c}:!1===x?{..._u}:x,Mn(I))return or(this.currentUrlTree,I,F);const G=this.parseUrl(I);return or(this.currentUrlTree,G,F)}removeEmptyProps(I){return Object.keys(I).reduce((x,F)=>{const G=I[F];return null!=G&&(x[F]=G),x},{})}scheduleNavigation(I,x,F,G,se){if(this.disposed)return Promise.resolve(!1);let Ue,Fe,Lt;se?(Ue=se.resolve,Fe=se.reject,Lt=se.promise):Lt=new Promise((Zn,er)=>{Ue=Zn,Fe=er});const bn=this.pendingTasks.add();return Ya(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(bn))}),this.navigationTransitions.handleNavigationRequest({source:x,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:G,resolve:Ue,reject:Fe,promise:Lt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Lt.catch(Zn=>Promise.reject(Zn))}setBrowserUrl(I,x){const F=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(F)||x.extras.replaceUrl){const se={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId)};this.location.replaceState(F,"",se)}else{const G={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId+1)};this.location.go(F,"",G)}}restoreHistory(I,x=!1){if("computed"===this.canceledNavigationResolution){const G=this.currentPageId-this.browserPageId;0!==G?this.location.historyGo(G):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===G&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,x){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:x}:{navigationId:I}}static{this.\u0275fac=function(x){return new(x||w)}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();function Zs(w){return!(w instanceof Fu||w instanceof za)}let ds=(()=>{class w{constructor(I,x,F,G,se,Ue){this.router=I,this.route=x,this.tabIndexAttribute=F,this.renderer=G,this.el=se,this.locationStrategy=Ue,this.href=null,this.commands=null,this.onChanges=new Ut.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Fe=se.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Fe||"area"===Fe,this.isAnchorElement?this.subscription=I.events.subscribe(Lt=>{Lt instanceof Nr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,x,F,G,se){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||x||F||G||se||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,N.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,x){const F=this.renderer,G=this.el.nativeElement;null!==x?F.setAttribute(G,I,x):F.removeAttribute(G,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(x){return new(x||w)(N.rXU(ci),N.rXU(ma),N.kS0("tabindex"),N.rXU(N.sFG),N.rXU(N.aKT),N.rXU(hr.hb))}}static{this.\u0275dir=N.FsC({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,F){1&x&&N.bIt("click",function(se){return F.onClick(se.button,se.ctrlKey,se.shiftKey,se.altKey,se.metaKey)}),2&x&&N.BMQ("target",F.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",N.L39],skipLocationChange:["skipLocationChange","skipLocationChange",N.L39],replaceUrl:["replaceUrl","replaceUrl",N.L39],routerLink:"routerLink"},standalone:!0,features:[N.GFd,N.OA$]})}}return w})();class Ic{}let Yc=(()=>{class w{constructor(I,x,F,G,se){this.router=I,this.injector=F,this.preloadingStrategy=G,this.loader=se}setUpPreloading(){this.subscription=this.router.events.pipe(xe(I=>I instanceof Nr),Nt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,x){const F=[];for(const G of x){G.providers&&!G._injector&&(G._injector=(0,N.Ol2)(G.providers,I,`Route: ${G.path}`));const se=G._injector??I,Ue=G._loadedInjector??se;(G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent)&&F.push(this.preloadConfig(se,G)),(G.children||G._loadedRoutes)&&F.push(this.processRoutes(Ue,G.children??G._loadedRoutes))}return(0,Te.H)(F).pipe((0,pn.U)())}preloadConfig(I,x){return this.preloadingStrategy.preload(x,()=>{let F;F=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(I,x):(0,re.of)(null);const G=F.pipe((0,Re.Z)(se=>null===se?(0,re.of)(void 0):(x._loadedRoutes=se.routes,x._loadedInjector=se.injector,this.processRoutes(se.injector??I,se.routes))));if(x.loadComponent&&!x._loadedComponent){const se=this.loader.loadComponent(x);return(0,Te.H)([G,se]).pipe((0,pn.U)())}return G})}static{this.\u0275fac=function(x){return new(x||w)(N.KVO(ci),N.KVO(N.Ql9),N.KVO(N.uvJ),N.KVO(Ic),N.KVO(Ti))}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}}return w})();const gi=new N.nKC("");let _o=(()=>{class w{constructor(I,x,F,G,se={}){this.urlSerializer=I,this.transitions=x,this.viewportScroller=F,this.zone=G,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof mr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Nr?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Ii&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Ko&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ko(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(x){N.QTQ()}}static{this.\u0275prov=N.jDH({token:w,factory:w.\u0275fac})}}return w})();function Es(w,C){return{\u0275kind:w,\u0275providers:C}}function ks(){const w=(0,N.WQX)(N.zZn);return C=>{const I=w.get(N.o8S);if(C!==I.components[0])return;const x=w.get(ci),F=w.get(qu);1===w.get(ba)&&x.initialNavigation(),w.get(Ec,null,N.$GK.Optional)?.setUpPreloading(),w.get(gi,null,N.$GK.Optional)?.init(),x.resetRootComponentType(I.componentTypes[0]),F.closed||(F.next(),F.complete(),F.unsubscribe())}}const qu=new N.nKC("",{factory:()=>new Ut.B}),ba=new N.nKC("",{providedIn:"root",factory:()=>1}),Ec=new N.nKC("");function Dl(w){return Es(0,[{provide:Ec,useExisting:Yc},{provide:Ic,useExisting:w}])}const Fi=new N.nKC("ROUTER_FORROOT_GUARD"),Sa=[hr.aZ,{provide:Sn,useClass:Ir},ci,Dn,{provide:ma,useFactory:function vu(w){return w.routerState.root},deps:[ci]},Ti,[]];function wu(){return new N.NEm("Router",ci)}let Io=(()=>{class w{constructor(I){}static forRoot(I,x){return{ngModule:w,providers:[Sa,[],{provide:pr,multi:!0,useValue:I},{provide:Fi,useFactory:_d,deps:[[ci,new N.Xx1,new N.kdw]]},{provide:mc,useValue:x||{}},x?.useHash?{provide:hr.hb,useClass:hr.fw}:{provide:hr.hb,useClass:hr.Sm},{provide:gi,useFactory:()=>{const w=(0,N.WQX)(hr.Xr),C=(0,N.WQX)(N.SKi),I=(0,N.WQX)(mc),x=(0,N.WQX)(fi),F=(0,N.WQX)(Sn);return I.scrollOffset&&w.setOffset(I.scrollOffset),new _o(F,x,w,C,I)}},x?.preloadingStrategy?Dl(x.preloadingStrategy).\u0275providers:[],{provide:N.NEm,multi:!0,useFactory:wu},x?.initialNavigation?wc(x):[],x?.bindToComponentInputs?Es(8,[vn,{provide:xs,useExisting:vn}]).\u0275providers:[],[{provide:Xr,useFactory:ks},{provide:N.iLQ,multi:!0,useExisting:Xr}]]}}static forChild(I){return{ngModule:w,providers:[{provide:pr,multi:!0,useValue:I}]}}static{this.\u0275fac=function(x){return new(x||w)(N.KVO(Fi,8))}}static{this.\u0275mod=N.$C({type:w})}static{this.\u0275inj=N.G2t({})}}return w})();function _d(w){return"guarded"}function wc(w){return["disabled"===w.initialNavigation?Es(3,[{provide:N.hnV,multi:!0,useFactory:()=>{const C=(0,N.WQX)(ci);return()=>{C.setUpLocationChangeListener()}}},{provide:ba,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?Es(2,[{provide:ba,useValue:0},{provide:N.hnV,multi:!0,deps:[N.zZn],useFactory:C=>{const I=C.get(hr.hj,Promise.resolve());return()=>I.then(()=>new Promise(x=>{const F=C.get(ci),G=C.get(qu);Ya(F,()=>{x(!0)}),C.get(fi).afterPreactivation=()=>(x(!0),G.closed?(0,re.of)(void 0):G),F.initialNavigation()}))}}]).\u0275providers:[]]}const Xr=new N.nKC("")},6749:(ln,it,Z)=>{Z.d(it,{P2:()=>pn});var N=Z(467);const he=(Ne,ft)=>ft.some(jt=>Ne instanceof jt);let Ie,Me;const K=new WeakMap,mt=new WeakMap,Ze=new WeakMap,ue=new WeakMap,ce=new WeakMap;let st={get(Ne,ft,jt){if(Ne instanceof IDBTransaction){if("done"===ft)return mt.get(Ne);if("objectStoreNames"===ft)return Ne.objectStoreNames||Ze.get(Ne);if("store"===ft)return jt.objectStoreNames[1]?void 0:jt.objectStore(jt.objectStoreNames[0])}return Dt(Ne[ft])},set:(Ne,ft,jt)=>(Ne[ft]=jt,!0),has:(Ne,ft)=>Ne instanceof IDBTransaction&&("done"===ft||"store"===ft)||ft in Ne};function fn(Ne){return"function"==typeof Ne?function Tn(Ne){return Ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ne)?function(...ft){return Ne.apply(Hn(this),ft),Dt(K.get(this))}:function(...ft){return Dt(Ne.apply(Hn(this),ft))}:function(ft,...jt){const ot=Ne.call(Hn(this),ft,...jt);return Ze.set(ot,ft.sort?ft.sort():[ft]),Dt(ot)}}(Ne):(Ne instanceof IDBTransaction&&function tt(Ne){if(mt.has(Ne))return;const ft=new Promise((jt,ot)=>{const Xn=()=>{Ne.removeEventListener("complete",ze),Ne.removeEventListener("error",Ut),Ne.removeEventListener("abort",Ut)},ze=()=>{jt(),Xn()},Ut=()=>{ot(Ne.error||new DOMException("AbortError","AbortError")),Xn()};Ne.addEventListener("complete",ze),Ne.addEventListener("error",Ut),Ne.addEventListener("abort",Ut)});mt.set(Ne,ft)}(Ne),he(Ne,function Te(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ne,st):Ne)}function Dt(Ne){if(Ne instanceof IDBRequest)return function Se(Ne){const ft=new Promise((jt,ot)=>{const Xn=()=>{Ne.removeEventListener("success",ze),Ne.removeEventListener("error",Ut)},ze=()=>{jt(Dt(Ne.result)),Xn()},Ut=()=>{ot(Ne.error),Xn()};Ne.addEventListener("success",ze),Ne.addEventListener("error",Ut)});return ft.then(jt=>{jt instanceof IDBCursor&&K.set(jt,Ne)}).catch(()=>{}),ce.set(ft,Ne),ft}(Ne);if(ue.has(Ne))return ue.get(Ne);const ft=fn(Ne);return ft!==Ne&&(ue.set(Ne,ft),ce.set(ft,Ne)),ft}const Hn=Ne=>ce.get(Ne);function pn(Ne,ft,{blocked:jt,upgrade:ot,blocking:Xn,terminated:ze}={}){const Ut=indexedDB.open(Ne,ft),hr=Dt(Ut);return ot&&Ut.addEventListener("upgradeneeded",an=>{ot(Dt(Ut.result),an.oldVersion,an.newVersion,Dt(Ut.transaction),an)}),jt&&Ut.addEventListener("blocked",an=>jt(an.oldVersion,an.newVersion,an)),hr.then(an=>{ze&&an.addEventListener("close",()=>ze()),Xn&&an.addEventListener("versionchange",Cr=>Xn(Cr.oldVersion,Cr.newVersion,Cr))}).catch(()=>{}),hr}const vt=["get","getKey","getAll","getAllKeys","count"],ht=["put","add","delete","clear"],Xe=new Map;function kt(Ne,ft){if(!(Ne instanceof IDBDatabase)||ft in Ne||"string"!=typeof ft)return;if(Xe.get(ft))return Xe.get(ft);const jt=ft.replace(/FromIndex$/,""),ot=ft!==jt,Xn=ht.includes(jt);if(!(jt in(ot?IDBIndex:IDBObjectStore).prototype)||!Xn&&!vt.includes(jt))return;const ze=function(){var Ut=(0,N.A)(function*(hr,...an){const Cr=this.transaction(hr,Xn?"readwrite":"readonly");let wr=Cr.store;return ot&&(wr=wr.index(an.shift())),(yield Promise.all([wr[jt](...an),Xn&&Cr.done]))[0]});return function(an){return Ut.apply(this,arguments)}}();return Xe.set(ft,ze),ze}!function Mt(Ne){st=Ne(st)}(Ne=>({...Ne,get:(ft,jt,ot)=>kt(ft,jt)||Ne.get(ft,jt,ot),has:(ft,jt)=>!!kt(ft,jt)||Ne.has(ft,jt)}))},467:(ln,it,Z)=>{function N(Ie,Me,Te,re,K,mt,Ze){try{var ue=Ie[mt](Ze),ce=ue.value}catch(Se){return void Te(Se)}ue.done?Me(ce):Promise.resolve(ce).then(re,K)}function he(Ie){return function(){var Me=this,Te=arguments;return new Promise(function(re,K){var mt=Ie.apply(Me,Te);function Ze(ce){N(mt,re,K,Ze,ue,"next",ce)}function ue(ce){N(mt,re,K,Ze,ue,"throw",ce)}Ze(void 0)})}}Z.d(it,{A:()=>he})},1635:(ln,it,Z)=>{function Me(xe,Re){var Be={};for(var je in xe)Object.prototype.hasOwnProperty.call(xe,je)&&Re.indexOf(je)<0&&(Be[je]=xe[je]);if(null!=xe&&"function"==typeof Object.getOwnPropertySymbols){var pt=0;for(je=Object.getOwnPropertySymbols(xe);pt<je.length;pt++)Re.indexOf(je[pt])<0&&Object.prototype.propertyIsEnumerable.call(xe,je[pt])&&(Be[je[pt]]=xe[je[pt]])}return Be}function Se(xe,Re,Be,je){return new(Be||(Be=Promise))(function(gt,Nt){function $t(sr){try{Xt(je.next(sr))}catch(Jn){Nt(Jn)}}function Bn(sr){try{Xt(je.throw(sr))}catch(Jn){Nt(Jn)}}function Xt(sr){sr.done?gt(sr.value):function pt(gt){return gt instanceof Be?gt:new Be(function(Nt){Nt(gt)})}(sr.value).then($t,Bn)}Xt((je=je.apply(xe,Re||[])).next())})}function bt(xe){return this instanceof bt?(this.v=xe,this):new bt(xe)}function vt(xe,Re,Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt,je=Be.apply(xe,Re||[]),gt=[];return pt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),$t("next"),$t("throw"),$t("return",function Nt(Tt){return function($r){return Promise.resolve($r).then(Tt,Jn)}}),pt[Symbol.asyncIterator]=function(){return this},pt;function $t(Tt,$r){je[Tt]&&(pt[Tt]=function(Ur){return new Promise(function(Si,Cn){gt.push([Tt,Ur,Si,Cn])>1||Bn(Tt,Ur)})},$r&&(pt[Tt]=$r(pt[Tt])))}function Bn(Tt,$r){try{!function Xt(Tt){Tt.value instanceof bt?Promise.resolve(Tt.value.v).then(sr,Jn):fr(gt[0][2],Tt)}(je[Tt]($r))}catch(Ur){fr(gt[0][3],Ur)}}function sr(Tt){Bn("next",Tt)}function Jn(Tt){Bn("throw",Tt)}function fr(Tt,$r){Tt($r),gt.shift(),gt.length&&Bn(gt[0][0],gt[0][1])}}function Xe(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,Re=xe[Symbol.asyncIterator];return Re?Re.call(xe):(xe=function Tn(xe){var Re="function"==typeof Symbol&&Symbol.iterator,Be=Re&&xe[Re],je=0;if(Be)return Be.call(xe);if(xe&&"number"==typeof xe.length)return{next:function(){return xe&&je>=xe.length&&(xe=void 0),{value:xe&&xe[je++],done:!xe}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}(xe),Be={},je("next"),je("throw"),je("return"),Be[Symbol.asyncIterator]=function(){return this},Be);function je(gt){Be[gt]=xe[gt]&&function(Nt){return new Promise(function($t,Bn){!function pt(gt,Nt,$t,Bn){Promise.resolve(Bn).then(function(Xt){gt({value:Xt,done:$t})},Nt)}($t,Bn,(Nt=xe[gt](Nt)).done,Nt.value)})}}}Z.d(it,{AQ:()=>vt,N3:()=>bt,Tt:()=>Me,sH:()=>Se,xN:()=>Xe}),"function"==typeof SuppressedError&&SuppressedError}},ln=>{ln(ln.s=226)}]);