"use strict";(self.webpackChunkcoop_app=self.webpackChunkcoop_app||[]).push([[156],{9156:(b,p,r)=>{r.r(p),r.d(p,{DashboardModule:()=>y});var d=r(177),g=r(6143),u=r(467),e=r(540),n=r(5510);let h=(()=>{class s{constructor(t){this.firestore=t}addSale(t){const o=(0,n.rJ)(this.firestore,"sales");return(0,n.gS)(o,t)}getSales(t,o){var a=this;return(0,u.A)(function*(){let i=(0,n.P)((0,n.rJ)(a.firestore,"sales"),(0,n._M)("date",">=",t));return o&&"All"!==o&&(i=(0,n.P)(i,(0,n._M)("store","==",o))),(yield(0,n.GG)(i)).docs.map(F=>F.data())})()}static{this.\u0275fac=function(o){return new(o||s)(e.KVO(n._7))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var l=r(4341);function f(s,m){if(1&s&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.JRh(t.message)}}function S(s,m){if(1&s&&(e.j41(0,"li",14),e.EFF(1),e.k0s()),2&s){const t=m.$implicit;e.R7$(1),e.E5c(" ",t.college," (",t.store,") - ",t.cardsSold," cards ")}}const M=[{path:"manager",component:(()=>{class s{constructor(t){this.salesService=t,this.store="East Barnet",this.college="",this.message="",this.todaySales=[]}ngOnInit(){this.loadTodaySales()}submitSale(){var t=this;return(0,u.A)(function*(){t.college&&t.cardsSold?(yield t.salesService.addSale({store:t.store,college:t.college,cardsSold:t.cardsSold,date:(new Date).toISOString().split("T")[0]}),t.message="Sale submitted successfully!",t.college="",t.cardsSold=NaN,t.loadTodaySales()):alert("Please fill out all fields.")})()}loadTodaySales(){var t=this;return(0,u.A)(function*(){const o=(new Date).toISOString().split("T")[0];t.todaySales=yield t.salesService.getSales(o)})()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-manager"]],decls:21,vars:5,consts:[[1,"container","mt-5"],[1,"mb-4"],[1,"card","p-4","shadow-sm","mb-4"],[1,"form-select","mb-3",3,"ngModel","ngModelChange"],["value","East Barnet"],["value","Wood House"],["type","text","placeholder","College Name",1,"form-control","mb-3",3,"ngModel","ngModelChange"],["type","number","placeholder","Cards Sold",1,"form-control","mb-3",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],["class","text-success mt-2",4,"ngIf"],[1,"card","p-4","shadow-sm"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"text-success","mt-2"],[1,"list-group-item"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Manager Dashboard"),e.k0s(),e.j41(3,"div",2)(4,"h5"),e.EFF(5,"Add Sales Entry"),e.k0s(),e.j41(6,"select",3),e.bIt("ngModelChange",function(c){return a.store=c}),e.j41(7,"option",4),e.EFF(8,"East Barnet"),e.k0s(),e.j41(9,"option",5),e.EFF(10,"Wood House"),e.k0s()(),e.j41(11,"input",6),e.bIt("ngModelChange",function(c){return a.college=c}),e.k0s(),e.j41(12,"input",7),e.bIt("ngModelChange",function(c){return a.cardsSold=c}),e.k0s(),e.j41(13,"button",8),e.bIt("click",function(){return a.submitSale()}),e.EFF(14,"Submit"),e.k0s(),e.DNE(15,f,2,1,"p",9),e.k0s(),e.j41(16,"div",10)(17,"h5"),e.EFF(18,"Today's Sales"),e.k0s(),e.j41(19,"ul",11),e.DNE(20,S,2,3,"li",12),e.k0s()()()),2&o&&(e.R7$(6),e.Y8G("ngModel",a.store),e.R7$(5),e.Y8G("ngModel",a.college),e.R7$(1),e.Y8G("ngModel",a.cardsSold),e.R7$(3),e.Y8G("ngIf",a.message),e.R7$(5),e.Y8G("ngForOf",a.todaySales))},dependencies:[d.Sq,d.bT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.vS]})}}return s})()},{path:"leaderboard",component:(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-leaderboard"]],decls:2,vars:0,template:function(o,a){1&o&&(e.j41(0,"p"),e.EFF(1,"leaderboard works!"),e.k0s())}})}}return s})()}];let C=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[g.iI.forChild(M),g.iI]})}}return s})(),y=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[d.MD,C,l.YN]})}}return s})()}}]);